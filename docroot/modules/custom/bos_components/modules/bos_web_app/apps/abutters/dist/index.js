!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n,i=e();for(n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(window,function(){return i={},r.m=n=[function(t,e,n){t.exports=n(28)()},function(t,e,n){"use strict";t.exports=n(27)},function(t,e,n){!function(t){"use strict";function l(t){for(var e,n,i=1,r=arguments.length;i<r;i++)for(e in n=arguments[i])t[e]=n[e];return t}var o=Object.create||function(t){return e.prototype=t,new e};function e(){}function p(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var n=0;function m(t){return t._leaflet_id=t._leaflet_id||++n,t._leaflet_id}function i(t,e,n){var i,r,o,a=function(){i=!1,r&&(o.apply(n,r),r=!1)};return o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)}}function r(t,e,n){var i=e[1],r=e[0],e=i-r;return t===i&&n?t:((t-r)%e+e)%e+r}function s(){return!1}function a(t,e){e=Math.pow(10,void 0===e?6:e);return Math.round(t*e)/e}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return u(t).split(/\s+/)}function h(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?o(t.options):{}),e)t.options[n]=e[n];return t.options}function d(t,e,n){var i,r=[];for(i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var f=/\{ *([\w_-]+) *\}/g;function y(t,n){return t.replace(f,function(t,e){e=n[e];if(void 0===e)throw new Error("No value provided for variable "+t);return"function"==typeof e&&(e=e(n)),e})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-x));return x=e+n,window.setTimeout(t,n)}var T=window.requestAnimationFrame||b("RequestAnimationFrame")||w,E=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function k(t,e,n){if(!n||T!==w)return T.call(window,p(t,e));t.call(e)}function S(t){t&&E.call(window,t)}var P={extend:l,create:o,bind:p,lastId:n,stamp:m,throttle:i,wrapNum:r,falseFn:s,formatNum:a,trim:u,splitWords:c,setOptions:h,getParamString:d,template:y,isArray:g,indexOf:v,emptyImageUrl:_,requestFn:T,cancelFn:E,requestAnimFrame:k,cancelAnimFrame:S};function C(){}C.extend=function(t){function e(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var n,i=e.__super__=this.prototype,r=o(i);for(n in(r.constructor=e).prototype=r,this)Object.prototype.hasOwnProperty.call(this,n)&&"prototype"!==n&&"__super__"!==n&&(e[n]=this[n]);return t.statics&&(l(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),l.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=l(o(r.options),t.options)),l(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},C.include=function(t){return l(this.prototype,t),this},C.mergeOptions=function(t){return l(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this},(an={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var t={fn:e,ctx:n},r=i,o=0,a=r.length;o<a;o++)if(r[o].fn===e&&r[o].ctx===n)return;r.push(t)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=s,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=s;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var i=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var o=0,a=r.length;o<a;o++){var s=r[o];s.fn.call(s.ctx||this,i)}this._firingCount--}}return n&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var r=p(function(){this.off(t,e,n).off(t,r,n)},this);return this.on(t,e,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[m(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[m(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}}).addEventListener=an.on,an.removeEventListener=an.clearAllEventListeners=an.off,an.addOneTimeEventListener=an.once,an.fireEvent=an.fire,an.hasEventListeners=an.listens;var M=C.extend(an);function I(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var A=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function z(t,e,n){return t instanceof I?t:g(t)?new I(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new I(t.x,t.y):new I(t,e,n)}function O(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function R(t,e){return!t||t instanceof O?t:new O(t,e)}function D(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function N(t,e){return t instanceof D?t:new D(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function F(t,e,n){return t instanceof B?t:g(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(t){return this.clone()._add(z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new I(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new I(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=A(this.x),this.y=A(this.y),this},distanceTo:function(t){var e=(t=z(t)).x-this.x,t=t.y-this.y;return Math.sqrt(e*e+t*t)},equals:function(t){return(t=z(t)).x===this.x&&t.y===this.y},contains:function(t){return t=z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},O.prototype={extend:function(t){return t=z(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new I(this.min.x,this.max.y)},getTopRight:function(){return new I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t=("number"==typeof t[0]||t instanceof I?z:R)(t))instanceof O?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max,t=r.x>=e.x&&i.x<=n.x,n=r.y>=e.y&&i.y<=n.y;return t&&n},overlaps:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max,t=r.x>e.x&&i.x<n.x,n=r.y>e.y&&i.y<n.y;return t&&n},isValid:function(){return!(!this.min||!this.max)}},D.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof B)n=e=t;else{if(!(t instanceof D))return t?this.extend(F(t)||N(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,t=Math.abs(e.lng-n.lng)*t;return new D(new B(e.lat-i,e.lng-t),new B(n.lat+i,n.lng+t))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=("number"==typeof t[0]||t instanceof B||"lat"in t?F:N)(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof D?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=N(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),t=r.lat>=e.lat&&i.lat<=n.lat,n=r.lng>=e.lng&&i.lng<=n.lng;return t&&n},overlaps:function(t){t=N(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),t=r.lat>e.lat&&i.lat<n.lat,n=r.lng>e.lng&&i.lng<n.lng;return t&&n},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=N(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var j={latLngToPoint:function(t,e){t=this.projection.project(t),e=this.scale(e);return this.transformation._transform(t,e)},pointToLatLng:function(t,e){e=this.scale(e),e=this.transformation.untransform(t,e);return this.projection.unproject(e)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,t=this.scale(t);return new O(this.transformation.transform(e.min,t),this.transformation.transform(e.max,t))},infinite:!(B.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,F(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,t=e/Math.cos(Math.PI/180*this.lat);return N([this.lat-e,this.lng-t],[this.lat+e,this.lng+t])},clone:function(){return new B(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?r(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?r(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,e=e.lng-n.lng;if(0==i&&0==e)return t;n=t.getSouthWest(),t=t.getNorthEast();return new D(new B(n.lat-i,n.lng-e),new B(t.lat-i,t.lng-e))}},U=l({},j,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),n=Math.sin((e.lng-t.lng)*n/2),n=o*o+Math.cos(i)*Math.cos(r)*n*n,n=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n));return this.R*n}}),V={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,n=Math.max(Math.min(n,t.lat),-n),n=Math.sin(n*e);return new I(this.R*t.lng*e,this.R*Math.log((1+n)/(1-n))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:new O([-(yt=6378137*Math.PI),-yt],[yt,yt])};function Z(t,e,n,i){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function q(t,e,n,i){return new Z(t,e,n,i)}Z.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new I((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var G=l({},U,{code:"EPSG:3857",projection:V,transformation:q(gt=.5/(Math.PI*V.R),.5,-gt,.5)}),W=l({},G,{code:"EPSG:900913"});function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function H(t,e){for(var n,i,r,o,a="",s=0,l=t.length;s<l;s++){for(n=0,i=(r=t[s]).length;n<i;n++)a+=(n?"L":"M")+(o=r[n]).x+" "+o.y;a+=e?Et?"z":"x":""}return a||"M0 0"}var K=document.documentElement.style,X="ActiveXObject"in window,J=X&&!document.addEventListener,Y="msLaunchUri"in navigator&&!("documentMode"in document),Q=St("webkit"),tt=St("android"),et=St("android 2")||St("android 3"),nt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),it=tt&&St("Google")&&nt<537&&!("AudioNode"in window),rt=!!window.opera,ot=!Y&&St("chrome"),at=St("gecko")&&!Q&&!rt&&!X,st=!ot&&St("safari"),lt=St("phantom"),ut="OTransition"in K,ct=0===navigator.platform.indexOf("Win"),ht=X&&"transition"in K,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!et,dt="MozPerspective"in K,ft=!window.L_DISABLE_3D&&(ht||pt||dt)&&!ut&&!lt,mt="undefined"!=typeof orientation||St("mobile"),yt=mt&&Q,gt=mt&&pt,nt=!window.PointerEvent&&window.MSPointerEvent,vt=!(!window.PointerEvent&&!nt),_t=!window.L_NO_TOUCH&&(vt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),bt=mt&&rt,K=mt&&at,xt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),wt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",s,e),window.removeEventListener("testPassiveEventSupport",s,e)}catch(t){}return t}(),Tt=!!document.createElement("canvas").getContext,Et=!(!document.createElementNS||!$("svg").createSVGRect),kt=!Et&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function St(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var rt={ie:X,ielt9:J,edge:Y,webkit:Q,android:tt,android23:et,androidStock:it,opera:rt,chrome:ot,gecko:at,safari:st,phantom:lt,opera12:ut,win:ct,ie3d:ht,webkit3d:pt,gecko3d:dt,any3d:ft,mobile:mt,mobileWebkit:yt,mobileWebkit3d:gt,msPointer:nt,pointer:vt,touch:_t,mobileOpera:bt,mobileGecko:K,retina:xt,passiveEvents:wt,canvas:Tt,svg:Et,vml:kt},Pt=nt?"MSPointerDown":"pointerdown",Ct=nt?"MSPointerMove":"pointermove",Mt=nt?"MSPointerUp":"pointerup",Lt=nt?"MSPointerCancel":"pointercancel",It={},At=!1;function zt(t,e,n,i){return"touchstart"===e?(s=t,l=n,u=i,c=p(function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Me(t),Nt(t,l)}),s["_leaflet_touchstart"+u]=c,s.addEventListener(Pt,c,!1),At||(document.addEventListener(Pt,Ot,!0),document.addEventListener(Ct,Rt,!0),document.addEventListener(Mt,Dt,!0),document.addEventListener(Lt,Dt,!0),At=!0)):"touchmove"===e?(a=n,(c=t)["_leaflet_touchmove"+i]=h,c.addEventListener(Ct,h,!1)):"touchend"===e&&(o=n,(t=t)["_leaflet_touchend"+i]=r,t.addEventListener(Mt,r,!1),t.addEventListener(Lt,r,!1)),this;function r(t){Nt(t,o)}var o,a,s,l,u,c;function h(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Nt(t,a)}}function Ot(t){It[t.pointerId]=t}function Rt(t){It[t.pointerId]&&(It[t.pointerId]=t)}function Dt(t){delete It[t.pointerId]}function Nt(t,e){for(var n in t.touches=[],It)t.touches.push(It[n]);t.changedTouches=[t],e(t)}var Bt,Ft,jt,Ut,Vt,Zt,qt=nt?"MSPointerDown":vt?"pointerdown":"touchstart",Gt=nt?"MSPointerUp":vt?"pointerup":"touchend",Wt="_leaflet_",$t=ue(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ht=ue(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Kt="webkitTransition"===Ht||"OTransition"===Ht?Ht+"End":"transitionend";function Xt(t){return"string"==typeof t?document.getElementById(t):t}function Jt(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];return n&&"auto"!==n||!document.defaultView||(n=(t=document.defaultView.getComputedStyle(t,null))?t[e]:null),"auto"===n?null:n}function Yt(t,e,n){t=document.createElement(t);return t.className=e||"",n&&n.appendChild(t),t}function Qt(t){var e=t.parentNode;e&&e.removeChild(t)}function te(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ee(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ne(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ie(t,e){if(void 0!==t.classList)return t.classList.contains(e);t=se(t);return 0<t.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t)}function re(t,e){var n;if(void 0!==t.classList)for(var i=c(e),r=0,o=i.length;r<o;r++)t.classList.add(i[r]);else ie(t,e)||ae(t,((n=se(t))?n+" ":"")+e)}function oe(t,e){void 0!==t.classList?t.classList.remove(e):ae(t,u((" "+se(t)+" ").replace(" "+e+" "," ")))}function ae(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function se(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function le(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ue(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ce(t,e,n){e=e||new I(0,0);t.style[$t]=(ht?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(n?" scale("+n+")":"")}function he(t,e){t._leaflet_pos=e,ft?ce(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function pe(t){return t._leaflet_pos||new I(0,0)}function de(){_e(window,"dragstart",Me)}function fe(){xe(window,"dragstart",Me)}function me(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(ye(),jt=(Ft=t).style.outline,t.style.outline="none",_e(window,"keydown",ye))}function ye(){Ft&&(Ft.style.outline=jt,jt=Ft=void 0,xe(window,"keydown",ye))}function ge(t){for(;t=t.parentNode,!(t.offsetWidth&&t.offsetHeight||t===document.body););return t}function ve(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}function _e(t,e,n,i){if("object"==typeof e)for(var r in e)Ee(t,r,e[r],n);else for(var o=0,a=(e=c(e)).length;o<a;o++)Ee(t,e[o],n,i);return this}Zt="onselectstart"in document?(Vt=function(){_e(window,"selectstart",Me)},function(){xe(window,"selectstart",Me)}):(Ut=ue(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),Vt=function(){var t;Ut&&(t=document.documentElement.style,Bt=t[Ut],t[Ut]="none")},function(){Ut&&(document.documentElement.style[Ut]=Bt,Bt=void 0)}),lt={TRANSFORM:$t,TRANSITION:Ht,TRANSITION_END:Kt,get:Xt,getStyle:Jt,create:Yt,remove:Qt,empty:te,toFront:ee,toBack:ne,hasClass:ie,addClass:re,removeClass:oe,setClass:ae,getClass:se,setOpacity:le,testProp:ue,setTransform:ce,setPosition:he,getPosition:pe,disableTextSelection:Vt,enableTextSelection:Zt,disableImageDrag:de,enableImageDrag:fe,preventOutline:me,restoreOutline:ye,getSizedParentNode:ge,getScale:ve};var be="_leaflet_events";function xe(t,e,n,i){if("object"==typeof e)for(var r in e)ke(t,r,e[r],n);else if(e)for(var o=0,a=(e=c(e)).length;o<a;o++)ke(t,e[o],n,i);else{for(var s in t[be])ke(t,s,t[be][s]);delete t[be]}return this}function we(){return vt&&(!Y&&!st)}var Te={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ee(e,t,n,i){var r=t+m(n)+(i?"_"+m(i):"");if(e[be]&&e[be][r])return this;var o,a,s,l,u,c,h=function(t){return n.call(i||e,t||window.event)},p=h;function d(t){if(vt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(1<t.touches.length)return;var e=Date.now(),n=e-(l||e);u=t.touches?t.touches[0]:t,c=0<n&&n<=250,l=e}function f(t){if(c&&!u.cancelBubble){if(vt){if("mouse"===t.pointerType)return;var e,n,i={};for(n in u)e=u[n],i[n]=e&&e.bind?e.bind(u):e;u=i}u.type="dblclick",u.button=0,a(u),l=null}}vt&&0===t.indexOf("touch")?zt(e,t,h,r):_t&&"dblclick"===t&&!we()?(a=h,c=!1,(o=e)[Wt+qt+(s=r)]=d,o[Wt+Gt+s]=f,o[Wt+"dblclick"+s]=a,o.addEventListener(qt,d,!!wt&&{passive:!1}),o.addEventListener(Gt,f,!!wt&&{passive:!1}),o.addEventListener("dblclick",a,!1)):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Te[t]||t,h,!!wt&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(h=function(t){t=t||window.event,Ne(e,t)&&p(t)},e.addEventListener(Te[t],h,!1)):e.addEventListener(t,p,!1):"attachEvent"in e&&e.attachEvent("on"+t,h),e[be]=e[be]||{},e[be][r]=h}function ke(t,e,n,i){var r,o,a,s=e+m(n)+(i?"_"+m(i):""),n=t[be]&&t[be][s];if(!n)return this;vt&&0===e.indexOf("touch")?(a=(r=t)["_leaflet_"+(o=e)+s],"touchstart"===o?r.removeEventListener(Pt,a,!1):"touchmove"===o?r.removeEventListener(Ct,a,!1):"touchend"===o&&(r.removeEventListener(Mt,a,!1),r.removeEventListener(Lt,a,!1))):_t&&"dblclick"===e&&!we()?(o=(i=t)[Wt+qt+s],r=i[Wt+Gt+s],a=i[Wt+"dblclick"+s],i.removeEventListener(qt,o,!!wt&&{passive:!1}),i.removeEventListener(Gt,r,!!wt&&{passive:!1}),i.removeEventListener("dblclick",a,!1)):"removeEventListener"in t?t.removeEventListener(Te[e]||e,n,!1):"detachEvent"in t&&t.detachEvent("on"+e,n),t[be][s]=null}function Se(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,De(t),this}function Pe(t){return Ee(t,"wheel",Se),this}function Ce(t){return _e(t,"mousedown touchstart dblclick",Se),Ee(t,"click",Re),this}function Me(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Le(t){return Me(t),Se(t),this}function Ie(t,e){if(!e)return new I(t.clientX,t.clientY);var n=ve(e),i=n.boundingClientRect;return new I((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Ae=ct&&ot?2*window.devicePixelRatio:at?window.devicePixelRatio:1;function ze(t){return Y?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ae:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Oe={};function Re(t){Oe[t.type]=!0}function De(t){var e=Oe[t.type];return Oe[t.type]=!1,e}function Ne(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var ut={on:_e,off:xe,stopPropagation:Se,disableScrollPropagation:Pe,disableClickPropagation:Ce,preventDefault:Me,stop:Le,getMousePosition:Ie,getWheelDelta:ze,fakeStop:Re,skipped:De,isExternalTarget:Ne,addListener:_e,removeListener:xe},Be=M.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=pe(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){t=this._startPos.add(this._offset.multiplyBy(t));e&&t._round(),he(this._el,t),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Fe=M.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=h(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ht&&ft&&!bt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,Kt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(F(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=l({animate:n.animate},n.zoom),n.pan=l({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?clearTimeout(this._sizeTimer):this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(ft?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(ft?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),i=(t instanceof I?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),i=this.containerPointToLatLng(r.add(i));return this.setView(i,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():N(t);var n=z(e.paddingTopLeft||e.padding||[0,0]),i=z(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};i=i.subtract(n).divideBy(2),n=this.project(t.getSouthWest(),r),t=this.project(t.getNorthEast(),r);return{center:this.unproject(n.add(t).divideBy(2).add(i),r),zoom:r}},fitBounds:function(t,e){if(!(t=N(t)).isValid())throw new Error("Bounds are not valid.");t=this._getBoundsCenterZoom(t,e);return this.setView(t.center,t.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){return e=e||{},(t=z(t).round()).x||t.y?(!0===e.animate||this.getSize().contains(t)?(this._panAnim||(this._panAnim=new Be,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate?(re(this._mapPane,"leaflet-pan-anim"),n=this._getMapPanePos().subtract(t).round(),this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)):(this._rawPanBy(t),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this):this.fire("moveend");var n},flyTo:function(i,r,t){if(!1===(t=t||{}).animate||!ft)return this.setView(i,r,t);this._stop();var o=this.project(this.getCenter()),a=this.project(i),e=this.getSize(),s=this._zoom;i=F(i),r=void 0===r?s:r;var l=Math.max(e.x,e.y),n=l*this.getZoomScale(s,r),u=a.distanceTo(o)||1;function c(t){t=(n*n-l*l+2.0164*(t?-1:1)*2.0164*u*u)/(2*(t?n:l)*2.0164*u),t=Math.sqrt(t*t+1)-t;return t<1e-9?-18:Math.log(t)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var d=c(0);var f=Date.now(),m=(c(1)-d)/1.42,y=t.duration?1e3*t.duration:1e3*m*.8;return this._moveStart(!0,t.noMoveStart),function t(){var e=(Date.now()-f)/y,n=(1-Math.pow(1-e,1.5))*m;e<=1?(this._flyToFrame=k(t,this),this._move(this.unproject(o.add(a.subtract(o).multiplyBy((e=n,l*(p(d)*(h(e=d+1.42*e)/p(e))-h(d))/2.0164/u))),s),this.getScaleZoom(l/(n=n,l*(p(d)/p(d+1.42*n))),s),{flyTo:!0})):this._move(i,r)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){t=this._getBoundsCenterZoom(t,e);return this.flyTo(t.center,t.zoom,e)},setMaxBounds:function(t){return(t=N(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),t=this._limitCenter(n,this._zoom,N(t));return n.equals(t)||this.panTo(t,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=z((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=z(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),r=R([s.min.add(n),s.max.subtract(i)]);return r.contains(a)||(this._enforcingBounds=!0,t=o.subtract(a),s=z(a.x+t.x,a.y+t.y),(a.x<r.min.x||a.x>r.max.x)&&(s.x=o.x-t.x,0<t.x?s.x+=l.x-n.x:s.x-=l.x-i.x),(a.y<r.min.y||a.y>r.max.y)&&(s.y=o.y-t.y,0<t.y?s.y+=l.y-n.y:s.y-=l.y-i.y),this.panTo(this.unproject(s),e),this._enforcingBounds=!1),this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),r=n.divideBy(2).round(),r=i.subtract(r);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=p(this._handleGeolocationResponse,this),n=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,t=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+t+"."})},_handleGeolocationResponse:function(t){var e,n=new B(t.coords.latitude,t.coords.longitude),i=n.toBounds(2*t.coords.accuracy),r=this._locateOptions;r.setView&&(e=this.getBoundsZoom(i),this.setView(n,r.maxZoom?Math.min(e,r.maxZoom):e));var o,a={latlng:n,bounds:i,timestamp:t.timestamp};for(o in t.coords)"number"==typeof t.coords[o]&&(a[o]=t.coords[o]);this.fire("locationfound",a)},addHandler:function(t,e){if(!e)return this;e=this[t]=new e(this);return this._handlers.push(e),this.options[t]&&e.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}for(var t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)Qt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){e=Yt("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=e),e},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new D(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=N(t),n=z(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),t=this.getSize().subtract(n),n=R(this.project(s,i),this.project(a,i)).getSize(),s=ft?this.options.zoomSnap:1,a=t.x/n.x,n=t.y/n.y,n=e?Math.max(a,n):Math.min(a,n),i=this.getScaleZoom(n,i);return s&&(i=Math.round(i/(s/100))*(s/100),i=e?Math.ceil(i/s)*s:Math.floor(i/s)*s),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){e=this._getTopLeftPoint(t,e);return new O(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;e=n.zoom(t*n.scale(e));return isNaN(e)?1/0:e},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(z(t),e)},layerPointToLatLng:function(t){t=z(t).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(N(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){t=this.containerPointToLayerPoint(z(t));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return Ie(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){t=this._container=Xt(t);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");_e(t,"scroll",this._onScroll,this),this._containerId=m(t)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ft,re(t,"leaflet-container"+(_t?" leaflet-touch":"")+(xt?" leaflet-retina":"")+(J?" leaflet-oldie":"")+(st?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Jt(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),he(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(t.markerPane,"leaflet-zoom-hide"),re(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){he(this._mapPane,new I(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){he(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?xe:_e;e((this._targets[m(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),ft&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=k(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((n=this._targets[m(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(r&&!Ne(o,t))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||a||r||!Ne(o,t)||(i=[this]),i},_handleDOMEvent:function(t){var e;this._loaded&&!De(t)&&("mousedown"!==(e=t.type)&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||me(t.target||t.srcElement),this._fireDOMEvent(t,e))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type&&((r=l({},t)).type="preclick",this._fireDOMEvent(r,r.type,n)),!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var i=n[0];"contextmenu"===e&&i.listens(e,!0)&&Me(t);var r,o={originalEvent:t};"keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type&&(r=i.getLatLng&&(!i._radius||i._radius<=10),o.containerPoint=r?this.latLngToContainerPoint(i.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=r?i.getLatLng():this.layerPointToLatLng(o.layerPoint));for(var a=0;a<n.length;a++)if(n[a].fire(e,o,!0),o.originalEvent._stopped||!1===n[a].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return pe(this._mapPane)||new I(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){n=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,n){n=this._getNewPixelOrigin(n,e);return R([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),r=new O(i.subtract(r),i.add(r)),n=this._getBoundsOffset(r,n,e);return n.round().equals([0,0])?t:this.unproject(i.add(n),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),n=new O(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,n){e=R(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),n=e.min.subtract(t.min),t=e.max.subtract(t.max);return new I(this._rebound(n.x,-t.x),this._rebound(n.y,-t.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=ft?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){oe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){t=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(t)||(this.panBy(t,e),0))},_createAnimProxy:function(){var t=this._proxy=Yt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=$t,n=this._proxy.style[e];ce(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ce(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(i)||(k(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&oe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),k(function(){this._moveEnd(!0)},this))}}),je=C.extend({options:{position:"topright"},initialize:function(t){h(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),t=t._controlCorners[n];return re(e,"leaflet-control"),-1!==n.indexOf("bottom")?t.insertBefore(e,t.firstChild):t.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(Qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),pt=function(t){return new je(t)};Fe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var i=this._controlCorners={},r="leaflet-",o=this._controlContainer=Yt("div",r+"control-container",this._container);function t(t,e){var n=r+t+" "+r+e;i[t+e]=Yt("div",n,o)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Qt(this._controlCorners[t]);Qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ue=je.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in h(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return je.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);t=this._getLayer(m(t));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):oe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return oe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Yt("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ce(e),Pe(e);var i=this._section=Yt("section",t+"-list");n&&(this._map.on("click",this.collapse,this),tt||_e(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=Yt("a",t+"-toggle",e);r.href="#",r.title="Layers",_t?(_e(r,"click",Le),_e(r,"click",this.expand,this)):_e(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=Yt("div",t+"-base",i),this._separator=Yt("div",t+"-separator",i),this._overlaysList=Yt("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&m(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(p(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;te(this._baseLayersList),te(this._overlaysList),this._layerControlInputs=[];for(var t,e,n,i=0,r=0;r<this._layers.length;r++)n=this._layers[r],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,i+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<i,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(m(t.target)),t=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;t&&this._map.fire(t,e)},_createRadioElement:function(t,e){t='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",e=document.createElement("div");return e.innerHTML=t,e.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+m(this),i),this._layerControlInputs.push(e),e.layerId=m(t.layer),_e(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;i=document.createElement("div");return n.appendChild(i),i.appendChild(e),i.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;0<=o;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;0<=r;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Ve=je.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=Yt("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){i=Yt("a",n,i);return i.innerHTML=t,i.href="#",i.title=e,i.setAttribute("role","button"),i.setAttribute("aria-label",e),Ce(i),_e(i,"click",Le),_e(i,"click",r,this),_e(i,"click",this._refocusOnMap,this),i},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";oe(this._zoomInButton,e),oe(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMinZoom()||re(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMaxZoom()||re(this._zoomInButton,e)}});Fe.mergeOptions({zoomControl:!0}),Fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ve,this.addControl(this.zoomControl))});var Ze=je.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=Yt("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=Yt("div",e,n)),t.imperial&&(this._iScale=Yt("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,e=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(e)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n=3.2808399*t;5280<n?(e=n/5280,t=this._getRoundNum(e),this._updateScale(this._iScale,t+" mi",t/e)):(e=this._getRoundNum(n),this._updateScale(this._iScale,e+" ft",e/n))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),t=t/e;return e*(10<=t?10:5<=t?5:3<=t?3:2<=t?2:1)}}),qe=je.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){h(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=Yt("div","leaflet-control-attribution"),Ce(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t,e=[];for(t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}}});Fe.mergeOptions({attributionControl:!0}),Fe.addInitHook(function(){this.options.attributionControl&&(new qe).addTo(this)}),je.Layers=Ue,je.Zoom=Ve,je.Scale=Ze,je.Attribution=qe,pt.layers=function(t,e,n){return new Ue(t,e,n)},pt.zoom=function(t){return new Ve(t)},pt.scale=function(t){return new Ze(t)},pt.attribution=function(t){return new qe(t)},(dt=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}})).addTo=function(t,e){return t.addHandler(e,this),this};var Ge,yt={Events:an},We=_t?"touchstart mousedown":"mousedown",$e={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},He={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Ke=M.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){h(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(_e(this._dragStartTarget,We,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ke._dragging===this&&this.finishDrag(),xe(this._dragStartTarget,We,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){var e,n;t._simulated||!this._enabled||(this._moved=!1,ie(this._element,"leaflet-zoom-anim")||Ke._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((Ke._dragging=this)._preventOutline&&me(this._element),de(),Vt(),this._moving))||(this.fire("down"),e=t.touches?t.touches[0]:t,n=ge(this._element),this._startPoint=new I(e.clientX,e.clientY),this._parentScale=ve(n),_e(document,He[t.type],this._onMove,this),_e(document,$e[t.type],this._onUp,this))},_onMove:function(t){var e;!t._simulated&&this._enabled&&(t.touches&&1<t.touches.length?this._moved=!0:((e=new I((e=t.touches&&1===t.touches.length?t.touches[0]:t).clientX,e.clientY)._subtract(this._startPoint)).x||e.y)&&(Math.abs(e.x)+Math.abs(e.y)<this.options.clickTolerance||(e.x/=this._parentScale.x,e.y/=this._parentScale.y,Me(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=pe(this._element).subtract(e),re(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),this._moving=!0,S(this._animRequest),this._lastEvent=t,this._animRequest=k(this._updatePosition,this,!0))))},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),he(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in oe(document.body,"leaflet-dragging"),this._lastTarget&&(oe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),He)xe(document,He[t],this._onMove,this),xe(document,$e[t],this._onUp,this);fe(),Zt(),this._moved&&this._moving&&(S(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Ke._dragging=!1}});function Xe(t,e){if(!e||!t.length)return t.slice();e*=e;return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,o){for(var a,s,l=0,u=r+1;u<=o-1;u++)(s=en(e[u],e[r],e[o],!0))>l&&(a=u,l=s);i<l&&(n[a]=1,t(e,n,i,r,a),t(e,n,i,a,o))}(t,i,e,0,n-1);for(var r=[],o=0;o<n;o++)i[o]&&r.push(t[o]);return r}(t=function(t,e){for(var n,i,r,o,a=[t[0]],s=1,l=0,u=t.length;s<u;s++)n=t[s],0,e<(r=(i=t[l]).x-n.x)*r+(o=i.y-n.y)*o&&(a.push(t[s]),l=s);return l<u-1&&a.push(t[u-1]),a}(t,e),e)}function Je(t,e,n){return Math.sqrt(en(t,e,n,!0))}function Ye(t,e,n,i,r){var o,a,s,l=i?Ge:tn(t,n),u=tn(e,n);for(Ge=u;;){if(!(l|u))return[t,e];if(l&u)return!1;s=tn(a=Qe(t,e,o=l||u,n,r),n),o===l?(t=a,l=s):(e=a,u=s)}}function Qe(t,e,n,i,r){var o,a,s=e.x-t.x,l=e.y-t.y,e=i.min,i=i.max;return 8&n?(o=t.x+s*(i.y-t.y)/l,a=i.y):4&n?(o=t.x+s*(e.y-t.y)/l,a=e.y):2&n?(o=i.x,a=t.y+l*(i.x-t.x)/s):1&n&&(o=e.x,a=t.y+l*(e.x-t.x)/s),new I(o,a,r)}function tn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function en(t,e,n,i){var r=e.x,o=e.y,a=n.x-r,s=n.y-o,e=a*a+s*s;return 0<e&&(1<(e=((t.x-r)*a+(t.y-o)*s)/e)?(r=n.x,o=n.y):0<e&&(r+=a*e,o+=s*e)),a=t.x-r,s=t.y-o,i?a*a+s*s:new I(r,o)}function nn(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function rn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),nn(t)}function on(t,e,n){for(var i,r,o,a,s,l,u,c=[1,4,2,8],h=0,p=t.length;h<p;h++)t[h]._code=tn(t[h],e);for(o=0;o<4;o++){for(l=c[o],i=[],h=0,r=(p=t.length)-1;h<p;r=h++)a=t[h],s=t[r],a._code&l?s._code&l||((u=Qe(s,a,l,e,n))._code=tn(u,e),i.push(u)):(s._code&l&&((u=Qe(s,a,l,e,n))._code=tn(u,e),i.push(u)),i.push(a));t=i}return t}gt={simplify:Xe,pointToSegmentDistance:Je,closestPointOnSegment:function(t,e,n){return en(t,e,n)},clipSegment:Ye,_getEdgeIntersection:Qe,_getBitCode:tn,_sqClosestPointOnSegment:en,isFlat:nn,_flat:rn};var K={clipPolygon:on},nt={project:function(t){return new I(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new O([-180,-90],[180,90])},ct={R:6378137,R_MINOR:6356752.314245179,bounds:new O([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),r=o*Math.sin(i),o=Math.tan(Math.PI/4-i/2)/Math.pow((1-r)/(1+r),o/2),i=-n*Math.log(Math.max(o,1e-10));return new I(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&1e-7<Math.abs(u);l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=u=Math.PI/2-2*Math.atan(a*e)-s;return new B(s*n,t.x*n/i)}},ot={LonLat:nt,Mercator:ct,SphericalMercator:V},an=l({},U,{code:"EPSG:3395",projection:ct,transformation:q(at=.5/(Math.PI*ct.R),.5,-at,.5)}),sn=l({},U,{code:"EPSG:4326",projection:nt,transformation:q(1/180,1,-1/180,.5)}),V=l({},j,{projection:nt,transformation:q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,t=e.lat-t.lat;return Math.sqrt(n*n+t*t)},infinite:!0});j.Earth=U,j.EPSG3395=an,j.EPSG3857=G,j.EPSG900913=W,j.EPSG4326=sn,j.Simple=V;var ln=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[m(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[m(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e,n=t.target;n.hasLayer(this)&&(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents&&(e=this.getEvents(),n.on(e,this),this.once("remove",function(){n.off(e,this)},this)),this.onAdd(n),this.getAttribution&&n.attributionControl&&n.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),n.fire("layeradd",{layer:this}))}});Fe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=m(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=m(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&m(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?g(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[m(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){t=m(t);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var t,e=1/0,n=-1/0,i=this._getZoomSpan();for(t in this._zoomBoundLayers)var r=this._zoomBoundLayers[t].options,e=void 0===r.minZoom?e:Math.min(e,r.minZoom),n=void 0===r.maxZoom?n:Math.max(n,r.maxZoom);this._layersMaxZoom=n===-1/0?void 0:n,this._layersMinZoom=e===1/0?void 0:e,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var un=ln.extend({initialize:function(t,e){var n,i;if(h(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){t=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:m}),cn=un.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),un.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),un.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t,e=new D;for(t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),hn=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){h(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}e=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(e,t),e},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=z(i),i=z("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return xt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),pn=hn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return pn.imagePath||(pn.imagePath=this._detectIconPath()),(this.options.imagePath||pn.imagePath)+hn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=Yt("div","leaflet-default-icon-path",document.body),e=Jt(t,"background-image")||Jt(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),dn=dt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Ke(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&oe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=pe(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),r=R(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));r.contains(o)||(i=z((Math.max(r.max.x,o.x)-r.max.x)/(a.max.x-r.max.x)-(Math.min(r.min.x,o.x)-r.min.x)/(a.min.x-r.min.x),(Math.max(r.max.y,o.y)-r.max.y)/(a.max.y-r.max.y)-(Math.min(r.min.y,o.y)-r.min.y)/(a.min.y-r.min.y)).multiplyBy(i),n.panBy(i,{animate:!1}),this._draggable._newPos._add(i),this._draggable._startPos._add(i),he(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=k(this._adjustPan.bind(this,t)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=pe(e._icon),r=e._map.layerPointToLatLng(i);n&&he(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),fn=ln.extend({options:{icon:new pn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){h(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var t;return this._icon&&this._map&&(t=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(t)),this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),re(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),n=!1;r!==this._shadow&&(this._removeShadow(),n=!0),r&&(re(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&n&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&he(this._icon,t),this._shadow&&he(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(t)},_initInteraction:function(){var t;this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),dn)&&(t=this.options.draggable,this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new dn(this),t&&this.dragging.enable())},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&le(this._icon,t),this._shadow&&le(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),mn=ln.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return h(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),yn=mn.extend({options:{fill:!0,radius:10},initialize:function(t,e){h(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return mn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),n=[t+n,e+n];this._pxBounds=new O(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),gn=yn.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=l({},n,{radius:e})),h(this,e),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:mn.prototype.setStyle,_project:function(){var t,e,n,i,r,o=this._latlng.lng,a=this._latlng.lat,s=this._map,l=s.options.crs;l.distance===U.distance?(r=Math.PI/180,t=this._mRadius/U.R/r,e=s.project([a+t,o]),i=s.project([a-t,o]),n=e.add(i).divideBy(2),i=s.unproject(n).lat,r=Math.acos((Math.cos(t*r)-Math.sin(a*r)*Math.sin(i*r))/(Math.cos(a*r)*Math.cos(i*r)))/r,!isNaN(r)&&0!==r||(r=t/Math.cos(Math.PI/180*a)),this._point=n.subtract(s.getPixelOrigin()),this._radius=isNaN(r)?0:n.x-s.project([i,o-r]).x,this._radiusY=n.y-e.y):(l=l.unproject(l.project(this._latlng).subtract([this._mRadius,0])),this._point=s.latLngToLayerPoint(this._latlng),this._radius=this._point.x-s.latLngToLayerPoint(l).x),this._updateBounds()}}),vn=mn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){h(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=en,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){var h=o(t,e=l[u-1],n=l[u],!0);h<i&&(i=h,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a=this._rings[0],s=a.length;if(!s)return null;for(e=t=0;t<s-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(n=t=0;t<s-1;t++)if(i=a[t],r=a[t+1],(n+=o=i.distanceTo(r))>e)return o=(n-e)/o,this._map.layerPointToLatLng([r.x-o*(r.x-i.x),r.y-o*(r.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new D,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return nn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=nn(t),i=0,r=t.length;i<r;i++)n?(e[i]=F(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),t=new I(t,t);this._pxBounds=new O([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)])},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof B,a=t.length;if(o){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var e,n,i,r,o=this._parts,a=0,s=0,l=this._rings.length;a<l;a++)for(e=0,n=(r=this._rings[a]).length;e<n-1;e++)(i=Ye(r[e],r[e+1],t,e,!0))&&(o[s]=o[s]||[],o[s].push(i[0]),i[1]===r[e+1]&&e!==n-2||(o[s].push(i[1]),s++))},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=Xe(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(a=(s=this._parts[n]).length)-1;i<a;r=i++)if((e||0!==i)&&Je(t,s[r],s[i])<=l)return!0;return!1}});vn._flat=rn;var _n=vn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s,l,u=this._rings[0],c=u.length;if(!c)return null;for(t=o=a=s=0,e=c-1;t<c;e=t++)n=u[t],i=u[e],r=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*r,s+=(n.y+i.y)*r,o+=3*r;return l=0===o?u[0]:[a/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=vn.prototype._convertLatLngs.call(this,t),t=e.length;return 2<=t&&e[0]instanceof B&&e[0].equals(e[t-1])&&e.pop(),e},_setLatLngs:function(t){vn.prototype._setLatLngs.call(this,t),nn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return(nn(this._latlngs[0])?this._latlngs:this._latlngs[0])[0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,e=new I(e,e),t=new O(t.min.subtract(e),t.max.add(e));if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,i=0,r=this._rings.length;i<r;i++)(n=on(this._rings[i],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(l=(e=this._parts[r]).length)-1;o<l;a=o++)n=e[o],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u||vn.prototype._containsPoint.call(this,t,!0)}}),bn=cn.extend({initialize:function(t,e){h(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=g(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=xn(t,o);return a?(a.feature=Cn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function xn(t,e){var n,i,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Tn;if(!s&&!a)return null;switch(a.type){case"Point":return wn(u,t,n=c(s),e);case"MultiPoint":for(r=0,o=s.length;r<o;r++)n=c(s[r]),l.push(wn(u,t,n,e));return new cn(l);case"LineString":case"MultiLineString":return i=En(s,"LineString"===a.type?0:1,c),new vn(i,e);case"Polygon":case"MultiPolygon":return i=En(s,"Polygon"===a.type?1:2,c),new _n(i,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var h=xn({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new cn(l);default:throw new Error("Invalid GeoJSON object.")}}function wn(t,e,n,i){return t?t(e,n):new fn(n,i&&i.markersInheritOptions&&i)}function Tn(t){return new B(t[1],t[0],t[2])}function En(t,e,n){for(var i,r=[],o=0,a=t.length;o<a;o++)i=e?En(t[o],e-1,n):(n||Tn)(t[o]),r.push(i);return r}function kn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function Sn(t,e,n,i){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?Sn(t[o],e-1,n,i):kn(t[o],i));return!e&&n&&r.push(r[0]),r}function Pn(t,e){return t.feature?l({},t.feature,{geometry:e}):Cn(e)}function Cn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function Mn(t,e){return new bn(t,e)}ct={toGeoJSON:function(t){return Pn(this,{type:"Point",coordinates:kn(this.getLatLng(),t)})}},fn.include(ct),gn.include(ct),yn.include(ct),vn.include({toGeoJSON:function(t){var e=!nn(this._latlngs);return Pn(this,{type:(e?"Multi":"")+"LineString",coordinates:Sn(this._latlngs,e?1:0,!1,t)})}}),_n.include({toGeoJSON:function(t){var e=!nn(this._latlngs),n=e&&!nn(this._latlngs[0]),t=Sn(this._latlngs,n?2:e?1:0,!0,t);return e||(t=[t]),Pn(this,{type:(n?"Multi":"")+"Polygon",coordinates:t})}}),un.include({toMultiPoint:function(e){var n=[];return this.eachLayer(function(t){n.push(t.toGeoJSON(e).geometry.coordinates)}),Pn(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,i=[];return this.eachLayer(function(t){t.toGeoJSON&&(t=t.toGeoJSON(e),n?i.push(t.geometry):"FeatureCollection"===(t=Cn(t)).type?i.push.apply(i,t.features):i.push(t))}),n?Pn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var at=Mn,Ln=ln.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=N(e),h(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ee(this._image),this},bringToBack:function(){return this._map&&ne(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=N(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:Yt("img");re(e,"leaflet-image-layer"),this._zoomAnimated&&re(e,"leaflet-zoom-animated"),this.options.className&&re(e,this.options.className),e.onselectstart=s,e.onmousemove=s,e.onload=p(this.fire,this,"load"),e.onerror=p(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),t=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ce(this._image,t,e)},_reset:function(){var t=this._image,e=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();he(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){le(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),In=Ln.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:Yt("video");if(re(e,"leaflet-image-layer"),this._zoomAnimated&&re(e,"leaflet-zoom-animated"),this.options.className&&re(e,this.options.className),e.onselectstart=s,e.onmousemove=s,e.onloadeddata=p(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],r=0;r<n.length;r++)i.push(n[r].src);this._url=0<n.length?i:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var o=0;o<this._url.length;o++){var a=Yt("source");a.src=this._url[o],e.appendChild(a)}}}}),An=Ln.extend({_initImage:function(){var t=this._image=this._url;re(t,"leaflet-image-layer"),this._zoomAnimated&&re(t,"leaflet-zoom-animated"),this.options.className&&re(t,this.options.className),t.onselectstart=s,t.onmousemove=s}}),zn=ln.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){h(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&le(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&le(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(le(this._container,0),this._removeTimeout=setTimeout(p(Qt,void 0,this._container),200)):Qt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ee(this._container),this},bringToBack:function(){return this._map&&ne(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof ln||(n=e,e=t),e instanceof cn)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){var t,e,n;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),n=z(this.options.offset),e=this._getAnchor(),this._zoomAnimated?he(this._container,t.add(e)):n=n.add(t).add(e),e=this._containerBottom=-n.y,n=this._containerLeft=-Math.round(this._containerWidth/2)+n.x,this._container.style.bottom=e+"px",this._container.style.left=n+"px")},_getAnchor:function(){return[0,0]}}),On=zn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){zn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof mn||this._source.on("preclick",Se))},onRemove:function(t){zn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof mn||this._source.off("preclick",Se))},getEvents:function(){var t=zn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=Yt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=Yt("div",t+"-content-wrapper",e);this._contentNode=Yt("div",t+"-content",n),Ce(e),Pe(this._contentNode),_e(e,"contextmenu",Se),this._tipContainer=Yt("div",t+"-tip-container",e),this._tip=Yt("div",t+"-tip",this._tipContainer),this.options.closeButton&&((e=this._closeButton=Yt("a",t+"-close-button",e)).href="#close",e.innerHTML="&#215;",_e(e,"click",this._onCloseButtonClick,this))},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth,n=Math.min(n,this.options.maxWidth);n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,n=this.options.maxHeight;n&&n<i?(e.height=n+"px",re(t,"leaflet-popup-scrolled")):oe(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),t=this._getAnchor();he(this._container,e.add(t))},_adjustPan:function(){var t,e,n,i,r,o,a,s,l;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),t=this._map,a=parseInt(Jt(this._container,"marginBottom"),10)||0,e=this._container.offsetHeight+a,n=this._containerWidth,(s=new I(this._containerLeft,-e-this._containerBottom))._add(pe(this._container)),i=t.layerPointToContainerPoint(s),l=z(this.options.autoPanPadding),r=z(this.options.autoPanPaddingTopLeft||l),o=z(this.options.autoPanPaddingBottomRight||l),a=t.getSize(),l=s=0,i.x+n+o.x>a.x&&(s=i.x+n-a.x+o.x),i.x-s-r.x<0&&(s=i.x-r.x),i.y+e+o.y>a.y&&(l=i.y+e-a.y+o.y),i.y-l-r.y<0&&(l=i.y-r.y),(s||l)&&t.fire("autopanstart").panBy([s,l]))},_onCloseButtonClick:function(t){this._close(),Le(t)},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Fe.mergeOptions({closePopupOnClick:!0}),Fe.include({openPopup:function(t,e,n){return t instanceof On||(t=new On(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),ln.include({bindPopup:function(t,e){return t instanceof On?(h(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new On(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Le(t),e instanceof mn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Rn=zn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){zn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){zn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=zn.prototype.getEvents.call(this);return _t&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Yt("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n=this._map,i=this._container,r=n.latLngToContainerPoint(n.getCenter()),o=n.layerPointToContainerPoint(t),a=this.options.direction,s=i.offsetWidth,l=i.offsetHeight,u=z(this.options.offset),n=this._getAnchor(),l="top"===a?(e=s/2,l):"bottom"===a?(e=s/2,0):(e="center"===a?s/2:"right"===a?0:"left"===a?s:o.x<r.x?(a="right",0):(a="left",s+2*(u.x+n.x)),l/2);t=t.subtract(z(e,l,!0)).add(u).add(n),oe(i,"leaflet-tooltip-right"),oe(i,"leaflet-tooltip-left"),oe(i,"leaflet-tooltip-top"),oe(i,"leaflet-tooltip-bottom"),re(i,"leaflet-tooltip-"+a),he(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&le(this._container,t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(t)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Fe.include({openTooltip:function(t,e,n){return t instanceof Rn||(t=new Rn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),ln.include({bindTooltip:function(t,e){return t instanceof Rn?(h(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new Rn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){var e,n;!t&&this._tooltipHandlersAdded||(e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),_t&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t)},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(re(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(oe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(t=this._map.mouseEventToContainerPoint(t.originalEvent),t=this._map.containerPointToLayerPoint(t),e=this._map.layerPointToLatLng(t)),this._tooltip.setLatLng(e)}});var Dn=hn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),t=this.options;return t.html instanceof Element?(te(e),e.appendChild(t.html)):e.innerHTML=!1!==t.html?t.html:"",t.bgPos&&(t=z(t.bgPos),e.style.backgroundPosition=-t.x+"px "+-t.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});hn.Default=pn;var Nn=ln.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){h(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Qt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ee(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ne(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=i(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof I?t:new I(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J){le(this._container,this.options.opacity);var t,e=+new Date,n=!1,i=!1;for(t in this._tiles){var r,o=this._tiles[t];o.current&&o.loaded&&(r=Math.min(1,(e-o.loaded)/200),le(o.el,r),r<1?n=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0))}i&&!this._noPrune&&this._pruneTiles(),n&&(S(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:s,_initContainer:function(){this._container||(this._container=Yt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(Qt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=Yt("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i}},_onUpdateLevel:s,_onRemoveLevel:s,_onCreateLevel:s,_pruneTiles:function(){if(this._map){var t,e,n,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)(e=this._tiles[t]).current&&!e.active&&(n=e.coords,this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2));for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Qt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),t=Math.floor(e/2),e=n-1,n=new I(+r,+t);n.z=+e;n=this._tileCoordsToKey(n),n=this._tiles[n];return n&&n.active?n.retain=!0:(n&&n.loaded&&(n.retain=!0),i<e&&this._retainParent(r,t,e,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new I(r,o);a.z=n+1;a=this._tileCoordsToKey(a),a=this._tiles[a];a&&a.active?a.retain=!0:(a&&a.loaded&&(a.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){t=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e),r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r),o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),n=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();ft?ce(t.el,n,i):he(t.el,n)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(n,this._tileZoom),t=e.project(t,this._tileZoom).floor(),n=e.getSize().divideBy(2*n);return new O(t.subtract(n),t.add(n))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i,e=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(e),o=r.getCenter(),a=[],e=this.options.keepBuffer,s=new O(r.getBottomLeft().subtract([e,-e]),r.getTopRight().add([e,-e]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(i in this._tiles){var l=this._tiles[i].coords;l.z===this._tileZoom&&s.contains(new I(l.x,l.y))||(this._tiles[i].current=!1)}if(1<Math.abs(n-this._tileZoom))this._setView(t,n);else{for(var u=r.min.y;u<=r.max.y;u++)for(var c=r.min.x;c<=r.max.x;c++){var h,p=new I(c,u);p.z=this._tileZoom,this._isValidTile(p)&&((h=this._tiles[this._tileCoordsToKey(p)])?h.current=!0:a.push(p))}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));for(var d=document.createDocumentFragment(),c=0;c<a.length;c++)this._addTile(a[c],d);this._level.el.appendChild(d)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;t=this._tileCoordsToBounds(t);return N(this.options.bounds).overlaps(t)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),n=i.add(n);return[e.unproject(i,t.z),e.unproject(n,t.z)]},_tileCoordsToBounds:function(t){t=this._tileCoordsToNwSe(t),t=new D(t[0],t[1]);return this.options.noWrap||(t=this._map.wrapLatLngBounds(t)),t},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),t=new I(+e[0],+e[1]);return t.z=+e[2],t},_removeTile:function(t){var e=this._tiles[t];e&&(Qt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){re(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=s,t.onmousemove=s,J&&this.options.opacity<1&&le(t,this.options.opacity),tt&&!et&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&k(p(this._tileReady,this,t,null,r)),he(r,n),this._tiles[i]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(le(n.el,0),S(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(re(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new I(this._wrapX?r(t.x,this._wrapX):t.x,this._wrapY?r(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new O(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Bn=Nn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=h(this,e)).detectRetina&&xt&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),tt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return _e(n,"load",p(this._tileOnLoad,this,e,n)),_e(n,"error",p(this._tileOnError,this,e,n)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:xt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(t=this._globalTileRange.max.y-t.y,this.options.tms&&(e.y=t),e["-y"]=t),y(this._url,l(e,this.options))},_tileOnLoad:function(t,e){J?setTimeout(p(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){t=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=s,e.onerror=s,e.complete||(e.src=_,Qt(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return it||e.el.setAttribute("src",_),Nn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==_))return Nn.prototype._tileReady.call(this,t,e,n)}});function Fn(t,e){return new Bn(t,e)}var jn=Bn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n,i=l({},this.defaultWmsParams);for(n in e)n in this.options||(i[n]=e[n]);var r=(e=h(this,e)).detectRetina&&xt?2:1,t=this.getTileSize();i.width=t.x*r,i.height=t.y*r,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,Bn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,n=R(n.project(e[0]),n.project(e[1])),e=n.min,n=n.max,n=(1.3<=this._wmsVersion&&this._crs===sn?[e.y,e.x,n.y,n.x]:[e.x,e.y,n.x,n.y]).join(","),t=Bn.prototype.getTileUrl.call(this,t);return t+d(this.wmsParams,t,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+n},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});Bn.WMS=jn,Fn.wms=function(t,e){return new jn(t,e)};var Un=ln.extend({options:{padding:.1,tolerance:0},initialize:function(t){h(this,t),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=pe(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),o=this._map.project(t,e).subtract(o),o=r.multiplyBy(-n).add(i).add(r).subtract(o);ft?ce(this._container,o,n):he(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new O(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vn=Un.extend({getEvents:function(){var t=Un.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Un.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");_e(t,"mousemove",this._onMouseMove,this),_e(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,Qt(this._container),xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){var t,e,n,i;this._map._animatingZoom&&this._bounds||(Un.prototype._update.call(this),t=this._bounds,e=this._container,n=t.getSize(),i=xt?2:1,he(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",xt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update"))},_reset:function(){Un.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);t=(this._layers[m(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,e=e.prev;n?n.prev=e:this._drawLast=e,e?e.next=n:this._drawFirst=n,delete t._order,delete this._layers[m(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){for(var e,n=t.options.dashArray.split(/[, ]+/),i=[],r=0;r<n.length;r++){if(e=Number(n[r]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(t){var e;t._pxBounds&&(e=(t.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t,e=this._redrawBounds;e?(t=e.getSize(),this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},_draw:function(){var t,e,n=this._redrawBounds;this._ctx.save(),n&&(e=n.getSize(),this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,e.x,e.y),this._ctx.clip()),this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(i=0,r=a[n].length;i<r;i++)o=a[n][i],l[i?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){var e,n,i,r;this._drawing&&!t._empty()&&(e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),1!=(r=(Math.max(Math.round(t._radiusY),1)||i)/i)&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!=r&&n.restore(),this._fillStroke(n,t))},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(Re(t),this._fireEvent([n],t))},_onMouseMove:function(t){var e;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(e=this._map.mouseEventToLayerPoint(t),this._handleMouseHover(t,e))},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(oe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(re(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e,n,i=t._order;i&&(e=i.next,n=i.prev,e&&((e.prev=n)?n.next=e:e&&(this._drawFirst=e),i.prev=this._drawLast,(this._drawLast.next=i).next=null,this._drawLast=i,this._requestRedraw(t)))},_bringToBack:function(t){var e,n,i=t._order;i&&(e=i.next,(n=i.prev)&&((n.next=e)?e.prev=n:n&&(this._drawLast=n),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)))}});function Zn(t){return Tt?new Vn(t):null}var qn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),nt={_initContainer:function(){this._container=Yt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Un.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=qn("shape");re(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=qn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[m(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Qt(e),t.removeInteractiveTarget(e),delete this._layers[m(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e=e||(t._stroke=qn("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=g(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n=n||(t._fill=qn("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ee(t._container)},_bringToBack:function(t){ne(t._container)}},Gn=kt?qn:$,Wn=Un.extend({getEvents:function(){var t=Un.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Gn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qt(this._container),xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){var t,e,n;this._map._animatingZoom&&this._bounds||(Un.prototype._update.call(this),e=(t=this._bounds).getSize(),n=this._container,this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),he(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update"))},_initPath:function(t){var e=t._path=Gn("path");t.options.className&&re(e,t.options.className),t.options.interactive&&re(e,"leaflet-interactive"),this._updateStyle(t),this._layers[m(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Qt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[m(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,t=t.options;e&&(t.stroke?(e.setAttribute("stroke",t.color),e.setAttribute("stroke-opacity",t.opacity),e.setAttribute("stroke-width",t.weight),e.setAttribute("stroke-linecap",t.lineCap),e.setAttribute("stroke-linejoin",t.lineJoin),t.dashArray?e.setAttribute("stroke-dasharray",t.dashArray):e.removeAttribute("stroke-dasharray"),t.dashOffset?e.setAttribute("stroke-dashoffset",t.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),t.fill?(e.setAttribute("fill",t.fillColor||t.color),e.setAttribute("fill-opacity",t.fillOpacity),e.setAttribute("fill-rule",t.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,H(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",n=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,n)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ee(t._path)},_bringToBack:function(t){ne(t._path)}});function $n(t){return Et||kt?new Wn(t):null}kt&&Wn.include(nt),Fe.include({getRenderer:function(t){t=(t=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer());return this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Zn(t)||$n(t)}});var Hn=_n.extend({initialize:function(t,e){_n.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=N(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Wn.create=Gn,Wn.pointsToPath=H,bn.geometryToLayer=xn,bn.coordsToLatLng=Tn,bn.coordsToLatLngs=En,bn.latLngToCoords=kn,bn.latLngsToCoords=Sn,bn.getFeature=Pn,bn.asFeature=Cn,Fe.mergeOptions({boxZoom:!0}),an=dt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Vt(),de(),this._startPoint=this._map.mouseEventToContainerPoint(t),_e(document,{contextmenu:Le,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Yt("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new O(this._point,this._startPoint),t=e.getSize();he(this._box,e.min),this._box.style.width=t.x+"px",this._box.style.height=t.y+"px"},_finish:function(){this._moved&&(Qt(this._box),oe(this._container,"leaflet-crosshair")),Zt(),fe(),xe(document,{contextmenu:Le,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){1!==t.which&&1!==t.button||(this._finish(),!this._moved)||(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0),t=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t}))},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),Fe.addInitHook("addHandler","boxZoom",an),Fe.mergeOptions({doubleClickZoom:!0}),G=dt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}}),Fe.addInitHook("addHandler","doubleClickZoom",G),Fe.mergeOptions({dragging:!0,inertia:!et,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),W=dt.extend({addHooks:function(){var t;this._draggable||(t=this._map,this._draggable=new Ke(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))),re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){oe(this._map._container,"leaflet-grab"),oe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t,e=this._map;e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(t=N(this._map.options.maxBounds),this._offsetLimit=R(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){var e,n;this._map.options.inertia&&(e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(n),this._times.push(e),this._prunePositions(e)),this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){var t,e;this._viscosity&&this._offsetLimit&&(t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit,t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t))},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,e=(i+e+n)%t-e-n,e=Math.abs(r+n)<Math.abs(e+n)?r:e;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=e},_onDragEnd:function(t){var e,n,i,r,o=this._map,a=o.options,s=!a.inertia||this._times.length<2;o.fire("dragend",t),s?o.fire("moveend"):(this._prunePositions(+new Date),n=this._lastPos.subtract(this._positions[0]),t=(this._lastTime-this._times[0])/1e3,e=a.easeLinearity,n=(s=n.multiplyBy(e/t)).distanceTo([0,0]),t=Math.min(a.inertiaMaxSpeed,n),n=s.multiplyBy(t/n),i=t/(a.inertiaDeceleration*e),(r=n.multiplyBy(-i/2).round()).x||r.y?(r=o._limitOffset(r,o.options.maxBounds),k(function(){o.panBy(r,{duration:i,easeLinearity:e,noMoveStart:!0,animate:!0})})):o.fire("moveend"))}}),Fe.addInitHook("addHandler","dragging",W),Fe.mergeOptions({keyboard:!0,keyboardPanDelta:80}),V=dt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),_e(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var t,e,n;this._focused||(t=document.body,n=document.documentElement,e=t.scrollTop||n.scrollTop,n=t.scrollLeft||n.scrollLeft,this._map._container.focus(),window.scrollTo(n,e))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){for(var e=this._panKeys={},n=this.keyCodes,i=0,r=n.left.length;i<r;i++)e[n.left[i]]=[-1*t,0];for(i=0,r=n.right.length;i<r;i++)e[n.right[i]]=[t,0];for(i=0,r=n.down.length;i<r;i++)e[n.down[i]]=[0,t];for(i=0,r=n.up.length;i<r;i++)e[n.up[i]]=[0,-1*t]},_setZoomDelta:function(t){for(var e=this._zoomKeys={},n=this.keyCodes,i=0,r=n.zoomIn.length;i<r;i++)e[n.zoomIn[i]]=t;for(i=0,r=n.zoomOut.length;i<r;i++)e[n.zoomOut[i]]=-t},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=z(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Le(t)}}}),Fe.addInitHook("addHandler","keyboard",V),Fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),ct=dt.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ze(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);n=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),n),Le(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,i=n?Math.ceil(i/n)*n:i,i=t._limitZoom(e+(0<this._delta?i:-i))-e;this._delta=0,this._startTime=null,i&&("center"===t.options.scrollWheelZoom?t.setZoom(e+i):t.setZoomAround(this._lastMousePos,e+i))}}),Fe.addInitHook("addHandler","scrollWheelZoom",ct),Fe.mergeOptions({tap:!0,tapTolerance:15}),mt=dt.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Me(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],t=e.target;this._startPos=this._newPos=new I(e.clientX,e.clientY),t.tagName&&"a"===t.tagName.toLowerCase()&&re(t,"leaflet-active"),this._holdTimeout=setTimeout(p(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),_e(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){var e;clearTimeout(this._holdTimeout),xe(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches&&((t=(e=t.changedTouches[0]).target)&&t.tagName&&"a"===t.tagName.toLowerCase()&&oe(t,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e))},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){t=t.touches[0];this._newPos=new I(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),!_t||vt&&!st||Fe.addInitHook("addHandler","tap",mt),Fe.mergeOptions({touchZoom:_t&&!et,bounceAtZoomLimits:!0}),nt=dt.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e,n,i=this._map;!t.touches||2!==t.touches.length||i._animatingZoom||this._zooming||(e=i.mouseEventToContainerPoint(t.touches[0]),n=i.mouseEventToContainerPoint(t.touches[1]),this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),"center"!==i.options.touchZoom&&(this._pinchStartLatLng=i.containerPointToLatLng(e.add(n)._divideBy(2))),this._startDist=e.distanceTo(n),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend",this._onTouchEnd,this),Me(t))},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&1<r)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==r)return}else{i=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1==r&&0===i.x&&0===i.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(i),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),S(this._animRequest);e=p(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=k(e,this,!0),Me(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),xe(document,"touchmove",this._onTouchMove,this),xe(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}}),Fe.addInitHook("addHandler","touchZoom",nt),Fe.BoxZoom=an,Fe.DoubleClickZoom=G,Fe.Drag=W,Fe.Keyboard=V,Fe.ScrollWheelZoom=ct,Fe.Tap=mt,Fe.TouchZoom=nt,t.version="1.7.1",t.Control=je,t.control=pt,t.Browser=rt,t.Evented=M,t.Mixin=yt,t.Util=P,t.Class=C,t.Handler=dt,t.extend=l,t.bind=p,t.stamp=m,t.setOptions=h,t.DomEvent=ut,t.DomUtil=lt,t.PosAnimation=Be,t.Draggable=Ke,t.LineUtil=gt,t.PolyUtil=K,t.Point=I,t.point=z,t.Bounds=O,t.bounds=R,t.Transformation=Z,t.transformation=q,t.Projection=ot,t.LatLng=B,t.latLng=F,t.LatLngBounds=D,t.latLngBounds=N,t.CRS=j,t.GeoJSON=bn,t.geoJSON=Mn,t.geoJson=at,t.Layer=ln,t.LayerGroup=un,t.layerGroup=function(t,e){return new un(t,e)},t.FeatureGroup=cn,t.featureGroup=function(t,e){return new cn(t,e)},t.ImageOverlay=Ln,t.imageOverlay=function(t,e,n){return new Ln(t,e,n)},t.VideoOverlay=In,t.videoOverlay=function(t,e,n){return new In(t,e,n)},t.SVGOverlay=An,t.svgOverlay=function(t,e,n){return new An(t,e,n)},t.DivOverlay=zn,t.Popup=On,t.popup=function(t,e){return new On(t,e)},t.Tooltip=Rn,t.tooltip=function(t,e){return new Rn(t,e)},t.Icon=hn,t.icon=function(t){return new hn(t)},t.DivIcon=Dn,t.divIcon=function(t){return new Dn(t)},t.Marker=fn,t.marker=function(t,e){return new fn(t,e)},t.TileLayer=Bn,t.tileLayer=Fn,t.GridLayer=Nn,t.gridLayer=function(t){return new Nn(t)},t.SVG=Wn,t.svg=$n,t.Renderer=Un,t.Canvas=Vn,t.canvas=Zn,t.Path=mn,t.CircleMarker=yn,t.circleMarker=function(t,e){return new yn(t,e)},t.Circle=gn,t.circle=function(t,e,n){return new gn(t,e,n)},t.Polyline=vn,t.polyline=function(t,e){return new vn(t,e)},t.Polygon=_n,t.polygon=function(t,e){return new _n(t,e)},t.Rectangle=Hn,t.rectangle=function(t,e){return new Hn(t,e)},t.Map=Fe,t.map=function(t,e){return new Fe(t,e)};var Kn=window.L;t.noConflict=function(){return window.L=Kn,this},window.L=t}(e)},function(t,e,n){var i;!function(){"use strict";var a={}.hasOwnProperty;function s(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var i=typeof n;if("string"==i||"number"==i)t.push(n);else if(Array.isArray(n)&&n.length){var r=s.apply(null,n);r&&t.push(r)}else if("object"==i)for(var o in n)a.call(n,o)&&n[o]&&t.push(o)}}return t.join(" ")}t.exports?(s.default=s,t.exports=s):void 0===(i=function(){return s}.apply(e,[]))||(t.exports=i)}()},function(t,e,n){t.exports=n(36)()},function(t,e,n){"use strict";n.d(e,"h",function(){return ht}),n.d(e,"c",function(){return dt}),n.d(e,"a",function(){return vt}),n.d(e,"b",function(){return Mt}),n.d(e,"d",function(){return ne}),n.d(e,"e",function(){return re}),n.d(e,"f",function(){return oe}),n.d(e,"g",function(){return ue});var s=n(1),g=n.n(s),i=n(0),m=n.n(i),r=n(3),v=n.n(r),o=n(23),a=n.n(o),l=n(12),h=n.n(l),u=n(6),y=n.n(u),c=n(4),p=n.n(c),e=function(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t};function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(_,s.Component),e(_,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this._setTargetNode,getTargetNode:this._getTargetNode}}}},{key:"render",value:function(){var t=this.props,e=t.tag,n=t.children,t=function(t,e){var n,i={};for(n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}(t,["tag","children"]);return!1!==e?Object(s.createElement)(e,t,n):n}}]),i=_;function _(){var t,e;!function(t){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e=f(this,(t=_.__proto__||Object.getPrototypeOf(_)).call.apply(t,[this].concat(i))),e._setTargetNode=function(t){e._targetNode=t},e._getTargetNode=function(){return e._targetNode},f(e,t)}i.childContextTypes={popperManager:p.a.object.isRequired},i.propTypes={tag:p.a.oneOfType([p.a.string,p.a.bool]),children:p.a.oneOfType([p.a.node,p.a.func])},i.defaultProps={tag:"div"};var b=i,x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=function(t,e){var n=t.component,i=void 0===n?"div":n,r=t.innerRef,n=t.children,t=function(t,e){var n,i={};for(n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}(t,["component","innerRef","children"]),o=e.popperManager,e=function(t){o.setTargetNode(t),"function"==typeof r&&r(t)};if("function"==typeof n)return n({targetProps:{ref:e},restProps:t});t=x({},t);return"string"==typeof i?t.ref=e:t.innerRef=e,Object(s.createElement)(i,t,n)};r.contextTypes={popperManager:p.a.object.isRequired},r.propTypes={component:p.a.oneOfType([p.a.node,p.a.func]),innerRef:p.a.func,children:p.a.oneOfType([p.a.node,p.a.func])};var w=r,T=n(13),E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o=function(t,e,n){return e&&k(t.prototype,e),n&&k(t,n),t};function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}l=T.a.placements,function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(P,s.Component),o(P,[{key:"getChildContext",value:function(){return{popper:{setArrowNode:this._setArrowNode,getArrowStyle:this._getArrowStyle}}}},{key:"componentDidUpdate",value:function(t){t.placement===this.props.placement&&t.eventsEnabled===this.props.eventsEnabled&&t.target===this.props.target||(this._destroyPopper(),this._createPopper()),t.children!==this.props.children&&this._scheduleUpdate()}},{key:"componentWillUnmount",value:function(){this._destroyPopper()}},{key:"_createPopper",value:function(){var t=this,e=this.props,n=e.placement,i=e.eventsEnabled,r=e.positionFixed,e=E({},this.props.modifiers,{applyStyle:{enabled:!1},updateState:this._updateStateModifier});this._arrowNode&&(e.arrow=E({},this.props.modifiers.arrow||{},{element:this._arrowNode})),this._popper=new T.a(this._getTargetNode(),this._popperNode,{placement:n,positionFixed:r,eventsEnabled:i,modifiers:e}),setTimeout(function(){return t._scheduleUpdate()})}},{key:"_destroyPopper",value:function(){this._popper&&this._popper.destroy()}},{key:"render",value:function(){var t=this.props,e=t.component,n=(t.innerRef,t.placement,t.eventsEnabled,t.positionFixed,t.modifiers,t.children),i=function(t,e){var n,i={};for(n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}(t,["component","innerRef","placement","eventsEnabled","positionFixed","modifiers","children"]),r=this._getPopperStyle(),o=this._getPopperPlacement(),t=this._getPopperHide();if("function"==typeof n)return n({popperProps:{ref:this._handlePopperRef,style:r,"data-placement":o,"data-x-out-of-boundaries":t},restProps:i,scheduleUpdate:this._scheduleUpdate});t=E({},i,{style:E({},i.style,r),"data-placement":o,"data-x-out-of-boundaries":t});return"string"==typeof e?t.ref=this._handlePopperRef:t.innerRef=this._handlePopperRef,Object(s.createElement)(e,t,n)}}]),u=P;function P(){var t,e;!function(t){if(!(t instanceof P))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e=S(this,(t=P.__proto__||Object.getPrototypeOf(P)).call.apply(t,[this].concat(i))),e.state={},e._setArrowNode=function(t){e._arrowNode=t},e._getTargetNode=function(){if(e.props.target)return e.props.target;if(!e.context.popperManager||!e.context.popperManager.getTargetNode())throw new Error("Target missing. Popper must be given a target from the Popper Manager, or as a prop.");return e.context.popperManager.getTargetNode()},e._getOffsets=function(e){return Object.keys(e.offsets).map(function(t){return e.offsets[t]})},e._isDataDirty=function(t){return!e.state.data||JSON.stringify(e._getOffsets(e.state.data))!==JSON.stringify(e._getOffsets(t))},e._updateStateModifier={enabled:!0,order:900,fn:function(t){return e._isDataDirty(t)&&e.setState({data:t}),t}},e._getPopperStyle=function(){var t=e.state.data;return e._popper&&t?E({position:t.offsets.popper.position},t.styles):{position:"absolute",pointerEvents:"none",opacity:0}},e._getPopperPlacement=function(){return e.state.data?e.state.data.placement:void 0},e._getPopperHide=function(){return e.state.data&&e.state.data.hide?"":void 0},e._getArrowStyle=function(){if(e.state.data&&e.state.data.offsets.arrow){var t=e.state.data.offsets.arrow;return{top:t.top,left:t.left}}return{}},e._handlePopperRef=function(t){(e._popperNode=t)?e._createPopper():e._destroyPopper(),e.props.innerRef&&e.props.innerRef(t)},e._scheduleUpdate=function(){e._popper&&e._popper.scheduleUpdate()},S(e,t)}u.contextTypes={popperManager:p.a.object},u.childContextTypes={popper:p.a.object.isRequired},u.propTypes={component:p.a.oneOfType([p.a.node,p.a.func]),innerRef:p.a.func,placement:p.a.oneOf(l),eventsEnabled:p.a.bool,positionFixed:p.a.bool,modifiers:p.a.object,children:p.a.oneOfType([p.a.node,p.a.func]),target:p.a.oneOfType([p.a.instanceOf("undefined"!=typeof Element?Element:Object),p.a.shape({getBoundingClientRect:p.a.func.isRequired,clientWidth:p.a.number.isRequired,clientHeight:p.a.number.isRequired})])},u.defaultProps={component:"div",placement:"bottom",eventsEnabled:!0,positionFixed:!1,modifiers:{}};var C=u,M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},c=function(t,e){var n=t.component,i=void 0===n?"span":n,r=t.innerRef,o=t.children,n=function(t,e){var n,i={};for(n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}(t,["component","innerRef","children"]),a=e.popper,t=function(t){a.setArrowNode(t),"function"==typeof r&&r(t)},e=a.getArrowStyle();if("function"==typeof o)return o({arrowProps:{ref:t,style:e},restProps:n});n=M({},n,{style:M({},e,n.style)});return"string"==typeof i?n.ref=t:n.innerRef=t,Object(s.createElement)(i,n,o)};c.contextTypes={popper:p.a.object.isRequired},c.propTypes={component:p.a.oneOfType([p.a.node,p.a.func]),innerRef:p.a.func,children:p.a.oneOfType([p.a.node,p.a.func])};var L=c,e=n(14),I=n.n(e);function A(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=t&&this.setState(t)}function z(e){this.setState(function(t){t=this.constructor.getDerivedStateFromProps(e,t);return null!=t?t:null}.bind(this))}function O(t,e){try{var n=this.props,i=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}O.__suppressDeprecationWarning=z.__suppressDeprecationWarning=A.__suppressDeprecationWarning=!0;function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(t,e,n){return e&&U(t.prototype,e),n&&U(t,n),t},B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},F=function(t,e){var n,i={};for(n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i},j=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};function U(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function V(){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function Z(t){document.body.style.paddingRight=0<t?t+"px":null}function q(){return document.body.clientWidth<window.innerWidth}function G(){var t=window.getComputedStyle(document.body,null);return parseInt(t&&t.getPropertyValue("padding-right")||0,10)}function W(){var t=V(),e=document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")[0],e=e?parseInt(e.style.paddingRight||0,10):0;q()&&Z(e+t)}var $=void 0;function H(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:$;return e?t.split(" ").map(function(t){return e[t]||t}).join(" "):t}function K(e,n){var i={};return Object.keys(e).forEach(function(t){-1===n.indexOf(t)&&(i[t]=e[t])}),i}function X(t,e){for(var n,i=Array.isArray(e)?e:[e],r=i.length,o={};0<r;)o[n=i[--r]]=t[n];return o}var J={};function Y(t){J[t]||("undefined"!=typeof console&&console.error(t),J[t]=!0)}function Q(a,s){return function(t,e,n){null!==t[e]&&void 0!==t[e]&&Y('"'+e+'" property of "'+n+'" has been deprecated.\n'+s);for(var i=arguments.length,r=Array(3<i?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return a.apply(void 0,[t,e,n].concat(r))}}function tt(t,e,n){if(!(t[e]instanceof Element))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected prop to be an instance of Element. Validation failed.")}var o=m.a.oneOfType([m.a.string,m.a.func,tt,m.a.shape({current:m.a.any})]),l={Fade:150,Collapse:350,Modal:300,Carousel:600},et=["in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],nt={ENTERING:"entering",ENTERED:"entered",EXITING:"exiting",EXITED:"exited"},it={esc:27,space:32,enter:13,tab:9,up:38,down:40},u=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],rt=!("undefined"==typeof window||!window.document||!window.document.createElement);function ot(t){return!(!t||"object"!==(void 0===t?"undefined":D(t)))&&"current"in t}function at(t){if(ot(t))return t.current;if(a()(t))return t();if("string"==typeof t&&rt){var e=document.querySelectorAll(t);if(e.length||(e=document.querySelectorAll("#"+t)),!e.length)throw new Error("The target '"+t+"' could not be identified in the dom, tip: check spelling");return e}return t}function st(t){return null!==t&&(Array.isArray(t)||rt&&"number"==typeof t.length)}function lt(t){t=at(t);return st(t)?t[0]:t}p=["touchstart","click"];function ut(t,n,e){var i=t;st(i)||(i=[i]);var r=e;if("string"==typeof r&&(r=r.split(/\s+/)),!st(i)||"function"!=typeof n||!Array.isArray(r))throw new Error("\n      The first argument of this function must be DOM node or an array on DOM nodes or NodeList.\n      The second must be a function.\n      The third is a string or an array of strings that represents DOM events\n    ");return r.forEach(function(e){i.forEach(function(t){t.addEventListener(e,n)})}),function(){r.forEach(function(e){i.forEach(function(t){t.removeEventListener(e,n)})})}}var ct=["a[href]","area[href]","input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","object","embed","[tabindex]:not(.modal)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],c=(Object.freeze({getScrollbarWidth:V,setScrollbarWidth:Z,isBodyOverflowing:q,getOriginalBodyPadding:G,conditionallyUpdateScrollbar:W,setGlobalCssModule:function(t){$=t},mapToCssModules:H,omit:K,pick:X,warnOnce:Y,deprecated:Q,DOMElement:tt,targetPropType:o,TransitionTimeouts:l,TransitionPropTypeKeys:et,TransitionStatuses:nt,keyCodes:it,PopperPlacements:u,canUseDOM:rt,isReactRefObj:ot,findDOMElements:at,isArrayOrNodeList:st,getTarget:lt,defaultToggleEvents:p,addMultipleEventListeners:ut,focusableElements:ct}),{tag:m.a.oneOfType([m.a.func,m.a.string]),fluid:m.a.bool,className:m.a.string,cssModule:m.a.object}),n=function(t){var e=t.className,n=t.cssModule,i=t.fluid,r=t.tag,t=F(t,["className","cssModule","fluid","tag"]),n=H(v()(e,i?"container-fluid":"container"),n);return g.a.createElement(r,B({},t,{className:n}))};n.propTypes=c,n.defaultProps={tag:"div"};var e={tag:m.a.oneOfType([m.a.func,m.a.string]),noGutters:m.a.bool,className:m.a.string,cssModule:m.a.object,form:m.a.bool},ht=function(t){var e=t.className,n=t.cssModule,i=t.noGutters,r=t.tag,o=t.form,t=F(t,["className","cssModule","noGutters","tag","form"]),n=H(v()(e,i?"no-gutters":null,o?"form-row":"row"),n);return g.a.createElement(r,B({},t,{className:n}))};ht.propTypes=e,ht.defaultProps={tag:"div"};function pt(t,e,n){return!0===n||""===n?t?"col":"col-"+e:"auto"===n?t?"col-auto":"col-"+e+"-auto":t?"col-"+n:"col-"+e+"-"+n}var c=m.a.oneOfType([m.a.number,m.a.string]),n=m.a.oneOfType([m.a.bool,m.a.number,m.a.string,m.a.shape({size:m.a.oneOfType([m.a.bool,m.a.number,m.a.string]),push:Q(c,'Please use the prop "order"'),pull:Q(c,'Please use the prop "order"'),order:c,offset:c})]),e={tag:m.a.oneOfType([m.a.func,m.a.string]),xs:n,sm:n,md:n,lg:n,xl:n,className:m.a.string,cssModule:m.a.object,widths:m.a.array},dt=function(a){var t=a.className,s=a.cssModule,e=a.widths,n=a.tag,l=F(a,["className","cssModule","widths","tag"]),u=[];e.forEach(function(t,e){var n,i,r,o=a[t];delete l[t],!o&&""!==o||(n=!e,h()(o)?(i=n?"-":"-"+t+"-",r=pt(n,t,o.size),u.push(H(v()((R(e={},r,o.size||""===o.size),R(e,"order"+i+o.order,o.order||0===o.order),R(e,"offset"+i+o.offset,o.offset||0===o.offset),e)),s))):(o=pt(n,t,o),u.push(o)))}),u.length||u.push("col");t=H(v()(t,u),s);return g.a.createElement(n,B({},l,{className:t}))};dt.propTypes=e,dt.defaultProps={tag:"div",widths:["xs","sm","md","lg","xl"]};var c={light:m.a.bool,dark:m.a.bool,inverse:Q(m.a.bool,'Please use the prop "dark"'),full:m.a.bool,fixed:m.a.string,sticky:m.a.string,color:m.a.string,role:m.a.string,tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object,toggleable:Q(m.a.oneOfType([m.a.bool,m.a.string]),'Please use the prop "expand"'),expand:m.a.oneOfType([m.a.bool,m.a.string])},ft={xs:"sm",sm:"md",md:"lg",lg:"xl"},n=function(t){var e=t.toggleable,n=t.expand,i=t.className,r=t.cssModule,o=t.light,a=t.dark,s=t.inverse,l=t.fixed,u=t.sticky,c=t.color,h=t.tag,t=F(t,["toggleable","expand","className","cssModule","light","dark","inverse","fixed","sticky","color","tag"]),r=H(v()(i,"navbar",!1!==n&&(!0===n||"xs"===n?"navbar-expand":"navbar-expand-"+n)||void 0!==e&&"xl"!==e&&(!1===e?"navbar-expand":"navbar-expand-"+(!0===e?"sm":ft[e]||e)),(R(a={"navbar-light":o,"navbar-dark":s||a},"bg-"+c,c),R(a,"fixed-"+l,l),R(a,"sticky-"+u,u),a)),r);return g.a.createElement(h,B({},t,{className:r}))};n.propTypes=c,n.defaultProps={tag:"nav",expand:!1};e={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},c=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"navbar-brand"),n);return g.a.createElement(i,B({},t,{className:n}))};c.propTypes=e,c.defaultProps={tag:"a"};n={tag:m.a.oneOfType([m.a.func,m.a.string]),type:m.a.string,className:m.a.string,cssModule:m.a.object,children:m.a.node},e=function(t){var e=t.className,n=t.cssModule,i=t.children,r=t.tag,t=F(t,["className","cssModule","children","tag"]),e=H(v()(e,"navbar-toggler"),n);return g.a.createElement(r,B({},t,{className:e}),i||g.a.createElement("span",{className:H("navbar-toggler-icon",n)}))};e.propTypes=n,e.defaultProps={tag:"button",type:"button"};c={tabs:m.a.bool,pills:m.a.bool,vertical:m.a.oneOfType([m.a.bool,m.a.string]),horizontal:m.a.string,justified:m.a.bool,fill:m.a.bool,navbar:m.a.bool,card:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},n=function(t){var e=t.className,n=t.cssModule,i=t.tabs,r=t.pills,o=t.vertical,a=t.horizontal,s=t.justified,l=t.fill,u=t.navbar,c=t.card,h=t.tag,t=F(t,["className","cssModule","tabs","pills","vertical","horizontal","justified","fill","navbar","card","tag"]),n=H(v()(e,u?"navbar-nav":"nav",!!a&&"justify-content-"+a,!1!==o&&(!0===o||"xs"===o?"flex-column":"flex-"+o+"-column"),{"nav-tabs":i,"card-header-tabs":c&&i,"nav-pills":r,"card-header-pills":c&&r,"nav-justified":s,"nav-fill":l}),n);return g.a.createElement(h,B({},t,{className:n}))};n.propTypes=c,n.defaultProps={tag:"ul",vertical:!1};e={tag:m.a.oneOfType([m.a.func,m.a.string]),active:m.a.bool,className:m.a.string,cssModule:m.a.object},c=function(t){var e=t.className,n=t.cssModule,i=t.active,r=t.tag,t=F(t,["className","cssModule","active","tag"]),n=H(v()(e,"nav-item",!!i&&"active"),n);return g.a.createElement(r,B({},t,{className:n}))};c.propTypes=e,c.defaultProps={tag:"li"};var n={disabled:m.a.bool,dropup:Q(m.a.bool,'Please use the prop "direction" with the value "up".'),direction:m.a.oneOf(["up","down","left","right"]),group:m.a.bool,isOpen:m.a.bool,nav:m.a.bool,active:m.a.bool,addonType:m.a.oneOfType([m.a.bool,m.a.oneOf(["prepend","append"])]),size:m.a.string,tag:m.a.string,toggle:m.a.func,children:m.a.node,className:m.a.string,cssModule:m.a.object,inNavbar:m.a.bool,setActiveFromChild:m.a.bool},e={toggle:m.a.func.isRequired,isOpen:m.a.bool.isRequired,direction:m.a.oneOf(["up","down","left","right"]).isRequired,inNavbar:m.a.bool.isRequired},mt=(c=g.a.Component,r(yt,c),i(yt,[{key:"getChildContext",value:function(){return{toggle:this.props.toggle,isOpen:this.props.isOpen,direction:"down"===this.props.direction&&this.props.dropup?"up":this.props.direction,inNavbar:this.props.inNavbar}}},{key:"componentDidMount",value:function(){this.handleProps()}},{key:"componentDidUpdate",value:function(t){this.props.isOpen!==t.isOpen&&this.handleProps()}},{key:"componentWillUnmount",value:function(){this.removeEvents()}},{key:"getContainer",value:function(){return y.a.findDOMNode(this)}},{key:"addEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)})}},{key:"removeEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach(function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)})}},{key:"handleDocumentClick",value:function(t){var e;t&&(3===t.which||"keyup"===t.type&&t.which!==it.tab)||((e=this.getContainer()).contains(t.target)&&e!==t.target&&("keyup"!==t.type||t.which===it.tab)||this.toggle(t))}},{key:"handleKeyDown",value:function(t){if(!(it.tab===t.which||/button/i.test(t.target.tagName)&&t.which===it.space||/input|textarea/i.test(t.target.tagName)||(t.preventDefault(),this.props.disabled))){var e=this.getContainer();if(t.which===it.space&&it.enter&&this.props.isOpen&&e!==t.target&&t.target.click(),t.which===it.esc||!this.props.isOpen)return this.toggle(t),void e.querySelector("[aria-expanded]").focus();var n=H("dropdown-menu",this.props.cssModule),i=H("dropdown-item",this.props.cssModule),r=H("disabled",this.props.cssModule),o=e.querySelectorAll("."+n+" ."+i+":not(."+r+")");if(o.length){for(var a=-1,s=String.fromCharCode(t.which).toLowerCase(),l=0;l<o.length;l+=1)if((o[l].textContent&&o[l].textContent[0].toLowerCase())===s||o[l]===t.target){a=l;break}t.which===it.up&&0<a&&--a,t.which===it.down&&a<o.length-1&&(a+=1),a<0&&(a=0),o[a].focus()}}}},{key:"handleProps",value:function(){this.props.isOpen?this.addEvents():this.removeEvents()}},{key:"toggle",value:function(t){return this.props.disabled?t&&t.preventDefault():this.props.toggle(t)}},{key:"render",value:function(){var t=K(this.props,["toggle","disabled","inNavbar","direction"]),e=t.className,n=t.cssModule,i=t.dropup,r=t.isOpen,o=t.group,a=t.size,s=t.nav,l=t.setActiveFromChild,u=t.active,c=t.addonType,t=F(t,["className","cssModule","dropup","isOpen","group","size","nav","setActiveFromChild","active","addonType"]),i="down"===this.props.direction&&i?"up":this.props.direction;t.tag=t.tag||(s?"li":"div");var h=!1;l&&g.a.Children.map(this.props.children[1].props.children,function(t){t.props.active&&(h=!0)});n=H(v()(e,"down"!==i&&"drop"+i,!(!s||!u)&&"active",!(!l||!h)&&"active",(R(l={},"input-group-"+c,c),R(l,"btn-group",o),R(l,"btn-group-"+a,!!a),R(l,"dropdown",!o&&!c),R(l,"show",r),R(l,"nav-item",s),l)),n);return g.a.createElement(b,B({},t,{className:n,onKeyDown:this.handleKeyDown}))}}]),yt);function yt(t){N(this,yt);t=j(this,(yt.__proto__||Object.getPrototypeOf(yt)).call(this,t));return t.addEvents=t.addEvents.bind(t),t.handleDocumentClick=t.handleDocumentClick.bind(t),t.handleKeyDown=t.handleKeyDown.bind(t),t.removeEvents=t.removeEvents.bind(t),t.toggle=t.toggle.bind(t),t}mt.propTypes=n,mt.defaultProps={isOpen:!1,direction:"down",nav:!1,active:!1,addonType:!1,inNavbar:!1,setActiveFromChild:!1},mt.childContextTypes=e;c={tag:m.a.oneOfType([m.a.func,m.a.string]),innerRef:m.a.oneOfType([m.a.object,m.a.func,m.a.string]),disabled:m.a.bool,active:m.a.bool,className:m.a.string,cssModule:m.a.object,onClick:m.a.func,href:m.a.any},n=g.a.Component,r(gt,n),i(gt,[{key:"onClick",value:function(t){this.props.disabled?t.preventDefault():("#"===this.props.href&&t.preventDefault(),this.props.onClick&&this.props.onClick(t))}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.cssModule,i=t.active,r=t.tag,o=t.innerRef,t=F(t,["className","cssModule","active","tag","innerRef"]),n=H(v()(e,"nav-link",{disabled:t.disabled,active:i}),n);return g.a.createElement(r,B({},t,{ref:o,onClick:this.onClick,className:n}))}}]),e=gt;function gt(t){N(this,gt);t=j(this,(gt.__proto__||Object.getPrototypeOf(gt)).call(this,t));return t.onClick=t.onClick.bind(t),t}e.propTypes=c,e.defaultProps={tag:"a"};n={tag:m.a.oneOfType([m.a.func,m.a.string]),listTag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,listClassName:m.a.string,cssModule:m.a.object,children:m.a.node,"aria-label":m.a.string},c=function(t){var e=t.className,n=t.listClassName,i=t.cssModule,r=t.children,o=t.tag,a=t.listTag,s=t["aria-label"],t=F(t,["className","listClassName","cssModule","children","tag","listTag","aria-label"]),e=H(v()(e),i),i=H(v()("breadcrumb",n),i);return g.a.createElement(o,B({},t,{className:e,"aria-label":s}),g.a.createElement(a,{className:i},r))};c.propTypes=n,c.defaultProps={tag:"nav",listTag:"ol","aria-label":"breadcrumb"};e={tag:m.a.oneOfType([m.a.func,m.a.string]),active:m.a.bool,className:m.a.string,cssModule:m.a.object},n=function(t){var e=t.className,n=t.cssModule,i=t.active,r=t.tag,t=F(t,["className","cssModule","active","tag"]),n=H(v()(e,!!i&&"active","breadcrumb-item"),n);return g.a.createElement(r,B({},t,{className:n,"aria-current":i?"page":void 0}))};n.propTypes=e,n.defaultProps={tag:"li"};var c={active:m.a.bool,"aria-label":m.a.string,block:m.a.bool,color:m.a.string,disabled:m.a.bool,outline:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string]),innerRef:m.a.oneOfType([m.a.object,m.a.func,m.a.string]),onClick:m.a.func,size:m.a.string,children:m.a.node,className:m.a.string,cssModule:m.a.object,close:m.a.bool},vt=(e=g.a.Component,r(_t,e),i(_t,[{key:"onClick",value:function(t){this.props.disabled?t.preventDefault():this.props.onClick&&this.props.onClick(t)}},{key:"render",value:function(){var t=this.props,e=t.active,n=t["aria-label"],i=t.block,r=t.className,o=t.close,a=t.cssModule,s=t.color,l=t.outline,u=t.size,c=t.tag,h=t.innerRef,t=F(t,["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"]);o&&void 0===t.children&&(t.children=g.a.createElement("span",{"aria-hidden":!0},"×"));s="btn"+(l?"-outline":"")+"-"+s,a=H(v()(r,{close:o},o||"btn",o||s,!!u&&"btn-"+u,!!i&&"btn-block",{active:e,disabled:this.props.disabled}),a);t.href&&"button"===c&&(c="a");o=o?"Close":null;return g.a.createElement(c,B({type:"button"===c&&t.onClick?"button":void 0},t,{className:a,ref:h,onClick:this.onClick,"aria-label":n||o}))}}]),_t);function _t(t){N(this,_t);t=j(this,(_t.__proto__||Object.getPrototypeOf(_t)).call(this,t));return t.onClick=t.onClick.bind(t),t}vt.propTypes=c,vt.defaultProps={color:"secondary",tag:"button"};function bt(t){return g.a.createElement(mt,B({group:!0},t))}n={children:m.a.node};bt.propTypes=n;e={tag:m.a.oneOfType([m.a.func,m.a.string]),"aria-label":m.a.string,className:m.a.string,cssModule:m.a.object,role:m.a.string,size:m.a.string,vertical:m.a.bool},c=function(t){var e=t.className,n=t.cssModule,i=t.size,r=t.vertical,o=t.tag,t=F(t,["className","cssModule","size","vertical","tag"]),n=H(v()(e,!!i&&"btn-group-"+i,r?"btn-group-vertical":"btn-group"),n);return g.a.createElement(o,B({},t,{className:n}))};c.propTypes=e,c.defaultProps={tag:"div",role:"group"};n={tag:m.a.oneOfType([m.a.func,m.a.string]),"aria-label":m.a.string,className:m.a.string,cssModule:m.a.object,role:m.a.string},e=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"btn-toolbar"),n);return g.a.createElement(i,B({},t,{className:n}))};e.propTypes=n,e.defaultProps={tag:"div",role:"toolbar"};c={children:m.a.node,active:m.a.bool,disabled:m.a.bool,divider:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string]),header:m.a.bool,onClick:m.a.func,className:m.a.string,cssModule:m.a.object,toggle:m.a.bool},n={toggle:m.a.func},e=g.a.Component,r(xt,e),i(xt,[{key:"onClick",value:function(t){this.props.disabled||this.props.header||this.props.divider?t.preventDefault():(this.props.onClick&&this.props.onClick(t),this.props.toggle&&this.context.toggle(t))}},{key:"getTabIndex",value:function(){return this.props.disabled||this.props.header||this.props.divider?"-1":"0"}},{key:"render",value:function(){var t=this.getTabIndex(),e=K(this.props,["toggle"]),n=e.className,i=e.cssModule,r=e.divider,o=e.tag,a=e.header,s=e.active,e=F(e,["className","cssModule","divider","tag","header","active"]),i=H(v()(n,{disabled:e.disabled,"dropdown-item":!r&&!a,active:s,"dropdown-header":a,"dropdown-divider":r}),i);return"button"===o&&(a?o="h6":r?o="div":e.href&&(o="a")),g.a.createElement(o,B({type:"button"===o&&(e.onClick||this.props.toggle)?"button":void 0},e,{tabIndex:t,className:i,onClick:this.onClick}))}}]),e=xt;function xt(t){N(this,xt);t=j(this,(xt.__proto__||Object.getPrototypeOf(xt)).call(this,t));return t.onClick=t.onClick.bind(t),t.getTabIndex=t.getTabIndex.bind(t),t}e.propTypes=c,e.defaultProps={tag:"button",toggle:!0},e.contextTypes=n;var c={tag:m.a.string,children:m.a.node.isRequired,right:m.a.bool,flip:m.a.bool,modifiers:m.a.object,className:m.a.string,cssModule:m.a.object,persist:m.a.bool},e={isOpen:m.a.bool.isRequired,direction:m.a.oneOf(["up","down","left","right"]).isRequired,inNavbar:m.a.bool.isRequired},wt={flip:{enabled:!1}},Tt={up:"top",left:"left",right:"right",down:"bottom"},n=function(t,e){var n=t.className,i=t.cssModule,r=t.right,o=t.tag,a=t.flip,s=t.modifiers,l=t.persist,t=F(t,["className","cssModule","right","tag","flip","modifiers","persist"]),n=H(v()(n,"dropdown-menu",{"dropdown-menu-right":r,show:e.isOpen}),i),i=o;return(l||e.isOpen&&!e.inNavbar)&&(i=C,l=Tt[e.direction]||"bottom",r=r?"end":"start",t.placement=l+"-"+r,t.component=o,t.modifiers=a?s:B({},s,wt)),g.a.createElement(i,B({tabIndex:"-1",role:"menu"},t,{"aria-hidden":!e.isOpen,className:n,"x-placement":t.placement}))};n.propTypes=c,n.defaultProps={tag:"div",flip:!0},n.contextTypes=e;c={caret:m.a.bool,color:m.a.string,children:m.a.node,className:m.a.string,cssModule:m.a.object,disabled:m.a.bool,onClick:m.a.func,"aria-haspopup":m.a.bool,split:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string]),nav:m.a.bool},n={isOpen:m.a.bool.isRequired,toggle:m.a.func.isRequired,inNavbar:m.a.bool.isRequired},e=g.a.Component,r(Et,e),i(Et,[{key:"onClick",value:function(t){this.props.disabled?t.preventDefault():(this.props.nav&&!this.props.tag&&t.preventDefault(),this.props.onClick&&this.props.onClick(t),this.context.toggle(t))}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.color,i=t.cssModule,r=t.caret,o=t.split,a=t.nav,s=t.tag,l=F(t,["className","color","cssModule","caret","split","nav","tag"]),t=l["aria-label"]||"Toggle Dropdown",r=H(v()(e,{"dropdown-toggle":r||o,"dropdown-toggle-split":o,"nav-link":a}),i),o=l.children||g.a.createElement("span",{className:"sr-only"},t),t=void 0;return a&&!s?(t="a",l.href="#"):s?t=s:(t=vt,l.color=n,l.cssModule=i),this.context.inNavbar?g.a.createElement(t,B({},l,{className:r,onClick:this.onClick,"aria-expanded":this.context.isOpen,children:o})):g.a.createElement(w,B({},l,{className:r,component:t,onClick:this.onClick,"aria-expanded":this.context.isOpen,children:o}))}}]),e=Et;function Et(t){N(this,Et);t=j(this,(Et.__proto__||Object.getPrototypeOf(Et)).call(this,t));return t.onClick=t.onClick.bind(t),t}function kt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function St(t,e){return t(e={exports:{}},e.exports),e.exports}e.propTypes=c,e.defaultProps={"aria-haspopup":!0,color:"secondary"},e.contextTypes=n,kt(St(function(t,e){e.__esModule=!0,e.classNamesShape=e.timeoutsShape=void 0,e.transitionTimeout=function(t){var e="transition"+t+"Timeout",n="transition"+t;return function(t){if(t[n]){if(null==t[e])return new Error(e+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof t[e])return new Error(e+" must be a number (in milliseconds)")}return null}};var n=(n=m.a)&&n.__esModule?n:{default:n};e.timeoutsShape=n.default.oneOfType([n.default.number,n.default.shape({enter:n.default.number,exit:n.default.number}).isRequired]),e.classNamesShape=n.default.oneOfType([n.default.string,n.default.shape({enter:n.default.string,exit:n.default.string,active:n.default.string}),n.default.shape({enter:n.default.string,enterDone:n.default.string,enterActive:n.default.string,exit:n.default.string,exitDone:n.default.string,exitActive:n.default.string})])}));var Pt=kt(St(function(t,e){e.__esModule=!0,e.EXITING=e.ENTERED=e.ENTERING=e.EXITED=e.UNMOUNTED=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(m.a),i=o(g.a),r=o(y.a);function o(t){return t&&t.__esModule?t:{default:t}}var a,s=e.UNMOUNTED="unmounted",l=e.EXITED="exited",u=e.ENTERING="entering",c=e.ENTERED="entered",h=e.EXITING="exiting",p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":D(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,a=i.default.Component),d.prototype.getChildContext=function(){return{transitionGroup:null}},d.prototype.componentDidMount=function(){this.updateStatus(!0)},d.prototype.componentWillReceiveProps=function(t){var e=(this.pendingState||this.state).status;t.in?(e===s&&this.setState({status:l}),e!==u&&e!==c&&(this.nextStatus=u)):e!==u&&e!==c||(this.nextStatus=h)},d.prototype.componentDidUpdate=function(){this.updateStatus()},d.prototype.componentWillUnmount=function(){this.cancelNextCallback()},d.prototype.getTimeouts=function(){var t=this.props.timeout,e=void 0,n=void 0,i=void 0,e=n=i=t;return null!=t&&"number"!=typeof t&&(e=t.exit,n=t.enter,i=t.appear),{exit:e,enter:n,appear:i}},d.prototype.updateStatus=function(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this.nextStatus;null!==n?(this.nextStatus=null,this.cancelNextCallback(),t=r.default.findDOMNode(this),n===u?this.performEnter(t,e):this.performExit(t)):this.props.unmountOnExit&&this.state.status===l&&this.setState({status:s})},d.prototype.performEnter=function(t,e){var n=this,i=this.props.enter,r=this.context.transitionGroup?this.context.transitionGroup.isMounting:e,o=this.getTimeouts();e||i?(this.props.onEnter(t,r),this.safeSetState({status:u},function(){n.props.onEntering(t,r),n.onTransitionEnd(t,o.enter,function(){n.safeSetState({status:c},function(){n.props.onEntered(t,r)})})})):this.safeSetState({status:c},function(){n.props.onEntered(t)})},d.prototype.performExit=function(t){var e=this,n=this.props.exit,i=this.getTimeouts();n?(this.props.onExit(t),this.safeSetState({status:h},function(){e.props.onExiting(t),e.onTransitionEnd(t,i.exit,function(){e.safeSetState({status:l},function(){e.props.onExited(t)})})})):this.safeSetState({status:l},function(){e.props.onExited(t)})},d.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},d.prototype.safeSetState=function(t,e){var n=this;this.pendingState=t,e=this.setNextCallback(e),this.setState(t,function(){n.pendingState=null,e()})},d.prototype.setNextCallback=function(e){var n=this,i=!0;return this.nextCallback=function(t){i&&(i=!1,n.nextCallback=null,e(t))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},d.prototype.onTransitionEnd=function(t,e,n){this.setNextCallback(n),t?(this.props.addEndListener&&this.props.addEndListener(t,this.nextCallback),null!=e&&setTimeout(this.nextCallback,e)):setTimeout(this.nextCallback,0)},d.prototype.render=function(){var t=this.state.status;if(t===s)return null;var e=this.props,n=e.children,e=function(t,e){var n,i={};for(n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}(e,["children"]);if(delete e.in,delete e.mountOnEnter,delete e.unmountOnExit,delete e.appear,delete e.enter,delete e.exit,delete e.timeout,delete e.addEndListener,delete e.onEnter,delete e.onEntering,delete e.onEntered,delete e.onExit,delete e.onExiting,delete e.onExited,"function"==typeof n)return n(t,e);n=i.default.Children.only(n);return i.default.cloneElement(n,e)},d);function d(t,e){!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":D(e))&&"function"!=typeof e?t:e}(this,a.call(this,t,e)),i=e.transitionGroup,e=i&&!i.isMounting?t.enter:t.appear,i=void 0;return n.nextStatus=null,t.in?e?(i=l,n.nextStatus=u):i=c:i=t.unmountOnExit||t.mountOnEnter?s:l,n.state={status:i},n.nextCallback=null,n}function f(){}p.contextTypes={transitionGroup:n.object},p.childContextTypes={transitionGroup:function(){}},p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4,e.default=p})),c=B({},Pt.propTypes,{children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]),tag:m.a.oneOfType([m.a.string,m.a.func]),baseClass:m.a.string,baseClassActive:m.a.string,className:m.a.string,cssModule:m.a.object,innerRef:m.a.oneOfType([m.a.object,m.a.string,m.a.func])}),e=B({},Pt.defaultProps,{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:l.Fade,appear:!0,enter:!0,exit:!0,in:!0});function Ct(t){var e=t.tag,n=t.baseClass,i=t.baseClassActive,r=t.className,o=t.cssModule,a=t.children,s=t.innerRef,l=F(t,["tag","baseClass","baseClassActive","className","cssModule","children","innerRef"]),t=X(l,et),u=K(l,et);return g.a.createElement(Pt,t,function(t){t="entered"===t,t=H(v()(r,n,t&&i),o);return g.a.createElement(e,B({className:t},u,{ref:s}),a)})}Ct.propTypes=c,Ct.defaultProps=e;n={color:m.a.string,pill:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string]),children:m.a.node,className:m.a.string,cssModule:m.a.object},c=function(t){var e=t.className,n=t.cssModule,i=t.color,r=t.pill,o=t.tag,t=F(t,["className","cssModule","color","pill","tag"]),n=H(v()(e,"badge","badge-"+i,!!r&&"badge-pill"),n);return t.href&&"span"===o&&(o="a"),g.a.createElement(o,B({},t,{className:n}))};c.propTypes=n,c.defaultProps={color:"secondary",pill:!1,tag:"span"};var e={tag:m.a.oneOfType([m.a.func,m.a.string]),inverse:m.a.bool,color:m.a.string,block:Q(m.a.bool,'Please use the props "body"'),body:m.a.bool,outline:m.a.bool,className:m.a.string,cssModule:m.a.object,innerRef:m.a.oneOfType([m.a.object,m.a.string,m.a.func])},Mt=function(t){var e=t.className,n=t.cssModule,i=t.color,r=t.block,o=t.body,a=t.inverse,s=t.outline,l=t.tag,u=t.innerRef,t=F(t,["className","cssModule","color","block","body","inverse","outline","tag","innerRef"]),n=H(v()(e,"card",!!a&&"text-white",!(!r&&!o)&&"card-body",!!i&&(s?"border":"bg")+"-"+i),n);return g.a.createElement(l,B({},t,{className:n,ref:u}))};Mt.propTypes=e,Mt.defaultProps={tag:"div"};n={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},c=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-group"),n);return g.a.createElement(i,B({},t,{className:n}))};c.propTypes=n,c.defaultProps={tag:"div"};e={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},n=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-deck"),n);return g.a.createElement(i,B({},t,{className:n}))};n.propTypes=e,n.defaultProps={tag:"div"};c={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},e=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-columns"),n);return g.a.createElement(i,B({},t,{className:n}))};e.propTypes=c,e.defaultProps={tag:"div"};n={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},c=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-body"),n);return g.a.createElement(i,B({},t,{className:n}))};c.propTypes=n,c.defaultProps={tag:"div"};e={tag:m.a.oneOfType([m.a.func,m.a.string]),innerRef:m.a.oneOfType([m.a.object,m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},n=function(t){var e=t.className,n=t.cssModule,i=t.tag,r=t.innerRef,t=F(t,["className","cssModule","tag","innerRef"]),n=H(v()(e,"card-link"),n);return g.a.createElement(i,B({},t,{ref:r,className:n}))};n.propTypes=e,n.defaultProps={tag:"a"};c={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},e=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-footer"),n);return g.a.createElement(i,B({},t,{className:n}))};e.propTypes=c,e.defaultProps={tag:"div"};n={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},c=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-header"),n);return g.a.createElement(i,B({},t,{className:n}))};c.propTypes=n,c.defaultProps={tag:"div"};e={tag:m.a.oneOfType([m.a.func,m.a.string]),top:m.a.bool,bottom:m.a.bool,className:m.a.string,cssModule:m.a.object},n=function(t){var e=t.className,n=t.cssModule,i=t.top,r=t.bottom,o=t.tag,t=F(t,["className","cssModule","top","bottom","tag"]),i=r?"card-img-bottom":i?"card-img-top":"card-img",n=H(v()(e,i),n);return g.a.createElement(o,B({},t,{className:n}))};n.propTypes=e,n.defaultProps={tag:"img"};c={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},e=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-img-overlay"),n);return g.a.createElement(i,B({},t,{className:n}))};e.propTypes=c,e.defaultProps={tag:"div"};var Lt=(n=g.a.Component,r(It,n),i(It,[{key:"onEnter",value:function(t,e){this.setState({startAnimation:!1}),this.props.onEnter(t,e)}},{key:"onEntering",value:function(t,e){var n=t.offsetHeight;return this.setState({startAnimation:!0}),this.props.onEntering(t,e),n}},{key:"onExit",value:function(t){this.setState({startAnimation:!1}),this.props.onExit(t)}},{key:"onExiting",value:function(t){this.setState({startAnimation:!0}),t.dispatchEvent(new CustomEvent("slide.bs.carousel")),this.props.onExiting(t)}},{key:"onExited",value:function(t){t.dispatchEvent(new CustomEvent("slid.bs.carousel")),this.props.onExited(t)}},{key:"render",value:function(){var r=this,t=this.props,e=t.in,o=t.children,a=t.cssModule,n=t.slide,s=t.tag,l=t.className,t=F(t,["in","children","cssModule","slide","tag","className"]);return g.a.createElement(Pt,B({},t,{enter:n,exit:n,in:e,onEnter:this.onEnter,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),function(t){var e=r.context.direction,n=t===nt.ENTERED||t===nt.EXITING,i=(t===nt.ENTERING||t===nt.EXITING)&&r.state.startAnimation&&("right"===e?"carousel-item-left":"carousel-item-right"),e=t===nt.ENTERING&&("right"===e?"carousel-item-next":"carousel-item-prev"),e=H(v()(l,"carousel-item",n&&"active",i,e),a);return g.a.createElement(s,{className:e},o)})}}]),It);function It(t){N(this,It);t=j(this,(It.__proto__||Object.getPrototypeOf(It)).call(this,t));return t.state={startAnimation:!1},t.onEnter=t.onEnter.bind(t),t.onEntering=t.onEntering.bind(t),t.onExit=t.onExit.bind(t),t.onExiting=t.onExiting.bind(t),t.onExited=t.onExited.bind(t),t}Lt.propTypes=B({},Pt.propTypes,{tag:m.a.oneOfType([m.a.func,m.a.string]),in:m.a.bool,cssModule:m.a.object,children:m.a.node,slide:m.a.bool,className:m.a.string}),Lt.defaultProps=B({},Pt.defaultProps,{tag:"div",timeout:l.Carousel,slide:!0}),Lt.contextTypes={direction:m.a.string};var At,zt,Ot=(c=g.a.Component,r(Rt,c),i(Rt,[{key:"getChildContext",value:function(){return{direction:this.state.direction}}},{key:"componentDidMount",value:function(){"carousel"===this.props.ride&&this.setInterval(),document.addEventListener("keyup",this.handleKeyPress)}},{key:"componentWillReceiveProps",value:function(t){this.setInterval(t),this.props.activeIndex+1===t.activeIndex?this.setState({direction:"right"}):this.props.activeIndex-1===t.activeIndex?this.setState({direction:"left"}):this.props.activeIndex>t.activeIndex?this.setState({direction:this.state.indicatorClicked?"left":"right"}):this.props.activeIndex!==t.activeIndex&&this.setState({direction:this.state.indicatorClicked?"right":"left"}),this.setState({indicatorClicked:!1})}},{key:"componentWillUnmount",value:function(){this.clearInterval(),document.removeEventListener("keyup",this.handleKeyPress)}},{key:"setInterval",value:(zt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props;this.clearInterval(),t.interval&&(this.cycleInterval=setInterval(function(){t.next()},parseInt(t.interval,10)))},Nt.toString=function(){return zt.toString()},Nt)},{key:"clearInterval",value:(At=function(){clearInterval(this.cycleInterval)},Dt.toString=function(){return At.toString()},Dt)},{key:"hoverStart",value:function(){var t;"hover"===this.props.pause&&this.clearInterval(),this.props.mouseEnter&&(t=this.props).mouseEnter.apply(t,arguments)}},{key:"hoverEnd",value:function(){var t;"hover"===this.props.pause&&this.setInterval(),this.props.mouseLeave&&(t=this.props).mouseLeave.apply(t,arguments)}},{key:"handleKeyPress",value:function(t){this.props.keyboard&&(37===t.keyCode?this.props.previous():39===t.keyCode&&this.props.next())}},{key:"renderItems",value:function(t,e){var n=this,i=this.props.slide;return g.a.createElement("div",{role:"listbox",className:e},t.map(function(t,e){e=e===n.props.activeIndex;return g.a.cloneElement(t,{in:e,slide:i})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.cssModule,i=t.slide,t=t.className,t=H(v()(t,"carousel",i&&"slide"),n),i=H(v()("carousel-inner"),n),n=this.props.children.filter(function(t){return null!=t&&"boolean"!=typeof t});if(n.every(function(t){return t.type===Lt}))return g.a.createElement("div",{className:t,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},this.renderItems(n,i));if(n[0]instanceof Array){var r=n[0],o=n[1],a=n[2];return g.a.createElement("div",{className:t,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},this.renderItems(r,i),o,a)}var s=n[0],r=g.a.cloneElement(s,{onClickHandler:function(t){"function"==typeof s.props.onClickHandler&&e.setState({indicatorClicked:!0},function(){return s.props.onClickHandler(t)})}}),o=n[1],a=n[2],n=n[3];return g.a.createElement("div",{className:t,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},r,this.renderItems(o,i),a,n)}}]),Rt);function Rt(t){N(this,Rt);t=j(this,(Rt.__proto__||Object.getPrototypeOf(Rt)).call(this,t));return t.handleKeyPress=t.handleKeyPress.bind(t),t.renderItems=t.renderItems.bind(t),t.hoverStart=t.hoverStart.bind(t),t.hoverEnd=t.hoverEnd.bind(t),t.state={direction:"right",indicatorClicked:!1},t}function Dt(){return At.apply(this,arguments)}function Nt(){return zt.apply(this,arguments)}Ot.propTypes={activeIndex:m.a.number,next:m.a.func.isRequired,previous:m.a.func.isRequired,keyboard:m.a.bool,pause:m.a.oneOf(["hover",!1]),ride:m.a.oneOf(["carousel"]),interval:m.a.oneOfType([m.a.number,m.a.string,m.a.bool]),children:m.a.array,mouseEnter:m.a.func,mouseLeave:m.a.func,slide:m.a.bool,cssModule:m.a.object,className:m.a.string},Ot.defaultProps={interval:5e3,pause:"hover",keyboard:!0,slide:!0},Ot.childContextTypes={direction:m.a.string};function Bt(t){var e=t.direction,n=t.onClickHandler,i=t.cssModule,r=t.directionText,o=t.className,t=H(v()(o,"carousel-control-"+e),i),o=H(v()("carousel-control-"+e+"-icon"),i),i=H(v()("sr-only"),i);return g.a.createElement("a",{className:t,role:"button",tabIndex:"0",onClick:function(t){t.preventDefault(),n()}},g.a.createElement("span",{className:o,"aria-hidden":"true"}),g.a.createElement("span",{className:i},r||e))}Bt.propTypes={direction:m.a.oneOf(["prev","next"]).isRequired,onClickHandler:m.a.func.isRequired,cssModule:m.a.object,directionText:m.a.string,className:m.a.string};function Ft(t){var e=t.items,i=t.activeIndex,r=t.cssModule,o=t.onClickHandler,t=t.className,t=H(v()(t,"carousel-indicators"),r),e=e.map(function(t,e){var n=H(v()({active:i===e}),r);return g.a.createElement("li",{key:""+(t.key||t.src)+t.caption+t.altText,onClick:function(t){t.preventDefault(),o(e)},className:n})});return g.a.createElement("ol",{className:t},e)}Ft.propTypes={items:m.a.array.isRequired,activeIndex:m.a.number.isRequired,cssModule:m.a.object,onClickHandler:m.a.func.isRequired,className:m.a.string};function jt(t){var e=t.captionHeader,n=t.captionText,i=t.cssModule,t=t.className,i=H(v()(t,"carousel-caption","d-none","d-md-block"),i);return g.a.createElement("div",{className:i},g.a.createElement("h3",null,e),g.a.createElement("p",null,n))}jt.propTypes={captionHeader:m.a.string,captionText:m.a.string.isRequired,cssModule:m.a.object,className:m.a.string};e={items:m.a.array.isRequired,indicators:m.a.bool,controls:m.a.bool,autoPlay:m.a.bool,activeIndex:m.a.number,next:m.a.func,previous:m.a.func,goToIndex:m.a.func},n=s.Component,r(Ut,n),i(Ut,[{key:"onExiting",value:function(){this.animating=!0}},{key:"onExited",value:function(){this.animating=!1}},{key:"next",value:function(){var t;this.animating||(t=this.state.activeIndex===this.props.items.length-1?0:this.state.activeIndex+1,this.setState({activeIndex:t}))}},{key:"previous",value:function(){var t;this.animating||(t=0===this.state.activeIndex?this.props.items.length-1:this.state.activeIndex-1,this.setState({activeIndex:t}))}},{key:"goToIndex",value:function(t){this.animating||this.setState({activeIndex:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoPlay,i=t.indicators,r=t.controls,o=t.items,a=t.goToIndex,s=F(t,["autoPlay","indicators","controls","items","goToIndex"]),l=this.state.activeIndex,t=o.map(function(t){return g.a.createElement(Lt,{onExiting:e.onExiting,onExited:e.onExited,key:t.src},g.a.createElement("img",{className:"d-block w-100",src:t.src,alt:t.altText}),g.a.createElement(jt,{captionText:t.caption,captionHeader:t.header||t.caption}))});return g.a.createElement(Ot,B({activeIndex:l,next:this.next,previous:this.previous,ride:n?"carousel":void 0},s),i&&g.a.createElement(Ft,{items:o,activeIndex:s.activeIndex||l,onClickHandler:a||this.goToIndex}),t,r&&g.a.createElement(Bt,{direction:"prev",directionText:"Previous",onClickHandler:s.previous||this.previous}),r&&g.a.createElement(Bt,{direction:"next",directionText:"Next",onClickHandler:s.next||this.next}))}}]),c=Ut;function Ut(t){N(this,Ut);t=j(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).call(this,t));return t.animating=!1,t.state={activeIndex:0},t.next=t.next.bind(t),t.previous=t.previous.bind(t),t.goToIndex=t.goToIndex.bind(t),t.onExiting=t.onExiting.bind(t),t.onExited=t.onExited.bind(t),t}c.propTypes=e,c.defaultProps={controls:!0,indicators:!0,autoPlay:!0};n={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},e=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-subtitle"),n);return g.a.createElement(i,B({},t,{className:n}))};e.propTypes=n,e.defaultProps={tag:"h6"};c={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},n=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-text"),n);return g.a.createElement(i,B({},t,{className:n}))};n.propTypes=c,n.defaultProps={tag:"p"};e={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},c=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"card-title"),n);return g.a.createElement(i,B({},t,{className:n}))};c.propTypes=e,c.defaultProps={tag:"h5"},m.a.string,m.a.oneOfType([m.a.string,m.a.number]).isRequired,m.a.string.isRequired,m.a.node,m.a.bool,m.a.bool,m.a.bool,m.a.string,m.a.object,m.a.oneOfType([m.a.node,m.a.array,m.a.func]),m.a.oneOfType([m.a.object,m.a.string,m.a.func]);var n={children:m.a.node.isRequired,className:m.a.string,placement:m.a.string,placementPrefix:m.a.string,arrowClassName:m.a.string,hideArrow:m.a.bool,tag:m.a.string,isOpen:m.a.bool.isRequired,cssModule:m.a.object,offset:m.a.oneOfType([m.a.string,m.a.number]),fallbackPlacement:m.a.oneOfType([m.a.string,m.a.array]),flip:m.a.bool,container:o,target:o.isRequired,modifiers:m.a.object,boundariesElement:m.a.oneOfType([m.a.string,tt])},e={popperManager:m.a.object.isRequired},Vt=(c=g.a.Component,r(Zt,c),i(Zt,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this.setTargetNode,getTargetNode:this.getTargetNode}}}},{key:"componentDidMount",value:function(){this.handleProps()}},{key:"componentDidUpdate",value:function(t){this.props.isOpen!==t.isOpen?this.handleProps():this._element&&this.renderIntoSubtree()}},{key:"componentWillUnmount",value:function(){this.hide()}},{key:"setTargetNode",value:function(t){this.targetNode=t}},{key:"getTargetNode",value:function(){return this.targetNode}},{key:"getContainerNode",value:function(){return lt(this.props.container)}},{key:"handlePlacementChange",value:function(t){return this.state.placement!==t.placement&&this.setState({placement:t.placement}),t}},{key:"handleProps",value:function(){"inline"!==this.props.container&&(this.props.isOpen?this.show():this.hide())}},{key:"hide",value:function(){this._element&&(this.getContainerNode().removeChild(this._element),y.a.unmountComponentAtNode(this._element),this._element=null)}},{key:"show",value:function(){this._element=document.createElement("div"),this.getContainerNode().appendChild(this._element),this.renderIntoSubtree(),this._element.childNodes&&this._element.childNodes[0]&&this._element.childNodes[0].focus&&this._element.childNodes[0].focus()}},{key:"renderIntoSubtree",value:function(){y.a.unstable_renderSubtreeIntoContainer(this,this.renderChildren(),this._element)}},{key:"renderChildren",value:function(){var t=this.props,e=t.cssModule,n=t.children,i=(t.isOpen,t.flip),r=(t.target,t.offset),o=t.fallbackPlacement,a=t.placementPrefix,s=t.arrowClassName,l=t.hideArrow,u=t.className,c=t.tag,h=(t.container,t.modifiers),p=t.boundariesElement,t=F(t,["cssModule","children","isOpen","flip","target","offset","fallbackPlacement","placementPrefix","arrowClassName","hideArrow","className","tag","container","modifiers","boundariesElement"]),s=H(v()("arrow",s),e),e=(this.state.placement||t.placement).split("-")[0],e=H(v()(u,a?a+"-"+e:e),this.props.cssModule),h=B({offset:{offset:r},flip:{enabled:i,behavior:o},preventOverflow:{boundariesElement:p},update:{enabled:!0,order:950,fn:this.handlePlacementChange}},h);return g.a.createElement(C,B({modifiers:h},t,{component:c,className:e,"x-placement":this.state.placement||t.placement}),n,!l&&g.a.createElement(L,{className:s}))}},{key:"render",value:function(){return this.setTargetNode(lt(this.props.target)),"inline"===this.props.container&&this.props.isOpen?this.renderChildren():null}}]),Zt);function Zt(t){N(this,Zt);t=j(this,(Zt.__proto__||Object.getPrototypeOf(Zt)).call(this,t));return t.handlePlacementChange=t.handlePlacementChange.bind(t),t.setTargetNode=t.setTargetNode.bind(t),t.getTargetNode=t.getTargetNode.bind(t),t.state={},t}Vt.propTypes=n,Vt.defaultProps={boundariesElement:"scrollParent",placement:"auto",hideArrow:!1,isOpen:!1,offset:0,fallbackPlacement:"flip",flip:!0,container:"body",modifiers:{}},Vt.childContextTypes=e;c=function(t,e){return e.popperManager.setTargetNode(lt(t.target)),null};c.contextTypes={popperManager:m.a.object.isRequired},c.propTypes={target:o.isRequired};var qt={placement:m.a.oneOf(u),target:o.isRequired,container:o,boundariesElement:m.a.oneOfType([m.a.string,tt]),isOpen:m.a.bool,disabled:m.a.bool,hideArrow:m.a.bool,className:m.a.string,innerClassName:m.a.string,placementPrefix:m.a.string,cssModule:m.a.object,toggle:m.a.func,delay:m.a.oneOfType([m.a.shape({show:m.a.number,hide:m.a.number}),m.a.number]),modifiers:m.a.object,offset:m.a.oneOfType([m.a.string,m.a.number])},Gt={show:0,hide:0},n={isOpen:!1,hideArrow:!1,placement:"right",placementPrefix:"bs-popover",delay:Gt,toggle:function(){}},c=(e=g.a.Component,r(Wt,e),i(Wt,[{key:"componentDidMount",value:function(){this._target=lt(this.props.target),this.handleProps()}},{key:"componentDidUpdate",value:function(){this.handleProps()}},{key:"componentWillUnmount",value:function(){this.clearShowTimeout(),this.clearHideTimeout(),this.removeTargetEvents()}},{key:"getRef",value:function(t){this._popover=t}},{key:"getDelay",value:function(t){var e=this.props.delay;return"object"===(void 0===e?"undefined":D(e))?(isNaN(e[t])?Gt:e)[t]:e}},{key:"handleProps",value:function(){this.props.isOpen?this.show():this.hide()}},{key:"show",value:function(){this.clearHideTimeout(),this.addTargetEvents(),this.props.isOpen||(this.clearShowTimeout(),this._showTimeout=setTimeout(this.toggle,this.getDelay("show")))}},{key:"hide",value:function(){this.clearShowTimeout(),this.removeTargetEvents(),this.props.isOpen&&(this.clearHideTimeout(),this._hideTimeout=setTimeout(this.toggle,this.getDelay("hide")))}},{key:"clearShowTimeout",value:function(){clearTimeout(this._showTimeout),this._showTimeout=void 0}},{key:"clearHideTimeout",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}},{key:"handleDocumentClick",value:function(t){this._target&&(t.target===this._target||this._target.contains(t.target)||t.target===this._popover||this._popover&&this._popover.contains(t.target)||(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen&&this.toggle(t)))}},{key:"addTargetEvents",value:function(){var e=this;["click","touchstart"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)})}},{key:"removeTargetEvents",value:function(){var e=this;["click","touchstart"].forEach(function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)})}},{key:"toggle",value:function(t){return this.props.disabled?t&&t.preventDefault():this.props.toggle(t)}},{key:"render",value:function(){if(!this.props.isOpen)return null;var t=K(this.props,Object.keys(qt)),e=H(v()("popover-inner",this.props.innerClassName),this.props.cssModule),n=H(v()("popover","show",this.props.className),this.props.cssModule);return g.a.createElement(Vt,{className:n,target:this.props.target,isOpen:this.props.isOpen,hideArrow:this.props.hideArrow,placement:this.props.placement,placementPrefix:this.props.placementPrefix,container:this.props.container,modifiers:this.props.modifiers,offset:this.props.offset,boundariesElement:this.props.boundariesElement},g.a.createElement("div",B({},t,{className:e,ref:this.getRef})))}}]),Wt);function Wt(t){N(this,Wt);t=j(this,(Wt.__proto__||Object.getPrototypeOf(Wt)).call(this,t));return t.addTargetEvents=t.addTargetEvents.bind(t),t.handleDocumentClick=t.handleDocumentClick.bind(t),t.removeTargetEvents=t.removeTargetEvents.bind(t),t.getRef=t.getRef.bind(t),t.toggle=t.toggle.bind(t),t.show=t.show.bind(t),t.hide=t.hide.bind(t),t._target=null,t}c.propTypes=qt,c.defaultProps=n;e={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},c=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"popover-header"),n);return g.a.createElement(i,B({},t,{className:n}))};c.propTypes=e,c.defaultProps={tag:"h3"};n={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},e=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"popover-body"),n);return g.a.createElement(i,B({},t,{className:n}))};e.propTypes=n,e.defaultProps={tag:"div"};c={children:m.a.node,bar:m.a.bool,multi:m.a.bool,tag:m.a.string,value:m.a.oneOfType([m.a.string,m.a.number]),max:m.a.oneOfType([m.a.string,m.a.number]),animated:m.a.bool,striped:m.a.bool,color:m.a.string,className:m.a.string,barClassName:m.a.string,cssModule:m.a.object},n=function(t){var e=t.children,n=t.className,i=t.barClassName,r=t.cssModule,o=t.value,a=t.max,s=t.animated,l=t.striped,u=t.color,c=t.bar,h=t.multi,p=t.tag,d=F(t,["children","className","barClassName","cssModule","value","max","animated","striped","color","bar","multi","tag"]),f=I()(o)/I()(a)*100,t=H(v()(n,"progress"),r),r=H(v()("progress-bar",c&&n||i,s?"progress-bar-animated":null,u?"bg-"+u:null,l||s?"progress-bar-striped":null),r),e=h?e:g.a.createElement("div",{className:r,style:{width:f+"%"},role:"progressbar","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":a,children:e});return c?e:g.a.createElement(p,B({},d,{className:t,children:e}))};n.propTypes=c,n.defaultProps={tag:"div",value:0,max:100};var e={children:m.a.node.isRequired,node:m.a.any},$t=(c=g.a.Component,r(Ht,c),i(Ht,[{key:"componentWillUnmount",value:function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"render",value:function(){return rt?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),y.a.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}]),Ht);function Ht(){return N(this,Ht),j(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}function Kt(){}$t.propTypes=e;var n=m.a.shape(Ct.propTypes),c={isOpen:m.a.bool,autoFocus:m.a.bool,centered:m.a.bool,size:m.a.string,toggle:m.a.func,keyboard:m.a.bool,role:m.a.string,labelledBy:m.a.string,backdrop:m.a.oneOfType([m.a.bool,m.a.oneOf(["static"])]),onEnter:m.a.func,onExit:m.a.func,onOpened:m.a.func,onClosed:m.a.func,children:m.a.node,className:m.a.string,wrapClassName:m.a.string,modalClassName:m.a.string,backdropClassName:m.a.string,contentClassName:m.a.string,external:m.a.node,fade:m.a.bool,cssModule:m.a.object,zIndex:m.a.oneOfType([m.a.number,m.a.string]),backdropTransition:n,modalTransition:n,innerRef:m.a.oneOfType([m.a.object,m.a.string,m.a.func])},Xt=Object.keys(c),e={isOpen:!1,autoFocus:!0,centered:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:Kt,onClosed:Kt,modalTransition:{timeout:l.Modal},backdropTransition:{mountOnEnter:!0,timeout:l.Fade}},n=(n=g.a.Component,r(Jt,n),i(Jt,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter(),this.state.isOpen&&this.props.autoFocus&&this.setFocus(),this._isMounted=!0}},{key:"componentWillReceiveProps",value:function(t){t.isOpen&&!this.props.isOpen&&this.setState({isOpen:t.isOpen})}},{key:"componentWillUpdate",value:function(t,e){e.isOpen&&!this.state.isOpen&&this.init()}},{key:"componentDidUpdate",value:function(t,e){this.props.autoFocus&&this.state.isOpen&&!e.isOpen&&this.setFocus(),this._element&&t.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)}},{key:"componentWillUnmount",value:function(){this.props.onExit&&this.props.onExit(),this.state.isOpen&&this.destroy(),this._isMounted=!1}},{key:"onOpened",value:function(t,e){this.props.onOpened(),(this.props.modalTransition.onEntered||Kt)(t,e)}},{key:"onClosed",value:function(t){this.props.onClosed(),(this.props.modalTransition.onExited||Kt)(t),this.destroy(),this._isMounted&&this.setState({isOpen:!1})}},{key:"setFocus",value:function(){this._dialog&&this._dialog.parentNode&&"function"==typeof this._dialog.parentNode.focus&&this._dialog.parentNode.focus()}},{key:"getFocusableChildren",value:function(){return this._element.querySelectorAll(ct.join(", "))}},{key:"getFocusedChild",value:function(){var e=void 0,n=this.getFocusableChildren();try{e=document.activeElement}catch(t){e=n[0]}return e}},{key:"handleBackdropClick",value:function(t){var e;t.target===this._mouseDownElement&&(t.stopPropagation(),this.props.isOpen&&!0===this.props.backdrop&&(e=this._dialog,t.target&&!e.contains(t.target)&&this.props.toggle&&this.props.toggle(t)))}},{key:"handleTab",value:function(t){if(9===t.which){for(var e=this.getFocusableChildren(),n=e.length,i=this.getFocusedChild(),r=0,o=0;o<n;o+=1)if(e[o]===i){r=o;break}t.shiftKey&&0===r?(t.preventDefault(),e[n-1].focus()):t.shiftKey||r!==n-1||(t.preventDefault(),e[0].focus())}}},{key:"handleBackdropMouseDown",value:function(t){this._mouseDownElement=t.target}},{key:"handleEscape",value:function(t){this.props.isOpen&&this.props.keyboard&&27===t.keyCode&&this.props.toggle&&this.props.toggle(t)}},{key:"init",value:function(){try{this._triggeringElement=document.activeElement}catch(t){this._triggeringElement=null}this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._originalBodyPadding=G(),W(),document.body.appendChild(this._element),0===Jt.openCount&&(document.body.className=v()(document.body.className,H("modal-open",this.props.cssModule))),Jt.openCount+=1}},{key:"destroy",value:function(){var t;this._element&&(document.body.removeChild(this._element),this._element=null),this._triggeringElement&&(this._triggeringElement.focus&&this._triggeringElement.focus(),this._triggeringElement=null),Jt.openCount<=1&&(t=H("modal-open",this.props.cssModule),t=new RegExp("(^| )"+t+"( |$)"),document.body.className=document.body.className.replace(t," ").trim()),--Jt.openCount,Z(this._originalBodyPadding)}},{key:"renderModalDialog",value:function(){var e=this,t=K(this.props,Xt);return g.a.createElement("div",B({},t,{className:H(v()("modal-dialog",this.props.className,(R(t={},"modal-"+this.props.size,this.props.size),R(t,"modal-dialog-centered",this.props.centered),t)),this.props.cssModule),role:"document",ref:function(t){e._dialog=t}}),g.a.createElement("div",{className:H(v()("modal-content",this.props.contentClassName),this.props.cssModule)},this.props.children))}},{key:"render",value:function(){if(this.state.isOpen){var t=this.props,e=t.wrapClassName,n=t.modalClassName,i=t.backdropClassName,r=t.cssModule,o=t.isOpen,a=t.backdrop,s=t.role,l=t.labelledBy,u=t.external,c=t.innerRef,h={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":l,role:s,tabIndex:"-1"},t=this.props.fade,l=B({},Ct.defaultProps,this.props.modalTransition,{baseClass:t?this.props.modalTransition.baseClass:"",timeout:t?this.props.modalTransition.timeout:0}),s=B({},Ct.defaultProps,this.props.backdropTransition,{baseClass:t?this.props.backdropTransition.baseClass:"",timeout:t?this.props.backdropTransition.timeout:0}),i=t?g.a.createElement(Ct,B({},s,{in:o&&!!a,cssModule:r,className:H(v()("modal-backdrop",i),r)})):g.a.createElement("div",{className:H(v()("modal-backdrop","show",i),r)});return g.a.createElement($t,{node:this._element},g.a.createElement("div",{className:H(e)},g.a.createElement(Ct,B({},h,l,{in:o,onEntered:this.onOpened,onExited:this.onClosed,cssModule:r,className:H(v()("modal",n),r),innerRef:c}),u,this.renderModalDialog()),i))}return null}}]),Jt);function Jt(t){N(this,Jt);var e=j(this,(Jt.__proto__||Object.getPrototypeOf(Jt)).call(this,t));return e._element=null,e._originalBodyPadding=null,e.getFocusableChildren=e.getFocusableChildren.bind(e),e.handleBackdropClick=e.handleBackdropClick.bind(e),e.handleBackdropMouseDown=e.handleBackdropMouseDown.bind(e),e.handleEscape=e.handleEscape.bind(e),e.handleTab=e.handleTab.bind(e),e.onOpened=e.onOpened.bind(e),e.onClosed=e.onClosed.bind(e),e.state={isOpen:t.isOpen},t.isOpen&&e.init(),e}n.propTypes=c,n.defaultProps=e,n.openCount=0;e={tag:m.a.oneOfType([m.a.func,m.a.string]),wrapTag:m.a.oneOfType([m.a.func,m.a.string]),toggle:m.a.func,className:m.a.string,cssModule:m.a.object,children:m.a.node,closeAriaLabel:m.a.string,charCode:m.a.oneOfType([m.a.string,m.a.number]),close:m.a.object},n=function(t){var e=void 0,n=t.className,i=t.cssModule,r=t.children,o=t.toggle,a=t.tag,s=t.wrapTag,l=t.closeAriaLabel,u=t.charCode,c=t.close,t=F(t,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),n=H(v()(n,"modal-header"),i);return!c&&o&&(u="number"==typeof u?String.fromCharCode(u):u,e=g.a.createElement("button",{type:"button",onClick:o,className:H("close",i),"aria-label":l},g.a.createElement("span",{"aria-hidden":"true"},u))),g.a.createElement(s,B({},t,{className:n}),g.a.createElement(a,{className:H("modal-title",i)},r),c||e)};n.propTypes=e,n.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215};e={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},n=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"modal-body"),n);return g.a.createElement(i,B({},t,{className:n}))};n.propTypes=e,n.defaultProps={tag:"div"};e={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},n=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"modal-footer"),n);return g.a.createElement(i,B({},t,{className:n}))};n.propTypes=e,n.defaultProps={tag:"div"};var Yt={placement:m.a.oneOf(u),target:o.isRequired,container:o,isOpen:m.a.bool,disabled:m.a.bool,hideArrow:m.a.bool,boundariesElement:m.a.oneOfType([m.a.string,tt]),className:m.a.string,innerClassName:m.a.string,arrowClassName:m.a.string,cssModule:m.a.object,toggle:m.a.func,autohide:m.a.bool,placementPrefix:m.a.string,delay:m.a.oneOfType([m.a.shape({show:m.a.number,hide:m.a.number}),m.a.number]),modifiers:m.a.object,offset:m.a.oneOfType([m.a.string,m.a.number]),innerRef:m.a.oneOfType([m.a.func,m.a.string,m.a.object]),trigger:m.a.string},Qt={show:0,hide:250},u={isOpen:!1,hideArrow:!1,placement:"top",placementPrefix:"bs-tooltip",delay:Qt,autohide:!0,toggle:function(){}},te=(o=g.a.Component,r(ee,o),i(ee,[{key:"componentDidMount",value:function(){this._target=lt(this.props.target),this.addTargetEvents()}},{key:"componentWillUnmount",value:function(){this.clearHideTimeout(),this.clearShowTimeout(),this.removeTargetEvents()}},{key:"onMouseOverTooltip",value:function(t){this._hideTimeout&&this.clearHideTimeout(),this._showTimeout=setTimeout(this.show.bind(this,t),this.getDelay("show"))}},{key:"onMouseLeaveTooltip",value:function(t){this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide.bind(this,t),this.getDelay("hide"))}},{key:"onMouseOverTooltipContent",value:function(){this.props.autohide||this._hideTimeout&&this.clearHideTimeout()}},{key:"onMouseLeaveTooltipContent",value:function(t){this.props.autohide||(this._showTimeout&&this.clearShowTimeout(),t.persist(),this._hideTimeout=setTimeout(this.hide.bind(this,t),this.getDelay("hide")))}},{key:"onEscKeyDown",value:function(t){"Escape"===t.key&&this.hide(t)}},{key:"getDelay",value:function(t){var e=this.props.delay;return"object"===(void 0===e?"undefined":D(e))?(isNaN(e[t])?Qt:e)[t]:e}},{key:"show",value:function(t){this.props.isOpen||(this.clearShowTimeout(),this.toggle(t))}},{key:"hide",value:function(t){this.props.isOpen&&(this.clearHideTimeout(),this.toggle(t))}},{key:"clearShowTimeout",value:function(){clearTimeout(this._showTimeout),this._showTimeout=void 0}},{key:"clearHideTimeout",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}},{key:"handleDocumentClick",value:function(t){null===this._target||t.target!==this._target&&!this._target.contains(t.target)?this.props.isOpen&&"tooltip"!==t.target.getAttribute("role")&&(this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide.bind(this,t),this.getDelay("hide"))):(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen||this.toggle(t))}},{key:"addTargetEvents",value:function(){var t,e=this;this.props.trigger?-1===(t=this.props.trigger.split(" ")).indexOf("manual")&&(-1<t.indexOf("click")&&["click","touchstart"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)}),null!==this._target&&(-1<t.indexOf("hover")&&(this._target.addEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.addEventListener("mouseout",this.onMouseLeaveTooltip,!0)),-1<t.indexOf("focus")&&(this._target.addEventListener("focusin",this.show,!0),this._target.addEventListener("focusout",this.hide,!0)),this._target.addEventListener("keydown",this.onEscKeyDown,!0))):(null!==this._target&&(this._target.addEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.addEventListener("mouseout",this.onMouseLeaveTooltip,!0),this._target.addEventListener("keydown",this.onEscKeyDown,!0),this._target.addEventListener("focusin",this.show,!0),this._target.addEventListener("focusout",this.hide,!0)),["click","touchstart"].forEach(function(t){return document.addEventListener(t,e.handleDocumentClick,!0)}))}},{key:"removeTargetEvents",value:function(){var e=this;null!==this._target&&(this._target.removeEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.removeEventListener("mouseout",this.onMouseLeaveTooltip,!0),this._target.addEventListener("keydown",this.onEscKeyDown,!0),this._target.addEventListener("focusin",this.show,!0),this._target.addEventListener("focusout",this.hide,!0)),["click","touchstart"].forEach(function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)})}},{key:"toggle",value:function(t){return this.props.disabled?t&&t.preventDefault():this.props.toggle(t)}},{key:"render",value:function(){if(!this.props.isOpen)return null;var t=K(this.props,Object.keys(Yt)),e=H(v()("tooltip-inner",this.props.innerClassName),this.props.cssModule),n=H(v()("tooltip","show",this.props.className),this.props.cssModule);return g.a.createElement(Vt,{className:n,target:this.props.target,isOpen:this.props.isOpen,hideArrow:this.props.hideArrow,boundariesElement:this.props.boundariesElement,placement:this.props.placement,placementPrefix:this.props.placementPrefix,arrowClassName:this.props.arrowClassName,container:this.props.container,modifiers:this.props.modifiers,offset:this.props.offset,cssModule:this.props.cssModule},g.a.createElement("div",B({},t,{ref:this.props.innerRef,className:e,role:"tooltip","aria-hidden":this.props.isOpen,onMouseOver:this.onMouseOverTooltipContent,onMouseLeave:this.onMouseLeaveTooltipContent,onKeyDown:this.onEscKeyDown})))}}]),ee);function ee(t){N(this,ee);t=j(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,t));return t._target=null,t.addTargetEvents=t.addTargetEvents.bind(t),t.handleDocumentClick=t.handleDocumentClick.bind(t),t.removeTargetEvents=t.removeTargetEvents.bind(t),t.toggle=t.toggle.bind(t),t.onMouseOverTooltip=t.onMouseOverTooltip.bind(t),t.onMouseLeaveTooltip=t.onMouseLeaveTooltip.bind(t),t.onMouseOverTooltipContent=t.onMouseOverTooltipContent.bind(t),t.onMouseLeaveTooltipContent=t.onMouseLeaveTooltipContent.bind(t),t.show=t.show.bind(t),t.hide=t.hide.bind(t),t.onEscKeyDown=t.onEscKeyDown.bind(t),t}te.propTypes=Yt,te.defaultProps=u;o={className:m.a.string,cssModule:m.a.object,size:m.a.string,bordered:m.a.bool,borderless:m.a.bool,striped:m.a.bool,inverse:Q(m.a.bool,'Please use the prop "dark"'),dark:m.a.bool,hover:m.a.bool,responsive:m.a.oneOfType([m.a.bool,m.a.string]),tag:m.a.oneOfType([m.a.func,m.a.string]),responsiveTag:m.a.oneOfType([m.a.func,m.a.string])},u=function(t){var e=t.className,n=t.cssModule,i=t.size,r=t.bordered,o=t.borderless,a=t.striped,s=t.inverse,l=t.dark,u=t.hover,c=t.responsive,h=t.tag,p=t.responsiveTag,t=F(t,["className","cssModule","size","bordered","borderless","striped","inverse","dark","hover","responsive","tag","responsiveTag"]),n=H(v()(e,"table",!!i&&"table-"+i,!!r&&"table-bordered",!!o&&"table-borderless",!!a&&"table-striped",!(!l&&!s)&&"table-dark",!!u&&"table-hover"),n),n=g.a.createElement(h,B({},t,{className:n}));if(c){c=!0===c?"table-responsive":"table-responsive-"+c;return g.a.createElement(p,{className:c},n)}return n};u.propTypes=o,u.defaultProps={tag:"table",responsiveTag:"div"};o={tag:m.a.oneOfType([m.a.func,m.a.string]),flush:m.a.bool,className:m.a.string,cssModule:m.a.object},u=function(t){var e=t.className,n=t.cssModule,i=t.tag,r=t.flush,t=F(t,["className","cssModule","tag","flush"]),n=H(v()(e,"list-group",!!r&&"list-group-flush"),n);return g.a.createElement(i,B({},t,{className:n}))};u.propTypes=o,u.defaultProps={tag:"ul"};var o={children:m.a.node,inline:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string]),innerRef:m.a.oneOfType([m.a.object,m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object},ne=(u=s.Component,r(ie,u),i(ie,[{key:"getRef",value:function(t){this.props.innerRef&&this.props.innerRef(t),this.ref=t}},{key:"submit",value:function(){this.ref&&this.ref.submit()}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.cssModule,i=t.inline,r=t.tag,o=t.innerRef,t=F(t,["className","cssModule","inline","tag","innerRef"]),n=H(v()(e,!!i&&"form-inline"),n);return g.a.createElement(r,B({},t,{ref:o,className:n}))}}]),ie);function ie(t){N(this,ie);t=j(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,t));return t.getRef=t.getRef.bind(t),t.submit=t.submit.bind(t),t}ne.propTypes=o,ne.defaultProps={tag:"form"};u={children:m.a.node,tag:m.a.string,className:m.a.string,cssModule:m.a.object,valid:m.a.bool,tooltip:m.a.bool},o=function(t){var e=t.className,n=t.cssModule,i=t.valid,r=t.tooltip,o=t.tag,t=F(t,["className","cssModule","valid","tooltip","tag"]),r=r?"tooltip":"feedback",n=H(v()(e,i?"valid-"+r:"invalid-"+r),n);return g.a.createElement(o,B({},t,{className:n}))};o.propTypes=u,o.defaultProps={tag:"div",valid:void 0};var u={children:m.a.node,row:m.a.bool,check:m.a.bool,inline:m.a.bool,disabled:m.a.bool,tag:m.a.string,className:m.a.string,cssModule:m.a.object},re=function(t){var e=t.className,n=t.cssModule,i=t.row,r=t.disabled,o=t.check,a=t.inline,s=t.tag,t=F(t,["className","cssModule","row","disabled","check","inline","tag"]),n=H(v()(e,"position-relative",!!i&&"row",o?"form-check":"form-group",!(!o||!a)&&"form-check-inline",!(!o||!r)&&"disabled"),n);return g.a.createElement(s,B({},t,{className:n}))};re.propTypes=u,re.defaultProps={tag:"div"};o={children:m.a.node,inline:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string]),color:m.a.string,className:m.a.string,cssModule:m.a.object},u=function(t){var e=t.className,n=t.cssModule,i=t.inline,r=t.color,o=t.tag,t=F(t,["className","cssModule","inline","color","tag"]),n=H(v()(e,!i&&"form-text",!!r&&"text-"+r),n);return g.a.createElement(o,B({},t,{className:n}))};u.propTypes=o,u.defaultProps={tag:"small",color:"muted"};var o={children:m.a.node,type:m.a.string,size:m.a.string,bsSize:m.a.string,state:Q(m.a.string,'Please use the props "valid" and "invalid" to indicate the state.'),valid:m.a.bool,invalid:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string]),innerRef:m.a.oneOfType([m.a.object,m.a.func,m.a.string]),static:Q(m.a.bool,'Please use the prop "plaintext"'),plaintext:m.a.bool,addon:m.a.bool,className:m.a.string,cssModule:m.a.object},oe=(u=g.a.Component,r(ae,u),i(ae,[{key:"getRef",value:function(t){this.props.innerRef&&this.props.innerRef(t),this.ref=t}},{key:"focus",value:function(){this.ref&&this.ref.focus()}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.cssModule,i=t.type,r=t.bsSize,o=t.state,a=t.valid,s=t.invalid,l=t.tag,u=t.addon,c=t.static,h=t.plaintext,p=t.innerRef,d=F(t,["className","cssModule","type","bsSize","state","valid","invalid","tag","addon","static","plaintext","innerRef"]),f=-1<["radio","checkbox"].indexOf(i),m=new RegExp("\\D","g"),y=l||("select"===i||"textarea"===i?i:"input"),t="form-control";h||c?(t+="-plaintext",y=l||"p"):"file"===i?t+="-file":f&&(t=u?null:"form-check-input"),o&&void 0===a&&void 0===s&&("danger"===o?s=!0:"success"===o&&(a=!0)),d.size&&m.test(d.size)&&(Y('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),r=d.size,delete d.size);n=H(v()(e,s&&"is-invalid",a&&"is-valid",!!r&&"form-control-"+r,t),n);return("input"===y||l&&"function"==typeof l)&&(d.type=i),!d.children||h||c||"select"===i||"string"!=typeof y||"select"===y||(Y('Input with a type of "'+i+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete d.children),g.a.createElement(y,B({},d,{ref:p,className:n}))}}]),ae);function ae(t){N(this,ae);t=j(this,(ae.__proto__||Object.getPrototypeOf(ae)).call(this,t));return t.getRef=t.getRef.bind(t),t.focus=t.focus.bind(t),t}oe.propTypes=o,oe.defaultProps={type:"text"};u={tag:m.a.oneOfType([m.a.func,m.a.string]),size:m.a.string,className:m.a.string,cssModule:m.a.object},o=function(t){var e=t.className,n=t.cssModule,i=t.tag,r=t.size,t=F(t,["className","cssModule","tag","size"]),n=H(v()(e,"input-group",r?"input-group-"+r:null),n);return g.a.createElement(i,B({},t,{className:n}))};o.propTypes=u,o.defaultProps={tag:"div"};function se(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"input-group-text"),n);return g.a.createElement(i,B({},t,{className:n}))}u={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object};se.propTypes=u,se.defaultProps={tag:"span"};o={tag:m.a.oneOfType([m.a.func,m.a.string]),addonType:m.a.oneOf(["prepend","append"]).isRequired,children:m.a.node,className:m.a.string,cssModule:m.a.object},u=function(t){var e=t.className,n=t.cssModule,i=t.tag,r=t.addonType,o=t.children,t=F(t,["className","cssModule","tag","addonType","children"]),n=H(v()(e,"input-group-"+r),n);return"string"==typeof o?g.a.createElement(i,B({},t,{className:n}),g.a.createElement(se,{children:o})):g.a.createElement(i,B({},t,{className:n,children:o}))};u.propTypes=o,u.defaultProps={tag:"div"},m.a.oneOfType([m.a.func,m.a.string]),m.a.oneOf(["prepend","append"]).isRequired,m.a.node,m.a.string,m.a.object,m.a.string,m.a.object,m.a.oneOf(["prepend","append"]).isRequired,m.a.node;function le(t,e,n){return!0===n||""===n?t?"col":"col-"+e:"auto"===n?t?"col-auto":"col-"+e+"-auto":t?"col-"+n:"col-"+e+"-"+n}var o=m.a.oneOfType([m.a.number,m.a.string]),u=m.a.oneOfType([m.a.string,m.a.number,m.a.shape({size:o,push:Q(o,'Please use the prop "order"'),pull:Q(o,'Please use the prop "order"'),order:o,offset:o})]),o={children:m.a.node,hidden:m.a.bool,check:m.a.bool,size:m.a.string,for:m.a.string,tag:m.a.string,className:m.a.string,cssModule:m.a.object,xs:u,sm:u,md:u,lg:u,xl:u,widths:m.a.array},ue=function(a){var t=a.className,s=a.cssModule,e=a.hidden,n=a.widths,i=a.tag,r=a.check,o=a.size,l=a.for,u=F(a,["className","cssModule","hidden","widths","tag","check","size","for"]),c=[];n.forEach(function(t,e){var n,i,r,o=a[t];delete u[t],!o&&""!==o||(n=!e,r=void 0,h()(o)?(i=n?"-":"-"+t+"-",r=le(n,t,o.size),c.push(H(v()((R(e={},r,o.size||""===o.size),R(e,"order"+i+o.order,o.order||0===o.order),R(e,"offset"+i+o.offset,o.offset||0===o.offset),e))),s)):(r=le(n,t,o),c.push(r)))});o=H(v()(t,!!e&&"sr-only",!!r&&"form-check-label",!!o&&"col-form-label-"+o,c,!!c.length&&"col-form-label"),s);return g.a.createElement(i,B({htmlFor:l},u,{className:o}))};ue.propTypes=o,ue.defaultProps={tag:"label",widths:["xs","sm","md","lg","xl"]},m.a.bool,m.a.bool,m.a.node,m.a.string,m.a.object,m.a.bool,m.a.bool,m.a.bool,m.a.bool,m.a.bool,m.a.bool,m.a.oneOfType([m.a.func,m.a.string]),m.a.bool;u={children:m.a.node,className:m.a.string,listClassName:m.a.string,cssModule:m.a.object,size:m.a.string,tag:m.a.oneOfType([m.a.func,m.a.string]),listTag:m.a.oneOfType([m.a.func,m.a.string]),"aria-label":m.a.string},o=function(t){var e=t.className,n=t.listClassName,i=t.cssModule,r=t.size,o=t.tag,a=t.listTag,s=t["aria-label"],t=F(t,["className","listClassName","cssModule","size","tag","listTag","aria-label"]),e=H(v()(e),i),i=H(v()(n,"pagination",R({},"pagination-"+r,!!r)),i);return g.a.createElement(o,{className:e,"aria-label":s},g.a.createElement(a,B({},t,{className:i})))};o.propTypes=u,o.defaultProps={tag:"nav",listTag:"ul","aria-label":"pagination"};u={active:m.a.bool,children:m.a.node,className:m.a.string,cssModule:m.a.object,disabled:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string])},o=function(t){var e=t.active,n=t.className,i=t.cssModule,r=t.disabled,o=t.tag,t=F(t,["active","className","cssModule","disabled","tag"]),i=H(v()(n,"page-item",{active:e,disabled:r}),i);return g.a.createElement(o,B({},t,{className:i}))};o.propTypes=u,o.defaultProps={tag:"li"};u={"aria-label":m.a.string,children:m.a.node,className:m.a.string,cssModule:m.a.object,next:m.a.bool,previous:m.a.bool,tag:m.a.oneOfType([m.a.func,m.a.string])},o=function(t){var e=t.className,n=t.cssModule,i=t.next,r=t.previous,o=t.tag,a=F(t,["className","cssModule","next","previous","tag"]),s=H(v()(e,"page-link"),n),e=void 0;r?e="Previous":i&&(e="Next");n=t["aria-label"]||e,e=void 0;r?e="«":i&&(e="»");t=t.children;return t&&Array.isArray(t)&&0===t.length&&(t=null),a.href||"a"!==o||(o="button"),(r||i)&&(t=[g.a.createElement("span",{"aria-hidden":"true",key:"caret"},t||e),g.a.createElement("span",{className:"sr-only",key:"sr"},n)]),g.a.createElement(o,B({},a,{className:s,"aria-label":n}),t)};o.propTypes=u,o.defaultProps={tag:"a"};var ce={tag:m.a.oneOfType([m.a.func,m.a.string]),activeTab:m.a.any,className:m.a.string,cssModule:m.a.object},u={activeTabId:m.a.any},o=(o=s.Component,r(he,o),i(he,null,[{key:"getDerivedStateFromProps",value:function(t,e){return e.activeTab!==t.activeTab?{activeTab:t.activeTab}:null}}]),i(he,[{key:"getChildContext",value:function(){return{activeTabId:this.state.activeTab}}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.cssModule,i=t.tag,t=K(this.props,Object.keys(ce)),n=H(v()("tab-content",e),n);return g.a.createElement(i,B({},t,{className:n}))}}]),he);function he(t){N(this,he);t=j(this,(he.__proto__||Object.getPrototypeOf(he)).call(this,t));return t.state={activeTab:t.props.activeTab},t}!function(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"==typeof t.getDerivedStateFromProps||"function"==typeof e.getSnapshotBeforeUpdate){var n=null,i=null,r=null;if("function"==typeof e.componentWillMount?n="componentWillMount":"function"==typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof e.componentWillReceiveProps?i="componentWillReceiveProps":"function"==typeof e.UNSAFE_componentWillReceiveProps&&(i="UNSAFE_componentWillReceiveProps"),"function"==typeof e.componentWillUpdate?r="componentWillUpdate":"function"==typeof e.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==n||null!==i||null!==r){var o=t.displayName||t.name,a="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof t.getDerivedStateFromProps&&(e.componentWillMount=A,e.componentWillReceiveProps=z),"function"==typeof e.getSnapshotBeforeUpdate){if("function"!=typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=O;var s=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,t,e,n)}}}}(o),o.propTypes=ce,o.defaultProps={tag:"div"},o.childContextTypes=u;o={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.string,cssModule:m.a.object,tabId:m.a.any},u={activeTabId:m.a.any};o={tag:m.a.oneOfType([m.a.func,m.a.string]),fluid:m.a.bool,className:m.a.string,cssModule:m.a.object},u=function(t){var e=t.className,n=t.cssModule,i=t.tag,r=t.fluid,t=F(t,["className","cssModule","tag","fluid"]),n=H(v()(e,"jumbotron",!!r&&"jumbotron-fluid"),n);return g.a.createElement(i,B({},t,{className:n}))};u.propTypes=o,u.defaultProps={tag:"div"};o={children:m.a.node,className:m.a.string,closeClassName:m.a.string,closeAriaLabel:m.a.string,cssModule:m.a.object,color:m.a.string,fade:m.a.bool,isOpen:m.a.bool,toggle:m.a.func,tag:m.a.oneOfType([m.a.func,m.a.string]),transition:m.a.shape(Ct.propTypes),innerRef:m.a.oneOfType([m.a.object,m.a.string,m.a.func])},u={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",fade:!0,transition:B({},Ct.defaultProps,{unmountOnExit:!0})};function pe(t){var e=t.className,n=t.closeClassName,i=t.closeAriaLabel,r=t.cssModule,o=t.tag,a=t.color,s=t.isOpen,l=t.toggle,u=t.children,c=t.transition,h=t.fade,p=t.innerRef,t=F(t,["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition","fade","innerRef"]),a=H(v()(e,"alert","alert-"+a,{"alert-dismissible":l}),r),r=H(v()("close",n),r),c=B({},Ct.defaultProps,c,{baseClass:h?c.baseClass:"",timeout:h?c.timeout:0});return g.a.createElement(Ct,B({},t,c,{tag:o,className:a,in:s,role:"alert",innerRef:p}),l?g.a.createElement("button",{type:"button",className:r,"aria-label":i,onClick:l},g.a.createElement("span",{"aria-hidden":"true"},"×")):null,u)}pe.propTypes=o,pe.defaultProps=u;var o=B({},Pt.propTypes,{isOpen:m.a.bool,children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]),tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.node,navbar:m.a.bool,cssModule:m.a.object,innerRef:m.a.oneOfType([m.a.func,m.a.string,m.a.object])}),u=B({},Pt.defaultProps,{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:l.Collapse}),de=(R(l={},nt.ENTERING,"collapsing"),R(l,nt.ENTERED,"collapse show"),R(l,nt.EXITING,"collapsing"),R(l,nt.EXITED,"collapse"),l);function fe(t){return t.scrollHeight}var me=(l=s.Component,r(ye,l),i(ye,[{key:"onEntering",value:function(t,e){this.setState({height:fe(t)}),this.props.onEntering(t,e)}},{key:"onEntered",value:function(t,e){this.setState({height:null}),this.props.onEntered(t,e)}},{key:"onExit",value:function(t){this.setState({height:fe(t)}),this.props.onExit(t)}},{key:"onExiting",value:function(t){t.offsetHeight,this.setState({height:0}),this.props.onExiting(t)}},{key:"onExited",value:function(t){this.setState({height:null}),this.props.onExited(t)}},{key:"render",value:function(){var n=this,t=this.props,i=t.tag,e=t.isOpen,r=t.className,o=t.navbar,a=t.cssModule,s=t.children,l=(t.innerRef,F(t,["tag","isOpen","className","navbar","cssModule","children","innerRef"])),u=this.state.height,t=X(l,et),c=K(l,et);return g.a.createElement(Pt,B({},t,{in:e,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),function(t){var e=de[t]||"collapse",t=H(v()(r,e,o&&"navbar-collapse"),a),e=null===u?null:{height:u};return g.a.createElement(i,B({},c,{style:B({},c.style,e),className:t,ref:n.props.innerRef}),s)})}}]),ye);function ye(t){N(this,ye);var e=j(this,(ye.__proto__||Object.getPrototypeOf(ye)).call(this,t));return e.state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach(function(t){e[t]=e[t].bind(e)}),e}me.propTypes=o,me.defaultProps=u;function ge(t){t.preventDefault()}o={tag:m.a.oneOfType([m.a.func,m.a.string]),active:m.a.bool,disabled:m.a.bool,color:m.a.string,action:m.a.bool,className:m.a.any,cssModule:m.a.object},u=function(t){var e=t.className,n=t.cssModule,i=t.tag,r=t.active,o=t.disabled,a=t.action,s=t.color,t=F(t,["className","cssModule","tag","active","disabled","action","color"]),n=H(v()(e,!!r&&"active",!!o&&"disabled",!!a&&"list-group-item-action",!!s&&"list-group-item-"+s,"list-group-item"),n);return o&&(t.onClick=ge),g.a.createElement(i,B({},t,{className:n}))};u.propTypes=o,u.defaultProps={tag:"li"};o={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.any,cssModule:m.a.object},u=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"list-group-item-heading"),n);return g.a.createElement(i,B({},t,{className:n}))};u.propTypes=o,u.defaultProps={tag:"h5"};o={tag:m.a.oneOfType([m.a.func,m.a.string]),className:m.a.any,cssModule:m.a.object},u=function(t){var e=t.className,n=t.cssModule,i=t.tag,t=F(t,["className","cssModule","tag"]),n=H(v()(e,"list-group-item-text"),n);return g.a.createElement(i,B({},t,{className:n}))};function ve(t){N(this,ve);t=j(this,(ve.__proto__||Object.getPrototypeOf(ve)).call(this,t));return t.state={isOpen:!1},t.toggle=t.toggle.bind(t),t}function _e(t){N(this,_e);t=j(this,(_e.__proto__||Object.getPrototypeOf(_e)).call(this,t));return t.state={isOpen:!0},t.toggle=t.toggle.bind(t),t}u.propTypes=o,u.defaultProps={tag:"p"},o=s.Component,r(_e,o),i(_e,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return g.a.createElement(pe,B({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}]),u=s.Component,r(ve,u),i(ve,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return g.a.createElement(bt,B({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}]);o={toggler:m.a.string.isRequired,toggleEvents:m.a.arrayOf(m.a.string)},u={toggleEvents:p},p=s.Component,r(be,p),i(be,[{key:"componentDidMount",value:function(){this.togglers=at(this.props.toggler),this.togglers.length&&(this.removeEventListeners=ut(this.togglers,this.toggle,this.props.toggleEvents))}},{key:"componentWillUnmount",value:function(){this.togglers.length&&this.removeEventListeners&&this.removeEventListeners()}},{key:"toggle",value:function(t){this.setState(function(t){return{isOpen:!t.isOpen}}),t.preventDefault()}},{key:"render",value:function(){var t=this.props,t=(t.toggleEvents,F(t,["toggleEvents"]));return g.a.createElement(me,B({isOpen:this.state.isOpen},t))}}]),p=be;function be(t){N(this,be);t=j(this,(be.__proto__||Object.getPrototypeOf(be)).call(this,t));return t.togglers=null,t.removeEventListeners=null,t.toggle=t.toggle.bind(t),t.state={isOpen:!1},t}function xe(t){N(this,xe);t=j(this,(xe.__proto__||Object.getPrototypeOf(xe)).call(this,t));return t.state={isOpen:!1},t.toggle=t.toggle.bind(t),t}function we(t){N(this,we);t=j(this,(we.__proto__||Object.getPrototypeOf(we)).call(this,t));return t.state={isOpen:!1},t.toggle=t.toggle.bind(t),t}p.propTypes=o,p.defaultProps=u,u=s.Component,r(we,u),i(we,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return g.a.createElement(mt,B({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}]),u=s.Component,r(xe,u),i(xe,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return g.a.createElement(te,B({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])},function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(33)},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n,i=arguments[e];for(n in i)r.call(i,n)&&(t[n]=i[n])}return t};var r=Object.prototype.hasOwnProperty},function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),o=n(5),i=n(0),i=n.n(i),a=n(22);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=h(n);return t=i?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==s(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,r.a.Component);var e=c(n);function n(t){return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),e.call(this,t)}return l(n.prototype,[{key:"render",value:function(){var e=[];return 1<this.props.bufferParcels.length&&this.props.bufferParcels.forEach(function(t){return e.push(t.properties)}),r.a.createElement("div",null,r.a.createElement(o.b,{className:"border-0 pt-4 ml-2 m-1 pt-3"},r.a.createElement("p",{className:"mb-2",style:{fontSize:"16px"}},"Search for an address or enter a parcel ID below.")),r.a.createElement(o.b,{className:"border-0 ml-1 mr-2"},r.a.createElement(o.g,{htmlFor:"geocoder",className:"text-uppercase m-1"},r.a.createElement("h6",null,"Address Search")),r.a.createElement("div",{id:"geocoder",style:{width:"100%"},className:"m-1"}),r.a.createElement(o.e,{className:"m-1 pt-3"},r.a.createElement(o.g,{htmlFor:"parcelIdSearch",className:"text-uppercase"},r.a.createElement("h6",null,"Parcel Search")),r.a.createElement("div",{id:"parcelIDSearchWrapper",className:"input-group"},r.a.createElement(o.f,{id:"parcelIdSearch",type:"text",onChange:this.props.handleParcelIDSearch,name:"parcelID",value:this.props.searchedParcelID}),r.a.createElement(o.a,{id:"parcelIDSearchButton",onClick:this.props.searchForParcelIDButton,className:"ml-1"},"Search"))),r.a.createElement(o.e,{className:"m-1 pt-3"},r.a.createElement(o.g,{htmlFor:"selectedParcelID",className:"text-uppercase"},r.a.createElement("h6",null,"Selected Parcel")),r.a.createElement("p",{className:"mb-2"},null==this.props.selectedParcel?"No parcel found":"".concat(this.props.selectedParcelPID," - ").concat(this.props.selectedParcel.properties.FULL_ADDRE)))),r.a.createElement(o.b,{className:"border-0 pt-0 ml-2 m-1 pt-3"},r.a.createElement("p",{className:"mb-2",style:{fontSize:"16px"}},"Enter a buffer distance and a the mailing list csv will appear below.")),r.a.createElement(o.b,{className:"border-0 ml-1 mr-2 pb-3"},r.a.createElement(o.d,null,r.a.createElement(o.e,{className:"m-1"},r.a.createElement(o.g,{htmlFor:"bufferDistance",className:"text-uppercase"},r.a.createElement("h6",null,"Buffer Distance (feet)")),r.a.createElement(o.f,{id:"bufferDistance",type:"number",min:0,max:1e5,onChange:this.props.handleBufferChange,name:"bufferDistance",value:this.props.bufferDistance,className:"mb-2"}),r.a.createElement(o.a,{onClick:this.props.updateParcelBufferButton},"Buffer Parcel"),null==this.props.bufferParcels?r.a.createElement("p",null,"Please select a parcel before buffering."):null),r.a.createElement(o.e,{className:"m-1 mt-3"},r.a.createElement(o.g,{htmlFor:"bufferDistance",className:"font-weight-bold text-uppercase"},0<e.length?r.a.createElement(a.CSVLink,{data:e,filename:"mailingList.csv"},"Download Mailing List CSV"):null)))))}}]),n}();(e.default=n).propTypes={selectedParcelPID:i.a.string,handleBufferChange:i.a.func,bufferDistance:i.a.number,bufferParcels:i.a.array,updateParcelBufferButton:i.a.func,handleParcelIDSearch:i.a.func,searchedParcelID:i.a.string,searchForParcelIDButton:i.a.func,selectedParcel:i.a.object}},function(t,g,v){"use strict";v.r(g),function(t){var e=v(1),n=v.n(e),i=v(0),e=v.n(i),i=v(24),r=v.n(i),o=v(25);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=i?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==a(t)&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}v(10);var h=t.browser?v(40):null,p=t.browser?v(71):null,i=t.browser?v(73):{},d=i.featureLayer,f=i.request,m=i.Util,y=t.browser?v(2):{},t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,n.a.Component);var t=u(e);function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.apply(this,arguments)}return s(e.prototype,[{key:"componentDidMount",value:function(){var n=this;this.parcelFeatureLayer=d({url:"https://services.arcgis.com/sFnw0xNflSi8J0uh/ArcGIS/rest/services/AbutterParcels_Oct2020/FeatureServer/0"});function e(t){n.parcelFeatureLayer.query().contains(t).run(function(t,e){t?console.error(t):(e=e.features[0],n.props.handleParcelChange(e),void 0!==e?(n.map.getSource("highlight").setData(e.geometry),n.map.setLayoutProperty("highlight-line","visibility","visible"),n.map.setLayoutProperty("highlight-polygon","visibility","visible")):(n.props.handleBufferParcels(""),n.map.setLayoutProperty("highlight-line","visibility","none"),n.map.setLayoutProperty("highlight-polygon","visibility","none")))})}this.map=new p.Map({container:this.mapContainer,center:[-71.067449,42.352568],zoom:13,style:{version:8,sources:{"esri-grey":{type:"raster",tiles:["https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}"],tileSize:256},"cob-basemap":{type:"raster",tiles:["https://awsgeo.boston.gov/arcgis/rest/services/Basemaps/BostonCityBasemap_WM/MapServer/tile/{z}/{y}/{x}"],tileSize:256}},layers:[{id:"esri-grey",type:"raster",source:"esri-grey",minzoom:0,maxzoom:24},{id:"cob-basemap",type:"raster",source:"cob-basemap",minzoom:0,maxzoom:24}]}});var t=Object(o.a)().publicRuntimeConfig.MapboxAccessToken,i=new h({accessToken:t,flyTo:{bearing:0,speed:5,curve:1},placeholder:"Search for an address…",country:"us",bbox:[-71.216812,42.226992,-70.986099,42.395573],zoom:18});document.getElementById("geocoder").appendChild(i.onAdd(this.map)),this.map.on("load",function(){n.map.loadImage("https://patterns.boston.gov/images/global/icons/mapping/waypoint-freedom-red.svg",function(t,e){t&&console.error("Could not load red waypoint icon. Error message:",t),n.map.addImage("red-waypoint",e)}),n.map.addSource("buffer-parcels",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),n.map.addLayer({id:"buffer-parcels-polygon",type:"fill",source:"buffer-parcels",layout:{},paint:{"fill-color":"#288BE4"},minzoom:0,maxzoom:24}),n.map.addLayer({id:"buffer-parcels-line",source:"buffer-parcels",type:"line",paint:{"line-width":2.5,"line-color":"#1f6eb5"},layout:{"line-cap":"round","line-join":"round"}}),n.map.addSource("buffer",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),n.map.addLayer({id:"buffer-polygon",source:"buffer",type:"fill",paint:{"fill-color":"#D2D2D2","fill-outline-color":"#58585B","fill-opacity":.5}}),n.map.addLayer({id:"buffer-line",source:"buffer",type:"line",paint:{"line-width":2,"line-color":"#58585B"},layout:{"line-cap":"round","line-join":"round"}}),n.map.addSource("highlight",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),n.map.addLayer({id:"highlight-line",source:"highlight",type:"line",paint:{"line-width":6,"line-color":"#FB4D42"},layout:{"line-cap":"round","line-join":"round"}}),n.map.addLayer({id:"highlight-polygon",source:"highlight",type:"fill",paint:{"fill-color":"#FB4D42","fill-outline-color":"#FB4D42","fill-opacity":.5}}),n.map.addSource("geocoding-result-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),n.map.addLayer({id:"geocoding-result",source:"geocoding-result-point",type:"symbol",layout:{visibility:"none","icon-image":"red-waypoint","icon-size":.25}})}),i.on("result",function(t){i._map.setLayoutProperty("geocoding-result","visibility","visible").getSource("geocoding-result-point").setData(t.result.geometry),e(t.result.geometry)}),this.map.on("click",function(t){n.map.setLayoutProperty("geocoding-result","visibility","none"),n.map.setLayoutProperty("buffer-parcels-polygon","visibility","none"),n.map.setLayoutProperty("buffer-parcels-line","visibility","none"),n.map.setLayoutProperty("buffer-polygon","visibility","none"),n.map.setLayoutProperty("buffer-line","visibility","none");t=y.latLng(t.lngLat);e(t)})}},{key:"componentDidUpdate",value:function(t){var e,n=this;t.searchForParcelIDButtonClicked!=this.props.searchForParcelIDButtonClicked?(e="PID_LONG = '".concat(this.props.searchedParcelID,"'"),this.parcelFeatureLayer.query().where(e).run(function(t,e){t?console.error(t):(e=e.features[0],n.props.handleParcelChange(e),void 0!==e&&(n.map.getSource("highlight").setData(e.geometry),e=r()(e),n.map.fitBounds(e,{padding:200})))})):t.bufferButtonClicked!=this.props.bufferButtonClicked&&null!=this.props.selectedParcel&&(t=m.geojsonToArcGIS(this.props.selectedParcel),f("https://awsgeo.boston.gov/arcgis/rest/services/Utilities/Geometry/GeometryServer/buffer",{geometries:{geometryType:"esriGeometryPolygon",geometries:[t.geometry]},inSR:4326,outSR:4326,bufferSR:2249,distances:this.props.bufferDistance,unit:9003,unionResults:!0},function(t,e){t?console.error(t):(e=m.arcgisToGeoJSON(e.geometries[0]),n.map.getSource("buffer").setData(e),n.map.setLayoutProperty("buffer-polygon","visibility","visible"),n.map.setLayoutProperty("buffer-line","visibility","visible"),n.parcelFeatureLayer.query().intersects(e).run(function(t,e){t?console.error(t):(n.map.getSource("buffer-parcels").setData(e),n.map.setLayoutProperty("buffer-parcels-polygon","visibility","visible"),n.map.setLayoutProperty("buffer-parcels-line","visibility","visible"),n.props.handleBufferParcels(e.features))}))}))}},{key:"componentWillUnmount",value:function(){this.map.remove()}},{key:"render",value:function(){var e=this;return console.log("map"),n.a.createElement("div",null,n.a.createElement("div",{style:{height:"100vh",width:"100%"},ref:function(t){return e.mapContainer=t}},n.a.createElement("div",{style:{zIndex:1e3,position:"relative !important"}})))}}]),e}();(g.default=t).propTypes={handleParcelChange:e.a.func,selectedParcel:e.a.object,bufferDistance:e.a.number,handleBufferParcels:e.a.func,bufferButtonClicked:e.a.bool,searchedParcelID:e.a.string,searchForParcelIDButtonClicked:e.a.bool}}.call(this,v(38))},function(t,e){t.exports=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}},function(t,K,e){"use strict";(function(t){var n="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,i=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(n&&0<=navigator.userAgent.indexOf(t[e]))return 1;return 0}(),r=n&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},i))}};function o(t){return t&&"[object Function]"==={}.toString.call(t)}function h(t,e){if(1!==t.nodeType)return[];t=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?t[e]:t}function u(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function c(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=h(t),n=e.overflow,i=e.overflowX,e=e.overflowY;return/(auto|scroll|overlay)/.test(n+e+i)?t:c(u(t))}function p(t){return t&&t.referenceNode?t.referenceNode:t}var e=n&&!(!window.MSInputMethodContext||!document.documentMode),a=n&&/MSIE 10/.test(navigator.userAgent);function d(t){return 11===t?e:10!==t&&e||a}function y(t){if(!t)return document.documentElement;for(var e=d(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===h(n,"position")?y(n):n:(t?t.ownerDocument:document).documentElement}function s(t){return null!==t.parentNode?s(t.parentNode):t}function f(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?t:e,r=n?e:t,n=document.createRange();n.setStart(i,0),n.setEnd(r,0);n=n.commonAncestorContainer;if(t!==n&&e!==n||i.contains(r))return"BODY"===(r=(i=n).nodeName)||"HTML"!==r&&y(i.firstElementChild)!==i?y(n):n;n=s(t);return n.host?f(n.host,e):f(t,s(e).host)}function m(t,e){var n="top"===(1<arguments.length&&void 0!==e?e:"top")?"scrollTop":"scrollLeft",e=t.nodeName;if("BODY"!==e&&"HTML"!==e)return t[n];e=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||e)[n]}function l(t,e){var n="x"===e?"Left":"Top",e="Left"==n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+e+"Width"])}function g(t,e,n,i){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],d(10)?parseInt(n["offset"+t])+parseInt(i["margin"+("Height"===t?"Top":"Left")])+parseInt(i["margin"+("Height"===t?"Bottom":"Right")]):0)}function v(t){var e=t.body,n=t.documentElement,t=d(10)&&getComputedStyle(n);return{height:g("Height",e,n,t),width:g("Width",e,n,t)}}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},x=function(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),t},w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t){return w({},t,{right:t.left+t.width,bottom:t.top+t.height})}function k(t){var e,n,i={};try{d(10)?(i=t.getBoundingClientRect(),e=m(t,"top"),n=m(t,"left"),i.top+=e,i.left+=n,i.bottom+=e,i.right+=n):i=t.getBoundingClientRect()}catch(t){}var r={left:i.left,top:i.top,width:i.right-i.left,height:i.bottom-i.top},o="HTML"===t.nodeName?v(t.ownerDocument):{},a=o.width||t.clientWidth||r.width,s=o.height||t.clientHeight||r.height,o=t.offsetWidth-a,a=t.offsetHeight-s;return(o||a)&&(o-=l(s=h(t),"x"),a-=l(s,"y"),r.width-=o,r.height-=a),E(r)}function S(t,e,n){var i=2<arguments.length&&void 0!==n&&n,r=d(10),o="HTML"===e.nodeName,a=k(t),s=k(e),l=c(t),u=h(e),n=parseFloat(u.borderTopWidth),t=parseFloat(u.borderLeftWidth);i&&o&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));a=E({top:a.top-s.top-n,left:a.left-s.left-t,width:a.width,height:a.height});return a.marginTop=0,a.marginLeft=0,!r&&o&&(o=parseFloat(u.marginTop),u=parseFloat(u.marginLeft),a.top-=n-o,a.bottom-=n-o,a.left-=t-u,a.right-=t-u,a.marginTop=o,a.marginLeft=u),(r&&!i?e.contains(l):e===l&&"BODY"!==l.nodeName)&&(a=function(t,e,n){var i=2<arguments.length&&void 0!==n&&n,n=m(e,"top"),e=m(e,"left"),i=i?-1:1;return t.top+=n*i,t.bottom+=n*i,t.left+=e*i,t.right+=e*i,t}(a,e)),a}function P(t){if(!t||!t.parentElement||d())return document.documentElement;for(var e=t.parentElement;e&&"none"===h(e,"transform");)e=e.parentElement;return e||document.documentElement}function C(t,e,n,i,r){var o=4<arguments.length&&void 0!==r&&r,a={top:0,left:0},s=o?P(t):f(t,p(e));"viewport"===i?a=function(t,e){var n=1<arguments.length&&void 0!==e&&e,i=t.ownerDocument.documentElement,r=S(t,i),o=Math.max(i.clientWidth,window.innerWidth||0),e=Math.max(i.clientHeight,window.innerHeight||0),t=n?0:m(i),i=n?0:m(i,"left");return E({top:t-r.top+r.marginTop,left:i-r.left+r.marginLeft,width:o,height:e})}(s,o):(r=void 0,"scrollParent"===i?"BODY"===(r=c(u(e))).nodeName&&(r=t.ownerDocument.documentElement):r="window"===i?t.ownerDocument.documentElement:i,l=S(r,s,o),"HTML"!==r.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===h(e,"position"))return!0;e=u(e);return!!e&&t(e)}(s)?a=l:(t=(s=v(t.ownerDocument)).height,s=s.width,a.top+=l.top-l.marginTop,a.bottom=t+l.top,a.left+=l.left-l.marginLeft,a.right=s+l.left));var l="number"==typeof(n=n||0);return a.left+=l?n:n.left||0,a.top+=l?n:n.top||0,a.right-=l?n:n.right||0,a.bottom-=l?n:n.bottom||0,a}function M(t,e,n,i,r,o){o=5<arguments.length&&void 0!==o?o:0;if(-1===t.indexOf("auto"))return t;var r=C(n,i,o,r),a={top:{width:r.width,height:e.top-r.top},right:{width:r.right-e.right,height:r.height},bottom:{width:r.width,height:r.bottom-e.bottom},left:{width:e.left-r.left,height:r.height}},e=Object.keys(a).map(function(t){return w({key:t},a[t],{area:(t=a[t]).width*t.height})}).sort(function(t,e){return e.area-t.area}),r=e.filter(function(t){var e=t.width,t=t.height;return e>=n.clientWidth&&t>=n.clientHeight}),e=(0<r.length?r:e)[0].key,t=t.split("-")[1];return e+(t?"-"+t:"")}function L(t,e,n,i){i=3<arguments.length&&void 0!==i?i:null;return S(n,i?P(e):f(e,p(n)),i)}function I(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),e=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+e,height:t.offsetHeight+n}}function A(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function z(t,e,n){n=n.split("-")[0];var i=I(t),r={width:i.width,height:i.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",t=o?"height":"width",o=o?"width":"height";return r[a]=e[a]+e[t]/2-i[t]/2,r[s]=n===s?e[s]-i[o]:e[A(s)],r}function O(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function R(t,n,e){return(void 0===e?t:t.slice(0,function(t,e){if(Array.prototype.findIndex)return t.findIndex(function(t){return t.name===e});var n=O(t,function(t){return t.name===e});return t.indexOf(n)}(t,e))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&o(e)&&(n.offsets.popper=E(n.offsets.popper),n.offsets.reference=E(n.offsets.reference),n=e(n,t))}),n}function D(t,n){return t.some(function(t){var e=t.name;return t.enabled&&e===n})}function N(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length;i++){var r=e[i],r=r?""+r+n:t;if(void 0!==document.body.style[r])return r}return null}function B(t){t=t.ownerDocument;return t?t.defaultView:window}function F(){var t,e,n;this.state.eventsEnabled||(this.state=(t=this.reference,this.options,e=this.state,n=this.scheduleUpdate,e.updateBound=n,B(t).addEventListener("resize",e.updateBound,{passive:!0}),function t(e,n,i,r){var o="BODY"===e.nodeName,e=o?e.ownerDocument.defaultView:e;e.addEventListener(n,i,{passive:!0}),o||t(c(e.parentNode),n,i,r),r.push(e)}(t=c(t),"scroll",e.updateBound,e.scrollParents),e.scrollElement=t,e.eventsEnabled=!0,e))}function j(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function U(n,i){Object.keys(i).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&j(i[t])&&(e="px"),n.style[t]=i[t]+e})}var V=n&&/Firefox/i.test(navigator.userAgent);function Z(t,e,n){var i,r=O(t,function(t){return t.name===e}),o=!!r&&t.some(function(t){return t.name===n&&t.enabled&&t.order<r.order});return o||(i="`"+e+"`",t="`"+n+"`",console.warn(t+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")),o}var q=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],G=q.slice(3);function W(t,e){e=1<arguments.length&&void 0!==e&&e,t=G.indexOf(t),t=G.slice(t+1).concat(G.slice(0,t));return e?t.reverse():t}var $={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e,n,i=t.placement,r=i.split("-")[0],o=i.split("-")[1];return o&&(e=(n=t.offsets).reference,i=n.popper,r=(n=-1!==["bottom","top"].indexOf(r))?"width":"height",r={start:_({},n=n?"left":"top",e[n]),end:_({},n,e[n]+e[r]-i[r])},t.offsets.popper=w({},i,r[o])),t}},offset:{order:200,enabled:!0,fn:function(t,e){var r,o,a,s,n=e.offset,i=t.placement,l=t.offsets,u=l.popper,c=l.reference,e=i.split("-")[0],l=j(+n)?[+n,0]:(i=n,r=u,o=c,a=[0,0],s=-1!==["right","left"].indexOf(n=e),c=i.split(/(\+|\-)/).map(function(t){return t.trim()}),n=c.indexOf(O(c,function(t){return-1!==t.search(/,|\s/)})),c[n]&&-1===c[n].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead."),i=/\s*,\s*|\s+/,(-1!==n?[c.slice(0,n).concat([c[n].split(i)[0]]),[c[n].split(i)[1]].concat(c.slice(n+1))]:[c]).map(function(t,e){var n=(1===e?!s:s)?"height":"width",i=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,i=!0,t):i?(t[t.length-1]+=e,i=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,i){var r=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+r[1],r=r[2];if(!o)return t;if(0!==r.indexOf("%"))return"vh"===r||"vw"===r?("vh"===r?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o:o;var a=void 0;switch(r){case"%p":a=n;break;case"%":case"%r":default:a=i}return E(a)[e]/100*o}(t,n,r,o)})}).forEach(function(n,i){n.forEach(function(t,e){j(t)&&(a[i]+=t*("-"===n[e-1]?-1:1))})}),a);return"left"===e?(u.top+=l[0],u.left-=l[1]):"right"===e?(u.top+=l[0],u.left+=l[1]):"top"===e?(u.left+=l[0],u.top-=l[1]):"bottom"===e&&(u.left+=l[0],u.top+=l[1]),t.popper=u,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,i){var e=i.boundariesElement||y(t.instance.popper);t.instance.reference===e&&(e=y(e));var n=N("transform"),r=t.instance.popper.style,o=r.top,a=r.left,s=r[n];r.top="",r.left="",r[n]="";var l=C(t.instance.popper,t.instance.reference,i.padding,e,t.positionFixed);r.top=o,r.left=a,r[n]=s,i.boundaries=l;var s=i.priority,u=t.offsets.popper,c={primary:function(t){var e=u[t];return u[t]<l[t]&&!i.escapeWithReference&&(e=Math.max(u[t],l[t])),_({},t,e)},secondary:function(t){var e="right"===t?"left":"top",n=u[e];return u[t]>l[t]&&!i.escapeWithReference&&(n=Math.min(u[e],l[t]-("right"===t?u.width:u.height))),_({},e,n)}};return s.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";u=w({},u,c[e](t))}),t.offsets.popper=u,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,i=e.reference,r=t.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(r),e=a?"right":"bottom",r=a?"left":"top",a=a?"width":"height";return n[e]<o(i[r])&&(t.offsets.popper[r]=o(i[r])-n[a]),n[r]>o(i[e])&&(t.offsets.popper[r]=o(i[e])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){if(!Z(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if("string"==typeof n){if(!(n=t.instance.popper.querySelector(n)))return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],r=t.offsets,o=r.popper,a=r.reference,s=-1!==["left","right"].indexOf(i),l=s?"height":"width",u=s?"Top":"Left",c=u.toLowerCase(),e=s?"left":"top",r=s?"bottom":"right",i=I(n)[l];a[r]-i<o[c]&&(t.offsets.popper[c]-=o[c]-(a[r]-i)),a[c]+i>o[r]&&(t.offsets.popper[c]+=a[c]+i-o[r]),t.offsets.popper=E(t.offsets.popper);s=a[c]+a[l]/2-i/2,r=h(t.instance.popper),a=parseFloat(r["margin"+u]),u=parseFloat(r["border"+u+"Width"]),u=s-t.offsets.popper[c]-a-u,u=Math.max(Math.min(o[l]-i,u),0);return t.arrowElement=n,t.offsets.arrow=(_(n={},c,Math.round(u)),_(n,e,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(u,c){if(D(u.instance.modifiers,"inner"))return u;if(u.flipped&&u.placement===u.originalPlacement)return u;var h=C(u.instance.popper,u.instance.reference,c.padding,c.boundariesElement,u.positionFixed),p=u.placement.split("-")[0],d=A(p),f=u.placement.split("-")[1]||"",m=[];switch(c.behavior){case"flip":m=[p,d];break;case"clockwise":m=W(p);break;case"counterclockwise":m=W(p,!0);break;default:m=c.behavior}return m.forEach(function(t,e){if(p!==t||m.length===e+1)return u;p=u.placement.split("-")[0],d=A(p);var n=u.offsets.popper,i=u.offsets.reference,r=Math.floor,o="left"===p&&r(n.right)>r(i.left)||"right"===p&&r(n.left)<r(i.right)||"top"===p&&r(n.bottom)>r(i.top)||"bottom"===p&&r(n.top)<r(i.bottom),a=r(n.left)<r(h.left),s=r(n.right)>r(h.right),l=r(n.top)<r(h.top),t=r(n.bottom)>r(h.bottom),i="left"===p&&a||"right"===p&&s||"top"===p&&l||"bottom"===p&&t,n=-1!==["top","bottom"].indexOf(p),r=!!c.flipVariations&&(n&&"start"===f&&a||n&&"end"===f&&s||!n&&"start"===f&&l||!n&&"end"===f&&t),l=!!c.flipVariationsByContent&&(n&&"start"===f&&s||n&&"end"===f&&a||!n&&"start"===f&&t||!n&&"end"===f&&l),l=r||l;(o||i||l)&&(u.flipped=!0,(o||i)&&(p=m[e+1]),l&&(f="end"===f?"start":"start"===f?"end":f),u.placement=p+(f?"-"+f:""),u.offsets.popper=w({},u.offsets.popper,z(u.instance.popper,u.offsets.reference,u.placement)),u=R(u.instance.modifiers,u,"flip"))}),u},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],i=t.offsets,r=i.popper,o=i.reference,a=-1!==["left","right"].indexOf(n),i=-1===["top","left"].indexOf(n);return r[a?"left":"top"]=o[n]-(i?r[a?"width":"height"]:0),t.placement=A(e),t.offsets.popper=E(r),t}},hide:{order:800,enabled:!0,fn:function(t){if(!Z(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=O(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,i=e.y,r=t.offsets.popper,o=O(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a,s,l,u,c,h,p=void 0!==o?o:e.gpuAcceleration,d=y(t.instance.popper),f=k(d),m={position:r.position},s=(a=t,s=window.devicePixelRatio<2||!V,l=a.offsets,h=l.popper,u=l.reference,c=Math.round,o=Math.floor,e=function(t){return t},r=c(u.width),l=c(h.width),u=-1!==["left","right"].indexOf(a.placement),a=-1!==a.placement.indexOf("-"),o=s?u||a||r%2==l%2?c:o:e,e=s?c:e,{left:o(r%2==1&&l%2==1&&!a&&s?h.left-1:h.left),top:e(h.top),bottom:e(h.bottom),right:o(h.right)}),e="bottom"===n?"top":"bottom",o="right"===i?"left":"right",h=N("transform"),i="bottom"==e?"HTML"===d.nodeName?-d.clientHeight+s.bottom:-f.height+s.bottom:s.top,n="right"==o?"HTML"===d.nodeName?-d.clientWidth+s.right:-f.width+s.right:s.left;p&&h?(m[h]="translate3d("+n+"px, "+i+"px, 0)",m[e]=0,m[o]=0,m.willChange="transform"):(p="bottom"==e?-1:1,h="right"==o?-1:1,m[e]=i*p,m[o]=n*h,m.willChange=e+", "+o);o={"x-placement":t.placement};return t.attributes=w({},o,t.attributes),t.styles=w({},m,t.styles),t.arrowStyles=w({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return U(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach(function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)}),t.arrowElement&&Object.keys(t.arrowStyles).length&&U(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,i,r){r=L(r,e,t,n.positionFixed),t=M(n.placement,r,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",t),U(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},x=(x(H,[{key:"update",value:function(){return function(){var t;this.state.isDestroyed||((t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}}).offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=M(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=z(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=R(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t)))}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,D(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[N("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return F.call(this)}},{key:"disableEventListeners",value:function(){return function(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,B(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}.call(this)}}]),H);function H(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b(this,H),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=r(this.update.bind(this)),this.options=w({},H.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(w({},H.Defaults.modifiers,i.modifiers)).forEach(function(t){n.options.modifiers[t]=w({},H.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return w({name:t},n.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&o(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();e=this.options.eventsEnabled;e&&this.enableEventListeners(),this.state.eventsEnabled=e}x.Utils=("undefined"!=typeof window?window:t).PopperUtils,x.placements=q,x.Defaults=$,K.a=x}).call(this,e(8))},function(t,e){var i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l=Object.prototype.toString;function u(t){var e=typeof t;return t&&("object"==e||"function"==e)}t.exports=function(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||e&&"object"==typeof e&&"[object Symbol]"==l.call(e))return NaN;var e;if(u(t)&&(t=u(n="function"==typeof t.valueOf?t.valueOf():t)?n+"":n),"string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=o.test(t);return n||a.test(t)?s(t.slice(2),n?2:8):r.test(t)?NaN:+t}},function(t,e,n){"use strict";var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return}}()?Object.assign:function(t,e){for(var n,i,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))u.call(n,a)&&(r[a]=n[a]);if(l){i=l(n);for(var s=0;s<i.length;s++)c.call(n,i[s])&&(r[i[s]]=n[i[s]])}}return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var o=e.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},a=e.isJsons=function(t){return Array.isArray(t)&&t.every(function(t){return"object"===(void 0===t?"undefined":i(t))&&!(t instanceof Array)})},s=e.isArrays=function(t){return Array.isArray(t)&&t.every(function(t){return Array.isArray(t)})},l=e.jsonsHeaders=function(t){return Array.from(t.map(function(t){return Object.keys(t)}).reduce(function(t,e){return new Set([].concat(r(t),r(e)))},[]))},u=e.jsons2arrays=function(t,e){var n=e=e||l(t),i=e;a(e)&&(n=e.map(function(t){return t.label}),i=e.map(function(t){return t.key}));t=t.map(function(e){return i.map(function(t){return c(t,e)})});return[n].concat(r(t))},c=e.getHeaderValue=function(t,e){var n=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(t,e,n,i){return void 0!==t[e]?t[e]:void i.splice(1)},e);return void 0===n?t in e?e[t]:"":n},h=e.elementOrEmpty=function(t){return t||0===t?t:""},p=e.joiner=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:",",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'"';return t.filter(function(t){return t}).map(function(t){return t.map(function(t){return h(t)}).map(function(t){return""+n+t+n}).join(e)}).join("\n")},d=e.arrays2csv=function(t,e,n,i){return p(e?[e].concat(r(t)):t,n,i)},f=e.jsons2csv=function(t,e,n,i){return p(u(t,e),n,i)},m=e.string2csv=function(t,e,n,i){return e?e.join(n)+"\n"+t:t},y=e.toCSV=function(t,e,n,i){if(a(t))return f(t,e,n,i);if(s(t))return d(t,e,n,i);if("string"==typeof t)return m(t,e,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};e.buildURI=function(t,e,n,i,r){n=y(t,n,i,r),i=o()?"application/csv":"text/csv",r=new Blob([e?"\ufeff":"",n],{type:i}),e="data:"+i+";charset=utf-8,"+(e?"\ufeff":"")+n,n=window.URL||window.webkitURL;return void 0===n.createObjectURL?e:n.createObjectURL(r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropsNotForwarded=e.defaultProps=e.propTypes=void 0;var i=n(1),n=(i&&i.__esModule,n(0));e.propTypes={data:(0,n.oneOfType)([n.string,n.array]).isRequired,headers:n.array,target:n.string,separator:n.string,filename:n.string,uFEFF:n.bool,onClick:n.func,asyncOnClick:n.bool},e.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1},e.PropsNotForwarded=["data","headers"]},function(t,e,n){"use strict";var i=n(49),r=n(19);function o(t){r.call(this,t)}((o.prototype=Object.create(r.prototype)).constructor=o).prototype.sendRequest=i.browserSend,o.prototype.abortRequest=i.browserAbort,t.exports=function(t){return new o(t)}},function(t,e,n){"use strict";var i=n(20),r=n(56),o=n(9);function a(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");i(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||o.API_ORIGIN}a.prototype.createRequest=function(t){return new r(this,t)},t.exports=a},function(t,e,n){"use strict";var i=n(54),r={};function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t){if(r[t])return r[t];var e=t.split("."),n=e[0],e=e[1];if(!e)throw new Error("Invalid token");e=function(t){try{return JSON.parse(i.decode(t))}catch(t){throw new Error("Invalid token")}}(e),n={usage:n,user:e.u};return o(e,"a")&&(n.authorization=e.a),o(e,"exp")&&(n.expires=1e3*e.exp),o(e,"iat")&&(n.created=1e3*e.iat),o(e,"scopes")&&(n.scopes=e.scopes),o(e,"client")&&(n.client=e.client),o(e,"ll")&&(n.lastLogin=e.ll),o(e,"iu")&&(n.impersonator=e.iu),r[t]=n}},function(t){t.exports=JSON.parse('{"a":"2.5.1"}')},function(t,e,n){t.exports=n(30)},function(n,t,e){(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t,t="object"==typeof self&&self&&self.Object===Object&&self,e=e||t||Function("return this")(),t=Object.prototype,o=t.hasOwnProperty,a=t.toString,e=e.Symbol,s=e?e.toStringTag:void 0;n.exports=function(t){if(e=typeof t,null==t||"object"!=e&&"function"!=e)return!1;var e,t=null==(t=t)?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?function(t){var e=o.call(t,s),n=t[s];try{var i=!(t[s]=void 0)}catch(t){}var r=a.call(t);return i&&(e?t[s]=n:delete t[s]),r}(t):a.call(t);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}}).call(this,e(8))},function(t,e,n){var i=n(39).coordEach;t.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return i(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},function(t,e,n){"use strict";function i(){return{publicRuntimeConfig:{MapboxAccessToken:"pk.eyJ1IjoiY2l0eW9mYm9zdG9uIiwiYSI6ImNqMTd1dDdqZTA1c2UyeHFzNGhrN2g0bHYifQ.SZ8J0aXwDHt4sCmZ9rQO2A"}}}n.d(e,"a",function(){return i})},function(t,e,n){n(10),n(11),t.exports=n(72)},function(t,e,n){"use strict";var c=n(15),i="function"==typeof Symbol&&Symbol.for,h=i?Symbol.for("react.element"):60103,u=i?Symbol.for("react.portal"):60106,r=i?Symbol.for("react.fragment"):60107,o=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,s=i?Symbol.for("react.provider"):60109,l=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.forward_ref"):60112,n=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,f=i?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function _(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||g}function b(){}function x(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||g}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=_.prototype;i=x.prototype=new b;i.constructor=x,c(i,_.prototype),i.isPureReactComponent=!0;var w={current:null},T=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,n){var i,r={},o=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)T.call(e,i)&&!E.hasOwnProperty(i)&&(r[i]=e[i]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in s=t.defaultProps)void 0===r[i]&&(r[i]=s[i]);return{$$typeof:h,type:t,key:o,ref:a,props:r,_owner:w.current}}function S(t){return"object"==typeof t&&null!==t&&t.$$typeof===h}var P=/\/+/g,C=[];function M(t,e,n,i){if(C.length){var r=C.pop();return r.result=t,r.keyPrefix=e,r.func=n,r.context=i,r.count=0,r}return{result:t,keyPrefix:e,func:n,context:i,count:0}}function L(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,C.length<10&&C.push(t)}function I(t,e,n){return null==t?0:function t(e,n,i,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case h:case u:a=!0}}if(a)return i(r,e,""===n?"."+A(e,0):n),1;if(a=0,n=""===n?".":n+":",Array.isArray(e))for(var s=0;s<e.length;s++){var l=n+A(o=e[s],s);a+=t(o,l,i,r)}else if("function"==typeof(l=null!==e&&"object"==typeof e&&"function"==typeof(l=m&&e[m]||e["@@iterator"])?l:null))for(e=l.call(e),s=0;!(o=e.next()).done;)a+=t(o=o.value,l=n+A(o,s++),i,r);else if("object"===o)throw i=""+e,Error(y(31,"[object Object]"===i?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return a}(t,"",e,n)}function A(t,e){return"object"==typeof t&&null!==t&&null!=t.key?(t=t.key,n={"=":"=0",":":"=2"},"$"+(""+t).replace(/[=:]/g,function(t){return n[t]})):e.toString(36);var n}function z(t,e){t.func.call(t.context,e,t.count++)}function O(t,e,n){var i=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?R(t,i,n,function(t){return t}):null!=t&&(S(t)&&(n=r+(!(r=t).key||e&&e.key===t.key?"":(""+t.key).replace(P,"$&/")+"/")+n,t={$$typeof:h,type:r.type,key:n,ref:r.ref,props:r.props,_owner:r._owner}),i.push(t))}function R(t,e,n,i,r){var o="";null!=n&&(o=(""+n).replace(P,"$&/")+"/"),I(t,O,e=M(e,o,i,r)),L(e)}var D={current:null};function N(){var t=D.current;if(null===t)throw Error(y(321));return t}i={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:c};e.Children={map:function(t,e,n){if(null==t)return t;var i=[];return R(t,i,null,e,n),i},forEach:function(t,e,n){if(null==t)return t;I(t,z,e=M(null,null,e,n)),L(e)},count:function(t){return I(t,function(){return null},null)},toArray:function(t){var e=[];return R(t,e,null,function(t){return t}),e},only:function(t){if(!S(t))throw Error(y(143));return t}},e.Component=_,e.Fragment=r,e.Profiler=a,e.PureComponent=x,e.StrictMode=o,e.Suspense=n,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i,e.cloneElement=function(t,e,n){if(null==t)throw Error(y(267,t));var i,r=c({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e)for(l in void 0!==e.ref&&(a=e.ref,s=w.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps&&(i=t.type.defaultProps),e)T.call(e,l)&&!E.hasOwnProperty(l)&&(r[l]=(void 0===e[l]&&void 0!==i?i:e)[l]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){i=Array(l);for(var u=0;u<l;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:h,type:t.type,key:o,ref:a,props:r,_owner:s}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:l,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:p,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:f,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return N().useCallback(t,e)},e.useContext=function(t,e){return N().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return N().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return N().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return N().useLayoutEffect(t,e)},e.useMemo=function(t,e){return N().useMemo(t,e)},e.useReducer=function(t,e,n){return N().useReducer(t,e,n)},e.useRef=function(t){return N().useRef(t)},e.useState=function(t){return N().useState(t)},e.version="16.14.0"},function(t,e,n){"use strict";var a=n(29);function i(){}function r(){}r.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,r,o){if(o!==a){o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function e(){return t}var n={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSVLink=e.CSVDownload=void 0;var i=r(n(31)),n=r(n(32));function r(t){return t&&t.__esModule?t:{default:t}}e.CSVDownload=i.default,e.CSVLink=n.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t},r=n(1),r=r&&r.__esModule?r:{default:r},o=n(16),n=n(17);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(s,r.default.Component),i(s,[{key:"buildURI",value:function(){return o.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var t=this.props,e=t.data,n=t.headers,i=t.separator,r=t.enclosingCharacter,o=t.uFEFF,a=t.target,s=t.specs,t=t.replace;this.state.page=window.open(this.buildURI(e,o,n,i,r),a,s,t)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),i=s;function s(t){!function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t));return t.state={},t}i.defaultProps=Object.assign(n.defaultProps,{target:"_blank"}),i.propTypes=n.propTypes,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},i=function(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t},o=n(1),a=o&&o.__esModule?o:{default:o},s=n(16),n=n(17);function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(u,a.default.Component),i(u,[{key:"componentDidMount",value:function(){var t=this.props,e=t.data,n=t.headers,i=t.separator,r=t.uFEFF,t=t.enclosingCharacter;this.setState({href:this.buildURI(e,r,n,i,t)})}},{key:"componentWillReceiveProps",value:function(t){var e=t.data,n=t.headers,i=t.separator,t=t.uFEFF;this.setState({href:this.buildURI(e,t,n,i)})}},{key:"buildURI",value:function(){return s.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(t){if(window.navigator.msSaveOrOpenBlob){t.preventDefault();var e=this.props,n=e.data,i=e.headers,r=e.separator,o=e.filename,t=e.enclosingCharacter,e=e.uFEFF,t=new Blob([e?"\ufeff":"",(0,s.toCSV)(n,i,r,t)]);return window.navigator.msSaveBlob(t,o),!1}}},{key:"handleAsyncClick",value:function(e){var n=this;this.props.onClick(e,function(t){!1!==t?n.handleLegacy(e):e.preventDefault()})}},{key:"handleSyncClick",value:function(t){!1===this.props.onClick(t)?t.preventDefault():this.handleLegacy(t)}},{key:"handleClick",value:function(){var e=this;return function(t){if("function"==typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(t):e.handleSyncClick(t);e.handleLegacy(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.data,t.headers,t.separator,t.filename),i=(t.uFEFF,t.children),t=(t.onClick,t.asyncOnClick,t.enclosingCharacter,function(t,e){var n,i={};for(n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}(t,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]));return a.default.createElement("a",r({download:n},t,{ref:function(t){return e.link=t},target:"_self",href:this.state.href,onClick:this.handleClick()}),i)}}]),i=u;function u(t){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t));return t.buildURI=t.buildURI.bind(t),t.state={href:""},t}i.defaultProps=n.defaultProps,i.propTypes=n.propTypes,e.default=i},function(t,e,n){"use strict";var r=n(1),g=n(15),o=n(34);function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(E(227));var u=!1,c=null,a=!1,s=null,h={onError:function(t){u=!0,c=t}};function l(t,e,n,i,r,o,a,s,l){u=!1,c=null,function(t,e,n,i,r,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}.apply(h,arguments)}var p=null,i=null,d=null;function f(t,e,n){var i=t.type||"unknown-event";t.currentTarget=d(n),function(){if(l.apply(this,arguments),u){if(!u)throw Error(E(198));var t=c;u=!1,c=null,a||(a=!0,s=t)}}(i,e,void 0,t),t.currentTarget=null}var m=null,y={};function v(){if(m)for(var t in y){var e=y[t],n=m.indexOf(t);if(!(-1<n))throw Error(E(96,t));if(!b[n]){if(!e.extractEvents)throw Error(E(97,t));for(var i in n=(b[n]=e).eventTypes){var r=void 0,o=n[i],a=e,s=i;if(x.hasOwnProperty(s))throw Error(E(99,s));var l=(x[s]=o).phasedRegistrationNames;if(l){for(r in l)l.hasOwnProperty(r)&&_(l[r],a,s);r=!0}else r=!!o.registrationName&&(_(o.registrationName,a,s),!0);if(!r)throw Error(E(98,i,t))}}}}function _(t,e,n){if(w[t])throw Error(E(100,t));w[t]=e,T[t]=e.eventTypes[n].dependencies}var b=[],x={},w={},T={};function k(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];if(!y.hasOwnProperty(e)||y[e]!==i){if(y[e])throw Error(E(102,e));y[e]=i,n=!0}}n&&v()}var S=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),P=null,C=null,M=null;function L(t){if(t=i(t)){if("function"!=typeof P)throw Error(E(280));var e=t.stateNode;e&&(e=p(e),P(t.stateNode,t.type,e))}}function I(t){C?M?M.push(t):M=[t]:C=t}function A(){if(C){var t=C,e=M;if(M=C=null,L(t),e)for(t=0;t<e.length;t++)L(e[t])}}function z(t,e){return t(e)}function O(t,e,n,i,r){return t(e,n,i,r)}function R(){}var D=z,N=!1,B=!1;function F(){null===C&&null===M||(R(),A())}function j(t,e,n){if(B)return t(e,n);B=!0;try{return D(t,e,n)}finally{B=!1,F()}}var U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V=Object.prototype.hasOwnProperty,Z={},q={};function G(t,e,n,i,r,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){W[t]=new G(t,0,!1,t,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];W[e]=new G(e,1,!1,t[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){W[t]=new G(t,2,!1,t.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){W[t]=new G(t,2,!1,t,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){W[t]=new G(t,3,!1,t.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(t){W[t]=new G(t,3,!0,t,null,!1)}),["capture","download"].forEach(function(t){W[t]=new G(t,4,!1,t,null,!1)}),["cols","rows","size","span"].forEach(function(t){W[t]=new G(t,6,!1,t,null,!1)}),["rowSpan","start"].forEach(function(t){W[t]=new G(t,5,!1,t.toLowerCase(),null,!1)});var $=/[\-:]([a-z])/g;function H(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($,H);W[e]=new G(e,1,!1,t,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($,H);W[e]=new G(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($,H);W[e]=new G(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(t){W[t]=new G(t,1,!1,t.toLowerCase(),null,!1)}),W.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(t){W[t]=new G(t,1,!1,t.toLowerCase(),null,!0)});var K=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(t,n,e,i){var r,o=W.hasOwnProperty(n)?W[n]:null;(null!==o?0!==o.type:i||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(i,t,e){if(null==i||function(t,e,n){if(null===e||0!==e.type)switch(typeof i){case"function":case"symbol":return 1;case"boolean":return!n&&(null!==e?!e.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return}}(n,t,e))return 1;if(!e&&null!==t)switch(t.type){case 3:return!i;case 4:return!1===i;case 5:return isNaN(i);case 6:return isNaN(i)||i<1}}(e,o,i)&&(e=null),i||null===o?(r=n,(V.call(q,r)||!V.call(Z,r)&&(U.test(r)?q[r]=!0:(Z[r]=!0,0)))&&(null===e?t.removeAttribute(n):t.setAttribute(n,""+e))):o.mustUseProperty?t[o.propertyName]=null===e?3!==o.type&&"":e:(n=o.attributeName,i=o.attributeNamespace,null===e?t.removeAttribute(n):(e=3===(o=o.type)||4===o&&!0===e?"":""+e,i?t.setAttributeNS(i,n,e):t.setAttribute(n,e))))}K.hasOwnProperty("ReactCurrentDispatcher")||(K.ReactCurrentDispatcher={current:null}),K.hasOwnProperty("ReactCurrentBatchConfig")||(K.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Y="function"==typeof Symbol&&Symbol.for,Q=Y?Symbol.for("react.element"):60103,tt=Y?Symbol.for("react.portal"):60106,et=Y?Symbol.for("react.fragment"):60107,nt=Y?Symbol.for("react.strict_mode"):60108,it=Y?Symbol.for("react.profiler"):60114,rt=Y?Symbol.for("react.provider"):60109,ot=Y?Symbol.for("react.context"):60110,at=Y?Symbol.for("react.concurrent_mode"):60111,st=Y?Symbol.for("react.forward_ref"):60112,lt=Y?Symbol.for("react.suspense"):60113,ut=Y?Symbol.for("react.suspense_list"):60120,ct=Y?Symbol.for("react.memo"):60115,ht=Y?Symbol.for("react.lazy"):60116,pt=Y?Symbol.for("react.block"):60121,dt="function"==typeof Symbol&&Symbol.iterator;function ft(t){return null!==t&&"object"==typeof t&&"function"==typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function mt(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case et:return"Fragment";case tt:return"Portal";case it:return"Profiler";case nt:return"StrictMode";case lt:return"Suspense";case ut:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case ot:return"Context.Consumer";case rt:return"Context.Provider";case st:var e=(e=t.render).displayName||e.name||"";return t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ct:return mt(t.type);case pt:return mt(t.render);case ht:if(t=1===t._status?t._result:null)return mt(t)}return null}function yt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var i=t._debugOwner,r=t._debugSource,o=mt(t.type),n=null;i&&(n=mt(i.type)),i=o,o="",r?o=" (at "+r.fileName.replace(J,"")+":"+r.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+o}}while(e+=n,t=t.return);return e}function gt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function vt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function _t(t){t._valueTracker||(t._valueTracker=function(t){var e=vt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function bt(t){if(t){var e=t._valueTracker;if(!e)return 1;var n=e.getValue(),i="";return t&&(i=vt(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),1)}}function xt(t,e){var n=e.checked;return g({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function wt(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked,n=gt(null!=e.value?e.value:n);t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Tt(t,e){null!=(e=e.checked)&&X(t,"checked",e,!1)}function Et(t,e){Tt(t,e);var n=gt(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return t.removeAttribute("value"),0;e.hasOwnProperty("value")?St(t,e.type,n):e.hasOwnProperty("defaultValue")&&St(t,e.type,gt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function kt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function St(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Pt(t,e){return t=g({children:void 0},e),n=e.children,i="",r.Children.forEach(n,function(t){null!=t&&(i+=t)}),(e=i)&&(t.children=e),t;var n,i}function Ct(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+gt(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,i&&(t[r].defaultSelected=!0),0;null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function Mt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(E(91));return g({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(E(92));if(Array.isArray(n)){if(!(n.length<=1))throw Error(E(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:gt(n)}}function It(t,e){var n=gt(e.value),i=gt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function At(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function zt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ot(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?zt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Rt,Dt,Nt=(Dt=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((Rt=Rt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return Dt(t,e)})}:Dt);function Bt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return n.nodeValue=e,0}t.textContent=e}function Ft(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var jt={animationend:Ft("Animation","AnimationEnd"),animationiteration:Ft("Animation","AnimationIteration"),animationstart:Ft("Animation","AnimationStart"),transitionend:Ft("Transition","TransitionEnd")},Ut={},Vt={};function Zt(t){if(Ut[t])return Ut[t];if(!jt[t])return t;var e,n=jt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Vt)return Ut[t]=n[e];return t}S&&(Vt=document.createElement("div").style,"AnimationEvent"in window||(delete jt.animationend.animation,delete jt.animationiteration.animation,delete jt.animationstart.animation),"TransitionEvent"in window||delete jt.transitionend.transition);var qt=Zt("animationend"),Gt=Zt("animationiteration"),Wt=Zt("animationstart"),$t=Zt("transitionend"),Ht="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kt=new("function"==typeof WeakMap?WeakMap:Map);function Xt(t){var e=Kt.get(t);return void 0===e&&(e=new Map,Kt.set(t,e)),e}function Jt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else for(t=e;0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return,t;);return 3===e.tag?n:null}function Yt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function Qt(t){if(Jt(t)!==t)throw Error(E(188))}function te(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Jt(t)))throw Error(E(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null!==o){if(r.child===o.child){for(o=r.child;o;){if(o===n)return Qt(r),t;if(o===i)return Qt(r),e;o=o.sibling}throw Error(E(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,s=r.child;s;){if(s===n){a=!0,n=r,i=o;break}if(s===i){a=!0,i=r,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,i=r;break}if(s===i){a=!0,i=o,n=r;break}s=s.sibling}if(!a)throw Error(E(189))}}if(n.alternate!==i)throw Error(E(190))}else{if(null===(i=r.return))break;n=i}}if(3!==n.tag)throw Error(E(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e=(e.child.return=e).child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function ee(t,e){if(null==e)throw Error(E(30));return null==t?e:Array.isArray(t)?(Array.isArray(e)?t.push.apply(t,e):t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ne(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var ie=null;function re(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var i=0;i<e.length&&!t.isPropagationStopped();i++)f(t,e[i],n[i]);else e&&f(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function oe(t){if(null!==t&&(ie=ee(ie,t)),t=ie,ie=null,t){if(ne(t,re),ie)throw Error(E(95));if(a)throw t=s,a=!1,s=null,t}}function ae(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function se(t){if(!S)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var le=[];function ue(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,le.length<10&&le.push(t)}function ce(t,e,n,i){if(le.length){var r=le.pop();return r.topLevelType=t,r.eventSystemFlags=i,r.nativeEvent=e,r.targetInst=n,r}return{topLevelType:t,eventSystemFlags:i,nativeEvent:e,targetInst:n,ancestors:[]}}function he(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var i=n;if(3===i.tag)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=3!==i.tag?null:i.stateNode.containerInfo}}while(i&&(5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=wn(i)));for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var r=ae(t.nativeEvent),i=t.topLevelType,o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,l=0;l<b.length;l++){var u=b[l];(u=u&&u.extractEvents(i,e,o,r,a))&&(s=ee(s,u))}oe(s)}}function pe(t,e,n){if(!n.has(t)){switch(t){case"scroll":Ge(e,"scroll",!0);break;case"focus":case"blur":Ge(e,"focus",!0),Ge(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":se(t)&&Ge(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ht.indexOf(t)&&qe(t,e)}n.set(t,null)}}var de,fe,me,ye=!1,ge=[],ve=null,_e=null,be=null,xe=new Map,we=new Map,Te=[],Ee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),ke="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Se(t,e,n,i,r){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:r,container:i}}function Pe(t,e){switch(t){case"focus":case"blur":ve=null;break;case"dragenter":case"dragleave":_e=null;break;case"mouseover":case"mouseout":be=null;break;case"pointerover":case"pointerout":xe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":we.delete(e.pointerId)}}function Ce(t,e,n,i,r,o){return null===t||t.nativeEvent!==o?(t=Se(e,n,i,r,o),null!==e&&null!==(e=Tn(e))&&fe(e)):t.eventSystemFlags|=i,t}function Me(t){if(null===t.blockedOn){var e=$e(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null===e)return 1;var n=Tn(e);return null!==n&&fe(n),t.blockedOn=e,0}}function Le(t,e,n){Me(t)&&n.delete(e)}function Ie(){for(ye=!1;0<ge.length;){var t=ge[0];if(null!==t.blockedOn){null!==(t=Tn(t.blockedOn))&&de(t);break}var e=$e(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:ge.shift()}null!==ve&&Me(ve)&&(ve=null),null!==_e&&Me(_e)&&(_e=null),null!==be&&Me(be)&&(be=null),xe.forEach(Le),we.forEach(Le)}function Ae(t,e){t.blockedOn===e&&(t.blockedOn=null,ye||(ye=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ie)))}function ze(e){function t(t){return Ae(t,e)}if(0<ge.length){Ae(ge[0],e);for(var n=1;n<ge.length;n++){var i=ge[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==ve&&Ae(ve,e),null!==_e&&Ae(_e,e),null!==be&&Ae(be,e),xe.forEach(t),we.forEach(t),n=0;n<Te.length;n++)(i=Te[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Te.length&&null===(n=Te[0]).blockedOn;)(function(t){var e=wn(t.target);if(null!==e){var n=Jt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Yt(n)))return t.blockedOn=e,o.unstable_runWithPriority(t.priority,function(){me(n)})}else if(3===e&&n.stateNode.hydrate)return t.blockedOn=3===n.tag?n.stateNode.containerInfo:null}t.blockedOn=null})(n),null===n.blockedOn&&Te.shift()}var Oe={},Re=new Map,De=new Map,Ne=["abort","abort",qt,"animationEnd",Gt,"animationIteration",Wt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$t,"transitionEnd","waiting","waiting"];function Be(t,e){for(var n=0;n<t.length;n+=2){var i=t[n],r=t[n+1],o={phasedRegistrationNames:{bubbled:o="on"+(r[0].toUpperCase()+r.slice(1)),captured:o+"Capture"},dependencies:[i],eventPriority:e};De.set(i,e),Re.set(i,o),Oe[r]=o}}Be("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Be("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Be(Ne,2);for(var Fe="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),je=0;je<Fe.length;je++)De.set(Fe[je],0);var Ue=o.unstable_UserBlockingPriority,Ve=o.unstable_runWithPriority,Ze=!0;function qe(t,e){Ge(e,t,!1)}function Ge(t,e,n){var i=De.get(e);switch(void 0===i?2:i){case 0:i=function(t,e,n,i){N||R();var r=We,o=N;N=!0;try{O(r,t,e,n,i)}finally{(N=o)||F()}}.bind(null,e,1,t);break;case 1:i=function(t,e,n,i){Ve(Ue,We.bind(null,t,e,n,i))}.bind(null,e,1,t);break;default:i=We.bind(null,e,1,t)}n?t.addEventListener(e,i,!0):t.addEventListener(e,i,!1)}function We(t,e,n,i){if(Ze)if(0<ge.length&&-1<Ee.indexOf(t))t=Se(null,t,e,n,i),ge.push(t);else{var r=$e(t,e,n,i);if(null===r)Pe(t,i);else if(-1<Ee.indexOf(t))t=Se(r,t,e,n,i),ge.push(t);else if(!function(t,e,n,i,r){switch(e){case"focus":return ve=Ce(ve,t,e,n,i,r),1;case"dragenter":return _e=Ce(_e,t,e,n,i,r),1;case"mouseover":return be=Ce(be,t,e,n,i,r),1;case"pointerover":var o=r.pointerId;return xe.set(o,Ce(xe.get(o)||null,t,e,n,i,r)),1;case"gotpointercapture":return o=r.pointerId,we.set(o,Ce(we.get(o)||null,t,e,n,i,r)),1}}(r,t,e,n,i)){Pe(t,i),t=ce(t,i,null,e);try{j(he,t)}finally{ue(t)}}}}function $e(t,e,n,i){if(null!==(n=wn(n=ae(i)))){var r=Jt(n);if(null===r)n=null;else{var o=r.tag;if(13===o){if(null!==(n=Yt(r)))return n;n=null}else if(3===o){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}t=ce(t,i,n,e);try{j(he,t)}finally{ue(t)}return null}var He={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ke=["Webkit","ms","Moz","O"];function Xe(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||He.hasOwnProperty(t)&&He[t]?(""+e).trim():e+"px"}function Je(t,e){for(var n in t=t.style,e){var i,r;e.hasOwnProperty(n)&&(i=0===n.indexOf("--"),r=Xe(n,e[n],i),"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r)}}Object.keys(He).forEach(function(e){Ke.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),He[t]=He[e]})});var Ye=g({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qe(t,e){if(e){if(Ye[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(E(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(E(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(E(62,""))}}function tn(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var en="http://www.w3.org/1999/xhtml";function nn(t,e){var n=Xt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=T[e];for(var i=0;i<e.length;i++)pe(e[i],t,n)}function rn(){}function on(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function an(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sn(t,e){var n,i=an(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&e<=n)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=an(i)}}function ln(){for(var t=window,e=on();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=on((t=e.contentWindow).document)}return e}function un(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var cn=null,hn=null;function pn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function dn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var fn="function"==typeof setTimeout?setTimeout:void 0,mn="function"==typeof clearTimeout?clearTimeout:void 0;function yn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function gn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var vn=Math.random().toString(36).slice(2),_n="__reactInternalInstance$"+vn,bn="__reactEventHandlers$"+vn,xn="__reactContainere$"+vn;function wn(t){var e=t[_n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xn]||n[_n]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=gn(t);null!==t;){if(n=t[_n])return n;t=gn(t)}return e}n=(t=n).parentNode}return null}function Tn(t){return!(t=t[_n]||t[xn])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function En(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(E(33))}function kn(t){return t[bn]||null}function Sn(t){for(;t=t.return,t&&5!==t.tag;);return t||null}function Pn(t,e){var n=t.stateNode;if(!n)return null;var i=p(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(E(231,e,typeof n));return n}function Cn(t,e,n){(e=Pn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=ee(n._dispatchListeners,e),n._dispatchInstances=ee(n._dispatchInstances,t))}function Mn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Sn(e);for(e=n.length;0<e--;)Cn(n[e],"captured",t);for(e=0;e<n.length;e++)Cn(n[e],"bubbled",t)}}function Ln(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Pn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=ee(n._dispatchListeners,e),n._dispatchInstances=ee(n._dispatchInstances,t))}function In(t){t&&t.dispatchConfig.registrationName&&Ln(t._targetInst,null,t)}function An(t){ne(t,Mn)}var zn=null,On=null,Rn=null;function Dn(){if(Rn)return Rn;for(var t=On,e=t.length,n=("value"in zn?zn.value:zn.textContent),i=n.length,r=0;r<e&&t[r]===n[r];r++);for(var o=e-r,a=1;a<=o&&t[e-a]===n[i-a];a++);return Rn=n.slice(r,1<a?1-a:void 0)}function Nn(){return!0}function Bn(){return!1}function Fn(t,e,n,i){for(var r in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(r)&&((e=t[r])?this[r]=e(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Nn:Bn,this.isPropagationStopped=Bn,this}function jn(t,e,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,t,e,n,i),r}return new this(t,e,n,i)}function Un(t){if(!(t instanceof this))throw Error(E(279));t.destructor(),this.eventPool.length<10&&this.eventPool.push(t)}function Vn(t){t.eventPool=[],t.getPooled=jn,t.release=Un}g(Fn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Nn)},persist:function(){this.isPersistent=Nn},isPersistent:Bn,destructor:function(){for(var t in this.constructor.Interface)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Bn,this._dispatchInstances=this._dispatchListeners=null}}),Fn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Fn.extend=function(t){function e(){}function n(){return i.apply(this,arguments)}var i=this;e.prototype=i.prototype;var r=new e;return g(r,n.prototype),((n.prototype=r).constructor=n).Interface=g({},i.Interface,t),n.extend=i.extend,Vn(n),n},Vn(Fn);var Zn=Fn.extend({data:null}),qn=Fn.extend({data:null}),Gn=[9,13,27,32],Wn=S&&"CompositionEvent"in window,$n=null;S&&"documentMode"in document&&($n=document.documentMode);var Hn=S&&"TextEvent"in window&&!$n,Kn=S&&(!Wn||$n&&8<$n&&$n<=11),Xn=String.fromCharCode(32),Jn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Yn=!1;function Qn(t,e){switch(t){case"keyup":return-1!==Gn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return 1;default:return}}function ti(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var ei=!1,n={eventTypes:Jn,extractEvents:function(t,e,n,i){var r;if(Wn)t:{switch(t){case"compositionstart":var o=Jn.compositionStart;break t;case"compositionend":o=Jn.compositionEnd;break t;case"compositionupdate":o=Jn.compositionUpdate;break t}o=void 0}else ei?Qn(t,n)&&(o=Jn.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=Jn.compositionStart);return r=o?(Kn&&"ko"!==n.locale&&(ei||o!==Jn.compositionStart?o===Jn.compositionEnd&&ei&&(r=Dn()):(On="value"in(zn=i)?zn.value:zn.textContent,ei=!0)),o=Zn.getPooled(o,e,n,i),!r&&null===(r=ti(n))||(o.data=r),An(o),o):null,(t=(Hn?function(t,e){switch(t){case"compositionend":return ti(e);case"keypress":return 32!==e.which?null:(Yn=!0,Xn);case"textInput":return(t=e.data)===Xn&&Yn?null:t;default:return null}}:function(t,e){if(ei)return"compositionend"===t||!Wn&&Qn(t,e)?(t=Dn(),Rn=On=zn=null,ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kn&&"ko"!==e.locale?null:e.data;default:return null}})(t,n))?((e=qn.getPooled(Jn.beforeInput,e,n,i)).data=t,An(e)):e=null,null===r?e:null===e?r:[r,e]}},ni={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ii(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?ni[t.type]:"textarea"===e}var ri={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function oi(t,e,n){return(t=Fn.getPooled(ri.change,t,e,n)).type="change",I(n),An(t),t}var ai=null,si=null;function li(t){oe(t)}function ui(t){if(bt(En(t)))return t}function ci(t,e){if("change"===t)return e}var hi=!1;function pi(){ai&&(ai.detachEvent("onpropertychange",di),si=ai=null)}function di(t){if("value"===t.propertyName&&ui(si))if(t=oi(si,t,ae(t)),N)oe(t);else{N=!0;try{z(li,t)}finally{N=!1,F()}}}function fi(t,e,n){"focus"===t?(pi(),si=n,(ai=e).attachEvent("onpropertychange",di)):"blur"===t&&pi()}function mi(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return ui(si)}function yi(t,e){if("click"===t)return ui(e)}function gi(t,e){if("input"===t||"change"===t)return ui(e)}S&&(hi=se("input")&&(!document.documentMode||9<document.documentMode));var Y={eventTypes:ri,_isInputEventSupported:hi,extractEvents:function(t,e,n,i){var r,o,a=e?En(e):window,s=a.nodeName&&a.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===a.type?r=ci:ii(a)?hi?r=gi:(r=mi,o=fi):!(s=a.nodeName)||"input"!==s.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type||(r=yi),r=r&&r(t,e))return oi(r,n,i);o&&o(t,a,e),"blur"===t&&(t=a._wrapperState)&&t.controlled&&"number"===a.type&&St(a,"number",a.value)}},vi=Fn.extend({view:null,detail:null}),_i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bi(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=_i[t])&&!!e[t]}function xi(){return bi}var wi=0,Ti=0,Ei=!1,ki=!1,Si=vi.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:xi,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=wi;return wi=t.screenX,Ei?"mousemove"===t.type?t.screenX-e:0:(Ei=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Ti;return Ti=t.screenY,ki?"mousemove"===t.type?t.screenY-e:0:(ki=!0,0)}}),Pi=Si.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ci={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ne={eventTypes:Ci,extractEvents:function(t,e,n,i,r){var o,a,s,l,u="mouseover"===t||"pointerover"===t,c="mouseout"===t||"pointerout"===t;if(u&&0==(32&r)&&(n.relatedTarget||n.fromElement)||!c&&!u)return null;if(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,c?(c=e,null!==(e=(e=n.relatedTarget||n.toElement)?wn(e):null)&&(e!==Jt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):c=null,c===e)return null;if("mouseout"===t||"mouseover"===t?(o=Si,a=Ci.mouseLeave,s=Ci.mouseEnter,l="mouse"):"pointerout"!==t&&"pointerover"!==t||(o=Pi,a=Ci.pointerLeave,s=Ci.pointerEnter,l="pointer"),t=null==c?u:En(c),u=null==e?u:En(e),(a=o.getPooled(a,c,n,i)).type=l+"leave",a.target=t,a.relatedTarget=u,(n=o.getPooled(s,e,n,i)).type=l+"enter",n.target=u,n.relatedTarget=t,l=e,(i=c)&&l)t:{for(s=l,c=0,t=o=i;t;t=Sn(t))c++;for(t=0,e=s;e;e=Sn(e))t++;for(;0<c-t;)o=Sn(o),c--;for(;0<t-c;)s=Sn(s),t--;for(;c--;){if(o===s||o===s.alternate)break t;o=Sn(o),s=Sn(s)}o=null}else o=null;for(s=o,o=[];i&&i!==s&&(null===(c=i.alternate)||c!==s);)o.push(i),i=Sn(i);for(i=[];l&&l!==s&&(null===(c=l.alternate)||c!==s);)i.push(l),l=Sn(l);for(l=0;l<o.length;l++)Ln(o[l],"bubbled",a);for(l=i.length;0<l--;)Ln(i[l],"captured",n);return 0==(64&r)?[a]:[a,n]}},Mi="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},Li=Object.prototype.hasOwnProperty;function Ii(t,e){if(Mi(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!Li.call(e,n[i])||!Mi(t[n[i]],e[n[i]]))return!1;return!0}var Ai=S&&"documentMode"in document&&document.documentMode<=11,zi={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Oi=null,Ri=null,Di=null,Ni=!1;function Bi(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Ni||null==Oi||Oi!==on(n)?null:(n="selectionStart"in(n=Oi)&&un(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Di&&Ii(Di,n)?null:(Di=n,(t=Fn.getPooled(zi.select,Ri,t,e)).type="select",t.target=Oi,An(t),t))}var vn={eventTypes:zi,extractEvents:function(t,e,n,i,r,o){if(!(o=!(r=o||(i.window===i?i.document:9===i.nodeType?i:i.ownerDocument)))){t:{r=Xt(r),o=T.onSelect;for(var a=0;a<o.length;a++)if(!r.has(o[a])){r=!1;break t}r=!0}o=!r}if(o)return null;switch(r=e?En(e):window,t){case"focus":!ii(r)&&"true"!==r.contentEditable||(Oi=r,Ri=e,Di=null);break;case"blur":Di=Ri=Oi=null;break;case"mousedown":Ni=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ni=!1,Bi(n,i);case"selectionchange":if(Ai)break;case"keydown":case"keyup":return Bi(n,i)}return null}},Fi=Fn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ji=Fn.extend({clipboardData:function(t){return("clipboardData"in t?t:window).clipboardData}}),Ui=vi.extend({relatedTarget:null});function Vi(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Zi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gi=vi.extend({key:function(t){if(t.key){var e=Zi[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Vi(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?qi[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:xi,charCode:function(t){return"keypress"===t.type?Vi(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Vi(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Wi=Si.extend({dataTransfer:null}),$i=vi.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:xi}),Hi=Fn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Ki=Si.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),$n={eventTypes:Oe,extractEvents:function(t,e,n,i){var r=Re.get(t);if(!r)return null;switch(t){case"keypress":if(0===Vi(n))return null;case"keydown":case"keyup":t=Gi;break;case"blur":case"focus":t=Ui;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Si;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=Wi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=$i;break;case qt:case Gt:case Wt:t=Fi;break;case $t:t=Hi;break;case"scroll":t=vi;break;case"wheel":t=Ki;break;case"copy":case"cut":case"paste":t=ji;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Pi;break;default:t=Fn}return An(e=t.getPooled(r,e,n,i)),e}};if(m)throw Error(E(101));m=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),v(),p=kn,i=Tn,d=En,k({SimpleEventPlugin:$n,EnterLeaveEventPlugin:Ne,ChangeEventPlugin:Y,SelectEventPlugin:vn,BeforeInputEventPlugin:n});var Xi=[],Ji=-1;function Yi(t){Ji<0||(t.current=Xi[Ji],Xi[Ji]=null,Ji--)}function Qi(t,e){Xi[++Ji]=t.current,t.current=e}var tr={},er={current:tr},nr={current:!1},ir=tr;function rr(t,e){var n=t.type.contextTypes;if(!n)return tr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function or(t){return null!=t.childContextTypes}function ar(){Yi(nr),Yi(er)}function sr(t,e,n){if(er.current!==tr)throw Error(E(168));Qi(er,e),Qi(nr,n)}function lr(t,e,n){var i,r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(i in r=r.getChildContext())if(!(i in t))throw Error(E(108,mt(e)||"Unknown",i));return g({},n,{},r)}function ur(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tr,ir=er.current,Qi(er,t),Qi(nr,nr.current),1}function cr(t,e,n){var i=t.stateNode;if(!i)throw Error(E(169));n?(t=lr(t,e,ir),i.__reactInternalMemoizedMergedChildContext=t,Yi(nr),Yi(er),Qi(er,t)):Yi(nr),Qi(nr,n)}var hr=o.unstable_runWithPriority,pr=o.unstable_scheduleCallback,dr=o.unstable_cancelCallback,vn=o.unstable_requestPaint,fr=o.unstable_now,mr=o.unstable_getCurrentPriorityLevel,yr=o.unstable_ImmediatePriority,gr=o.unstable_UserBlockingPriority,vr=o.unstable_NormalPriority,_r=o.unstable_LowPriority,br=o.unstable_IdlePriority,xr={},wr=o.unstable_shouldYield,Tr=void 0!==vn?vn:function(){},Er=null,kr=null,Sr=!1,Pr=fr(),Cr=Pr<1e4?fr:function(){return fr()-Pr};function Mr(){switch(mr()){case yr:return 99;case gr:return 98;case vr:return 97;case _r:return 96;case br:return 95;default:throw Error(E(332))}}function Lr(t){switch(t){case 99:return yr;case 98:return gr;case 97:return vr;case 96:return _r;case 95:return br;default:throw Error(E(332))}}function Ir(t,e){return t=Lr(t),hr(t,e)}function Ar(t,e,n){return t=Lr(t),pr(t,e,n)}function zr(t){return null===Er?(Er=[t],kr=pr(yr,Rr)):Er.push(t),xr}function Or(){var t;null!==kr&&(t=kr,kr=null,dr(t)),Rr()}function Rr(){if(!Sr&&null!==Er){Sr=!0;var e=0;try{var n=Er;Ir(99,function(){for(;e<n.length;e++)for(var t=n[e];t=t(!0),null!==t;);}),Er=null}catch(n){throw null!==Er&&(Er=Er.slice(e+1)),pr(yr,Or),n}finally{Sr=!1}}}function Dr(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Nr(t,e){if(t&&t.defaultProps)for(var n in e=g({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Br={current:null},Fr=null,jr=null,Ur=null;function Vr(){Ur=jr=Fr=null}function Zr(t){var e=Br.current;Yi(Br),t.type._context._currentValue=e}function qr(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function Gr(t,e){(Ur=jr=null)!==(t=(Fr=t).dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(_a=!0),t.firstContext=null)}function Wr(t,e){if(Ur!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(Ur=t,e=1073741823),e={context:t,observedBits:e,next:null},null===jr){if(null===Fr)throw Error(E(308));jr=e,Fr.dependencies={expirationTime:0,firstContext:e,responders:null}}else jr=jr.next=e;return t._currentValue}var $r=!1;function Hr(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Kr(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function Xr(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function Jr(t,e){var n;null!==(t=t.updateQueue)&&(null===(n=(t=t.shared).pending)?e.next=e:(e.next=n.next,n.next=e),t.pending=e)}function Yr(t,e){var n=t.alternate;null!==n&&Kr(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e).next=e:(e.next=n.next,n.next=e)}function Qr(t,e,n,i){var r=t.updateQueue;$r=!1;var o,a=r.baseQueue;if(null!==(y=r.shared.pending)&&(null!==a&&(o=a.next,a.next=y.next,y.next=o),a=y,(r.shared.pending=null)!==(o=t.alternate)&&null!==(o=o.updateQueue)&&(o.baseQueue=y)),null!==a){o=a.next;var s=r.baseState,l=0,u=null,c=null,h=null;if(null!==o)for(var p=o;;){if((y=p.expirationTime)<i){var d={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===h?(c=h=d,u=s):h=h.next=d,l<y&&(l=y)}else{null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),Zs(y,p.suspenseConfig);t:{var f=t,m=p,y=e,d=n;switch(m.tag){case 1:if("function"==typeof(f=m.payload)){s=f.call(d,s,y);break t}s=f;break t;case 3:f.effectTag=-4097&f.effectTag|64;case 0:if(null==(y="function"==typeof(f=m.payload)?f.call(d,s,y):f))break t;s=g({},s,y);break t;case 2:$r=!0}}null!==p.callback&&(t.effectTag|=32,null===(y=r.effects)?r.effects=[p]:y.push(p))}if(null===(p=p.next)||p===o){if(null===(y=r.shared.pending))break;p=a.next=y.next,y.next=o,r.baseQueue=a=y,r.shared.pending=null}}null===h?u=s:h.next=c,r.baseState=u,r.baseQueue=h,qs(l),t.expirationTime=l,t.memoizedState=s}}function to(t,e,n){if(t=e.effects,(e.effects=null)!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=r,r=n,"function"!=typeof i)throw Error(E(191,i));i.call(r)}}}var eo=K.ReactCurrentBatchConfig,no=(new r.Component).refs;function io(t,e,n,i){n=null==(n=n(i,e=t.memoizedState))?e:g({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var ro={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Jt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var i=Ls(),r=eo.suspense;(r=Xr(i=Is(i,t,r),r)).payload=e,null!=n&&(r.callback=n),Jr(t,r),As(t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var i=Ls(),r=eo.suspense;(r=Xr(i=Is(i,t,r),r)).tag=1,r.payload=e,null!=n&&(r.callback=n),Jr(t,r),As(t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ls(),i=eo.suspense;(i=Xr(n=Is(n,t,i),i)).tag=2,null!=e&&(i.callback=e),Jr(t,i),As(t,n)}};function oo(t,e,n,i,r,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,a):!(e.prototype&&e.prototype.isPureReactComponent&&Ii(n,i)&&Ii(r,o))}function ao(t,e,n){var i=!1,r=tr,o=e.contextType;return e=new e(n,o="object"==typeof o&&null!==o?Wr(o):(r=or(e)?ir:er.current,(i=null!=e.contextTypes)?rr(t,r):tr)),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ro,(t.stateNode=e)._reactInternalFiber=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function so(t,e,n,i){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ro.enqueueReplaceState(e,e.state,null)}function lo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=no,Hr(t);var o=e.contextType;"object"==typeof o&&null!==o?r.context=Wr(o):(o=or(e)?ir:er.current,r.context=rr(t,o)),Qr(t,n,r,i),r.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(io(t,0,o,n),r.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(e=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&ro.enqueueReplaceState(r,r.state,null),Qr(t,n,r,i),r.state=t.memoizedState),"function"==typeof r.componentDidMount&&(t.effectTag|=4)}var uo=Array.isArray;function co(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(E(309));var i=n.stateNode}if(!i)throw Error(E(147,t));var r=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=i.refs;e===no&&(e=i.refs={}),null===t?delete e[r]:e[r]=t})._stringRef=r,e)}if("string"!=typeof t)throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function ho(t,e){if("textarea"!==t.type)throw Error(E(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function po(h){function p(t,e){var n;h&&(null!==(n=t.lastEffect)?(n.nextEffect=e,t.lastEffect=e):t.firstEffect=t.lastEffect=e,e.nextEffect=null,e.effectTag=8)}function d(t,e){if(!h)return null;for(;null!==e;)p(t,e),e=e.sibling;return null}function f(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(t,e){return(t=ol(t,e)).index=0,t.sibling=null,t}function m(t,e,n){return t.index=n,h?null===(n=t.alternate)||(n=n.index)<e?(t.effectTag=2,e):n:e}function s(t){return h&&null===t.alternate&&(t.effectTag=2),t}function o(t,e,n,i){return null===e||6!==e.tag?(e=ll(n,t.mode,i)).return=t:(e=a(e,n)).return=t,e}function l(t,e,n,i){return null!==e&&e.elementType===n.type?(i=a(e,n.props)).ref=co(0,e,n):(i=al(n.type,n.key,n.props,null,t.mode,i)).ref=co(0,e,n),i.return=t,i}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=ul(n,t.mode,i)).return=t:(e=a(e,n.children||[])).return=t,e}function c(t,e,n,i,r){return null===e||7!==e.tag?(e=sl(n,t.mode,i,r)).return=t:(e=a(e,n)).return=t,e}function y(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=ll(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case Q:return(n=al(e.type,e.key,e.props,null,t.mode,n)).ref=co(0,null,e),n.return=t,n;case tt:return(e=ul(e,t.mode,n)).return=t,e}if(uo(e)||ft(e))return(e=sl(e,t.mode,n,null)).return=t,e;ho(t,e)}return null}function g(t,e,n,i){var r=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==r?null:o(t,e,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Q:return n.key===r?n.type===et?c(t,e,n.props.children,i,r):l(t,e,n,i):null;case tt:return n.key===r?u(t,e,n,i):null}if(uo(n)||ft(n))return null!==r?null:c(t,e,n,i,null);ho(t,n)}return null}function v(t,e,n,i,r){if("string"==typeof i||"number"==typeof i)return o(e,t=t.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case Q:return t=t.get(null===i.key?n:i.key)||null,i.type===et?c(e,t,i.props.children,r,i.key):l(e,t,i,r);case tt:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r)}if(uo(i)||ft(i))return c(e,t=t.get(n)||null,i,r,null);ho(e,i)}return null}return function(t,e,n,i){var r="object"==typeof n&&null!==n&&n.type===et&&null===n.key;r&&(n=n.props.children);var o="object"==typeof n&&null!==n;if(o)switch(n.$$typeof){case Q:t:{for(o=n.key,r=e;null!==r;){if(r.key===o){switch(r.tag){case 7:if(n.type!==et)break;d(t,r.sibling),(e=a(r,n.props.children)).return=t,t=e;break t;default:if(r.elementType===n.type){d(t,r.sibling),(e=a(r,n.props)).ref=co(0,r,n),e.return=t,t=e;break t}}d(t,r);break}p(t,r),r=r.sibling}t=n.type===et?((e=sl(n.props.children,t.mode,i,n.key)).return=t,e):((i=al(n.type,n.key,n.props,null,t.mode,i)).ref=co(0,e,n),i.return=t,i)}return s(t);case tt:t:{for(r=n.key;null!==e;){if(e.key===r){if(4===e.tag&&e.stateNode.containerInfo===n.containerInfo&&e.stateNode.implementation===n.implementation){d(t,e.sibling),(e=a(e,n.children||[])).return=t,t=e;break t}d(t,e);break}p(t,e),e=e.sibling}(e=ul(n,t.mode,i)).return=t,t=e}return s(t)}if("string"==typeof n||"number"==typeof n)return n=""+n,s(t=(null!==e&&6===e.tag?(d(t,e.sibling),(e=a(e,n)).return=t):(d(t,e),(e=ll(n,t.mode,i)).return=t),e));if(uo(n))return function(e,t,n,i){for(var r=null,o=null,a=t,s=t=0,l=null;null!==a&&s<n.length;s++){a.index>s?(l=a,a=null):l=a.sibling;var u=g(e,a,n[s],i);if(null===u){null===a&&(a=l);break}h&&a&&null===u.alternate&&p(e,a),t=m(u,t,s),null===o?r=u:o.sibling=u,o=u,a=l}if(s===n.length)return d(e,a),r;if(null===a){for(;s<n.length;s++)null!==(a=y(e,n[s],i))&&(t=m(a,t,s),null===o?r=a:o.sibling=a,o=a);return r}for(a=f(e,a);s<n.length;s++)null!==(l=v(a,e,s,n[s],i))&&(h&&null!==l.alternate&&a.delete(null===l.key?s:l.key),t=m(l,t,s),null===o?r=l:o.sibling=l,o=l);return h&&a.forEach(function(t){return p(e,t)}),r}(t,e,n,i);if(ft(n))return function(e,t,n,i){var r=ft(n);if("function"!=typeof r)throw Error(E(150));if(null==(n=r.call(n)))throw Error(E(151));for(var o=r=null,a=t,s=t=0,l=null,u=n.next();null!==a&&!u.done;s++,u=n.next()){a.index>s?(l=a,a=null):l=a.sibling;var c=g(e,a,u.value,i);if(null===c){null===a&&(a=l);break}h&&a&&null===c.alternate&&p(e,a),t=m(c,t,s),null===o?r=c:o.sibling=c,o=c,a=l}if(u.done)return d(e,a),r;if(null===a){for(;!u.done;s++,u=n.next())null!==(u=y(e,u.value,i))&&(t=m(u,t,s),null===o?r=u:o.sibling=u,o=u);return r}for(a=f(e,a);!u.done;s++,u=n.next())null!==(u=v(a,e,s,u.value,i))&&(h&&null!==u.alternate&&a.delete(null===u.key?s:u.key),t=m(u,t,s),null===o?r=u:o.sibling=u,o=u);return h&&a.forEach(function(t){return p(e,t)}),r}(t,e,n,i);if(o&&ho(t,n),void 0===n&&!r)switch(t.tag){case 1:case 0:throw t=t.type,Error(E(152,t.displayName||t.name||"Component"))}return d(t,e)}}var fo=po(!0),mo=po(!1),yo={},go={current:yo},vo={current:yo},_o={current:yo};function bo(t){if(t===yo)throw Error(E(174));return t}function xo(t,e){switch(Qi(_o,e),Qi(vo,t),Qi(go,yo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ot(null,"");break;default:e=Ot(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Yi(go),Qi(go,e)}function wo(){Yi(go),Yi(vo),Yi(_o)}function To(t){bo(_o.current);var e=bo(go.current),n=Ot(e,t.type);e!==n&&(Qi(vo,t),Qi(go,n))}function Eo(t){vo.current===t&&(Yi(go),Yi(vo))}var ko={current:0};function So(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Po(t,e){return{responder:t,props:e}}var Co=K.ReactCurrentDispatcher,Mo=K.ReactCurrentBatchConfig,Lo=0,Io=null,Ao=null,zo=null,Oo=!1;function Ro(){throw Error(E(321))}function Do(t,e){if(null!==e){for(var n=0;n<e.length&&n<t.length;n++)if(!Mi(t[n],e[n]))return;return 1}}function No(t,e,n,i,r,o){if(Lo=o,(Io=e).memoizedState=null,e.updateQueue=null,e.expirationTime=0,Co.current=null===t||null===t.memoizedState?aa:sa,t=n(i,r),e.expirationTime===Lo){o=0;do{if(e.expirationTime=0,!(o<25))throw Error(E(301))}while(o+=1,zo=Ao=null,e.updateQueue=null,Co.current=la,t=n(i,r),e.expirationTime===Lo)}if(Co.current=oa,e=null!==Ao&&null!==Ao.next,Lo=0,zo=Ao=Io=null,Oo=!1,e)throw Error(E(300));return t}function Bo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===zo?Io.memoizedState=zo=t:zo=zo.next=t,zo}function Fo(){var t;t=null===Ao?null!==(t=Io.alternate)?t.memoizedState:null:Ao.next;var e=null===zo?Io.memoizedState:zo.next;if(null!==e)zo=e,Ao=t;else{if(null===t)throw Error(E(310));t={memoizedState:(Ao=t).memoizedState,baseState:Ao.baseState,baseQueue:Ao.baseQueue,queue:Ao.queue,next:null},null===zo?Io.memoizedState=zo=t:zo=zo.next=t}return zo}function jo(t,e){return"function"==typeof e?e(t):e}function Uo(t){var e=Fo(),n=e.queue;if(null===n)throw Error(E(311));n.lastRenderedReducer=t;var i,r=Ao,o=r.baseQueue,a=n.pending;if(null!==a&&(null!==o&&(i=o.next,o.next=a.next,a.next=i),r.baseQueue=o=a,n.pending=null),null!==o){o=o.next,r=r.baseState;var s=i=a=null,l=o;do{var u,c=l.expirationTime}while(c<Lo?(u={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null},null===s?(i=s=u,a=r):s=s.next=u,c>Io.expirationTime&&qs(Io.expirationTime=c)):(null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),Zs(c,l.suspenseConfig),r=l.eagerReducer===t?l.eagerState:t(r,l.action)),null!==(l=l.next)&&l!==o);null===s?a=r:s.next=i,Mi(r,e.memoizedState)||(_a=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=s,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Vo(t){var e=Fo(),n=e.queue;if(null===n)throw Error(E(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;for(var a=r=r.next;o=t(o,a.action),a=a.next,a!==r;);Mi(o,e.memoizedState)||(_a=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Zo(t){var e=Bo();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:jo,lastRenderedState:t}).dispatch=ra.bind(null,Io,t),[e.memoizedState,t]}function qo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=Io.updateQueue)?(e={lastEffect:null},(Io.updateQueue=e).lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,(n.next=t).next=i,e.lastEffect=t),t}function Go(){return Fo().memoizedState}function Wo(t,e,n,i){var r=Bo();Io.effectTag|=t,r.memoizedState=qo(1|e,n,void 0,void 0===i?null:i)}function $o(t,e,n,i){var r=Fo();i=void 0===i?null:i;var o=void 0;if(null!==Ao){var a=Ao.memoizedState,o=a.destroy;if(null!==i&&Do(i,a.deps))return void qo(e,n,o,i)}Io.effectTag|=t,r.memoizedState=qo(1|e,n,o,i)}function Ho(t,e){return Wo(516,4,t,e)}function Ko(t,e){return $o(516,4,t,e)}function Xo(t,e){return $o(4,2,t,e)}function Jo(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Yo(t,e,n){return n=null!=n?n.concat([t]):null,$o(4,2,Jo.bind(null,e,t),n)}function Qo(){}function ta(t,e){return Bo().memoizedState=[t,void 0===e?null:e],t}function ea(t,e){var n=Fo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Do(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function na(t,e){var n=Fo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Do(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function ia(e,n,i){var t=Mr();Ir(t<98?98:t,function(){e(!0)}),Ir(97<t?97:t,function(){var t=Mo.suspense;Mo.suspense=void 0===n?null:n;try{e(!1),i()}finally{Mo.suspense=t}})}function ra(t,e,n){var i=Ls(),r={expirationTime:i=Is(i,t,r=eo.suspense),suspenseConfig:r,action:n,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(null===o?r.next=r:(r.next=o.next,o.next=r),e.pending=r,o=t.alternate,t===Io||null!==o&&o===Io)Oo=!0,r.expirationTime=Lo,Io.expirationTime=Lo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(r.eagerReducer=o,r.eagerState=s,Mi(s,a))return}catch(t){}As(t,i)}}var oa={readContext:Wr,useCallback:Ro,useContext:Ro,useEffect:Ro,useImperativeHandle:Ro,useLayoutEffect:Ro,useMemo:Ro,useReducer:Ro,useRef:Ro,useState:Ro,useDebugValue:Ro,useResponder:Ro,useDeferredValue:Ro,useTransition:Ro},aa={readContext:Wr,useCallback:ta,useContext:Wr,useEffect:Ho,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Wo(4,2,Jo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wo(4,2,t,e)},useMemo:function(t,e){var n=Bo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Bo();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t=(t=i.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ra.bind(null,Io,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Bo().memoizedState=t},useState:Zo,useDebugValue:Qo,useResponder:Po,useDeferredValue:function(e,n){var t=Zo(e),i=t[0],r=t[1];return Ho(function(){var t=Mo.suspense;Mo.suspense=void 0===n?null:n;try{r(e)}finally{Mo.suspense=t}},[e,n]),i},useTransition:function(t){var e=(n=Zo(!1))[0],n=n[1];return[ta(ia.bind(null,n,t),[n,t]),e]}},sa={readContext:Wr,useCallback:ea,useContext:Wr,useEffect:Ko,useImperativeHandle:Yo,useLayoutEffect:Xo,useMemo:na,useReducer:Uo,useRef:Go,useState:function(){return Uo(jo)},useDebugValue:Qo,useResponder:Po,useDeferredValue:function(e,n){var t=Uo(jo),i=t[0],r=t[1];return Ko(function(){var t=Mo.suspense;Mo.suspense=void 0===n?null:n;try{r(e)}finally{Mo.suspense=t}},[e,n]),i},useTransition:function(t){var e=(n=Uo(jo))[0],n=n[1];return[ea(ia.bind(null,n,t),[n,t]),e]}},la={readContext:Wr,useCallback:ea,useContext:Wr,useEffect:Ko,useImperativeHandle:Yo,useLayoutEffect:Xo,useMemo:na,useReducer:Vo,useRef:Go,useState:function(){return Vo(jo)},useDebugValue:Qo,useResponder:Po,useDeferredValue:function(e,n){var t=Vo(jo),i=t[0],r=t[1];return Ko(function(){var t=Mo.suspense;Mo.suspense=void 0===n?null:n;try{r(e)}finally{Mo.suspense=t}},[e,n]),i},useTransition:function(t){var e=(n=Vo(jo))[0],n=n[1];return[ea(ia.bind(null,n,t),[n,t]),e]}},ua=null,ca=null,ha=!1;function pa(t,e){var n=il(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function da(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,1);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,1);case 13:default:return}}function fa(t){if(ha){var e=ca;if(e){var n=e;if(!da(t,e)){if(!(e=yn(n.nextSibling))||!da(t,e))return t.effectTag=-1025&t.effectTag|2,ua=t,ha=!1;pa(ua,n)}ua=t,ca=yn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,ha=!1,ua=t}}function ma(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ua=t}function ya(t){if(t===ua){if(!ha)return ma(t),ha=!0,0;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!dn(e,t.memoizedProps))for(e=ca;e;)pa(t,e),e=yn(e.nextSibling);if(ma(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(E(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ca=yn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ca=null}}else ca=ua?yn(t.stateNode.nextSibling):null;return 1}}function ga(){ca=ua=null,ha=!1}var va=K.ReactCurrentOwner,_a=!1;function ba(t,e,n,i){e.child=null===t?mo(e,null,n,i):fo(e,t.child,n,i)}function xa(t,e,n,i,r){n=n.render;var o=e.ref;return Gr(e,r),i=No(t,e,n,i,o,r),null===t||_a?(e.effectTag|=1,ba(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),Na(t,e,r))}function wa(t,e,n,i,r,o){if(null!==t)return a=t.child,r<o&&(r=a.memoizedProps,(n=null!==(n=n.compare)?n:Ii)(r,i)&&t.ref===e.ref)?Na(t,e,o):(e.effectTag|=1,(t=ol(a,i)).ref=e.ref,(t.return=e).child=t);var a=n.type;return"function"!=typeof a||rl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=al(n.type,null,i,null,e.mode,o)).ref=e.ref,(t.return=e).child=t):(e.tag=15,e.type=a,Ta(t,e,a,i,r,o))}function Ta(t,e,n,i,r,o){return null!==t&&Ii(t.memoizedProps,i)&&t.ref===e.ref&&(_a=!1,r<o)?(e.expirationTime=t.expirationTime,Na(t,e,o)):ka(t,e,n,i,o)}function Ea(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function ka(t,e,n,i,r){var o=rr(e,o=or(n)?ir:er.current);return Gr(e,r),n=No(t,e,n,i,o,r),null===t||_a?(e.effectTag|=1,ba(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),Na(t,e,r))}function Sa(t,e,n,i,r){var o,a,s,l,u,c,h,p;return or(n)?(o=!0,ur(e)):o=!1,Gr(e,r),i=null===e.stateNode?(null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),ao(e,n,i),lo(e,n,i,r),!0):null===t?(a=e.stateNode,s=e.memoizedProps,a.props=s,l=a.context,u="object"==typeof(u=n.contextType)&&null!==u?Wr(u):rr(e,u=or(n)?ir:er.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===i&&l===u||so(0,a,i,u),$r=!1,p=e.memoizedState,a.state=p,Qr(e,i,a,r),l=e.memoizedState,s!==i||p!==l||nr.current||$r?("function"==typeof c&&(io(e,0,c,i),l=e.memoizedState),(s=$r||oo(e,n,s,i,p,l,u))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=u,s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),!1)):(a=e.stateNode,Kr(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:Nr(e.type,s),l=a.context,u="object"==typeof(u=n.contextType)&&null!==u?Wr(u):rr(e,u=or(n)?ir:er.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===i&&l===u||so(0,a,i,u),$r=!1,l=e.memoizedState,a.state=l,Qr(e,i,a,r),p=e.memoizedState,s!==i||l!==p||nr.current||$r?("function"==typeof c&&(io(e,0,c,i),p=e.memoizedState),(c=$r||oo(e,n,s,i,l,p,u))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,u)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=u,c):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),!1)),Pa(t,e,n,i,o,r)}function Pa(t,e,n,i,r,o){Ea(t,e);var a=0!=(64&e.effectTag);if(!i&&!a)return r&&cr(e,n,!1),Na(t,e,o);i=e.stateNode,va.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return e.effectTag|=1,null!==t&&a?(e.child=fo(e,t.child,null,o),e.child=fo(e,null,s,o)):ba(t,e,s,o),e.memoizedState=i.state,r&&cr(e,n,!0),e.child}function Ca(t){var e=t.stateNode;e.pendingContext?sr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&sr(0,e.context,!1),xo(t,e.containerInfo)}var Ma,La,Ia,Aa={dehydrated:null,retryTime:0};function za(t,e,n){var i,r=e.mode,o=e.pendingProps,a=ko.current,s=!1;if((i=0!=(64&e.effectTag))||(i=0!=(2&a)&&(null===t||null!==t.memoizedState)),i?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),Qi(ko,1&a),null===t){if(void 0!==o.fallback&&fa(e),s){if(s=o.fallback,0==(2&((o=sl(null,r,0,null)).return=e).mode))for(t=(null!==e.memoizedState?e.child:e).child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=sl(s,r,n,null)).return=e,o.sibling=n,e.memoizedState=Aa,e.child=o,n}return r=o.children,e.memoizedState=null,e.child=mo(e,null,r,n)}if(null!==t.memoizedState){if(r=(t=t.child).sibling,s){if(o=o.fallback,0==(2&((n=ol(t,t.pendingProps)).return=e).mode)&&(s=(null!==e.memoizedState?e.child:e).child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(r=ol(r,o)).return=e,n.sibling=r,n.childExpirationTime=0,e.memoizedState=Aa,e.child=n,r}return n=fo(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=sl(null,r,0,null)).return=e,null!==(o.child=t)&&(t.return=o),0==(2&e.mode))for(t=(null!==e.memoizedState?e.child:e).child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=sl(s,r,n,null)).return=e,(o.sibling=n).effectTag|=2,o.childExpirationTime=0,e.memoizedState=Aa,e.child=o,n}return e.memoizedState=null,e.child=fo(e,t,o.children,n)}function Oa(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),qr(t.return,e)}function Ra(t,e,n,i,r,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailExpiration:0,tailMode:r,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailExpiration=0,a.tailMode=r,a.lastEffect=o)}function Da(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(ba(t,e,i.children,n),0!=(2&(i=ko.current)))i=1&i|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Oa(t,n);else if(19===t.tag)Oa(t,n);else if(null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Qi(ko,i),0==(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===So(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ra(e,!1,r,n,o,e.lastEffect);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===So(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ra(e,!0,n,null,o,e.lastEffect);break;case"together":Ra(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Na(t,e,n){null!==t&&(e.dependencies=t.dependencies);var i=e.expirationTime;if(0!==i&&qs(i),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(E(153));if(null!==e.child){for(n=ol(t=e.child,t.pendingProps),(e.child=n).return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=ol(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ba(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Fa(t,e){return{value:t,source:e,stack:yt(e)}}Ma=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(t,e,n,i,r){var o=t.memoizedProps;if(o!==i){var a,s,l=e.stateNode;switch(bo(go.current),t=null,n){case"input":o=xt(l,o),i=xt(l,i),t=[];break;case"option":o=Pt(l,o),i=Pt(l,i),t=[];break;case"select":o=g({},o,{value:void 0}),i=g({},i,{value:void 0}),t=[];break;case"textarea":o=Mt(l,o),i=Mt(l,i),t=[];break;default:"function"!=typeof o.onClick&&"function"==typeof i.onClick&&(l.onclick=rn)}for(a in Qe(n,i),n=null,o)if(!i.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(s in l=o[a])l.hasOwnProperty(s)&&(n=n||{},n[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(w.hasOwnProperty(a)?t=t||[]:(t=t||[]).push(a,null));for(a in i){var u=i[a],l=null!=o?o[a]:void 0;if(i.hasOwnProperty(a)&&u!==l&&(null!=u||null!=l))if("style"===a)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n=n||{},n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n=n||{},n[s]=u[s])}else n||(t=t||[]).push(a,n),n=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(t=t||[]).push(a,u)):"children"===a?l===u||"string"!=typeof u&&"number"!=typeof u||(t=t||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(w.hasOwnProperty(a)?(null!=u&&nn(r,a),t||l===u||(t=[])):(t=t||[]).push(a,u))}n&&(t=t||[]).push("style",n),r=t,(e.updateQueue=r)&&(e.effectTag|=4)}},Ia=function(t,e,n,i){n!==i&&(e.effectTag|=4)};var ja="function"==typeof WeakSet?WeakSet:Set;function Ua(t,e){var n=e.source;null===e.stack&&null!==n&&yt(n),null!==n&&mt(n.type),e=e.value,null!==t&&1===t.tag&&mt(t.type);try{console.error(e)}catch(t){setTimeout(function(){throw t})}}function Va(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Ys(t,e)}else e.current=null}function Za(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n,i=e=e.next;do{}while((i.tag&t)===t&&(n=i.destroy,(i.destroy=void 0)!==n&&n()),(i=i.next)!==e)}}function qa(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n,i=e=e.next;do{}while((i.tag&t)===t&&(n=i.create,i.destroy=n()),(i=i.next)!==e)}}function Ga(t,i,e){switch("function"==typeof el&&el(i),i.tag){case 0:case 11:case 14:case 15:case 22:var r;null!==(t=i.updateQueue)&&null!==(t=t.lastEffect)&&(r=t.next,Ir(97<e?97:e,function(){var t=r;do{var e=t.destroy;if(void 0!==e){var n=i;try{e()}catch(t){Ys(n,t)}}}while((t=t.next)!==r)}));break;case 1:Va(i),"function"==typeof(e=i.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ys(t,e)}}(i,e);break;case 5:Va(i);break;case 4:Ha(t,i,e)}}function Wa(t){return 5===t.tag||3===t.tag||4===t.tag}function $a(t){t:{for(var e=t.return;null!==e;){if(Wa(e)){var n=e;break t}e=e.return}throw Error(E(160))}switch(e=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:e=e.containerInfo,i=!0;break;default:throw Error(E(161))}16&n.effectTag&&(Bt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||Wa(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n=(n.child.return=n).child}if(!(2&n.effectTag)){n=n.stateNode;break t}}(i?function t(e,n,i){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,n?(8===i.nodeType?i.parentNode:i).insertBefore(e,n):(8===i.nodeType?(n=i.parentNode).insertBefore(e,i):(n=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==n.onclick||(n.onclick=rn));else if(4!==r&&null!==(e=e.child))for(t(e,n,i),e=e.sibling;null!==e;)t(e,n,i),e=e.sibling}:function t(e,n,i){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,n?i.insertBefore(e,n):i.appendChild(e);else if(4!==r&&null!==(e=e.child))for(t(e,n,i),e=e.sibling;null!==e;)t(e,n,i),e=e.sibling})(t,n,e)}function Ha(t,e,n){for(var i,r,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(E(160));switch(i=a.stateNode,a.tag){case 5:r=!1;break t;case 3:case 4:i=i.containerInfo,r=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag){t:for(var s=t,l=o,u=n,c=l;;)if(Ga(s,c,u),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break t;for(;null===c.sibling;){if(null===c.return||c.return===l)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=i,l=o.stateNode,(8===s.nodeType?s.parentNode:s).removeChild(l)):i.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){i=o.stateNode.containerInfo,r=!0,o=(o.child.return=o).child;continue}}else if(Ga(t,o,n),null!==o.child){o=(o.child.return=o).child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Ka(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return Za(3,e),0;case 1:return;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps,r=null!==t?t.memoizedProps:i;t=e.type;var o=e.updateQueue;if((e.updateQueue=null)!==o){for(n[bn]=i,"input"===t&&"radio"===i.type&&null!=i.name&&Tt(n,i),tn(t,r),e=tn(t,i),r=0;r<o.length;r+=2){var a=o[r],s=o[r+1];"style"===a?Je(n,s):"dangerouslySetInnerHTML"===a?Nt(n,s):"children"===a?Bt(n,s):X(n,a,s,e)}switch(t){case"input":Et(n,i);break;case"textarea":It(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(t=i.value)?Ct(n,!!i.multiple,t,!1):e!==!!i.multiple&&(null!=i.defaultValue?Ct(n,!!i.multiple,i.defaultValue,!0):Ct(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(E(162));return e.stateNode.nodeValue=e.memoizedProps,0;case 3:return(e=e.stateNode).hydrate&&(e.hydrate=!1,ze(e.containerInfo)),0;case 12:return;case 13:if(null===(n=e).memoizedState?i=!1:(i=!0,n=e.child,vs=Cr()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,i?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,r=null!=(r=t.memoizedProps.style)&&r.hasOwnProperty("display")?r.display:null,o.style.display=Xe("display",r));else if(6===t.tag)t.stateNode.nodeValue=i?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t=(t.child.return=t).child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return Xa(e),0;case 19:return Xa(e),0;case 17:return}throw Error(E(163))}function Xa(n){var i,t=n.updateQueue;null!==t&&((n.updateQueue=null)===(i=n.stateNode)&&(i=n.stateNode=new ja),t.forEach(function(t){var e=function(t,e){var n=t.stateNode;null!==n&&n.delete(e),e=0,e=Is(e=Ls(),t,null),null!==(t=zs(t,e))&&Rs(t)}.bind(null,n,t);i.has(t)||(i.add(t),t.then(e,e))}))}var Ja="function"==typeof WeakMap?WeakMap:Map;function Ya(t,e,n){(n=Xr(n,null)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){bs||(bs=!0,xs=i),Ua(t,e)},n}function Qa(e,n,t){(t=Xr(t,null)).tag=3;var i,r=e.type.getDerivedStateFromError;"function"==typeof r&&(i=n.value,t.payload=function(){return Ua(e,n),r(i)});var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(t.callback=function(){"function"!=typeof r&&(null===ws?ws=new Set([this]):ws.add(this),Ua(e,n));var t=n.stack;this.componentDidCatch(n.value,{componentStack:null!==t?t:""})}),t}var ts,es=Math.ceil,ns=K.ReactCurrentDispatcher,is=K.ReactCurrentOwner,rs=0,os=3,as=4,ss=0,ls=null,us=null,cs=0,hs=rs,ps=null,ds=1073741823,fs=1073741823,ms=null,ys=0,gs=!1,vs=0,_s=null,bs=!1,xs=null,ws=null,Ts=!1,Es=null,ks=90,Ss=null,Ps=0,Cs=null,Ms=0;function Ls(){return 0!=(48&ss)?1073741821-(Cr()/10|0):0!==Ms?Ms:Ms=1073741821-(Cr()/10|0)}function Is(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var i=Mr();if(0==(4&e))return 99===i?1073741823:1073741822;if(0!=(16&ss))return cs;if(null!==n)t=Dr(t,0|n.timeoutMs||5e3,250);else switch(i){case 99:t=1073741823;break;case 98:t=Dr(t,150,100);break;case 97:case 96:t=Dr(t,5e3,250);break;case 95:t=2;break;default:throw Error(E(326))}return null!==ls&&t===cs&&--t,t}function As(t,e){if(50<Ps)throw Ps=0,Cs=null,Error(E(185));var n;null!==(t=zs(t,e))&&(n=Mr(),1073741823===e?0!=(8&ss)&&0==(48&ss)?Ns(t):(Rs(t),0===ss&&Or()):Rs(t),0==(4&ss)||98!==n&&99!==n||(null===Ss?Ss=new Map([[t,e]]):(void 0===(n=Ss.get(t))||e<n)&&Ss.set(t,e)))}function zs(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var i=t.return,r=null;if(null===i&&3===t.tag)r=t.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<e&&(i.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===i.return&&3===i.tag){r=i.stateNode;break}i=i.return}return null!==r&&(ls===r&&(qs(e),hs===as&&pl(r,cs)),dl(r,e)),r}function Os(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!hl(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return(t=n>(t=t.nextKnownPendingLevel)?n:t)<=2&&e!==t?0:t}function Rs(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=zr(Ns.bind(null,t));else{var e=Os(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var i=Ls(),i=1073741823===e?99:1===e||2===e?95:(i=10*(1073741821-e)-10*(1073741821-i))<=0?99:i<=250?98:i<=5250?97:95;if(null!==n){var r=t.callbackPriority;if(t.callbackExpirationTime===e&&i<=r)return;n!==xr&&dr(n)}t.callbackExpirationTime=e,t.callbackPriority=i,e=1073741823===e?zr(Ns.bind(null,t)):Ar(i,Ds.bind(null,t),{timeout:10*(1073741821-e)-Cr()}),t.callbackNode=e}}}function Ds(t,e){if(Ms=0,e)return fl(t,e=Ls()),Rs(t),null;var n=Os(t);if(0!==n){if(e=t.callbackNode,0!=(48&ss))throw Error(E(327));if(Ks(),t===ls&&n===cs||js(t,n),null!==us){var i=ss;ss|=16;for(var r=Vs();;)try{!function(){for(;null!==us&&!wr();)us=Gs(us)}();break}catch(e){Us(t,e)}if(Vr(),ss=i,ns.current=r,1===hs)throw e=ps,js(t,n),pl(t,n),Rs(t),e;if(null===us)switch(r=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,i=hs,ls=null,i){case rs:case 1:throw Error(E(345));case 2:fl(t,2<n?2:n);break;case os:if(pl(t,n),n===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=$s(r)),1073741823===ds&&10<(r=vs+500-Cr())){if(gs){var o=t.lastPingedTime;if(0===o||n<=o){t.lastPingedTime=n,js(t,n);break}}if(0!==(o=Os(t))&&o!==n)break;if(0!==i&&i!==n){t.lastPingedTime=i;break}t.timeoutHandle=fn(Hs.bind(null,t),r);break}Hs(t);break;case as:if(pl(t,n),n===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=$s(r)),gs&&(0===(r=t.lastPingedTime)||n<=r)){t.lastPingedTime=n,js(t,n);break}if(0!==(r=Os(t))&&r!==n)break;if(0!==i&&i!==n){t.lastPingedTime=i;break}if(1073741823!==fs?i=10*(1073741821-fs)-Cr():1073741823===ds?i=0:(i=10*(1073741821-ds)-5e3,(i=(r=Cr())-i)<0&&(i=0),(n=10*(1073741821-n)-r)<(i=(i<120?120:i<480?480:i<1080?1080:i<1920?1920:i<3e3?3e3:i<4320?4320:1960*es(i/1960))-i)&&(i=n)),10<i){t.timeoutHandle=fn(Hs.bind(null,t),i);break}Hs(t);break;case 5:if(1073741823!==ds&&null!==ms){o=ds;var a=ms;if(10<(i=(i=0|a.busyMinDurationMs)<=0?0:(r=0|a.busyDelayMs,(o=Cr()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=r?0:r+i-o))){pl(t,n),t.timeoutHandle=fn(Hs.bind(null,t),i);break}}Hs(t);break;default:throw Error(E(329))}if(Rs(t),t.callbackNode===e)return Ds.bind(null,t)}}return null}function Ns(t){var e=0!==(e=t.lastExpiredTime)?e:1073741823;if(0!=(48&ss))throw Error(E(327));if(Ks(),t===ls&&e===cs||js(t,e),null!==us){var n=ss;ss|=16;for(var i=Vs();;)try{!function(){for(;null!==us;)us=Gs(us)}();break}catch(e){Us(t,e)}if(Vr(),ss=n,ns.current=i,1===hs)throw n=ps,js(t,e),pl(t,e),Rs(t),n;if(null!==us)throw Error(E(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,ls=null,Hs(t),Rs(t)}return null}function Bs(t,e){var n=ss;ss|=1;try{return t(e)}finally{0===(ss=n)&&Or()}}function Fs(t,e){var n=ss;ss&=-2,ss|=8;try{return t(e)}finally{0===(ss=n)&&Or()}}function js(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,mn(n)),null!==us)for(n=us.return;null!==n;){var i=n;switch(i.tag){case 1:null!=(i=i.type.childContextTypes)&&ar();break;case 3:wo(),Yi(nr),Yi(er);break;case 5:Eo(i);break;case 4:wo();break;case 13:case 19:Yi(ko);break;case 10:Zr(i)}n=n.return}us=ol((ls=t).current,null),cs=e,hs=rs,fs=ds=1073741823,ms=ps=null,ys=0,gs=!1}function Us(t,e){for(;;){try{if(Vr(),Co.current=oa,Oo)for(var n=Io.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}if(Lo=0,zo=Ao=Io=null,Oo=!1,null===us||null===us.return)return hs=1,ps=e,us=null;t:{var r=t,o=us.return,a=us,s=e;if(e=cs,a.effectTag|=2048,(a.firstEffect=a.lastEffect=null)!==s&&"object"==typeof s&&"function"==typeof s.then){var l,u=s;0==(2&a.mode)&&((l=a.alternate)?(a.updateQueue=l.updateQueue,a.memoizedState=l.memoizedState,a.expirationTime=l.expirationTime):(a.updateQueue=null,a.memoizedState=null));var c,h=0!=(1&ko.current),p=o;do{if((d=13===p.tag)&&(d=null!==(c=p.memoizedState)?null!==c.dehydrated:void 0!==(f=p.memoizedProps).fallback&&(!0!==f.unstable_avoidThisFallback||!h)),d){var d,f=p.updateQueue;if(null===f?((d=new Set).add(u),p.updateQueue=d):f.add(u),0==(2&p.mode)){p.effectTag|=64,a.effectTag&=-2981,1===a.tag&&(null===a.alternate?a.tag=17:((m=Xr(1073741823,null)).tag=2,Jr(a,m))),a.expirationTime=1073741823;break t}s=void 0,a=e;var m=r.pingCache;null===m?(m=r.pingCache=new Ja,s=new Set,m.set(u,s)):void 0===(s=m.get(u))&&(s=new Set,m.set(u,s)),s.has(a)||(s.add(a),m=Qs.bind(null,r,u,a),u.then(m,m)),p.effectTag|=4096,p.expirationTime=e;break t}}while(null!==(p=p.return));s=Error((mt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+yt(a))}5!==hs&&(hs=2),s=Fa(s,a),p=o;do{switch(p.tag){case 3:u=s,p.effectTag|=4096,p.expirationTime=e,Yr(p,Ya(p,u,e));break t;case 1:u=s;var y=p.type,g=p.stateNode;if(0==(64&p.effectTag)&&("function"==typeof y.getDerivedStateFromError||null!==g&&"function"==typeof g.componentDidCatch&&(null===ws||!ws.has(g)))){p.effectTag|=4096,p.expirationTime=e,Yr(p,Qa(p,u,e));break t}}}while(null!==(p=p.return))}us=Ws(us)}catch(t){e=t;continue}break}}function Vs(){var t=ns.current;return ns.current=oa,null===t?oa:t}function Zs(t,e){t<ds&&2<t&&(ds=t),null!==e&&t<fs&&2<t&&(fs=t,ms=e)}function qs(t){ys<t&&(ys=t)}function Gs(t){var e=ts(t.alternate,t,cs);return t.memoizedProps=t.pendingProps,null===e&&(e=Ws(t)),is.current=null,e}function Ws(t){us=t;do{var e=us.alternate;if(t=us.return,0==(2048&us.effectTag)){if(e=function(t,e,n){var i=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return or(e.type)&&ar(),null;case 3:return wo(),Yi(nr),Yi(er),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!ya(e)||(e.effectTag|=4),null;case 5:Eo(e),n=bo(_o.current);var r=e.type;if(null!==t&&null!=e.stateNode)La(t,e,r,i,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!i){if(null===e.stateNode)throw Error(E(166));return null}if(t=bo(go.current),ya(e)){i=e.stateNode,r=e.type;var o,a,s=e.memoizedProps;switch(i[_n]=e,i[bn]=s,r){case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(t=0;t<Ht.length;t++)qe(Ht[t],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"form":qe("reset",i),qe("submit",i);break;case"details":qe("toggle",i);break;case"input":wt(i,s),qe("invalid",i),nn(n,"onChange");break;case"select":i._wrapperState={wasMultiple:!!s.multiple},qe("invalid",i),nn(n,"onChange");break;case"textarea":Lt(i,s),qe("invalid",i),nn(n,"onChange")}for(o in Qe(r,s),t=null,s)s.hasOwnProperty(o)&&(a=s[o],"children"===o?"string"==typeof a?i.textContent!==a&&(t=["children",a]):"number"==typeof a&&i.textContent!==""+a&&(t=["children",""+a]):w.hasOwnProperty(o)&&null!=a&&nn(n,o));switch(r){case"input":_t(i),kt(i,s,!0);break;case"textarea":_t(i),At(i);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(i.onclick=rn)}n=t,null!==(e.updateQueue=n)&&(e.effectTag|=4)}else{switch(o=9===n.nodeType?n:n.ownerDocument,t===en&&(t=zt(r)),t===en?"script"===r?((t=o.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof i.is?t=o.createElement(r,{is:i.is}):(t=o.createElement(r),"select"===r&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,r),t[_n]=e,t[bn]=i,Ma(t,e),e.stateNode=t,o=tn(r,i),r){case"iframe":case"object":case"embed":qe("load",t),a=i;break;case"video":case"audio":for(a=0;a<Ht.length;a++)qe(Ht[a],t);a=i;break;case"source":qe("error",t),a=i;break;case"img":case"image":case"link":qe("error",t),qe("load",t),a=i;break;case"form":qe("reset",t),qe("submit",t),a=i;break;case"details":qe("toggle",t),a=i;break;case"input":wt(t,i),a=xt(t,i),qe("invalid",t),nn(n,"onChange");break;case"option":a=Pt(t,i);break;case"select":t._wrapperState={wasMultiple:!!i.multiple},a=g({},i,{value:void 0}),qe("invalid",t),nn(n,"onChange");break;case"textarea":Lt(t,i),a=Mt(t,i),qe("invalid",t),nn(n,"onChange");break;default:a=i}Qe(r,a);var l,u=a;for(s in u)u.hasOwnProperty(s)&&(l=u[s],"style"===s?Je(t,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&Nt(t,l):"children"===s?"string"==typeof l?"textarea"===r&&""===l||Bt(t,l):"number"==typeof l&&Bt(t,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(w.hasOwnProperty(s)?null!=l&&nn(n,s):null!=l&&X(t,s,l,o)));switch(r){case"input":_t(t),kt(t,i,!1);break;case"textarea":_t(t),At(t);break;case"option":null!=i.value&&t.setAttribute("value",""+gt(i.value));break;case"select":t.multiple=!!i.multiple,null!=(n=i.value)?Ct(t,!!i.multiple,n,!1):null!=i.defaultValue&&Ct(t,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof a.onClick&&(t.onclick=rn)}pn(r,i)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Ia(0,e,t.memoizedProps,i);else{if("string"!=typeof i&&null===e.stateNode)throw Error(E(166));n=bo(_o.current),bo(go.current),ya(e)?(n=e.stateNode,i=e.memoizedProps,n[_n]=e,n.nodeValue!==i&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[_n]=e).stateNode=n}return null;case 13:return Yi(ko),i=e.memoizedState,0!=(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==i,i=!1,null===t?void 0!==e.memoizedProps.fallback&&ya(e):(i=null!==(r=t.memoizedState),n||null===r||null!==(r=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=r).nextEffect=s:(e.firstEffect=e.lastEffect=r).nextEffect=null,r.effectTag=8)),n&&!i&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&ko.current)?hs===rs&&(hs=os):(hs!==rs&&hs!==os||(hs=as),0!==ys&&null!==ls&&(pl(ls,cs),dl(ls,ys)))),(n||i)&&(e.effectTag|=4),null);case 4:return wo(),null;case 10:return Zr(e),null;case 17:return or(e.type)&&ar(),null;case 19:if(Yi(ko),null===(i=e.memoizedState))return null;if(r=0!=(64&e.effectTag),null===(s=i.rendering)){if(r)Ba(i,!1);else if(hs!==rs||null!==t&&0!=(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=So(s))){for(e.effectTag|=64,Ba(i,!1),null!==(r=t.updateQueue)&&(e.updateQueue=r,e.effectTag|=4),null===i.lastEffect&&(e.firstEffect=null),e.lastEffect=i.lastEffect,i=e.child;null!==i;)s=n,(r=i).effectTag&=2,r.nextEffect=null,r.firstEffect=null,(r.lastEffect=null)===(t=r.alternate)?(r.childExpirationTime=0,r.expirationTime=s,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=t.childExpirationTime,r.expirationTime=t.expirationTime,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),i=i.sibling;return Qi(ko,1&ko.current|2),e.child}s=s.sibling}}else{if(!r)if(null!==(t=So(s))){if(e.effectTag|=64,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Ba(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate)return null!==(e=e.lastEffect=i.lastEffect)&&(e.nextEffect=null),null}else 2*Cr()-i.renderingStartTime>i.tailExpiration&&1<n&&(e.effectTag|=64,Ba(i,!(r=!0)),e.expirationTime=e.childExpirationTime=n-1);i.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=i.last)?n.sibling=s:e.child=s,i.last=s)}return null!==i.tail?(0===i.tailExpiration&&(i.tailExpiration=Cr()+500),n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=e.lastEffect,i.renderingStartTime=Cr(),n.sibling=null,e=ko.current,Qi(ko,r?1&e|2:1&e),n):null}throw Error(E(156,e.tag))}(e,us,cs),1===cs||1!==us.childExpirationTime){for(var n=0,i=us.child;null!==i;){var r=i.expirationTime,o=i.childExpirationTime;n<r&&(n=r),n<o&&(n=o),i=i.sibling}us.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=us.firstEffect),null!==us.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=us.firstEffect),t.lastEffect=us.lastEffect),1<us.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=us:t.firstEffect=us,t.lastEffect=us))}else{if(null!==(e=function(t){switch(t.tag){case 1:or(t.type)&&ar();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(wo(),Yi(nr),Yi(er),0!=(64&(e=t.effectTag)))throw Error(E(285));return t.effectTag=-4097&e|64,t;case 5:return Eo(t),null;case 13:return Yi(ko),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return Yi(ko),null;case 4:return wo(),null;case 10:return Zr(t),null;default:return null}}(us)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=us.sibling))return e}while(null!==(us=t));return hs===rs&&(hs=5),null}function $s(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function Hs(t){var e=Mr();return Ir(99,function(t,e){for(;Ks(),null!==Es;);if(0!=(48&ss))throw Error(E(327));var n=t.finishedWork,i=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var r,o=$s(n);if(t.firstPendingTime=o,i<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:i<=t.firstSuspendedTime&&(t.firstSuspendedTime=i-1),i<=t.lastPingedTime&&(t.lastPingedTime=0),i<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===ls&&(us=ls=null,cs=0),o=1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,n.firstEffect):n:n.firstEffect,null!==o){var a=ss;ss|=32,is.current=null,cn=Ze;var s=ln();if(un(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{var u=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{l.nodeType,h.nodeType}catch(t){l=null;break t}var p=0,d=-1,f=-1,m=0,y=0,g=s,v=null;e:for(;;){for(;g!==l||0!==c&&3!==g.nodeType||(d=p+c),g!==h||0!==u&&3!==g.nodeType||(f=p+u),3===g.nodeType&&(p+=g.nodeValue.length),null!==(r=g.firstChild);)v=g,g=r;for(;;){if(g===s)break e;if(v===l&&++m===c&&(d=p),v===h&&++y===u&&(f=p),null!==(r=g.nextSibling))break;v=(g=v).parentNode}g=r}l=-1===d||-1===f?null:{start:d,end:f}}else l=null}l=l||{start:0,end:0}}else l=null;Ze=!(hn={activeElementDetached:null,focusedElem:s,selectionRange:l}),_s=o;do{try{!function(){for(;null!==_s;){var t=_s.effectTag;0!=(256&t)&&function(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:var n,i;return 256&e.effectTag&&null!==t&&(n=t.memoizedProps,i=t.memoizedState,e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Nr(e.type,n),i),t.__reactInternalSnapshotBeforeUpdate=e);case 3:case 5:case 6:case 4:case 17:return}throw Error(E(163))}(_s.alternate,_s),0==(512&t)||Ts||(Ts=!0,Ar(97,function(){return Ks(),null})),_s=_s.nextEffect}}()}catch(t){if(null===_s)throw Error(E(330));Ys(_s,t),_s=_s.nextEffect}}while(null!==_s);_s=o;do{try{for(s=t,l=e;null!==_s;){var _,b,x=_s.effectTag;switch(16&x&&Bt(_s.stateNode,""),128&x&&(null===(_=_s.alternate)||null!==(b=_.ref)&&("function"==typeof b?b(null):b.current=null)),1038&x){case 2:$a(_s),_s.effectTag&=-3;break;case 6:$a(_s),_s.effectTag&=-3,Ka(_s.alternate,_s);break;case 1024:_s.effectTag&=-1025;break;case 1028:_s.effectTag&=-1025,Ka(_s.alternate,_s);break;case 4:Ka(_s.alternate,_s);break;case 8:Ha(s,c=_s,l),function t(e){var n=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,(e.stateNode=null)!==n&&t(n)}(c)}_s=_s.nextEffect}}catch(t){if(null===_s)throw Error(E(330));Ys(_s,t),_s=_s.nextEffect}}while(null!==_s);if(b=hn,_=ln(),x=b.focusedElem,l=b.selectionRange,_!==x&&x&&x.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(x.ownerDocument.documentElement,x)){null!==l&&un(x)&&(_=l.start,void 0===(b=l.end)&&(b=_),"selectionStart"in x?(x.selectionStart=_,x.selectionEnd=Math.min(b,x.value.length)):(b=(_=x.ownerDocument||document)&&_.defaultView||window).getSelection&&(b=b.getSelection(),c=x.textContent.length,s=Math.min(l.start,c),l=void 0===l.end?s:Math.min(l.end,c),!b.extend&&l<s&&(c=l,l=s,s=c),c=sn(x,s),h=sn(x,l),c&&h&&(1!==b.rangeCount||b.anchorNode!==c.node||b.anchorOffset!==c.offset||b.focusNode!==h.node||b.focusOffset!==h.offset)&&((_=_.createRange()).setStart(c.node,c.offset),b.removeAllRanges(),l<s?(b.addRange(_),b.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),b.addRange(_))))),_=[];for(b=x;b=b.parentNode;)1===b.nodeType&&_.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<_.length;x++)(b=_[x]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Ze=!!cn,hn=cn=null,t.current=n,_s=o;do{try{for(x=t;null!==_s;){var w,T=_s.effectTag;36&T&&function(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return qa(3,n);case 1:var i;return t=n.stateNode,4&n.effectTag&&(null===e?t.componentDidMount():(i=n.elementType===n.type?e.memoizedProps:Nr(n.type,e.memoizedProps),t.componentDidUpdate(i,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),null!==(e=n.updateQueue)&&to(0,e,t);case 3:if(null!==(e=n.updateQueue)){if((t=null)!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}to(0,e,t)}return;case 5:return t=n.stateNode,null===e&&4&n.effectTag&&pn(n.type,n.memoizedProps)&&t.focus();case 6:case 4:case 12:return;case 13:return null!==n.memoizedState||null!==(n=n.alternate)&&(null===(n=n.memoizedState)||null!==(n=n.dehydrated)&&ze(n));case 19:case 17:case 20:case 21:return}throw Error(E(163))}(x,_s.alternate,_s),128&T&&(_=void 0,null!==(w=_s.ref)&&(T=_s.stateNode,_=(_s.tag,T),"function"==typeof w?w(_):w.current=_)),_s=_s.nextEffect}}catch(t){if(null===_s)throw Error(E(330));Ys(_s,t),_s=_s.nextEffect}}while(null!==_s);_s=null,Tr(),ss=a}else t.current=n;if(Ts)Ts=!1,Es=t,ks=e;else for(_s=o;null!==_s;)e=_s.nextEffect,_s.nextEffect=null,_s=e;if(0===(e=t.firstPendingTime)&&(ws=null),1073741823===e?t===Cs?Ps++:(Ps=0,Cs=t):Ps=0,"function"==typeof tl&&tl(n.stateNode,i),Rs(t),bs)throw bs=!1,t=xs,xs=null,t;return 0!=(8&ss)||Or(),null}.bind(null,t,e)),null}function Ks(){if(90!==ks){var t=97<ks?97:ks;return ks=90,Ir(t,Xs)}}function Xs(){if(null===Es)return!1;var t=Es;if(Es=null,0!=(48&ss))throw Error(E(331));var e=ss;for(ss|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:Za(5,n),qa(5,n)}}catch(e){if(null===t)throw Error(E(330));Ys(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return ss=e,Or(),!0}function Js(t,e,n){Jr(t,e=Ya(t,e=Fa(n,e),1073741823)),null!==(t=zs(t,1073741823))&&Rs(t)}function Ys(t,e){if(3===t.tag)Js(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Js(n,t,e);break}if(1===n.tag){var i=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===ws||!ws.has(i))){Jr(n,t=Qa(n,t=Fa(e,t),1073741823)),null!==(n=zs(n,1073741823))&&Rs(n);break}}n=n.return}}function Qs(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),ls===t&&cs===n?hs===as||hs===os&&1073741823===ds&&Cr()-vs<500?js(t,cs):gs=!0:hl(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Rs(t)))}ts=function(t,e,n){var i,r,o=e.expirationTime;if(null!==t){var a=e.pendingProps;if(t.memoizedProps!==a||nr.current)_a=!0;else{if(o<n){switch(_a=!1,e.tag){case 3:Ca(e),ga();break;case 5:if(To(e),4&e.mode&&1!==n&&a.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:or(e.type)&&ur(e);break;case 4:xo(e,e.stateNode.containerInfo);break;case 10:o=e.memoizedProps.value,a=e.type._context,Qi(Br,a._currentValue),a._currentValue=o;break;case 13:if(null!==e.memoizedState)return 0!==(o=e.child.childExpirationTime)&&n<=o?za(t,e,n):(Qi(ko,1&ko.current),null!==(e=Na(t,e,n))?e.sibling:null);Qi(ko,1&ko.current);break;case 19:if(o=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(o)return Da(t,e,n);e.effectTag|=64}if(null!==(a=e.memoizedState)&&(a.rendering=null,a.tail=null),Qi(ko,ko.current),!o)return null}return Na(t,e,n)}_a=!1}}else _a=!1;switch(e.expirationTime=0,e.tag){case 2:var s,l,o=e.type;return null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,a=rr(e,er.current),Gr(e,n),a=No(null,e,o,t,a,n),e.effectTag|=1,e="object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,or(o)?(s=!0,ur(e)):s=!1,e.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Hr(e),"function"==typeof(l=o.getDerivedStateFromProps)&&io(e,0,l,t),a.updater=ro,lo((e.stateNode=a)._reactInternalFiber=e,o,t,n),Pa(null,e,o,!0,s,n)):(e.tag=0,ba(null,e,a,n),e.child);case 16:t:{if(a=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,-1===(i=a)._status&&(i._status=0,r=(r=i._ctor)(),(i._result=r).then(function(t){0===i._status&&(t=t.default,i._status=1,i._result=t)},function(t){0===i._status&&(i._status=2,i._result=t)})),1!==a._status)throw a._result;switch(a=a._result,e.type=a,s=e.tag=function(t){if("function"==typeof t)return rl(t)?1:0;if(null!=t){if((t=t.$$typeof)===st)return 11;if(t===ct)return 14}return 2}(a),t=Nr(a,t),s){case 0:e=ka(null,e,a,t,n);break t;case 1:e=Sa(null,e,a,t,n);break t;case 11:e=xa(null,e,a,t,n);break t;case 14:e=wa(null,e,a,Nr(a.type,t),o,n);break t}throw Error(E(306,a,""))}return e;case 0:return o=e.type,a=e.pendingProps,ka(t,e,o,a=e.elementType===o?a:Nr(o,a),n);case 1:return o=e.type,a=e.pendingProps,Sa(t,e,o,a=e.elementType===o?a:Nr(o,a),n);case 3:if(Ca(e),o=e.updateQueue,null===t||null===o)throw Error(E(282));if(o=e.pendingProps,a=null!==(a=e.memoizedState)?a.element:null,Kr(t,e),Qr(e,o,null,n),(o=e.memoizedState.element)===a)ga(),e=Na(t,e,n);else{if((a=e.stateNode.hydrate)&&(ca=yn(e.stateNode.containerInfo.firstChild),ua=e,a=ha=!0),a)for(n=mo(e,null,o,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else ba(t,e,o,n),ga();e=e.child}return e;case 5:return To(e),null===t&&fa(e),o=e.type,a=e.pendingProps,s=null!==t?t.memoizedProps:null,l=a.children,dn(o,a)?l=null:null!==s&&dn(o,s)&&(e.effectTag|=16),Ea(t,e),e=4&e.mode&&1!==n&&a.hidden?(e.expirationTime=e.childExpirationTime=1,null):(ba(t,e,l,n),e.child);case 6:return null===t&&fa(e),null;case 13:return za(t,e,n);case 4:return xo(e,e.stateNode.containerInfo),o=e.pendingProps,null===t?e.child=fo(e,null,o,n):ba(t,e,o,n),e.child;case 11:return o=e.type,a=e.pendingProps,xa(t,e,o,a=e.elementType===o?a:Nr(o,a),n);case 7:return ba(t,e,e.pendingProps,n),e.child;case 8:case 12:return ba(t,e,e.pendingProps.children,n),e.child;case 10:t:{o=e.type._context,a=e.pendingProps,l=e.memoizedProps,s=a.value;var u=e.type._context;if(Qi(Br,u._currentValue),u._currentValue=s,null!==l)if(u=l.value,0==(s=Mi(u,s)?0:0|("function"==typeof o._calculateChangedBits?o._calculateChangedBits(u,s):1073741823))){if(l.children===a.children&&!nr.current){e=Na(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){l=u.child;for(var h=c.firstContext;null!==h;){if(h.context===o&&0!=(h.observedBits&s)){1===u.tag&&((h=Xr(n,null)).tag=2,Jr(u,h)),u.expirationTime<n&&(u.expirationTime=n),null!==(h=u.alternate)&&h.expirationTime<n&&(h.expirationTime=n),qr(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}h=h.next}}else l=10===u.tag&&u.type===e.type?null:u.child;if(null!==l)l.return=u;else for(l=u;null!==l;){if(l===e){l=null;break}if(null!==(u=l.sibling)){u.return=l.return,l=u;break}l=l.return}u=l}ba(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,o=(s=e.pendingProps).children,Gr(e,n),o=o(a=Wr(a,s.unstable_observedBits)),e.effectTag|=1,ba(t,e,o,n),e.child;case 14:return s=Nr(a=e.type,e.pendingProps),wa(t,e,a,s=Nr(a.type,s),o,n);case 15:return Ta(t,e,e.type,e.pendingProps,o,n);case 17:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Nr(o,a),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,or(o)?(t=!0,ur(e)):t=!1,Gr(e,n),ao(e,o,a),lo(e,o,a,n),Pa(null,e,o,!0,t,n);case 19:return Da(t,e,n)}throw Error(E(156,e.tag))};var tl=null,el=null;function nl(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function il(t,e,n,i){return new nl(t,e,n,i)}function rl(t){return(t=t.prototype)&&t.isReactComponent}function ol(t,e){var n=t.alternate;return null===n?((n=il(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,(n.alternate=t).alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function al(t,e,n,i,r,o){var a=2;if("function"==typeof(i=t))rl(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case et:return sl(n.children,r,o,e);case at:a=8,r|=7;break;case nt:a=8,r|=1;break;case it:return(t=il(12,n,e,8|r)).elementType=it,t.type=it,t.expirationTime=o,t;case lt:return(t=il(13,n,e,r)).type=lt,t.elementType=lt,t.expirationTime=o,t;case ut:return(t=il(19,n,e,r)).elementType=ut,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case rt:a=10;break t;case ot:a=9;break t;case st:a=11;break t;case ct:a=14;break t;case ht:a=16,i=null;break t;case pt:a=22;break t}throw Error(E(130,null==t?t:typeof t,""))}return(e=il(a,n,e,r)).elementType=t,e.type=i,e.expirationTime=o,e}function sl(t,e,n,i){return(t=il(7,t,i,e)).expirationTime=n,t}function ll(t,e,n){return(t=il(6,t,null,e)).expirationTime=n,t}function ul(t,e,n){return(e=il(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cl(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function hl(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&e<=n&&t<=e}function pl(t,e){var n=t.firstSuspendedTime,i=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(e<i||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function dl(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(n<=e?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function fl(t,e){var n=t.lastExpiredTime;(0===n||e<n)&&(t.lastExpiredTime=e)}function ml(t,e,n,i){var r=e.current,o=Ls(),a=eo.suspense,o=Is(o,r,a);t:if(n){e:{if(Jt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(E(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(or(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}}while(null!==(s=s.return));throw Error(E(171))}if(1===n.tag){var l=n.type;if(or(l)){n=lr(n,l,s);break t}}n=s}else n=tr;return null===e.context?e.context=n:e.pendingContext=n,(e=Xr(o,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),Jr(r,e),As(r,o),o}function yl(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function gl(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function vl(t,e){gl(t,e),(t=t.alternate)&&gl(t,e)}function _l(t,e,n){var i,r,o=new cl(t,e,n=null!=n&&!0===n.hydrate),a=il(3,null,null,2===e?7:1===e?3:0);(o.current=a).stateNode=o,Hr(a),t[xn]=o.current,n&&0!==e&&(i=9===t.nodeType?t:t.ownerDocument,r=Xt(i),Ee.forEach(function(t){pe(t,i,r)}),ke.forEach(function(t){pe(t,i,r)})),this._internalRoot=o}function bl(t){return t&&(1===t.nodeType||9===t.nodeType||11===t.nodeType||8===t.nodeType&&" react-mount-point-unstable "===t.nodeValue)}function xl(t,e,n,i,r){var o,a,s,l=n._reactRootContainer;return l?(s=l._internalRoot,"function"==typeof r&&(o=r,r=function(){var t=yl(s);o.call(t)}),ml(e,s,t,r)):(s=(l=n._reactRootContainer=function(t,e){if(!(e=e||!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))))for(var n;n=t.lastChild;)t.removeChild(n);return new _l(t,0,e?{hydrate:!0}:void 0)}(n,i))._internalRoot,"function"==typeof r&&(a=r,r=function(){var t=yl(s);a.call(t)}),Fs(function(){ml(e,s,t,r)})),yl(s)}function wl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!bl(e))throw Error(E(200));return function(t,e,n,i){return{$$typeof:tt,key:null==(i=3<arguments.length&&void 0!==i?i:null)?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}_l.prototype.render=function(t){ml(t,this._internalRoot,null,null)},_l.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;ml(null,t,null,function(){e[xn]=null})},de=function(t){var e;13===t.tag&&(As(t,e=Dr(Ls(),150,100)),vl(t,e))},fe=function(t){13===t.tag&&(As(t,3),vl(t,3))},me=function(t){var e;13===t.tag&&(As(t,e=Is(e=Ls(),t,null)),vl(t,e))},P=function(t,e,n){switch(e){case"input":if(Et(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=kn(i);if(!r)throw Error(E(90));bt(i),Et(i,r)}}}break;case"textarea":It(t,n);break;case"select":null!=(e=n.value)&&Ct(t,!!n.multiple,e,!1)}},z=Bs,O=function(t,e,n,i,r){var o=ss;ss|=4;try{return Ir(98,t.bind(null,e,n,i,r))}finally{0===(ss=o)&&Or()}},R=function(){var t;0==(49&ss)&&(null!==Ss&&(t=Ss,Ss=null,t.forEach(function(t,e){fl(e,t),Rs(e)}),Or()),Ks())};var n={Events:[Tn,En,kn,k,x,An,function(t){ne(t,In)},I,A,We,oe,Ks,{current:!(D=function(t,e){var n=ss;ss|=2;try{return t(e)}finally{0===(ss=n)&&Or()}})}]},Tl=(vn={findFiberByHostInstance:wn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}).findFiberByHostInstance;(function(t){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return;try{var n=e.inject(t);tl=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},el=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}})(g({},vn,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=te(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Tl?Tl(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n,e.createPortal=wl,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0!==e)return null===(t=te(e))?null:t.stateNode;if("function"==typeof t.render)throw Error(E(188));throw Error(E(268,Object.keys(t)))},e.flushSync=function(t,e){if(0!=(48&ss))throw Error(E(187));var n=ss;ss|=1;try{return Ir(99,t.bind(null,e))}finally{ss=n,Or()}},e.hydrate=function(t,e,n){if(!bl(e))throw Error(E(200));return xl(null,t,e,!0,n)},e.render=function(t,e,n){if(!bl(e))throw Error(E(200));return xl(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!bl(t))throw Error(E(40));return!!t._reactRootContainer&&(Fs(function(){xl(null,null,t,!1,function(){t._reactRootContainer=null,t[xn]=null})}),!0)},e.unstable_batchedUpdates=Bs,e.unstable_createPortal=function(t,e){return wl(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!bl(n))throw Error(E(200));if(null==t||void 0===t._reactInternalFiber)throw Error(E(38));return xl(t,e,n,!1,i)},e.version="16.14.0"},function(t,e,n){"use strict";t.exports=n(35)},function(t,o,e){"use strict";var a,s,l,n,i,r,u,c,h,p,d,f,m,y,g,v,_,b,x,w;function T(t,e){var n=t.length;t.push(e);t:for(;;){var i=n-1>>>1,r=t[i];if(!(void 0!==r&&0<S(r,e)))break t;t[i]=e,t[n]=r,n=i}}function E(t){return void 0===(t=t[0])?null:t}function k(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length;i<r;){var o=2*(i+1)-1,a=t[o],s=1+o,l=t[s];if(void 0!==a&&S(a,n)<0)i=void 0!==l&&S(l,a)<0?(t[i]=l,t[s]=n,s):(t[i]=a,t[o]=n,o);else{if(!(void 0!==l&&S(l,n)<0))break t;t[i]=l,t[s]=n,i=s}}}return e}}function S(t,e){var n=t.sortIndex-e.sortIndex;return 0!=n?n:t.id-e.id}"undefined"==typeof window||"function"!=typeof MessageChannel?(i=n=null,r=function(){if(null!==n)try{var t=o.unstable_now();n(!0,t),n=null}catch(t){throw setTimeout(r,0),t}},u=Date.now(),o.unstable_now=function(){return Date.now()-u},a=function(t){null!==n?setTimeout(a,0,t):(n=t,setTimeout(r,0))},s=function(t,e){i=setTimeout(t,e)},l=function(){clearTimeout(i)},b=function(){return!1},F=o.unstable_forceFrameRate=function(){}):(c=window.performance,h=window.Date,p=window.setTimeout,d=window.clearTimeout,"undefined"!=typeof console&&(x=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof x&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"==typeof c&&"function"==typeof c.now?o.unstable_now=function(){return c.now()}:(f=h.now(),o.unstable_now=function(){return h.now()-f}),m=!1,y=null,g=-1,v=5,_=0,b=function(){return o.unstable_now()>=_},F=function(){},o.unstable_forceFrameRate=function(t){t<0||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):v=0<t?Math.floor(1e3/t):5},x=new MessageChannel,w=x.port2,x.port1.onmessage=function(){if(null!==y){var t=o.unstable_now();_=t+v;try{y(!0,t)?w.postMessage(null):(m=!1,y=null)}catch(t){throw w.postMessage(null),t}}else m=!1},a=function(t){y=t,m||(m=!0,w.postMessage(null))},s=function(t,e){g=p(function(){t(o.unstable_now())},e)},l=function(){d(g),g=-1});var P=[],C=[],M=1,L=null,I=3,A=!1,z=!1,O=!1;function R(t){for(var e=E(C);null!==e;){if(null===e.callback)k(C);else{if(!(e.startTime<=t))break;k(C),e.sortIndex=e.expirationTime,T(P,e)}e=E(C)}}function D(t){var e;O=!1,R(t),z||(null!==E(P)?(z=!0,a(N)):null!==(e=E(C))&&s(D,e.startTime-t))}function N(t,e){z=!1,O&&(O=!1,l()),A=!0;var n=I;try{for(R(e),L=E(P);null!==L&&(!(L.expirationTime>e)||t&&!b());){var i=L.callback;null!==i?(L.callback=null,I=L.priorityLevel,i=i(L.expirationTime<=e),e=o.unstable_now(),"function"==typeof i?L.callback=i:L===E(P)&&k(P),R(e)):k(P),L=E(P)}var r=null!==L||(null!==(r=E(C))&&s(D,r.startTime-e),!1);return r}finally{L=null,I=n,A=!1}}function B(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var F=F;o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(t){t.callback=null},o.unstable_continueExecution=function(){z||A||(z=!0,a(N))},o.unstable_getCurrentPriorityLevel=function(){return I},o.unstable_getFirstCallbackNode=function(){return E(P)},o.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var n=I;I=e;try{return t()}finally{I=n}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=F,o.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=I;I=t;try{return e()}finally{I=n}},o.unstable_scheduleCallback=function(t,e,n){var i,r=o.unstable_now();return"object"==typeof n&&null!==n?(i="number"==typeof(i=n.delay)&&0<i?r+i:r,n="number"==typeof n.timeout?n.timeout:B(t)):(n=B(t),i=r),t={id:M++,callback:e,priorityLevel:t,startTime:i,expirationTime:n=i+n,sortIndex:-1},r<i?(t.sortIndex=i,T(C,t),null===E(P)&&t===E(C)&&(O?l():O=!0,s(D,i-r))):(t.sortIndex=n,T(P,t),z||A||(z=!0,a(N))),t},o.unstable_shouldYield=function(){var t=o.unstable_now();R(t);var e=E(P);return e!==L&&null!==L&&null!==e&&null!==e.callback&&e.startTime<=t&&e.expirationTime<L.expirationTime||b()},o.unstable_wrapCallback=function(e){var n=I;return function(){var t=I;I=n;try{return e.apply(this,arguments)}finally{I=t}}}},function(t,e,n){"use strict";var a=n(37);function i(){}function r(){}r.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,r,o){if(o!==a){o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function e(){return t}var n={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){var n,i,t=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var s,l=[],u=!1,c=-1;function h(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&p())}function p(){if(!u){var t=a(h);u=!0;for(var e=l.length;e;){for(s=l,l=[];++c<e;)s&&s[c].run();c=-1,e=l.length}s=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function f(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||u||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=f,t.addListener=f,t.once=f,t.off=f,t.removeListener=f,t.removeAllListeners=f,t.emit=f,t.prependListener=f,t.prependOnceListener=f,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e,n){"use strict";function x(t,e,n){if(null!==t)for(var i,r,o,a,s,l,u,c,h,p=0,d=t.type,f="FeatureCollection"===d,m="Feature"===d,y=f?t.features.length:1,g=0;g<y;g++)for(l=(h=!!(c=f?t.features[g].geometry:m?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1,i=0;i<l;i++){var v=0;if(null!==(s=h?c.geometries[i]:c)){u=s.coordinates;var _=s.type,b=!n||"Polygon"!==_&&"MultiPolygon"!==_?0:1;switch(_){case null:break;case"Point":e(u,p,g,v),p++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,g,v),p++,"MultiPoint"===_&&v++;"LineString"===_&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-b;o++)e(u[r][o],p,g,v),p++;"MultiLineString"===_&&v++}"Polygon"===_&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(o=0;o<u[r].length;o++)for(a=0;a<u[r][o].length-b;a++)e(u[r][o][a],p,g,v),p++;v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)x(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}function s(t,r,o,e){var a=o;return x(t,function(t,e,n,i){a=0===e&&void 0===o?t:r(a,t,e,n,i)},e),a}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function i(t,n,i){var r=i;return o(t,function(t,e){r=0===e&&void 0===i?t:n(r,t,e)}),r}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function r(t,n,i){var r=i;return a(t,function(t,e){r=0===e&&void 0===i?t:n(r,t,e)}),r}function l(t){var e=[];return x(t,function(t){e.push(t)}),e}function u(t,e){for(var n,i,r,o,a,s,l,u=0,c="FeatureCollection"===t.type,h="Feature"===t.type,p=c?t.features.length:1,d=0;d<p;d++){for(a=c?t.features[d].geometry:h?t.geometry:t,l=c?t.features[d].properties:h?t.properties:{},o=(s=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<o;i++)if(null!==(r=s?a.geometries[i]:a))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(r,u,l);break;case"GeometryCollection":for(n=0;n<r.geometries.length;n++)e(r.geometries[n],u,l);break;default:throw new Error("Unknown Geometry Type")}else e(null,u,l);u++}}function c(t,i,r){var o=r;return u(t,function(t,e,n){o=0===e&&void 0===r?t:i(o,t,e,n)}),o}function h(t,o){u(t,function(t,n,i){var r,e=null===t?null:t.type;switch(e){case null:case"Point":case"LineString":case"Polygon":return o(m(t,i),n,0),0}switch(e){case"MultiPoint":r="Point";break;case"MultiLineString":r="LineString";break;case"MultiPolygon":r="Polygon"}t.coordinates.forEach(function(t,e){o(m({type:r,coordinates:t},i),n,e)})})}function p(t,i,r){var o=r;return h(t,function(t,e,n){o=0===e&&0===n&&void 0===r?t:i(o,t,e,n)}),o}function d(t,a){h(t,function(n,i,r){var t,o=0;!n.geometry||"Point"!==(t=n.geometry.type)&&"MultiPoint"!==t&&s(n,function(t,e){t=y([t,e],n.properties);return a(t,i,r,o),o++,e})})}function f(t,r,o){var a=o,s=!1;return d(t,function(t,e,n,i){a=!1===s&&void 0===o?t:r(a,t,e,n,i),s=!0}),a}function m(t,e){if(void 0===t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}function y(t,e){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");return{type:"Feature",properties:e||{},geometry:{type:"LineString",coordinates:t}}}function g(t,e){if(!t)throw new Error("geojson is required");var n=(t.geometry||t).type;if(!n)throw new Error("invalid geojson");if("FeatureCollection"===n)throw new Error("FeatureCollection is not supported");if("GeometryCollection"===n)throw new Error("GeometryCollection is not supported");var i=(t.geometry||t).coordinates;if(!i)throw new Error("geojson must contain coordinates");switch(n){case"LineString":return void e(i,0,0);case"Polygon":case"MultiLineString":for(var r=0,o=0;o<i.length;o++)"MultiLineString"===n&&(r=o),e(i[o],o,r);return;case"MultiPolygon":for(var a=0;a<i.length;a++)for(var s=0;s<i[a].length;s++)e(i[a][s],s,a);return;default:throw new Error(n+" geometry not supported")}}function v(t,i,r){var o=r;return g(t,function(t,e,n){o=0===e&&void 0===r?t:i(o,t,e,n)}),o}n.r(e),n.d(e,"coordEach",function(){return x}),n.d(e,"coordReduce",function(){return s}),n.d(e,"propEach",function(){return o}),n.d(e,"propReduce",function(){return i}),n.d(e,"featureEach",function(){return a}),n.d(e,"featureReduce",function(){return r}),n.d(e,"coordAll",function(){return l}),n.d(e,"geomEach",function(){return u}),n.d(e,"geomReduce",function(){return c}),n.d(e,"flattenEach",function(){return h}),n.d(e,"flattenReduce",function(){return p}),n.d(e,"segmentEach",function(){return d}),n.d(e,"segmentReduce",function(){return f}),n.d(e,"feature",function(){return m}),n.d(e,"lineString",function(){return y}),n.d(e,"lineEach",function(){return g}),n.d(e,"lineReduce",function(){return v})},function(t,e,n){"use strict";var r=n(41),o=n(45),s=n(7),i=n(46).EventEmitter,a=n(47),l=n(48),u=n(59),c=n(67),h=n(69),p=n(70);function d(t){this._eventEmitter=new i,this.options=s({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null}d.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(t){return t.place_name},render:function(t){t=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(t){function e(t,e){if(!document.body.contains(e))throw new Error("Element provided to #addTo() exists, but is not in the DOM");t=t.onAdd();e.appendChild(t)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else{if("string"!=typeof t)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");var n=document.querySelectorAll(t);if(0===n.length)throw new Error("Element ",t,"not found.");if(1<n.length)throw new Error("Geocoder can only be added to a single html element");e(this,n[0])}},onAdd:function(t){if(t&&"string"!=typeof t&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=u(l({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new c(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",o(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(t){this.eventManager.keyevent(t,this)}.bind(this));var i=document.createElement("div");i.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";t=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(t),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(i),this._typeahead=new r(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},createIcon:function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),"innerHTML"in n?n.innerHTML=e:((t=document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",t=t.firstChild.firstChild,n.appendChild(t)),n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(t){t=(t.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(t){var e=27,n=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var i=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!i||!i.value)return this.fresh=!0,t.keyCode!==n&&this.clear(t),this._clearEl.style.display="none";t.metaKey||-1!==[n,e,37,39,13,38,40].indexOf(t.keyCode)||i.value.length>=this.options.minLength&&this._geocode(i.value)},_showButton:function(){this._typeahead.selected&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t,e,n=this._typeahead.selected;n&&JSON.stringify(n)!==this.lastSelected&&(this._clearEl.style.display="none",this.options.flyTo&&(n.properties&&a[n.properties.short_code]?(t=s({},this.options.flyTo),this._map&&this._map.fitBounds(a[n.properties.short_code].bbox,t)):n.bbox?(e=n.bbox,t=s({},this.options.flyTo),this._map&&this._map.fitBounds([[e[0],e[1]],[e[2],e[3]]],t)):(e={zoom:this.options.zoom},(t=s({},e,this.options.flyTo)).center=n.center,this._map&&this._map.flyTo(t))),this.options.marker&&this._mapboxgl&&this._handleMarker(n),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(n),this._eventEmitter.emit("result",{result:n}),this.eventManager.select(n,this))},_geocode:function(n){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:n}),this.inputString=n;var i=this,e=null,r=["bbox","limit","proximity","countries","types","language","reverseMode","mode"].reduce(function(t,e){return i.options[e]&&(-1<["countries","types","language"].indexOf(e)?t[e]=i.options[e].split(/[\s,]+/):t[e]=i.options[e],"proximity"===e&&i.options[e]&&"number"==typeof i.options[e].longitude&&"number"==typeof i.options[e].latitude&&(t[e]=[i.options[e].longitude,i.options[e].latitude])),t},{}),t=this.options.localGeocoderOnly?Promise.resolve():this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(n)?(t=n.split(/[\s(,)?]+/).map(function(t){return parseFloat(t,10)}).reverse(),r.types&&r.types[0],"proximity"in(r=s(r,{query:t,limit:1}))&&delete r.proximity,this.geocoderService.reverseGeocode(r).send()):(r=s(r,{query:n}),this.geocoderService.forwardGeocode(r).send()),o=[];this.options.localGeocoder&&((o=this.options.localGeocoder(n))||(o=[]));var a=[];return t.catch(function(t){e=t}.bind(this)).then(function(t){this._loadingEl.style.display="none";var e={};return t?"200"==t.statusCode&&((e=t.body).request=t.request,e.headers=t.headers):e={type:"FeatureCollection",features:[]},e.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),e.features=e.features?o.concat(e.features):o,this.options.externalGeocoder?(a=this.options.externalGeocoder(n,e.features)||[]).then(function(t){return e.features=e.features?t.concat(e.features):t,e},function(){return e}):e}.bind(this)).then(function(t){if(e)throw e;this.options.filter&&t.features.length&&(t.features=t.features.filter(this.options.filter)),t.features.length?(this._clearEl.style.display="block",this._eventEmitter.emit("results",t),this._typeahead.update(t.features)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",t))}.bind(this)).catch(function(t){this._loadingEl.style.display="none",o.length&&this.options.localGeocoder||a.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(o)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:o}),this._eventEmitter.emit("error",{error:t})}.bind(this)),t},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){t.relatedTarget&&this._clear(t)},_onQueryResult:function(t){t=t.body;t.features.length&&(t=t.features[0],this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange())},_updateProximity:function(){var t;this._map&&(9<this._map.getZoom()?(t=this._map.getCenter().wrap(),this.setProximity({longitude:t.lng,latitude:t.lat})):this.setProximity(null))},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],t=p.language(t),t=h.placeholder[t];if(t)return t}return"Search"},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this._geocode(t),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&"function"==typeof t&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=u(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},_handleMarker:function(t){if(this._map){this._removeMarker();var e=s({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(e),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}},t.exports=d},function(t,e,n){"use strict";n=n(42);t.exports=n,"undefined"!=typeof window&&(window.Suggestions=n)},function(t,e,n){"use strict";var i=n(7),r=n(43),o=n(44),n=function(t,e,n){return n=n||{},this.options=i({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=t,this.data=e||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp(t.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown(t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(t){this.handlePaste(t)}.bind(this)),this.render=(this.options.render?this.options:this).render.bind(this),this.getItemValue=(this.options.getItemValue?this.options:this).getItemValue.bind(this),this};n.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},n.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},n.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},n.prototype.handlePaste=function(t){var e;t.clipboardData?this.handleInputChange(t.clipboardData.getData("Text")):(e=this,setTimeout(function(){e.handleInputChange(t.target.value)},100))},n.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}.bind(this))},n.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},n.prototype.update=function(t){this.data=t,this.handleKeyUp()},n.prototype.clear=function(){this.data=[],this.list.clear()},n.prototype.normalize=function(t){return t.toLowerCase()},n.prototype.match=function(t,e){return-1<t.indexOf(e)},n.prototype.value=function(t){this.selected=t,this.el.value=this.getItemValue(t),document.createEvent?((t=document.createEvent("HTMLEvents")).initEvent("change",!0,!1),this.el.dispatchEvent(t)):this.el.fireEvent("onchange")},n.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:function(t){return this.getItemValue(t)}.bind(this)};t(this.options.filter?r.filter(this.query,this.data,e).map(function(t){return{original:t.original,string:this.render(t.original,t.string)}}.bind(this)):this.data.map(function(t){return{original:t,string:this.render(t)}}.bind(this)))},n.prototype.getItemValue=function(t){return t},n.prototype.render=function(t,e){if(e)return e;for(var n=t.original?this.getItemValue(t.original):this.getItemValue(t),i=this.normalize(n),r=i.lastIndexOf(this.query);-1<r;)var o=r+this.query.length,n=n.slice(0,r)+"<strong>"+n.slice(r,o)+"</strong>"+n.slice(o),r=i.slice(0,r).lastIndexOf(this.query);return n},n.prototype.renderError=function(t){this.list.drawError(t)},t.exports=n},function(t,e,n){var s={};(t.exports=s).simpleFilter=function(e,t){return t.filter(function(t){return s.test(e,t)})},s.test=function(t,e){return null!==s.match(t,e)},s.match=function(t,e,n){n=n||{};var i,r=0,o=[],a=e.length,s=0,l=0,u=n.pre||"",c=n.post||"",h=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var p=0;p<a;p++)i=e[p],h[p]===t[r]?(i=u+i+c,r+=1,l+=1+l):l=0,s+=l,o[o.length]=i;return r===t.length?(s=h===t?1/0:s,{rendered:o.join(""),score:s}):null},s.filter=function(o,t,a){return t&&0!==t.length?"string"!=typeof o?t:(a=a||{},t.reduce(function(t,e,n,i){var r=e;a.extract&&(r=a.extract(e));r=s.match(o,r,a);return null!=r&&(t[t.length]={string:r.rendered,score:r.score,index:n,original:e}),t},[]).sort(function(t,e){return e.score-t.score||t.index-e.index})):[]}},function(t,e,n){"use strict";function i(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this}i.prototype.show=function(){this.element.style.display="block"},i.prototype.hide=function(){this.element.style.display="none"},i.prototype.add=function(t){this.items.push(t)},i.prototype.clear=function(){this.items=[],this.active=0},i.prototype.isEmpty=function(){return!this.items.length},i.prototype.isVisible=function(){return"block"===this.element.style.display},i.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},i.prototype.drawItem=function(t,e){var n=document.createElement("li"),i=document.createElement("a");e&&(n.className+=" active"),i.innerHTML=t.string,n.appendChild(i),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))},i.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},i.prototype.move=function(t){this.active=t,this.draw()},i.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},i.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},i.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()},t.exports=i},function(u,t,e){(function(t){function v(){return n.Date.now()}var i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,e="object"==typeof t&&t&&t.Object===Object&&t,t="object"==typeof self&&self&&self.Object===Object&&self,n=e||t||Function("return this")(),l=Object.prototype.toString,_=Math.max,b=Math.min;function x(t){var e=typeof t;return t&&("object"==e||"function"==e)}function w(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||e&&"object"==typeof e&&"[object Symbol]"==l.call(e))return NaN;var e;if(x(t)&&(t=x(n="function"==typeof t.valueOf?t.valueOf():t)?n+"":n),"string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=o.test(t);return n||a.test(t)?s(t.slice(2),n?2:8):r.test(t)?NaN:+t}u.exports=function(i,n,t){var r,o,a,s,l,u,c=0,h=!1,p=!1,e=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function d(t){var e=r,n=o;return r=o=void 0,c=t,s=i.apply(n,e)}function f(t){var e=t-u;return void 0===u||n<=e||e<0||p&&a<=t-c}function m(){var t,e=v();if(f(e))return y(e);l=setTimeout(m,(t=n-(e-u),p?b(t,a-(e-c)):t))}function y(t){return l=void 0,e&&r?d(t):(r=o=void 0,s)}function g(){var t=v(),e=f(t);if(r=arguments,o=this,u=t,e){if(void 0===l)return c=e=u,l=setTimeout(m,n),h?d(e):s;if(p)return l=setTimeout(m,n),d(u)}return void 0===l&&(l=setTimeout(m,n)),s}return n=w(n)||0,x(t)&&(h=!!t.leading,a=(p="maxWait"in t)?_(w(t.maxWait)||0,n):a,e="trailing"in t?!!t.trailing:e),g.cancel=function(){void 0!==l&&clearTimeout(l),r=u=o=l=void(c=0)},g.flush=function(){return void 0===l?s:y(v())},g}}).call(this,e(8))},function(t,e,n){"use strict";var i="object"==typeof Reflect?Reflect:null,l=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},o=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(r,o){return new Promise(function(t,e){function n(){void 0!==i&&r.removeListener("error",i),t([].slice.call(arguments))}var i;"error"!==o&&(i=function(t){r.removeListener(o,n),e(t)},r.once("error",i)),r.once(o,n)})},(a.EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,n,i){var r,o;return u(n),void 0===(r=t._events)?(r=t._events=Object.create(null),t._eventsCount=0):(void 0!==r.newListener&&(t.emit("newListener",e,n.listener||n),r=t._events),o=r[e]),void 0===o?(o=r[e]=n,++t._eventsCount):("function"==typeof o?o=r[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),0<(n=c(t))&&o.length>n&&!o.warned&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=t,n.type=e,n.count=o.length,console&&console.warn&&console.warn(n))),t}function p(t,e,n){t={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},e=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(t);return e.listener=n,t.wrapFn=e}function d(t,e,n){t=t._events;if(void 0===t)return[];e=t[e];return void 0===e?[]:"function"==typeof e?n?[e.listener||e]:[e]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):m(e,e.length)}function f(t){var e=this._events;if(void 0!==e){t=e[t];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function m(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i,r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){if(0<e.length&&(i=e[0]),i instanceof Error)throw i;r=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw r.context=i,r}t=o[t];if(void 0===t)return!1;if("function"==typeof t)l(t,this,e);else for(var a=t.length,s=m(t,a),n=0;n<a;++n)l(s[n],this,e);return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,i,r,o,a;if(u(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;0<=o;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){for(var i,r=Object.keys(n),o=0;o<r.length;++o)"removeListener"!==(i=r[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(o=e.length-1;0<=o;o--)this.removeListener(t,e[o]);return this},a.prototype.listeners=function(t){return d(this,t,!0)},a.prototype.rawListeners=function(t){return d(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},function(t,e){t.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},function(t,e,n){"use strict";n=n(18);t.exports=n},function(t,e,n){"use strict";var i=n(50),a=n(52),s=n(9),l=n(53),u={};function c(t){var e=t.total,t=t.loaded;return{total:e,transferred:t,percent:100*t/e}}function r(r,o){return new Promise(function(e,n){o.onprogress=function(t){r.emitter.emit(s.EVENT_PROGRESS_DOWNLOAD,c(t))};var t=r.file;t&&(o.upload.onprogress=function(t){r.emitter.emit(s.EVENT_PROGRESS_UPLOAD,c(t))}),o.onerror=function(t){n(t)},o.onabort=function(){var t=new a({request:r,type:s.ERROR_REQUEST_ABORTED});n(t)},o.onload=function(){var t;delete u[r.id],o.status<200||400<=o.status?(t=new a({request:r,body:o.response,statusCode:o.status}),n(t)):e(o)};var i=r.body;"string"==typeof i?o.send(i):i?o.send(JSON.stringify(i)):t?o.send(t):o.send(),u[r.id]=o}).then(function(t){return new i(r,{body:(t=t).response,headers:l(t.getAllResponseHeaders()),statusCode:t.status})})}function o(e,t){var t=e.url(t),n=new window.XMLHttpRequest;return n.open(e.method,t),Object.keys(e.headers).forEach(function(t){n.setRequestHeader(t,e.headers[t])}),n}t.exports={browserAbort:function(t){var e=u[t.id];e&&(e.abort(),delete u[t.id])},sendRequestXhr:r,browserSend:function(e){return Promise.resolve().then(function(){var t=o(e,e.client.accessToken);return r(e,t)})},createRequestXhr:o}},function(t,e,n){"use strict";var i=n(51);function r(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(t){this.body=e.body}this.links=i(this.headers.link)}r.prototype.hasNextPage=function(){return!!this.links.next},r.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return t?t.split(/,\s*</).reduce(function(e,i){var n=function(){var t=i.match(/<?([^>]*)>(.*)/);if(!t)return null;var e=t[1],t=t[2].split(";"),n=null,t=t.reduce(function(t,e){e=(e=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/))?{key:e[1],value:e[2]}:null;return e&&("rel"===e.key?n=n||e.value:t[e.key]=e.value),t},{});return n?{url:e,rel:n,params:t}:null}();return n&&n.rel.split(/\s+/).forEach(function(t){e[t]||(e[t]={url:n.url,params:n.params})}),e},{}):{}}},function(t,e,n){"use strict";var r=n(9);t.exports=function(t){var e,n=t.type||r.ERROR_HTTP;if(t.body)try{e=JSON.parse(t.body)}catch(n){e=t.body}else e=null;var i=t.message||null;i||("string"==typeof e?i=e:e&&"string"==typeof e.message?i=e.message:n===r.ERROR_REQUEST_ABORTED&&(i="Request aborted")),this.message=i,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e}},function(t,e,n){"use strict";t.exports=function(t){var n={};return t&&t.trim().split(/[\r|\n]+/).forEach(function(t){var e,t=(t=(e=t).indexOf(":"),{name:e.substring(0,t).trim().toLowerCase(),value:e.substring(t+1).trim()});n[t.name]=t.value}),n}},function(t,a,l){(function(i,r){var o;!function(){var t=(i&&i.exports,"object"==typeof r&&r);function e(t){this.message=t}function u(t){throw new e(t)}t.global!==t&&t.window,(e.prototype=new Error).name="InvalidCharacterError";var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/[\t\n\f\r ]/g,n={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,i,r,o=t.length%3,a="",s=-1,l=t.length-o;++s<l;)e=t.charCodeAt(s)<<16,n=t.charCodeAt(++s)<<8,i=t.charCodeAt(++s),a+=c.charAt((r=e+n+i)>>18&63)+c.charAt(r>>12&63)+c.charAt(r>>6&63)+c.charAt(63&r);return 2==o?(e=t.charCodeAt(s)<<8,n=t.charCodeAt(++s),a+=c.charAt((r=e+n)>>10)+c.charAt(r>>4&63)+c.charAt(r<<2&63)+"="):1==o&&(r=t.charCodeAt(s),a+=c.charAt(r>>2)+c.charAt(r<<4&63)+"=="),a},decode:function(t){var e=(t=String(t).replace(s,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),e%4!=1&&!/[^+a-zA-Z0-9/]/.test(t)||u("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,o="",a=-1;++a<e;)i=c.indexOf(t.charAt(a)),n=r%4?64*n+i:i,r++%4&&(o+=String.fromCharCode(255&n>>(-2*r&6)));return o},version:"0.1.0"};void 0===(o=function(){return n}.call(a,l,a,i))||(i.exports=o)}()}).call(this,l(55)(t),l(8))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var i=n(20),r=n(7),o=n(57),a=n(58),s=n(9),l=1;function u(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var i=r(n,e.headers),n=Object.keys(i).reduce(function(t,e){return t[e.toLowerCase()]=i[e],t},{});this.id=l++,this._options=e,this.emitter=new o,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=n}u.prototype.url=function(t){var e=a.prependOrigin(this.path,this.origin),e=a.appendQueryObject(e,this.query),n=this.params,t=null==t?this.client.accessToken:t;return t&&(e=a.appendQueryParam(e,"access_token",t),t=i(t).user,n=r({ownerId:t},n)),e=a.interpolateRouteParams(e,n)},u.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then(function(t){return e.response=t,e.emitter.emit(s.EVENT_RESPONSE,t),t},function(t){throw e.error=t,e.emitter.emit(s.EVENT_ERROR,t),t})},u.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},u.prototype.eachPage=function(n){var i=this;function e(e){n(null,e,function(){delete i._nextPageRequest;var t=e.nextPage();t&&o(i._nextPageRequest=t)})}function r(t){n(t,null,function(){})}function o(t){t.send().then(e,r)}o(this)},u.prototype.clone=function(){return this._extend()},u.prototype._extend=function(t){t=r(this._options,t);return new u(this.client,t)},t.exports=u},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,d="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");r=new o(n,i||t,r),e=d?d+e:e;return t._events[e]?t._events[e].fn?t._events[e]=[t._events[e],r]:t._events[e].push(r):(t._events[e]=r,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(d=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)i.call(t,e)&&n.push(d?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t){var t=d?d+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,i=e.length,r=new Array(i);n<i;n++)r[n]=e[n].fn;return r},s.prototype.listenerCount=function(t){t=d?d+t:t,t=this._events[t];return t?t.fn?1:t.length:0},s.prototype.emit=function(t,e,n,i,r,o){var a=d?d+t:t;if(!this._events[a])return!1;var s,l=this._events[a],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,i),!0;case 5:return l.fn.call(l.context,e,n,i,r),!0;case 6:return l.fn.call(l.context,e,n,i,r,o),!0}for(p=1,s=new Array(u-1);p<u;p++)s[p-1]=arguments[p];l.fn.apply(l.context,s)}else for(var c,h=l.length,p=0;p<h;p++)switch(l[p].once&&this.removeListener(t,l[p].fn,void 0,!0),u){case 1:l[p].fn.call(l[p].context);break;case 2:l[p].fn.call(l[p].context,e);break;case 3:l[p].fn.call(l[p].context,e,n);break;case 4:l[p].fn.call(l[p].context,e,n,i);break;default:if(!s)for(c=1,s=new Array(u-1);c<u;c++)s[c-1]=arguments[c];l[p].fn.apply(l[p].context,s)}return!0},s.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,n,i){t=d?d+t:t;if(!this._events[t])return this;if(!e)return l(this,t),this;var r=this._events[t];if(r.fn)r.fn!==e||i&&!r.once||n&&r.context!==n||l(this,t);else{for(var o=0,a=[],s=r.length;o<s;o++)(r[o].fn!==e||i&&!r[o].once||n&&r[o].context!==n)&&a.push(r[o]);a.length?this._events[t]=1===a.length?a[0]:a:l(this,t)}return this},s.prototype.removeAllListeners=function(t){return t?(t=d?d+t:t,this._events[t]&&l(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=d,s.EventEmitter=s,t.exports=s},function(t,e,n){"use strict";function r(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function o(t,e,n){if(!1===n||null===n)return t;var i=/\?/.test(t)?"&":"?",e=encodeURIComponent(e);return void 0!==n&&""!==n&&!0!==n&&(e+="="+r(n)),t+i+e}t.exports={appendQueryObject:function(t,n){if(!n)return t;var i=t;return Object.keys(n).forEach(function(t){var e=n[t];void 0!==e&&(Array.isArray(e)&&(e=e.filter(function(t){return null!=t}).join(",")),i=o(i,t,e))}),i},appendQueryParam:o,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var n="/"===t[0]?"":"/";return e.replace(/\/$/,"")+n+t},interpolateRouteParams:function(t,i){return i?t.replace(/\/:([a-zA-Z0-9]+)/g,function(t,e){var n=i[e];if(void 0===n)throw new Error("Unspecified route parameter "+e);return"/"+r(n)}):t}}},function(t,e,n){"use strict";var i=n(7),r=n(60),o=n(63),a=n(64),s=n(66),n={},l=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];n.forwardGeocode=function(t){r.assertShape({query:r.required(r.string),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),proximity:r.coordinates,types:r.arrayOf(r.oneOf(l)),autocomplete:r.boolean,bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),routing:r.boolean})(t),t.mode=t.mode||"mapbox.places";var e=a(i({country:t.countries},o(t,["proximity","types","autocomplete","bbox","limit","language","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(t,["mode","query"]),query:e})},n.reverseGeocode=function(t){r.assertShape({query:r.required(r.coordinates),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),types:r.arrayOf(r.oneOf(l)),bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),reverseMode:r.oneOf("distance","score"),routing:r.boolean})(t),t.mode=t.mode||"mapbox.places";var e=a(i({country:t.countries},o(t,["country","types","bbox","limit","language","reverseMode","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(t,["mode","query"]),query:e})},t.exports=s(n)},function(i,t,r){"use strict";(function(e){var t=r(7),n=r(61);i.exports=t(n,{file:function(t){return"undefined"!=typeof window?t instanceof e.Blob||t instanceof e.ArrayBuffer?void 0:"Blob or ArrayBuffer":"string"!=typeof t&&void 0===t.pipe?"Filename or Readable stream":void 0},date:function(t){if("boolean"==typeof t)return"date";try{var e=new Date(t);if(e.getTime&&isNaN(e.getTime()))return"date"}catch(t){return"date"}},coordinates:function(t){return n.tuple(n.number,n.number)(t)},assertShape:function(t,e){return n.assert(n.strictShape(t),e)}})}).call(this,r(8))},function(t,e,n){"use strict";var i=n(62),r=n(7),a={};function o(i){var r=Array.isArray(i);return function(t){var e=s(a.plainArray,t);if(e)return e;if(r&&t.length!==i.length)return"an array with "+i.length+" items";for(var n=0;n<t.length;n++)if(e=s(r?i[n]:i,t[n]))return[n].concat(e)}}function s(t,e){if(null!=e||t.hasOwnProperty("__required")){e=t(e);return e?Array.isArray(e)?e:[e]:void 0}}function l(t,e){var n=t.length,i=t[n-1],n=t.slice(0,n-1);return 0===n.length&&(n=["value"]),e=r(e,{path:n}),"function"==typeof i?i(e):u(e,"must be "+(/^an? /.test(i=i)?i:/^[aeiou]/i.test(i)?"an "+i:/^[a-z]/i.test(i)?"a "+i:i)+".")}function u(t,e){return(c(t.path)?"Item at position ":"")+t.path.join(".")+" "+e}function c(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}a.assert=function(e,n){return n=n||{},function(t){t=s(e,t);if(t){t=l(t,n);throw n.apiName&&(t=n.apiName+": "+t),new Error(t)}}},a.shape=function(t){var e,o=(e=t,Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}}));return function(t){var e,n=s(a.plainObject,t);if(n)return n;for(var i=[],r=0;r<o.length;r++)e=o[r].key,(n=s(o[r].value,t[e]))&&i.push([e].concat(n));return i.length<2?i[0]:function(e){i=i.map(function(t){return"- "+t[0]+": "+l(t,e).split("\n").join("\n  ")});var t=e.path.join(".");return"The following properties"+("value"===t?"":" of "+t)+" have invalid values:\n  "+i.join("\n  ")}}},a.strictShape=function(i){var r=a.shape(i);return function(t){var e=r(t);if(e)return e;var n=Object.keys(t).reduce(function(t,e){return void 0===i[e]&&t.push(e),t},[]);return 0!==n.length?function(){return"The following keys are invalid: "+n.join(", ")}:void 0}},a.arrayOf=o,a.tuple=function(){return o(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments))},a.required=function(e){function t(t){return null==t?function(t){return u(t,c(t.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return t.__required=!0,t},a.oneOfType=function(){var i=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var t,n=i.map(function(t){return s(t,e)}).filter(Boolean);if(n.length===i.length)return n.every(function(t){return 1===t.length&&"string"==typeof t[0]})?(t=n.map(function(t){return t[0]})).length<2?t[0]:2===t.length?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1):n.reduce(function(t,e){return e.length>t.length?e:t})}},a.equal=function(e){return function(t){if(t!==e)return JSON.stringify(e)}},a.oneOf=function(){var t=(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments)).map(function(t){return a.equal(t)});return a.oneOfType.apply(this,t)},a.range=function(t){var e=t[0],n=t[1];return function(t){if(s(a.number,t)||t<e||n<t)return"number between "+e+" & "+n+" (inclusive)"}},a.any=function(){},a.boolean=function(t){if("boolean"!=typeof t)return"boolean"},a.number=function(t){if("number"!=typeof t)return"number"},a.plainArray=function(t){if(!Array.isArray(t))return"array"},a.plainObject=function(t){if(!i(t))return"object"},a.string=function(t){if("string"!=typeof t)return"string"},a.func=function(t){if("function"!=typeof t)return"function"},a.validate=s,a.processMessage=l,t.exports=a},function(t,e,n){"use strict";var i=Object.prototype.toString;t.exports=function(t){return"[object Object]"===i.call(t)&&(null===(t=Object.getPrototypeOf(t))||t===Object.getPrototypeOf({}))}},function(t,e,n){"use strict";t.exports=function(n,i){var e="function"==typeof i?i:function(t,e){return-1!==i.indexOf(t)&&void 0!==e};return Object.keys(n).filter(function(t){return e(t,n[t])}).reduce(function(t,e){return t[e]=n[e],t},{})}},function(t,e,n){"use strict";var i=n(65);t.exports=function(t){return i(t,function(t,e){return"boolean"==typeof e?JSON.stringify(e):e})}},function(t,e,n){"use strict";t.exports=function(n,i){return Object.keys(n).reduce(function(t,e){return t[e]=i(e,n[e]),t},{})}},function(t,e,n){"use strict";var i=n(19),r=n(18);t.exports=function(n){return function(t){var e=i.prototype.isPrototypeOf(t)?t:r(t),t=Object.create(n);return t.client=e,t}}},function(t,e,n){"use strict";var i=n(68);function r(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox||null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}r.prototype={select:function(t,e){var n=this.getSelectedIndex(t,e),e=this.getEventPayload("search.select",e);if(e.resultIndex=n,e.resultPlaceName=t.place_name,e.resultId=t.id,(n!==this.lastSentIndex||e.queryString!==this.lastSentInput)&&-1!=n&&(this.lastSentIndex=n,this.lastSentInput=e.queryString,e.queryString))return this.push(e)},start:function(t){t=this.getEventPayload("search.start",t);if(t.queryString)return this.push(t)},keyevent:function(t,e){if(t.key&&!t.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(t.keyCode)){e=this.getEventPayload("search.keystroke",e);if(e.lastAction=t.key,e.queryString)return this.push(e)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;t=this.getRequestOptions(t);this.request(t,function(t){return t?this.handleError(t,e):e?e():void 0}.bind(this))},getRequestOptions:function(t){return Array.isArray(t)||(t=[t]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},getEventPayload:function(t,e){var n=e.options.proximity?[e.options.proximity.longitude,e.options.proximity.latitude]:null,i=e._map?e._map.getZoom():void 0,i={event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",proximity:n,limit:e.options.limit,mapZoom:i,keyboardLocale:this.locale};return"search.select"!==t&&"search.select"!=t&&e._inputEl?i.queryString=e._inputEl.value:i.queryString=e.inputString,i},request:function(t,e){var n,i=new XMLHttpRequest;for(n in i.onreadystatechange=function(){if(4==this.readyState)return 204==this.status?e(null):e(this.statusText)},i.open(t.method,t.host+"/"+t.path,!0),t.headers){var r=t.headers[n];i.setRequestHeader(n,r)}i.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return i()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){e=e._typeahead.data,t=t.id;return e.map(function(t){return t.id}).indexOf(t)}},shouldEnableLogging:function(t){return!(!1===t.enableEventLogging||t.origin&&-1==t.origin.indexOf("api.mapbox.com")||t.localGeocoder||t.filter)},flush:function(){0<this.eventQueue.length&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}},t.exports=r},function(t,e,n){for(var i=self.crypto||self.msCrypto,r="-_",o=36;o--;)r+=o.toString(36);for(o=36;o---10;)r+=o.toString(36).toUpperCase();t.exports=function(t){var e="",n=i.getRandomValues(new Uint8Array(t||21));for(o=t||21;o--;)e+=r[63&n[o]];return e}},function(t,e,n){"use strict";t.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو"}}},function(t,e,n){var i=function(){var e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(t){return t.match(e)||[]}function o(t){return{language:(t=r(t))[1]||"",extlang:t[2]||"",script:t[3]||"",region:t[4]||""}}function a(t,e,n){Object.defineProperty(t,e,{value:n,enumerable:!0})}function t(e,t,n){function i(t){return r(t)[e]||""}a(i,"pattern",t),a(o,n,i)}return t(1,/^[a-zA-Z]{2,3}$/,"language"),t(2,/^[a-zA-Z]{3}$/,"extlang"),t(3,/^[a-zA-Z]{4}$/,"script"),t(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),a(o,"split",function(t){return r(t).filter(function(t,e){return t&&e})}),o};t.exports?t.exports=i():this.subtag=i()},function(t,e,n){t.exports=function(){"use strict";var r,o,a;function t(t,e){var n,i;r?o?(n="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",r(i={}),(a=e(i)).workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))):o=e:r=e}return t(0,function(t){function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}var i=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),r=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,o=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,a={now:i,frame:function(t){var e=r(t);return{cancel:function(){return o(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};self.document&&((Vi=self.document.createElement("img")).onload=function(){a.supportsWebp=!0},Vi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var s=l;function l(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}l.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},l.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},l.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},l.prototype.solveCurveX=function(t,e){var n,i,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;o<t?n=r:i=r,r=.5*(i-n)+n}return r},l.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};function u(t,e,n){this.column=t,this.row=e,this.zoom=n}u.prototype.clone=function(){return new u(this.column,this.row,this.zoom)},u.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},u.prototype.sub=function(t){return this.clone()._sub(t)},u.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},u.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this};var p=c;function c(t,e){this.x=t,this.y=e}function h(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!h(t[n],e[n]))return!1;return!0}if("object"!=typeof t||null===t||null===e)return t===e;if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!h(t[i],e[i]))return!1;return!0}function d(t,e,n,i){var r=new s(t,e,n,i);return function(t){return r.solve(t)}}c.prototype={clone:function(){return new c(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,t=t.y-this.y;return e*e+t*t},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,t=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=t,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),t=e*this.x-n*this.y,e=n*this.x+e*this.y;return this.x=t,this.y=e,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),t=e.x+n*(this.x-e.x)-i*(this.y-e.y),e=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=t,this.y=e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(t){return!(t instanceof c)&&Array.isArray(t)?new c(t[0],t[1]):t};var f=d(.25,.1,.25,1);function y(t,e,n){return Math.min(n,Math.max(e,t))}function m(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o,a=r[i];for(o in a)t[o]=a[o]}return t}var g=1;function v(){return g++}function _(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function b(t,e){return-1!==t.indexOf(e,t.length-e.length)}function x(t,e,n){var i,r={};for(i in t)r[i]=e.call(n||this,t[i],i,t);return r}function w(t,e,n){var i,r={};for(i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function T(t){return Array.isArray(t)?t.map(T):"object"==typeof t&&t?x(t,T):t}var E={};function k(t){E[t]||("undefined"!=typeof console&&console.warn(t),E[t]=!0)}function S(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}var P={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(P);var C,M=((C=Error)&&(L.__proto__=C),((L.prototype=Object.create(C&&C.prototype)).constructor=L).prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},L);function L(t,e,n){C.call(this,t),this.status=e,this.url=n,this.name=this.constructor.name,this.message=t}function I(t){var e,n=new self.XMLHttpRequest;for(e in n.open("GET",t.url,!0),t.headers)n.setRequestHeader(e,t.headers[e]);return n.withCredentials="include"===t.credentials,n}function A(e,n){var i=I(e);return i.responseType="arraybuffer",i.onerror=function(){n(new Error(i.statusText))},i.onload=function(){var t=i.response;if(0===t.byteLength&&200===i.status)return n(new Error("http status 200 returned without content."));200<=i.status&&i.status<300&&i.response?n(null,{data:t,cacheControl:i.getResponseHeader("Cache-Control"),expires:i.getResponseHeader("Expires")}):n(new M(i.statusText,i.status,e.url))},i.send(),{cancel:function(){return i.abort()}}}function z(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function O(t,e,n){n&&n[t]&&(-1!==(e=n[t].indexOf(e))&&n[t].splice(e,1))}function R(t,e){void 0===e&&(e={}),m(this,e),this.type=t}function D(){}var N,B=((N=R)&&(F.__proto__=N),(F.prototype=Object.create(N&&N.prototype)).constructor=F);function F(t,e){void 0===e&&(e={}),N.call(this,"error",m({error:t},e))}D.prototype.on=function(t,e){return this._listeners=this._listeners||{},z(t,e,this._listeners),this},D.prototype.off=function(t,e){return O(t,e,this._listeners),O(t,e,this._oneTimeListeners),this},D.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},z(t,e,this._oneTimeListeners),this},D.prototype.fire=function(t){"string"==typeof t&&(t=new R(t,arguments[1]||{}));var e=t.type;if(this.listens(e)){for(var n=0,i=(t.target=this)._listeners&&this._listeners[e]?this._listeners[e].slice():[];n<i.length;n+=1)i[n].call(this,t);for(var r=0,o=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[];r<o.length;r+=1){var a=o[r];O(e,a,this._oneTimeListeners),a.call(this,t)}var s=this._eventedParent;s&&(m(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(t))}else t instanceof B&&console.error(t.error);return this},D.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&0<this._listeners[t].length||this._oneTimeListeners&&this._oneTimeListeners[t]&&0<this._oneTimeListeners[t].length||this._eventedParent&&this._eventedParent.listens(t)};var j={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!(D.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this})},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"string",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},U=function(t,e,n,i){this.message=(t?t+": ":"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)};function V(t){var e=t.key,t=t.value;return t?[new U(e,t,"constants have been deprecated as of v8")]:[]}function Z(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o,a=r[i];for(o in a)t[o]=a[o]}return t}function q(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function G(t){return Array.isArray(t)?t.map(G):q(t)}function W(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,i=e;n<i.length;n+=1){var r=i[n],o=r[0],r=r[1];this.bindings[o]=r}}var $,H=(($=Error)&&(K.__proto__=$),(K.prototype=Object.create($&&$.prototype)).constructor=K);function K(t,e){$.call(this,e),this.message=e,this.key=t}W.prototype.concat=function(t){return new W(this,t)},W.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},W.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var X={kind:"null"},J={kind:"number"},Y={kind:"string"},Q={kind:"boolean"},tt={kind:"color"},et={kind:"object"},nt={kind:"value"},it={kind:"collator"};function rt(t,e){return{kind:"array",itemType:t,N:e}}function ot(t){if("array"!==t.kind)return t.kind;var e=ot(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}var at=[X,J,Y,Q,tt,et,rt(nt)];function st(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&!st(t.itemType,e.itemType)&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,i=at;n<i.length;n+=1)if(!st(i[n],e))return null}return"Expected "+ot(t)+" but found "+ot(e)+" instead."}var lt=n(function(t,e){var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function c(t){return(t=Math.round(t))<0?0:255<t?255:t}function n(t){return t<0?0:1<t?1:t}function h(t){return"%"===t[t.length-1]?c(parseFloat(t)/100*255):c(parseInt(t))}function p(t){return"%"===t[t.length-1]?n(parseFloat(t)/100):n(parseFloat(t))}function d(t,e,n){return n<0?n+=1:1<n&&--n,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e=t.replace(/ /g,"").toLowerCase();if(e in u)return u[e].slice();if("#"===e[0])return 4===e.length?0<=(i=parseInt(e.substr(1),16))&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:7===e.length&&0<=(i=parseInt(e.substr(1),16))&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var n=e.indexOf("("),t=e.indexOf(")");if(-1!==n&&t+1===e.length){var i=e.substr(0,n),r=e.substr(n+1,t-(n+1)).split(","),o=1;switch(i){case"rgba":if(4!==r.length)return null;o=p(r.pop());case"rgb":return 3!==r.length?null:[h(r[0]),h(r[1]),h(r[2]),o];case"hsla":if(4!==r.length)return null;o=p(r.pop());case"hsl":if(3!==r.length)return null;var a=(parseFloat(r[0])%360+360)%360/360,s=p(r[1]),l=p(r[2]),s=l<=.5?l*(s+1):l+s-l*s,l=2*l-s;return[c(255*d(l,s,a+1/3)),c(255*d(l,s,a)),c(255*d(l,s,a-1/3)),o];default:return null}}return null}}catch(t){}}).parseCSSColor,ut=function(t,e,n,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=n,this.a=i};ut.parse=function(t){if(t){if(t instanceof ut)return t;if("string"==typeof t){t=lt(t);if(t)return new ut(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},ut.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],i=t[2],t=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(i)+","+t+")"},ut.prototype.toArray=function(){var t=this.r,e=this.g,n=this.b,i=this.a;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*n/i,i]},ut.black=new ut(0,0,0,1),ut.white=new ut(1,1,1,1),ut.transparent=new ut(0,0,0,0);var ct=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale||[],{sensitivity:this.sensitivity,usage:"search"})};ct.prototype.compare=function(t,e){return this.collator.compare(t,e)},ct.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale||[]).resolvedOptions().locale};function ht(t,e,n){this.type=it,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}function pt(t,e,n,i){return"number"==typeof t&&0<=t&&t<=255&&"number"==typeof e&&0<=e&&e<=255&&"number"==typeof n&&0<=n&&n<=255?void 0===i||"number"==typeof i&&0<=i&&i<=1?null:"Invalid rgba value ["+[t,e,n,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function dt(t){if(null===t)return X;if("string"==typeof t)return Y;if("boolean"==typeof t)return Q;if("number"==typeof t)return J;if(t instanceof ut)return tt;if(t instanceof ct)return it;if(Array.isArray(t)){for(var e,n=t.length,i=0,r=t;i<r.length;i+=1){var o=dt(r[i]);if(e){if(e===o)continue;e=nt;break}e=o}return rt(e||nt,n)}return et}ht.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Q);if(!i)return null;var r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Q);if(!r)return null;t=null;return n.locale&&!(t=e.parse(n.locale,1,Y))?null:new ht(i,r,t)},ht.prototype.evaluate=function(t){return new ct(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ht.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ht.prototype.possibleOutputs=function(){return[void 0]},ht.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};function ft(t,e){this.type=t,this.value=e}ft.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return 1;if("string"==typeof e)return 1;if("boolean"==typeof e)return 1;if("number"==typeof e)return 1;if(e instanceof ut)return 1;if(e instanceof ct)return 1;if(Array.isArray(e)){for(var n=0,i=e;n<i.length;n+=1)if(!t(i[n]))return;return 1}if("object"==typeof e){for(var r in e)if(!t(e[r]))return;return 1}}(t[1]))return e.error("invalid value");var n=t[1],t=dt(n),e=e.expectedType;return"array"!==t.kind||0!==t.N||!e||"array"!==e.kind||"number"==typeof e.N&&0!==e.N||(t=e),new ft(t,n)},ft.prototype.evaluate=function(){return this.value},ft.prototype.eachChild=function(){},ft.prototype.possibleOutputs=function(){return[this.value]},ft.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ut?["rgba"].concat(this.value.toArray()):this.value};function mt(t){this.name="ExpressionEvaluationError",this.message=t}mt.prototype.toJSON=function(){return this.message};function yt(t,e){this.type=t,this.args=e}var gt={string:Y,number:J,boolean:Q,object:et};yt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=t[0],n=gt[n],i=[],r=1;r<t.length;r++){var o=e.parse(t[r],r,nt);if(!o)return null;i.push(o)}return new yt(n,i)},yt.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!st(this.type,dt(n)))return n;if(e===this.args.length-1)throw new mt("Expected value to be of type "+ot(this.type)+", but found "+ot(dt(n))+" instead.")}return null},yt.prototype.eachChild=function(t){this.args.forEach(t)},yt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},yt.prototype.serialize=function(){return[this.type.kind].concat(this.args.map(function(t){return t.serialize()}))};function vt(t,e){this.type=t,this.input=e}var _t={string:Y,number:J,boolean:Q};vt.parse=function(t,e){if(t.length<2||4<t.length)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");if(2<t.length){var n=t[1];if("string"!=typeof n||!(n in _t))return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=_t[n]}else n=nt;if(3<t.length){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);i=t[2]}var i=rt(n,i),t=e.parse(t[t.length-1],t.length-1,nt);return t?new vt(i,t):null},vt.prototype.evaluate=function(t){t=this.input.evaluate(t);if(st(this.type,dt(t)))throw new mt("Expected value to be of type "+ot(this.type)+", but found "+ot(dt(t))+" instead.");return t},vt.prototype.eachChild=function(t){t(this.input)},vt.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},vt.prototype.serialize=function(){var t=["array"],e=this.type.itemType;return"string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind||(t.push(e.kind),"number"==typeof(e=this.type.N)&&t.push(e)),t.push(this.input.serialize()),t};function bt(t,e){this.type=t,this.args=e}var xt={"to-number":J,"to-color":tt};bt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=t[0],n=xt[n],i=[],r=1;r<t.length;r++){var o=e.parse(t[r],r,nt);if(!o)return null;i.push(o)}return new bt(n,i)},bt.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,n,i=0,r=this.args;i<r.length;i+=1)if(n=null,"string"==typeof(e=r[i].evaluate(t))){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||4<e.length?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":pt(e[0],e[1],e[2],e[3])))return new ut(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new mt(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}for(var a=null,s=0,l=this.args;s<l.length;s+=1)if(null!==(a=l[s].evaluate(t))){var u=Number(a);if(!isNaN(u))return u}throw new mt("Could not convert "+JSON.stringify(a)+" to number.")},bt.prototype.eachChild=function(t){this.args.forEach(t)},bt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},bt.prototype.serialize=function(){var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};function wt(){this._parseColorCache={}}var Tt=["Unknown","Point","LineString","Polygon"];wt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},wt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Tt[this.feature.type]:this.feature.type:null},wt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},wt.prototype.parseColor=function(t){return this._parseColorCache[t]||(this._parseColorCache[t]=ut.parse(t))};var Et=function(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i};function kt(t){if(t instanceof Et){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!kt(t)&&(e=!1)}),e}function St(t){if(!(t instanceof Et&&"feature-state"===t.name)){var e=!0;return t.eachChild(function(t){e&&!St(t)&&(e=!1)}),e}}function Pt(t,e){if(t instanceof Et&&0<=e.indexOf(t.name))return!1;var n=!0;return t.eachChild(function(t){n&&!Pt(t,e)&&(n=!1)}),n}Et.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Et.prototype.eachChild=function(t){this.args.forEach(t)},Et.prototype.possibleOutputs=function(){return[void 0]},Et.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Et.parse=function(e,t){var n=e[0],i=Et.definitions[n];if(!i)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var r=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=o.filter(function(t){t=t[0];return!Array.isArray(t)||t.length===e.length-1}),s=[],l=1;l<e.length;l++){var u,c=e[l],h=void 0;1===a.length&&(u=a[0][0],h=Array.isArray(u)?u[l-1]:u.type);h=t.parse(c,1+s.length,h);if(!h)return null;s.push(h)}for(var p=null,d=0,f=a;d<f.length;d+=1){var m=f[d],y=m[0],m=m[1],p=new Mt(t.registry,t.path,null,t.scope);if(Array.isArray(y)&&y.length!==s.length)p.error("Expected "+y.length+" arguments, but found "+s.length+" instead.");else{for(var g=0;g<s.length;g++){var v=Array.isArray(y)?y[g]:y.type,_=s[g];p.concat(g+1).checkSubtype(v,_.type)}if(0===p.errors.length)return new Et(n,r,m,s)}}return 1===a.length?t.errors.push.apply(t.errors,p.errors):(i=(a.length?a:o).map(function(t){t=t[0];return Array.isArray(t)?"("+t.map(ot).join(", ")+")":"("+ot(t.type)+"...)"}).join(" | "),o=s.map(function(t){return ot(t.type)}).join(", "),t.error("Expected arguments of type "+i+", but found ("+o+") instead.")),null},Et.register=function(t,e){for(var n in Et.definitions=e)t[n]=Et};function Ct(t,e){this.type=e.type,this.name=t,this.boundExpression=e}Ct.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");t=t[1];return e.scope.has(t)?new Ct(t,e.scope.get(t)):e.error('Unknown variable "'+t+'". Make sure "'+t+'" has been bound in an enclosing "let" expression before using it.',1)},Ct.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Ct.prototype.eachChild=function(){},Ct.prototype.possibleOutputs=function(){return[void 0]},Ct.prototype.serialize=function(){return["var",this.name]};var Mt=function(t,e,n,i,r){void 0===e&&(e=[]),void 0===i&&(i=new W),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=i,this.errors=r,this.expectedType=n};function Lt(t,e){for(var n,i,r=0,o=t.length-1,a=0;r<=o;){if(n=t[a=Math.floor((r+o)/2)],i=t[a+1],e===n||n<e&&e<i)return a;if(n<e)r=a+1;else{if(!(e<n))throw new mt("Input is not a number.");o=a-1}}return Math.max(a-1,0)}Mt.prototype.parse=function(t,e,n,i,r){return void 0===r&&(r={}),(e?this.concat(e,n,i):this)._parse(t,r)},Mt.prototype._parse=function(t,e){if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var r=i.parse(t,this);if(!r)return null;if(this.expectedType){var o=this.expectedType,i=r.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind||"value"!==i.kind)if("array"===o.kind&&"value"===i.kind)e.omitTypeAnnotations||(r=new vt(o,r));else if("color"!==o.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(this.expectedType,r.type))return null}else e.omitTypeAnnotations||(r=new bt(o,[r]));else e.omitTypeAnnotations||(r=new yt(o,[r]))}if(!(r instanceof ft)&&function e(t){if(t instanceof Ct)return e(t.boundExpression);if(t instanceof Et&&"error"===t.name)return!1;if(t instanceof ht)return!1;var n=t instanceof bt||t instanceof yt||t instanceof vt,i=!0;return t.eachChild(function(t){i=n?i&&e(t):i&&t instanceof ft}),!!i&&kt(t)&&Pt(t,["zoom","heatmap-density","line-progress","is-supported-script"])}(r)){var a=new wt;try{r=new ft(r.type,r.evaluate(a))}catch(t){return this.error(t.message),null}}return r}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},Mt.prototype.concat=function(t,e,n){t="number"==typeof t?this.path.concat(t):this.path,n=n?this.scope.concat(n):this.scope;return new Mt(this.registry,t,e||null,n,this.errors)},Mt.prototype.error=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];var i=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new H(i,t))},Mt.prototype.checkSubtype=function(t,e){e=st(t,e);return e&&this.error(e),e};var It=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,r=n;i<r.length;i+=1){var o=r[i],a=o[0],o=o[1];this.labels.push(a),this.outputs.push(o)}};function At(t,e,n){return t*(1-n)+e*n}It.parse=function(t,e){var n=t[1],i=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,J)))return null;var r=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),i.unshift(-1/0);for(var a=0;a<i.length;a+=2){var s=i[a],l=i[a+1],u=a+1,c=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);c=e.parse(l,c,o);if(!c)return null;o=o||c.type,r.push([s,c])}return new It(o,n,r)},It.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;return(i>=e[r-1]?n[r-1]:n[Lt(e,i)]).evaluate(t)},It.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},It.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},It.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)0<e&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var zt=Object.freeze({number:At,color:function(t,e,n){return new ut(At(t.r,e.r,n),At(t.g,e.g,n),At(t.b,e.b,n),At(t.a,e.a,n))},array:function(t,n,i){return t.map(function(t,e){return At(t,n[e],i)})}}),Ot=function(t,e,n,i){this.type=t,this.interpolation=e,this.input=n,this.labels=[],this.outputs=[];for(var r=0,o=i;r<o.length;r+=1){var a=o[r],s=a[0],a=a[1];this.labels.push(s),this.outputs.push(a)}};function Rt(t,e,n,i){i-=n,n=t-n;return 0==i?0:1===e?n/i:(Math.pow(e,n)-1)/(Math.pow(e,i)-1)}Ot.interpolationFactor=function(t,e,n,i){var r=0;return"exponential"===t.name?r=Rt(e,t.base,n,i):"linear"===t.name?r=Rt(e,1,n,i):"cubic-bezier"===t.name&&(t=t.controlPoints,r=new s(t[0],t[1],t[2],t[3]).solve(Rt(e,1,n,i))),r},Ot.parse=function(t,e){var n=t[1],i=t[2],r=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);o=n.slice(1);if(4!==o.length||o.some(function(t){return"number"!=typeof t||t<0||1<t}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:o}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,J)))return null;var a=[],s=null;e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(var l=0;l<r.length;l+=2){var u=r[l],c=r[l+1],h=l+3,p=l+4;if("number"!=typeof u)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(a.length&&a[a.length-1][0]>=u)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);p=e.parse(c,p,s);if(!p)return null;s=s||p.type,a.push([u,p])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Ot(s,n,i,a):e.error("Type "+ot(s)+" is not interpolatable.")},Ot.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);var o=Lt(e,i),r=e[o],e=e[o+1],r=Ot.interpolationFactor(this.interpolation,i,r,e),e=n[o].evaluate(t),t=n[o+1].evaluate(t);return zt[this.type.kind.toLowerCase()](e,t,r)},Ot.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Ot.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Ot.prototype.serialize=function(){for(var t=["interpolate","linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),this.input.serialize()],e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t};var Dt=function(t,e){this.type=t,this.args=e};Dt.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,i=e.expectedType;i&&"value"!==i.kind&&(n=i);for(var r=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],s=e.parse(s,1+r.length,n,void 0,{omitTypeAnnotations:!0});if(!s)return null;n=n||s.type,r.push(s)}t=i&&r.some(function(t){return st(i,t.type)});return new Dt(t?nt:n,r)},Dt.prototype.evaluate=function(t){for(var e=null,n=0,i=this.args;n<i.length&&null===(e=i[n].evaluate(t));n+=1);return e},Dt.prototype.eachChild=function(t){this.args.forEach(t)},Dt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Dt.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Nt=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Nt.prototype.evaluate=function(t){return this.result.evaluate(t)},Nt.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},Nt.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],i=1;i<t.length-1;i+=2){var r=t[i];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}var a=e.parse(t[t.length-1],t.length-1,void 0,n);return a?new Nt(n,a):null},Nt.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Nt.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var i=n[e],r=i[0],i=i[1];t.push(r,i.serialize())}return t.push(this.result.serialize()),t};function Bt(t,e,n){this.type=t,this.index=e,this.input=n}Bt.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,J),t=e.parse(t[2],2,rt(e.expectedType||nt));if(!n||!t)return null;e=t.type;return new Bt(e.itemType,n,t)},Bt.prototype.evaluate=function(t){var e=this.index.evaluate(t),t=this.input.evaluate(t);if(e<0)throw new mt("Array index out of bounds: "+e+" < 0.");if(e>=t.length)throw new mt("Array index out of bounds: "+e+" > "+(t.length-1)+".");if(e!==Math.floor(e))throw new mt("Array index must be an integer, but found "+e+" instead.");return t[e]},Bt.prototype.eachChild=function(t){t(this.index),t(this.input)},Bt.prototype.possibleOutputs=function(){return[void 0]},Bt.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};function Ft(t,e,n,i,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o}Ft.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,dt(p)))return null}else n=dt(p);if(void 0!==r[String(p)])return u.error("Branch labels must be unique.");r[String(p)]=o.length}l=e.parse(l,a,i);if(!l)return null;i=i||l.type,o.push(l)}var d=e.parse(t[1],1,nt);if(!d)return null;var f=e.parse(t[t.length-1],t.length-1,i);return!f||"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new Ft(n,i,d,r,o,f)},Ft.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(dt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Ft.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Ft.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Ft.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],i={},r=0,o=Object.keys(this.cases).sort();r<o.length;r+=1){var a=o[r],s=i[e.cases[a]];void 0===s?(i[e.cases[a]]=n.length,n.push([e.cases[a],[a]])):n[s][1].push(a)}for(var l=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,c=n;u<c.length;u+=1){var h=c[u],p=h[0],h=h[1];1===h.length?t.push(l(h[0])):t.push(h.map(l)),t.push(e.outputs[p].serialize())}return t.push(this.otherwise.serialize()),t};function jt(t,e,n){this.type=t,this.branches=e,this.otherwise=n}function Ut(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function Vt(t,e){return o.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=e.parse(t[1],1,nt);if(!n)return null;var i=e.parse(t[2],2,nt);if(!i)return null;if(!Ut(n.type)&&!Ut(i.type))return e.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+ot(n.type)+", "+ot(i.type)+") instead.");if(n.type.kind!==i.type.kind&&"value"!==n.type.kind&&"value"!==i.type.kind)return e.error("Cannot compare "+ot(n.type)+" and "+ot(i.type)+".");var r=null;if(4===t.length){if("string"!==n.type.kind&&"string"!==i.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(r=e.parse(t[3],3,it)))return null}return new o(n,i,r)},o.prototype.evaluate=function(t){t=this.collator?0===this.collator.evaluate(t).compare(this.lhs.evaluate(t),this.rhs.evaluate(t)):this.lhs.evaluate(t)===this.rhs.evaluate(t);return e?!t:t},o.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},o.prototype.possibleOutputs=function(){return[!0,!1]},o.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},o;function o(t,e,n){this.type=Q,this.lhs=t,this.rhs=e,this.collator=n}}jt.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i=[],r=1;r<t.length-1;r+=2){var o=e.parse(t[r],r,Q);if(!o)return null;var a=e.parse(t[r+1],r+1,n);if(!a)return null;i.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new jt(n,i,s):null},jt.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[0],i=i[1];if(r.evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},jt.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[0],i=i[1];t(r),t(i)}t(this.otherwise)},jt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t};function Zt(t){this.type=J,this.input=t}var qt=Vt("==",!(jt.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e})),Gt=Vt("!=",!0);Zt.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");t=e.parse(t[1],1);return t?"array"!==t.type.kind&&"string"!==t.type.kind&&"value"!==t.type.kind?e.error("Expected argument of type string or array, but found "+ot(t.type)+" instead."):new Zt(t):null},Zt.prototype.evaluate=function(t){t=this.input.evaluate(t);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new mt("Expected value to be of type string or array, but found "+ot(dt(t))+" instead.")},Zt.prototype.eachChild=function(t){t(this.input)},Zt.prototype.possibleOutputs=function(){return[void 0]},Zt.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Wt={"==":qt,"!=":Gt,array:vt,at:Bt,boolean:yt,case:jt,coalesce:Dt,collator:ht,interpolate:Ot,length:Zt,let:Nt,literal:ft,match:Ft,number:yt,object:yt,step:It,string:yt,"to-color":bt,"to-number":bt,var:Ct};function $t(t,e){var n=e[0],i=e[1],r=e[2],e=e[3],n=n.evaluate(t),i=i.evaluate(t),r=r.evaluate(t),e=e?e.evaluate(t):1,t=pt(n,i,r,e);if(t)throw new mt(t);return new ut(n/255*e,i/255*e,r/255*e,e)}function Ht(t,e){t=e[t];return void 0===t?null:t}function Kt(t,e){var n=e[0],e=e[1];return n.evaluate(t)<e.evaluate(t)}function Xt(t,e){var n=e[0],e=e[1];return n.evaluate(t)>e.evaluate(t)}function Jt(t,e){var n=e[0],e=e[1];return n.evaluate(t)<=e.evaluate(t)}function Yt(t,e){var n=e[0],e=e[1];return n.evaluate(t)>=e.evaluate(t)}function Qt(t){return{type:t}}function te(t){return{result:"success",value:t}}function ee(t){return{result:"error",value:t}}function ne(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function ie(t){return t.expression&&-1<t.expression.parameters.indexOf("zoom")}function re(t){return t.expression&&t.expression.interpolated}Et.register(Wt,{error:[{kind:"error"},[Y],function(t,e){e=e[0];throw new mt(e.evaluate(t))}],typeof:[Y,[nt],function(t,e){return ot(dt(e[0].evaluate(t)))}],"to-string":[Y,[nt],function(t,e){e=e[0],t=typeof(e=e.evaluate(t));return null===e?"":"string"==t||"number"==t||"boolean"==t?String(e):e instanceof ut?e.toString():JSON.stringify(e)}],"to-boolean":[Q,[nt],function(t,e){e=e[0];return Boolean(e.evaluate(t))}],"to-rgba":[rt(J,4),[tt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[tt,[J,J,J],$t],rgba:[tt,[J,J,J,J],$t],has:{type:Q,overloads:[[[Y],function(t,e){return e[0].evaluate(t)in t.properties()}],[[Y,et],function(t,e){var n=e[0],e=e[1];return n.evaluate(t)in e.evaluate(t)}]]},get:{type:nt,overloads:[[[Y],function(t,e){return Ht(e[0].evaluate(t),t.properties())}],[[Y,et],function(t,e){var n=e[0],e=e[1];return Ht(n.evaluate(t),e.evaluate(t))}]]},"feature-state":[nt,[Y],function(t,e){return Ht(e[0].evaluate(t),t.featureState||{})}],properties:[et,[],function(t){return t.properties()}],"geometry-type":[Y,[],function(t){return t.geometryType()}],id:[nt,[],function(t){return t.id()}],zoom:[J,[],function(t){return t.globals.zoom}],"heatmap-density":[J,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[J,[],function(t){return t.globals.lineProgress||0}],"+":[J,Qt(J),function(t,e){for(var n=0,i=0,r=e;i<r.length;i+=1)n+=r[i].evaluate(t);return n}],"*":[J,Qt(J),function(t,e){for(var n=1,i=0,r=e;i<r.length;i+=1)n*=r[i].evaluate(t);return n}],"-":{type:J,overloads:[[[J,J],function(t,e){var n=e[0],e=e[1];return n.evaluate(t)-e.evaluate(t)}],[[J],function(t,e){return-e[0].evaluate(t)}]]},"/":[J,[J,J],function(t,e){var n=e[0],e=e[1];return n.evaluate(t)/e.evaluate(t)}],"%":[J,[J,J],function(t,e){var n=e[0],e=e[1];return n.evaluate(t)%e.evaluate(t)}],ln2:[J,[],function(){return Math.LN2}],pi:[J,[],function(){return Math.PI}],e:[J,[],function(){return Math.E}],"^":[J,[J,J],function(t,e){var n=e[0],e=e[1];return Math.pow(n.evaluate(t),e.evaluate(t))}],sqrt:[J,[J],function(t,e){e=e[0];return Math.sqrt(e.evaluate(t))}],log10:[J,[J],function(t,e){e=e[0];return Math.log10(e.evaluate(t))}],ln:[J,[J],function(t,e){e=e[0];return Math.log(e.evaluate(t))}],log2:[J,[J],function(t,e){e=e[0];return Math.log2(e.evaluate(t))}],sin:[J,[J],function(t,e){e=e[0];return Math.sin(e.evaluate(t))}],cos:[J,[J],function(t,e){e=e[0];return Math.cos(e.evaluate(t))}],tan:[J,[J],function(t,e){e=e[0];return Math.tan(e.evaluate(t))}],asin:[J,[J],function(t,e){e=e[0];return Math.asin(e.evaluate(t))}],acos:[J,[J],function(t,e){e=e[0];return Math.acos(e.evaluate(t))}],atan:[J,[J],function(t,e){e=e[0];return Math.atan(e.evaluate(t))}],min:[J,Qt(J),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[J,Qt(J),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[J,[J],function(t,e){e=e[0];return Math.abs(e.evaluate(t))}],round:[J,[J],function(t,e){t=e[0].evaluate(t);return t<0?-Math.round(-t):Math.round(t)}],floor:[J,[J],function(t,e){e=e[0];return Math.floor(e.evaluate(t))}],ceil:[J,[J],function(t,e){e=e[0];return Math.ceil(e.evaluate(t))}],"filter-==":[Q,[Y,nt],function(t,e){var n=e[0],e=e[1];return t.properties()[n.value]===e.value}],"filter-id-==":[Q,[nt],function(t,e){e=e[0];return t.id()===e.value}],"filter-type-==":[Q,[Y],function(t,e){e=e[0];return t.geometryType()===e.value}],"filter-<":[Q,[Y,nt],function(t,e){var n=e[0],e=e[1],n=t.properties()[n.value],e=e.value;return typeof n==typeof e&&n<e}],"filter-id-<":[Q,[nt],function(t,e){e=e[0],t=t.id(),e=e.value;return typeof t==typeof e&&t<e}],"filter->":[Q,[Y,nt],function(t,e){var n=e[0],e=e[1],n=t.properties()[n.value],e=e.value;return typeof n==typeof e&&e<n}],"filter-id->":[Q,[nt],function(t,e){e=e[0],t=t.id(),e=e.value;return typeof t==typeof e&&e<t}],"filter-<=":[Q,[Y,nt],function(t,e){var n=e[0],e=e[1],n=t.properties()[n.value],e=e.value;return typeof n==typeof e&&n<=e}],"filter-id-<=":[Q,[nt],function(t,e){e=e[0],t=t.id(),e=e.value;return typeof t==typeof e&&t<=e}],"filter->=":[Q,[Y,nt],function(t,e){var n=e[0],e=e[1],n=t.properties()[n.value],e=e.value;return typeof n==typeof e&&e<=n}],"filter-id->=":[Q,[nt],function(t,e){e=e[0],t=t.id(),e=e.value;return typeof t==typeof e&&e<=t}],"filter-has":[Q,[nt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Q,[],function(t){return null!==t.id()}],"filter-type-in":[Q,[rt(Y)],function(t,e){return 0<=e[0].value.indexOf(t.geometryType())}],"filter-id-in":[Q,[rt(nt)],function(t,e){return 0<=e[0].value.indexOf(t.id())}],"filter-in-small":[Q,[Y,rt(nt)],function(t,e){var n=e[0];return 0<=e[1].value.indexOf(t.properties()[n.value])}],"filter-in-large":[Q,[Y,rt(nt)],function(t,e){var n=e[0],e=e[1];return function(t,e,n,i){for(;n<=i;){var r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=1+r}return!1}(t.properties()[n.value],e.value,0,e.value.length-1)}],">":{type:Q,overloads:[[[J,J],Xt],[[Y,Y],Xt],[[Y,Y,it],function(t,e){var n=e[0],i=e[1];return 0<e[2].evaluate(t).compare(n.evaluate(t),i.evaluate(t))}]]},"<":{type:Q,overloads:[[[J,J],Kt],[[Y,Y],Kt],[[Y,Y,it],function(t,e){var n=e[0],i=e[1];return e[2].evaluate(t).compare(n.evaluate(t),i.evaluate(t))<0}]]},">=":{type:Q,overloads:[[[J,J],Yt],[[Y,Y],Yt],[[Y,Y,it],function(t,e){var n=e[0],i=e[1];return 0<=e[2].evaluate(t).compare(n.evaluate(t),i.evaluate(t))}]]},"<=":{type:Q,overloads:[[[J,J],Jt],[[Y,Y],Jt],[[Y,Y,it],function(t,e){var n=e[0],i=e[1];return e[2].evaluate(t).compare(n.evaluate(t),i.evaluate(t))<=0}]]},all:{type:Q,overloads:[[[Q,Q],function(t,e){var n=e[0],e=e[1];return n.evaluate(t)&&e.evaluate(t)}],[Qt(Q),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(!i[n].evaluate(t))return!1;return!0}]]},any:{type:Q,overloads:[[[Q,Q],function(t,e){var n=e[0],e=e[1];return n.evaluate(t)||e.evaluate(t)}],[Qt(Q),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(i[n].evaluate(t))return!0;return!1}]]},"!":[Q,[Q],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Q,[Y],function(t,e){var n=e[0],e=t.globals&&t.globals.isSupportedScript;return!e||e(n.evaluate(t))}],upcase:[Y,[Y],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Y,[Y],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Y,Qt(Y),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}],"resolved-locale":[Y,[it],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var oe=6/29,ae=3*oe*oe,se=Math.PI/180,le=180/Math.PI;function ue(t){return.008856451679035631<t?Math.pow(t,1/3):t/ae+4/29}function ce(t){return oe<t?t*t*t:ae*(t-4/29)}function he(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function pe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function de(t){var e=pe(t.r),n=pe(t.g),i=pe(t.b),r=ue((.4124564*e+.3575761*n+.1804375*i)/.95047),o=ue(.2126729*e+.7151522*n+.072175*i);return{l:116*o-16,a:500*(r-o),b:200*(o-ue((.0193339*e+.119192*n+.9503041*i)/1.08883)),alpha:t.a}}function fe(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200,e=+ce(e),n=.95047*ce(n),i=1.08883*ce(i);return new ut(he(3.2404542*n-1.5371385*e-.4985314*i),he(-.969266*n+1.8760108*e+.041556*i),he(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}var me={forward:de,reverse:fe,interpolate:function(t,e,n){return{l:At(t.l,e.l,n),a:At(t.a,e.a,n),b:At(t.b,e.b,n),alpha:At(t.alpha,e.alpha,n)}}},ye={forward:function(t){var e=de(t),n=e.l,i=e.a,r=e.b,e=Math.atan2(r,i)*le;return{h:e<0?360+e:e,c:Math.sqrt(i*i+r*r),l:n,alpha:t.a}},reverse:function(t){var e=t.h*se,n=t.c;return fe({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,e){e-=t;return t+n*(180<e||e<-180?e-360*Math.round(e/360):e)}(t.h,e.h),c:At(t.c,e.c,n),l:At(t.l,e.l,n),alpha:At(t.alpha,e.alpha,n)}}},ge=Object.freeze({lab:me,hcl:ye});function ve(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function _e(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function be(t){return t}function xe(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function we(t,e,n,i,r){return xe(typeof n===r?i[n]:void 0,t.default,e.default)}function Te(t,e,n){if("number"!==ve(n))return xe(t.default,e.default);e=t.stops.length;if(1===e)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[e-1][0])return t.stops[e-1][1];n=Se(t.stops,n);return t.stops[n][1]}function Ee(t,e,n){var i=void 0!==t.base?t.base:1;if("number"!==ve(n))return xe(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var o,a,s=Se(t.stops,n),l=(o=i,r=t.stops[s][0],i=t.stops[s+1][0]-r,r=n-r,0==i?0:1===o?r/i:(Math.pow(o,r)-1)/(Math.pow(o,i)-1)),u=t.stops[s][1],c=t.stops[s+1][1],h=zt[e.type]||be;return t.colorSpace&&"rgb"!==t.colorSpace&&(a=ge[t.colorSpace],h=function(t,e){return a.reverse(a.interpolate(a.forward(t),a.forward(e),l))}),"function"==typeof u.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=u.evaluate.apply(void 0,t),i=c.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==i)return h(n,i,l)}}:h(u,c,l)}function ke(t,e,n){return"color"===e.type?n=ut.parse(n):ve(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),xe(n,t.default,e.default)}function Se(t,e){for(var n,i,r=0,o=t.length-1,a=0;r<=o;){if(n=t[a=Math.floor((r+o)/2)][0],i=t[a+1][0],e===n||n<e&&e<i)return a;n<e?r=a+1:e<n&&(o=a-1)}return Math.max(a-1,0)}var Pe=function(t,e){this.expression=t,this._warningHistory={},this._defaultValue="color"===(t=e).type&&_e(t.default)?new ut(0,0,0,0):"color"===t.type?ut.parse(t.default)||null:void 0===t.default?null:t.default,"enum"===e.type&&(this._enumValues=e.values)};function Ce(t){return Array.isArray(t)&&0<t.length&&"string"==typeof t[0]&&t[0]in Wt}function Me(t,e){var n,n=new Mt(Wt,[],(n={color:tt,string:Y,number:J,enum:Y,boolean:Q},"array"===e.type?rt(n[e.value]||nt,e.length):n[e.type]||null)),t=n.parse(t);return t?te(new Pe(t,e)):ee(n.errors)}Pe.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator||(this._evaluator=new wt),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},Pe.prototype.evaluate=function(t,e,n){this._evaluator||(this._evaluator=new wt),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n;try{var i=this.expression.evaluate(this._evaluator);if(null==i)return this._defaultValue;if(this._enumValues&&!(i in this._enumValues))throw new mt("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(i)+" instead.");return i}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Le=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!St(e.expression)};Le.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},Le.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)};var Ie=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!St(e.expression),n instanceof Ot&&(this._interpolationType=n.interpolation)};function Ae(t,e){if("error"===(t=Me(t,e)).result)return t;var n=t.value.expression,i=kt(n);if(!i&&!ne(e))return ee([new H("","data expressions not supported")]);var r=Pt(n,["zoom"]);if(!r&&!ie(e))return ee([new H("","zoom expressions not supported")]);n=function e(t){var n=null;if(t instanceof Nt)n=e(t.result);else if(t instanceof Dt)for(var i=0,r=t.args;i<r.length;i+=1){var o=r[i];if(n=e(o))break}else(t instanceof It||t instanceof Ot)&&t.input instanceof Et&&"zoom"===t.input.name&&(n=t);return n instanceof H||t.eachChild(function(t){t=e(t);t instanceof H?n=t:!n&&t?n=new H("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&t&&n!==t&&(n=new H("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(n);return n||r?n instanceof H?ee([n]):n instanceof Ot&&!re(e)?ee([new H("",'"interpolate" expressions cannot be used with this property')]):te(n?new Ie(i?"camera":"composite",t.value,n):new Le(i?"constant":"source",t.value)):ee([new H("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Ie.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},Ie.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},Ie.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?Ot.interpolationFactor(this._interpolationType,t,e,n):0};function ze(t,e){this._parameters=t,this._specification=e,Z(this,function t(n,i){var r,o,a,e="color"===i.type,s=n.stops&&"object"==typeof n.stops[0][0],l=s||void 0!==n.property,u=s||!l,l=n.type||(re(i)?"exponential":"interval");if(e&&((n=Z({},n)).stops&&(n.stops=n.stops.map(function(t){return[t[0],ut.parse(t[1])]})),n.default?n.default=ut.parse(n.default):n.default=ut.parse(i.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!ge[n.colorSpace])throw new Error("Unknown color space: "+n.colorSpace);if("exponential"===l)r=Ee;else if("interval"===l)r=Te;else if("categorical"===l){r=we,o=Object.create(null);for(var c=0,h=n.stops;c<h.length;c+=1){var p=h[c];o[p[0]]=p[1]}a=typeof n.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=ke}if(s){for(var d={},f=[],m=0;m<n.stops.length;m++){var y=n.stops[m],g=y[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:n.type,property:n.property,default:n.default,stops:[]},f.push(g)),d[g].stops.push([y[0].value,y[1]])}for(var v=[],_=0,b=f;_<b.length;_+=1){var x=b[_];v.push([d[x].zoom,t(d[x],i)])}return{kind:"composite",interpolationFactor:Ot.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:v.map(function(t){return t[0]}),evaluate:function(t,e){t=t.zoom;return Ee({stops:v,base:n.base},i,t).evaluate(t,e)}}}return u?{kind:"camera",interpolationFactor:"exponential"===l?Ot.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==n.base?n.base:1}):function(){return 0},zoomStops:n.stops.map(function(t){return t[0]}),evaluate:function(t){t=t.zoom;return r(n,i,t,o,a)}}:{kind:"source",evaluate:function(t,e){e=e&&e.properties?e.properties[n.property]:void 0;return void 0===e?xe(n.default,i.default):r(n,i,e,o,a)}}}(this._parameters,this._specification))}function Oe(t,e){if(_e(t))return new ze(t,e);if(Ce(t)){var n=Ae(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=ut.parse(t)),{kind:"constant",evaluate:function(){return i}}}function Re(t){var e,n,i=t.key,r=t.value,o=t.valueSpec||{},a=t.objectElementValidators||{},s=t.style,l=t.styleSpec,u=[],t=ve(r);if("object"!==t)return[new U(i,r,"object expected, "+t+" found")];for(e in r){var c=e.split(".")[0],h=o[c]||o["*"],p=void 0;if(a[c])p=a[c];else if(o[c])p=an;else if(a["*"])p=a["*"];else{if(!o["*"]){u.push(new U(i,r[e],'unknown property "'+e+'"'));continue}p=an}u=u.concat(p({key:(i&&i+".")+e,value:r[e],valueSpec:h,style:s,styleSpec:l,object:r,objectKey:e},r))}for(n in o)a[n]||o[n].required&&void 0===o[n].default&&void 0===r[n]&&u.push(new U(i,r,'missing required property "'+n+'"'));return u}function De(t){var e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||an;if("array"!==ve(e))return[new U(o,e,"array expected, "+ve(e)+" found")];if(n.length&&e.length!==n.length)return[new U(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new U(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value};r.$version<7&&(s.function=n.function),"object"===ve(n.value)&&(s=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:i,styleSpec:r,key:o+"["+u+"]"}));return l}function Ne(t){var e=t.key,n=t.value,i=t.valueSpec,t=ve(n);return"number"!==t?[new U(e,n,"number expected, "+t+" found")]:"minimum"in i&&n<i.minimum?[new U(e,n,n+" is less than the minimum value "+i.minimum)]:"maximum"in i&&n>i.maximum?[new U(e,n,n+" is greater than the maximum value "+i.maximum)]:[]}function Be(t){var r,o,a,s=t.valueSpec,l=q(t.value.type),u={},e="categorical"!==l&&void 0===t.value.property,n=!e,c="array"===ve(t.value.stops)&&"array"===ve(t.value.stops[0])&&"object"===ve(t.value.stops[0][0]),i=Re({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===l)return[new U(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value,e=e.concat(De({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h}));return"array"===ve(n)&&0===n.length&&e.push(new U(t.key,n,"array must have at least one stop")),e},default:function(t){return an({key:t.key,value:t.value,valueSpec:s,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===l&&e&&i.push(new U(t.key,t.value,'missing required property "property"')),"identity"===l||t.value.stops||i.push(new U(t.key,t.value,'missing required property "stops"')),"exponential"===l&&t.valueSpec.expression&&!re(t.valueSpec)&&i.push(new U(t.key,t.value,"exponential functions not supported")),8<=t.styleSpec.$version&&(n&&!ne(t.valueSpec)?i.push(new U(t.key,t.value,"property functions not supported")):e&&!ie(t.valueSpec)&&i.push(new U(t.key,t.value,"zoom functions not supported"))),"categorical"!==l&&!c||void 0!==t.value.property||i.push(new U(t.key,t.value,'"property" property is required')),i;function h(t){var e=[],n=t.value,i=t.key;if("array"!==ve(n))return[new U(i,n,"array expected, "+ve(n)+" found")];if(2!==n.length)return[new U(i,n,"array length 2 expected, length "+n.length+" found")];if(c){if("object"!==ve(n[0]))return[new U(i,n,"object expected, "+ve(n[0])+" found")];if(void 0===n[0].zoom)return[new U(i,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new U(i,n,"object stop key must have value")];if(a&&a>q(n[0].zoom))return[new U(i,n[0].zoom,"stop zoom values must appear in ascending order")];q(n[0].zoom)!==a&&(a=q(n[0].zoom),o=void 0,u={}),e=e.concat(Re({key:i+"[0]",value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ne,value:p}}))}else e=e.concat(p({key:i+"[0]",value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return e.concat(an({key:i+"[1]",value:n[1],valueSpec:s,style:t.style,styleSpec:t.styleSpec}))}function p(t,e){var n=ve(t.value),i=q(t.value),e=null!==t.value?t.value:e;if(r){if(n!==r)return[new U(t.key,e,n+" stop domain type must match previous stop domain type "+r)]}else r=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new U(t.key,e,"stop domain value must be a number, string, or boolean")];if("number"===n||"categorical"===l)return"categorical"!==l||"number"!==n||isFinite(i)&&Math.floor(i)===i?"categorical"!==l&&"number"===n&&void 0!==o&&i<o?[new U(t.key,e,"stop domain values must appear in ascending order")]:(o=i,"categorical"===l&&i in u?[new U(t.key,e,"stop domain values must be unique")]:(u[i]=!0,[])):[new U(t.key,e,"integer expected, found "+i)];n="number expected, "+n+" found";return ne(s)&&void 0===l&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new U(t.key,e,n)]}}function Fe(e){var t=("property"===e.expressionContext?Ae:Me)(G(e.value),e.valueSpec);return"error"===t.result?t.value.map(function(t){return new U(""+e.key+t.key,e.value,t.message)}):"property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==t.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new U(e.key,e.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:"property"!==e.expressionContext||"layout"!==e.propertyType||St(t.value._styleExpression.expression)?[]:[new U(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')]}function je(t){var e=t.key,n=t.value,i=t.valueSpec,t=[];return Array.isArray(i.values)?-1===i.values.indexOf(q(n))&&t.push(new U(e,n,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(i.values).indexOf(q(n))&&t.push(new U(e,n,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(n)+" found")),t}function Ue(t){if(Array.isArray(t)&&0!==t.length)switch(t[0]){case"has":return 2<=t.length&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var i=n[e];if(!Ue(i)&&"boolean"!=typeof i)return}return 1;default:return 1}}ze.deserialize=function(t){return new ze(t._parameters,t._specification)};var Ve={type:"boolean",default:!(ze.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ze(t){if(!t)return function(){return!0};Ue(t)||(t=Ge(t));var n=Me(t,Ve);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,e){return n.value.evaluate(t,e)}}function qe(t,e){return t<e?-1:e<t?1:0}function Ge(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?We(t[1],t[2],"=="):"!="===n?Ke(We(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?We(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(Ge))):"all"===n?["all"].concat(t.slice(1).map(Ge)):"none"===n?["all"].concat(t.slice(1).map(Ge).map(Ke)):"in"===n?$e(t[1],t.slice(2)):"!in"===n?Ke($e(t[1],t.slice(2))):"has"===n?He(t[1]):"!has"!==n||Ke(He(t[1]))}function We(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function $e(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return 200<e.length&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(qe)]]:["filter-in-small",t,["literal",e]]}}function He(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Ke(t){return["!",t]}function Xe(t){return Ue(G(t.value))?Fe(Z({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,i=e.key;if("array"!==ve(n))return[new U(i,n,"array expected, "+ve(n)+" found")];var r,o=e.styleSpec,a=[];if(n.length<1)return[new U(i,n,"filter array must have at least 1 element")];switch(a=a.concat(je({key:i+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),q(n[0])){case"<":case"<=":case">":case">=":2<=n.length&&"$type"===q(n[1])&&a.push(new U(i,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new U(i,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":2<=n.length&&"string"!==(r=ve(n[1]))&&a.push(new U(i+"[1]",n[1],"string expected, "+r+" found"));for(var s=2;s<n.length;s++)r=ve(n[s]),"$type"===q(n[1])?a=a.concat(je({key:i+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new U(i+"["+s+"]",n[s],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var l=1;l<n.length;l++)a=a.concat(t({key:i+"["+l+"]",value:n[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=ve(n[1]),2!==n.length?a.push(new U(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==r&&a.push(new U(i+"[1]",n[1],"string expected, "+r+" found"))}return a}(t)}function Je(t,e){var n=t.key,i=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return an({key:n,value:o,valueSpec:r.transition,style:i,styleSpec:r});s=t.valueSpec||s[a];if(!s)return[new U(n,o,'unknown property "'+a+'"')];if("string"===ve(o)&&ne(s)&&!s.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new U(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var u=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&u.push(new U(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&_e(G(o))&&"identity"===q(o.type)&&u.push(new U(n,o,'"text-font" does not support identity functions'))),u.concat(an({key:t.key,value:o,valueSpec:s,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function Ye(t){return Je(t,"paint")}function Qe(t){return Je(t,"layout")}function tn(t){var e=[],n=t.value,i=t.key,r=t.style,o=t.styleSpec;n.type||n.ref||e.push(new U(i,n,'either "type" or "ref" is required'));var a,s,l,u=q(n.type),c=q(n.ref);if(n.id)for(var h=q(n.id),p=0;p<t.arrayIndex;p++){var d=r.layers[p];q(d.id)===h&&e.push(new U(i,n.id,'duplicate layer id "'+n.id+'", previously used at line '+d.id.__line__))}return"ref"in n?(["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new U(i,n[t],'"'+t+'" is prohibited for ref layers'))}),r.layers.forEach(function(t){q(t.id)===c&&(a=t)}),a?a.ref?e.push(new U(i,n.ref,"ref cannot reference another ref layer")):u=q(a.type):e.push(new U(i,n.ref,'ref layer "'+c+'" not found'))):"background"!==u&&(n.source?(l=(s=r.sources&&r.sources[n.source])&&q(s.type),s?"vector"===l&&"raster"===u?e.push(new U(i,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===l&&"raster"!==u?e.push(new U(i,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==l||n["source-layer"]?"raster-dem"===l&&"hillshade"!==u?e.push(new U(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==u||!n.paint||!n.paint["line-gradient"]||"geojson"===l&&s.lineMetrics||e.push(new U(i,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new U(i,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new U(i,n.source,'source "'+n.source+'" not found'))):e.push(new U(i,n,'missing required property "source"'))),e=e.concat(Re({key:i,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return an({key:i+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:Xe,layout:function(t){return Re({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Qe(Z({layerType:u},t))}}})},paint:function(t){return Re({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Ye(Z({layerType:u},t))}}})}}}))}function en(t){var e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new U(n,e,'"type" is required')];var o=q(e.type),a=[];switch(o){case"vector":case"raster":case"raster-dem":if(a=a.concat(Re({key:n,value:e,valueSpec:i["source_"+o.replace("-","_")],style:t.style,styleSpec:i})),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&a.push(new U(n+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":return Re({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i});case"video":return Re({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Re({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return a.push(new U(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),a;default:return je({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function nn(t){var e,n=t.value,i=t.styleSpec,r=i.light,o=t.style,a=[],t=ve(n);if(void 0===n)return a;if("object"!==t)return a.concat([new U("light",n,"object expected, "+t+" found")]);for(e in n)var s=e.match(/^(.*)-transition$/),a=s&&r[s[1]]&&r[s[1]].transition?a.concat(an({key:e,value:n[e],valueSpec:i.transition,style:o,styleSpec:i})):r[e]?a.concat(an({key:e,value:n[e],valueSpec:r[e],style:o,styleSpec:i})):a.concat([new U(e,n[e],'unknown property "'+e+'"')]);return a}function rn(t){var e=t.value,n=t.key,t=ve(e);return"string"!==t?[new U(n,e,"string expected, "+t+" found")]:[]}var on={"*":function(){return[]},array:De,boolean:function(t){var e=t.value,n=t.key,t=ve(e);return"boolean"!==t?[new U(n,e,"boolean expected, "+t+" found")]:[]},number:Ne,color:function(t){var e=t.key,n=t.value,t=ve(n);return"string"!==t?[new U(e,n,"color expected, "+t+" found")]:null===lt(n)?[new U(e,n,'color expected, "'+n+'" found')]:[]},constants:V,enum:je,filter:Xe,function:Be,layer:tn,object:Re,source:en,light:nn,string:rn};function an(t){var e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&_e(q(e))?Be(t):n.expression&&Ce(G(e))?Fe(t):n.type&&on[n.type]?on[n.type](t):Re(Z({},t,{valueSpec:n.type?i[n.type]:n}))}function sn(t){var e=t.value,n=t.key,t=rn(t);return t.length||(-1===e.indexOf("{fontstack}")&&t.push(new U(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&t.push(new U(n,e,'"glyphs" url must include a "{range}" token'))),t}function ln(t,e){var n=(n=[]).concat(an({key:"",value:t,valueSpec:(e=e||j).$root,styleSpec:e,style:t,objectElementValidators:{glyphs:sn,"*":function(){return[]}}}));return t.constants&&(n=n.concat(V({key:"constants",value:t.constants,style:t,styleSpec:e}))),un(n)}function un(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function cn(t){return function(){return un(t.apply(this,arguments))}}ln.source=cn(en),ln.light=cn(nn),ln.layer=cn(tn),ln.filter=cn(Xe),ln.paintProperty=cn(Ye),ln.layoutProperty=cn(Qe);var hn=ln,pn=ln.light,dn=ln.paintProperty,fn=ln.layoutProperty;function mn(t,e){var n=!1;if(e&&e.length)for(var i=0,r=e;i<r.length;i+=1){var o=r[i];t.fire(new B(new Error(o.message))),n=!0}return n}var yn=gn;function gn(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],e=r[1],n=r[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=r[3+o],s=r[3+o+1];i.push(a===s?null:r.subarray(a,s))}var l=r[3+i.length],u=r[3+i.length+1];this.keys=r.subarray(l,u),this.bboxes=r.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;e=n/e*t;this.min=-e,this.max=t+e}gn.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},gn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},gn.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},gn.prototype.query=function(t,e,n,i){var r=this.min,o=this.max;if(t<=r&&e<=r&&o<=n&&o<=i)return Array.prototype.slice.call(this.keys);o=[];return this._forEachCell(t,e,n,i,this._queryCell,o,{}),o},gn.prototype._queryCell=function(t,e,n,i,r,o,a){var s=this.cells[r];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var h,p=s[c];void 0===a[p]&&(t<=u[2+(h=4*p)]&&e<=u[3+h]&&n>=u[0+h]&&i>=u[1+h]?(a[p]=!0,o.push(l[p])):a[p]=!1)}},gn.prototype._forEachCell=function(t,e,n,i,r,o,a){for(var s=this._convertToCellCoord(t),l=this._convertToCellCoord(e),u=this._convertToCellCoord(n),c=this._convertToCellCoord(i),h=s;h<=u;h++)for(var p=l;p<=c;p++){var d=this.d*p+h;if(r.call(this,t,e,n,i,d,o,a))return}},gn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},gn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[3+a]=o,r.set(s,o),o+=s.length}return r[3+t.length]=o,r.set(this.keys,o),o+=this.keys.length,r[3+t.length+1]=o,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};var vn,_n=self.ImageData,bn={};function xn(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),bn[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(vn in xn("Object",Object),yn.serialize=function(t,e){t=t.toArrayBuffer();return e&&e.push(t),t},yn.deserialize=function(t){return new yn(t)},xn("Grid",yn),xn("Color",ut),xn("Error",Error),xn("StylePropertyFunction",ze),xn("StyleExpression",Pe,{omit:["_evaluator"]}),xn("ZoomDependentExpression",Ie),xn("ZoomConstantExpression",Le),xn("CompoundExpression",Et,{omit:["_evaluate"]}),Wt)Wt[vn]._classRegistryKey||xn("Expression_"+vn,Wt[vn]);function wn(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof _n)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],r=0,o=t;r<o.length;r+=1){var a=o[r];i.push(wn(a,e))}return i}if("object"!=typeof t)throw new Error("can't serialize object of type "+typeof t);var n=t.constructor,s=n._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l,u={};if(n.serialize)u._serialized=n.serialize(t,e);else{for(var c in t)!t.hasOwnProperty(c)||0<=bn[s].omit.indexOf(c)||(l=t[c],u[c]=0<=bn[s].shallow.indexOf(c)?l:wn(l,e));t instanceof Error&&(u.message=t.message)}return{name:s,properties:u}}function Tn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof _n)return t;if(Array.isArray(t))return t.map(Tn);if("object"!=typeof t)throw new Error("can't deserialize object of type "+typeof t);var e=t.name,n=t.properties;if(!e)throw new Error("can't deserialize object of anonymous class");t=bn[e].klass;if(!t)throw new Error("can't deserialize unregistered class "+e);if(t.deserialize)return t.deserialize(n._serialized);for(var i=Object.create(t.prototype),r=0,o=Object.keys(n);r<o.length;r+=1){var a=o[r];i[a]=0<=bn[e].shallow.indexOf(a)?n[a]:Tn(n[a])}return i}function En(){this.first=!0}var kn={"Latin-1 Supplement":function(t){return 128<=t&&t<=255},Arabic:function(t){return 1536<=t&&t<=1791},"Arabic Supplement":function(t){return 1872<=t&&t<=1919},"Arabic Extended-A":function(t){return 2208<=t&&t<=2303},"Hangul Jamo":function(t){return 4352<=t&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return 5120<=t&&t<=5759},Khmer:function(t){return 6016<=t&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return 6320<=t&&t<=6399},"General Punctuation":function(t){return 8192<=t&&t<=8303},"Letterlike Symbols":function(t){return 8448<=t&&t<=8527},"Number Forms":function(t){return 8528<=t&&t<=8591},"Miscellaneous Technical":function(t){return 8960<=t&&t<=9215},"Control Pictures":function(t){return 9216<=t&&t<=9279},"Optical Character Recognition":function(t){return 9280<=t&&t<=9311},"Enclosed Alphanumerics":function(t){return 9312<=t&&t<=9471},"Geometric Shapes":function(t){return 9632<=t&&t<=9727},"Miscellaneous Symbols":function(t){return 9728<=t&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return 11008<=t&&t<=11263},"CJK Radicals Supplement":function(t){return 11904<=t&&t<=12031},"Kangxi Radicals":function(t){return 12032<=t&&t<=12255},"Ideographic Description Characters":function(t){return 12272<=t&&t<=12287},"CJK Symbols and Punctuation":function(t){return 12288<=t&&t<=12351},Hiragana:function(t){return 12352<=t&&t<=12447},Katakana:function(t){return 12448<=t&&t<=12543},Bopomofo:function(t){return 12544<=t&&t<=12591},"Hangul Compatibility Jamo":function(t){return 12592<=t&&t<=12687},Kanbun:function(t){return 12688<=t&&t<=12703},"Bopomofo Extended":function(t){return 12704<=t&&t<=12735},"CJK Strokes":function(t){return 12736<=t&&t<=12783},"Katakana Phonetic Extensions":function(t){return 12784<=t&&t<=12799},"Enclosed CJK Letters and Months":function(t){return 12800<=t&&t<=13055},"CJK Compatibility":function(t){return 13056<=t&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return 13312<=t&&t<=19903},"Yijing Hexagram Symbols":function(t){return 19904<=t&&t<=19967},"CJK Unified Ideographs":function(t){return 19968<=t&&t<=40959},"Yi Syllables":function(t){return 40960<=t&&t<=42127},"Yi Radicals":function(t){return 42128<=t&&t<=42191},"Hangul Jamo Extended-A":function(t){return 43360<=t&&t<=43391},"Hangul Syllables":function(t){return 44032<=t&&t<=55215},"Hangul Jamo Extended-B":function(t){return 55216<=t&&t<=55295},"Private Use Area":function(t){return 57344<=t&&t<=63743},"CJK Compatibility Ideographs":function(t){return 63744<=t&&t<=64255},"Arabic Presentation Forms-A":function(t){return 64336<=t&&t<=65023},"Vertical Forms":function(t){return 65040<=t&&t<=65055},"CJK Compatibility Forms":function(t){return 65072<=t&&t<=65103},"Small Form Variants":function(t){return 65104<=t&&t<=65135},"Arabic Presentation Forms-B":function(t){return 65136<=t&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return 65280<=t&&t<=65519}};function Sn(t){for(var e=0,n=t;e<n.length;e+=1)if(Pn(n[e].charCodeAt(0)))return!0;return!1}function Pn(t){return 746===t||747===t||!(t<4352)&&(kn["Bopomofo Extended"](t)||kn.Bopomofo(t)||kn["CJK Compatibility Forms"](t)&&!(65097<=t&&t<=65103)||kn["CJK Compatibility Ideographs"](t)||kn["CJK Compatibility"](t)||kn["CJK Radicals Supplement"](t)||kn["CJK Strokes"](t)||!(!kn["CJK Symbols and Punctuation"](t)||12296<=t&&t<=12305||12308<=t&&t<=12319||12336===t)||kn["CJK Unified Ideographs Extension A"](t)||kn["CJK Unified Ideographs"](t)||kn["Enclosed CJK Letters and Months"](t)||kn["Hangul Compatibility Jamo"](t)||kn["Hangul Jamo Extended-A"](t)||kn["Hangul Jamo Extended-B"](t)||kn["Hangul Jamo"](t)||kn["Hangul Syllables"](t)||kn.Hiragana(t)||kn["Ideographic Description Characters"](t)||kn.Kanbun(t)||kn["Kangxi Radicals"](t)||kn["Katakana Phonetic Extensions"](t)||kn.Katakana(t)&&12540!==t||!(!kn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||65306<=t&&t<=65310||65339===t||65341===t||65343===t||65371<=t&&t<=65503||65507===t||65512<=t&&t<=65519)||!(!kn["Small Form Variants"](t)||65112<=t&&t<=65118||65123<=t&&t<=65126)||kn["Unified Canadian Aboriginal Syllabics"](t)||kn["Unified Canadian Aboriginal Syllabics Extended"](t)||kn["Vertical Forms"](t)||kn["Yijing Hexagram Symbols"](t)||kn["Yi Syllables"](t)||kn["Yi Radicals"](t))}function Cn(t){return!(Pn(t)||(t=t,kn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||kn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||kn["Letterlike Symbols"](t)||kn["Number Forms"](t)||kn["Miscellaneous Technical"](t)&&(8960<=t&&t<=8967||8972<=t&&t<=8991||8996<=t&&t<=9e3||9003===t||9085<=t&&t<=9114||9150<=t&&t<=9165||9167===t||9169<=t&&t<=9179||9186<=t&&t<=9215)||kn["Control Pictures"](t)&&9251!==t||kn["Optical Character Recognition"](t)||kn["Enclosed Alphanumerics"](t)||kn["Geometric Shapes"](t)||kn["Miscellaneous Symbols"](t)&&!(9754<=t&&t<=9759)||kn["Miscellaneous Symbols and Arrows"](t)&&(11026<=t&&t<=11055||11088<=t&&t<=11097||11192<=t&&t<=11243)||kn["CJK Symbols and Punctuation"](t)||kn.Katakana(t)||kn["Private Use Area"](t)||kn["CJK Compatibility Forms"](t)||kn["Small Form Variants"](t)||kn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||9984<=t&&t<=10087||10102<=t&&t<=10131||65532===t||65533===t))}function Mn(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new En,this.transition={})}var Ln,In=!(En.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}),An=null,zn=!1,On=new D,Rn={applyArabicShaping:null,processBidirectionalText:null,isLoaded:function(){return zn||null!=Rn.applyArabicShaping}};Mn.prototype.isSupportedScript=function(t){return function(t,e){for(var n,i=0,r=t;i<r.length;i+=1)if(n=r[i].charCodeAt(0),!e&&(1424<=n&&n<=2303||kn["Arabic Presentation Forms-A"](n)||kn["Arabic Presentation Forms-B"](n))||2304<=n&&n<=3583||3840<=n&&n<=4255||kn.Khmer(n))return!1;return!0}(t,Rn.isLoaded())},Mn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};function Dn(t,e){this.property=t,this.value=e,this.expression=Oe(void 0===e?t.specification.default:e,t.specification)}Dn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Dn.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};function Nn(t){this.property=t,this.value=new Dn(t,void 0)}Nn.prototype.transitioned=function(t,e){return new Fn(this.property,this.value,e,m({},t.transition,this.transition),t.now)},Nn.prototype.untransitioned=function(){return new Fn(this.property,this.value,null,{},0)};function Bn(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}Bn.prototype.getValue=function(t){return T(this._values[t].value.value)},Bn.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Nn(this._values[t].property)),this._values[t].value=new Dn(this._values[t].property,null===e?void 0:T(e))},Bn.prototype.getTransition=function(t){return T(this._values[t].transition)},Bn.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Nn(this._values[t].property)),this._values[t].transition=T(e)||void 0},Bn.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r);r=this.getTransition(i);void 0!==r&&(t[i+"-transition"]=r)}return t},Bn.prototype.transitioned=function(t,e){for(var n=new jn(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var o=r[i];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},Bn.prototype.untransitioned=function(){for(var t=new jn(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e];t._values[i]=this._values[i].untransitioned()}return t};var Fn=function(t,e,n,i,r){this.property=t,this.value=e,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)};Fn.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),i=this.prior;if(i){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return i.possiblyEvaluate(t);var r=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(t),n,function(){if(r<=0)return 0;if(1<=r)return 1;var t=r*r,e=t*r;return 4*(r<.5?e:3*(r-t)+e-.75)}())}return n};var jn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};jn.prototype.possiblyEvaluate=function(t){for(var e=new Zn(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var r=i[n];e._values[r]=this._values[r].possiblyEvaluate(t)}return e},jn.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var n=e[t];if(this._values[n].prior)return!0}return!1};function Un(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}Un.prototype.getValue=function(t){return T(this._values[t].value)},Un.prototype.setValue=function(t,e){this._values[t]=new Dn(this._values[t].property,null===e?void 0:T(e))},Un.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r)}return t},Un.prototype.possiblyEvaluate=function(t){for(var e=new Zn(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var r=i[n];e._values[r]=this._values[r].possiblyEvaluate(t)}return e};function Vn(t,e,n){this.property=t,this.value=e,this.globals=n}Vn.prototype.isConstant=function(){return"constant"===this.value.kind},Vn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Vn.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.globals,t,e)};var Zn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Zn.prototype.get=function(t){return this._values[t]};function qn(t){this.specification=t}qn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},qn.prototype.interpolate=function(t,e,n){var i=zt[this.specification.type];return i?i(t,e,n):t};function Gn(t){this.specification=t}Gn.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Vn(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Vn(this,t.expression,e)},Gn.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Vn(this,{kind:"constant",value:void 0},t.globals);var i=zt[this.specification.type];return i?new Vn(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.globals):t},Gn.prototype.evaluate=function(t,e,n,i){return"constant"===t.kind?t.value:t.evaluate(e,n,i)};var Wn=function(t){this.specification=t};Wn.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"!==t.expression.kind)return this._calculate(t.expression.evaluate(new Mn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Mn(Math.floor(e.zoom),e)),t.expression.evaluate(new Mn(Math.floor(e.zoom+1),e)),e);t=t.expression.evaluate(e);return this._calculate(t,t,t,e)}},Wn.prototype._calculate=function(t,e,n,i){var r=i.zoom,o=r-Math.floor(r),a=i.crossFadingFactor();return r>i.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:n,to:e,fromScale:.5,toScale:1,t:1-(1-a)*o}},Wn.prototype.interpolate=function(t){return t};var $n=function(t){this.specification=t};$n.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},$n.prototype.interpolate=function(){return!1};function Hn(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],i=this.defaultPropertyValues[e]=new Dn(n,void 0),n=this.defaultTransitionablePropertyValues[e]=new Nn(n);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}}xn("DataDrivenProperty",Gn),xn("DataConstantProperty",qn),xn("CrossFadedProperty",Wn),xn("ColorRampProperty",$n);var Kn,Xn=((Kn=D)&&(ti.__proto__=Kn),((ti.prototype=Object.create(Kn&&Kn.prototype)).constructor=ti).prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},ti.prototype.setLayoutProperty=function(t,e,n){if(null!=e){var i="layers."+this.id+".layout."+t;if(this._validate(fn,i,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},ti.prototype.getPaintProperty=function(t){return b(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},ti.prototype.setPaintProperty=function(t,e,n){if(null!=e){var i="layers."+this.id+".paint."+t;if(this._validate(dn,i,t,e,n))return!1}if(b(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;n=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);e=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),e||n},ti.prototype._handleSpecialPaintPropertyUpdate=function(t){},ti.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},ti.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},ti.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},ti.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},ti.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),w(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},ti.prototype._validate=function(t,e,n,i,r){return(!r||!1!==r.validate)&&mn(this,t.call(hn,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:j,style:{glyphs:!0,sprite:!0}}))},ti.prototype.hasOffscreenPass=function(){return!1},ti.prototype.resize=function(){},ti.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Vn&&ne(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},ti),Jn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Yn=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Qn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ti(t,e){for(var n in Kn.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.visibility="visible","background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this._featureFilter=function(){return!0},e.layout&&(this._unevaluatedLayout=new Un(e.layout)),this._transitionablePaint=new Bn(e.paint),t.paint)this.setPaintProperty(n,t.paint[n],{validate:!1});for(var i in t.layout)this.setLayoutProperty(i,t.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}function ei(t,r){void 0===r&&(r=1);var o=0,a=0;return{members:t.map(function(t){var e=(i=t.type,Jn[i].BYTES_PER_ELEMENT),n=o=ni(o,Math.max(r,e)),i=t.components||1;return a=Math.max(a,e),o+=e*i,{name:t.name,type:t.type,components:i,offset:n}}),size:ni(o,Math.max(a,r)),alignment:r}}function ni(t,e){return Math.ceil(t/e)*e}Qn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Qn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Qn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Qn.prototype.clear=function(){this.length=0},Qn.prototype.resize=function(t){this.reserve(t),this.length=t},Qn.prototype.reserve=function(t){t>this.capacity&&(this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),t=this.uint8,this._refreshViews(),t&&this.uint8.set(t))},Qn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ii,ri=((ii=Qn)&&(oi.__proto__=ii),((oi.prototype=Object.create(ii&&ii.prototype)).constructor=oi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},oi.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.int16[0+i]=t,this.int16[1+i]=e,n},oi.prototype.emplace=function(t,e,n){var i=2*t;return this.int16[0+i]=e,this.int16[1+i]=n,t},oi);function oi(){ii.apply(this,arguments)}ri.prototype.bytesPerElement=4,xn("StructArrayLayout2i4",ri);var ai,si=((ai=Qn)&&(li.__proto__=ai),((li.prototype=Object.create(ai&&ai.prototype)).constructor=li).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},li.prototype.emplaceBack=function(t,e,n,i){var r=this.length;this.resize(r+1);var o=4*r;return this.int16[0+o]=t,this.int16[1+o]=e,this.int16[2+o]=n,this.int16[3+o]=i,r},li.prototype.emplace=function(t,e,n,i,r){var o=4*t;return this.int16[0+o]=e,this.int16[1+o]=n,this.int16[2+o]=i,this.int16[3+o]=r,t},li);function li(){ai.apply(this,arguments)}si.prototype.bytesPerElement=8,xn("StructArrayLayout4i8",si);var ui,ci=((ui=Qn)&&(hi.__proto__=ui),((hi.prototype=Object.create(ui&&ui.prototype)).constructor=hi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},hi.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[0+s]=t,this.int16[1+s]=e,this.int16[2+s]=n,this.int16[3+s]=i,this.int16[4+s]=r,this.int16[5+s]=o,a},hi.prototype.emplace=function(t,e,n,i,r,o,a){var s=6*t;return this.int16[0+s]=e,this.int16[1+s]=n,this.int16[2+s]=i,this.int16[3+s]=r,this.int16[4+s]=o,this.int16[5+s]=a,t},hi);function hi(){ui.apply(this,arguments)}ci.prototype.bytesPerElement=12,xn("StructArrayLayout2i4i12",ci);var pi,di=((pi=Qn)&&(fi.__proto__=pi),((fi.prototype=Object.create(pi&&pi.prototype)).constructor=fi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},fi.prototype.emplaceBack=function(t,e,n,i,r,o,a,s){var l=this.length;this.resize(l+1);var u=6*l,c=12*l;return this.int16[0+u]=t,this.int16[1+u]=e,this.int16[2+u]=n,this.int16[3+u]=i,this.uint8[8+c]=r,this.uint8[9+c]=o,this.uint8[10+c]=a,this.uint8[11+c]=s,l},fi.prototype.emplace=function(t,e,n,i,r,o,a,s,l){var u=6*t,c=12*t;return this.int16[0+u]=e,this.int16[1+u]=n,this.int16[2+u]=i,this.int16[3+u]=r,this.uint8[8+c]=o,this.uint8[9+c]=a,this.uint8[10+c]=s,this.uint8[11+c]=l,t},fi);function fi(){pi.apply(this,arguments)}di.prototype.bytesPerElement=12,xn("StructArrayLayout4i4ub12",di);var mi,yi=((mi=Qn)&&(gi.__proto__=mi),((gi.prototype=Object.create(mi&&mi.prototype)).constructor=gi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},gi.prototype.emplaceBack=function(t,e,n,i,r,o,a,s){var l=this.length;this.resize(l+1);var u=8*l;return this.int16[0+u]=t,this.int16[1+u]=e,this.int16[2+u]=n,this.int16[3+u]=i,this.uint16[4+u]=r,this.uint16[5+u]=o,this.uint16[6+u]=a,this.uint16[7+u]=s,l},gi.prototype.emplace=function(t,e,n,i,r,o,a,s,l){var u=8*t;return this.int16[0+u]=e,this.int16[1+u]=n,this.int16[2+u]=i,this.int16[3+u]=r,this.uint16[4+u]=o,this.uint16[5+u]=a,this.uint16[6+u]=s,this.uint16[7+u]=l,t},gi);function gi(){mi.apply(this,arguments)}yi.prototype.bytesPerElement=16,xn("StructArrayLayout4i4ui16",yi);var vi,_i=((vi=Qn)&&(bi.__proto__=vi),((bi.prototype=Object.create(vi&&vi.prototype)).constructor=bi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},bi.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.float32[0+r]=t,this.float32[1+r]=e,this.float32[2+r]=n,i},bi.prototype.emplace=function(t,e,n,i){var r=3*t;return this.float32[0+r]=e,this.float32[1+r]=n,this.float32[2+r]=i,t},bi);function bi(){vi.apply(this,arguments)}_i.prototype.bytesPerElement=12,xn("StructArrayLayout3f12",_i);var xi,wi=((xi=Qn)&&(Ti.__proto__=xi),((Ti.prototype=Object.create(xi&&xi.prototype)).constructor=Ti).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},Ti.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=+e;return this.uint32[0+n]=t,e},Ti.prototype.emplace=function(t,e){var n=+t;return this.uint32[0+n]=e,t},Ti);function Ti(){xi.apply(this,arguments)}wi.prototype.bytesPerElement=4,xn("StructArrayLayout1ul4",wi);var Ei,ki=((Ei=Qn)&&(Si.__proto__=Ei),((Si.prototype=Object.create(Ei&&Ei.prototype)).constructor=Si).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Si.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,l,u,c){var h=this.length;this.resize(h+1);var p=12*h,d=6*h;return this.int16[0+p]=t,this.int16[1+p]=e,this.int16[2+p]=n,this.int16[3+p]=i,this.int16[4+p]=r,this.int16[5+p]=o,this.uint32[3+d]=a,this.uint16[8+p]=s,this.uint16[9+p]=l,this.int16[10+p]=u,this.int16[11+p]=c,h},Si.prototype.emplace=function(t,e,n,i,r,o,a,s,l,u,c,h){var p=12*t,d=6*t;return this.int16[0+p]=e,this.int16[1+p]=n,this.int16[2+p]=i,this.int16[3+p]=r,this.int16[4+p]=o,this.int16[5+p]=a,this.uint32[3+d]=s,this.uint16[8+p]=l,this.uint16[9+p]=u,this.int16[10+p]=c,this.int16[11+p]=h,t},Si);function Si(){Ei.apply(this,arguments)}ki.prototype.bytesPerElement=24,xn("StructArrayLayout6i1ul2ui2i24",ki);var Pi,Ci=((Pi=Qn)&&(Mi.__proto__=Pi),((Mi.prototype=Object.create(Pi&&Pi.prototype)).constructor=Mi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Mi.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[0+s]=t,this.int16[1+s]=e,this.int16[2+s]=n,this.int16[3+s]=i,this.int16[4+s]=r,this.int16[5+s]=o,a},Mi.prototype.emplace=function(t,e,n,i,r,o,a){var s=6*t;return this.int16[0+s]=e,this.int16[1+s]=n,this.int16[2+s]=i,this.int16[3+s]=r,this.int16[4+s]=o,this.int16[5+s]=a,t},Mi);function Mi(){Pi.apply(this,arguments)}Ci.prototype.bytesPerElement=12,xn("StructArrayLayout2i2i2i12",Ci);var Li,Ii=((Li=Qn)&&(Ai.__proto__=Li),((Ai.prototype=Object.create(Li&&Li.prototype)).constructor=Ai).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},Ai.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=4*n;return this.uint8[0+i]=t,this.uint8[1+i]=e,n},Ai.prototype.emplace=function(t,e,n){var i=4*t;return this.uint8[0+i]=e,this.uint8[1+i]=n,t},Ai);function Ai(){Li.apply(this,arguments)}Ii.prototype.bytesPerElement=4,xn("StructArrayLayout2ub4",Ii);var zi,Oi=((zi=Qn)&&(Ri.__proto__=zi),((Ri.prototype=Object.create(zi&&zi.prototype)).constructor=Ri).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Ri.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,l,u,c,h,p,d){var f=this.length;this.resize(f+1);var m=20*f,y=10*f,g=40*f;return this.int16[0+m]=t,this.int16[1+m]=e,this.uint16[2+m]=n,this.uint16[3+m]=i,this.uint32[2+y]=r,this.uint32[3+y]=o,this.uint32[4+y]=a,this.uint16[10+m]=s,this.uint16[11+m]=l,this.uint16[12+m]=u,this.float32[7+y]=c,this.float32[8+y]=h,this.uint8[36+g]=p,this.uint8[37+g]=d,f},Ri.prototype.emplace=function(t,e,n,i,r,o,a,s,l,u,c,h,p,d,f){var m=20*t,y=10*t,g=40*t;return this.int16[0+m]=e,this.int16[1+m]=n,this.uint16[2+m]=i,this.uint16[3+m]=r,this.uint32[2+y]=o,this.uint32[3+y]=a,this.uint32[4+y]=s,this.uint16[10+m]=l,this.uint16[11+m]=u,this.uint16[12+m]=c,this.float32[7+y]=h,this.float32[8+y]=p,this.uint8[36+g]=d,this.uint8[37+g]=f,t},Ri);function Ri(){zi.apply(this,arguments)}Oi.prototype.bytesPerElement=40,xn("StructArrayLayout2i2ui3ul3ui2f2ub40",Oi);var Di,Ni=((Di=Qn)&&(Bi.__proto__=Di),((Bi.prototype=Object.create(Di&&Di.prototype)).constructor=Bi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Bi.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=+e;return this.float32[0+n]=t,e},Bi.prototype.emplace=function(t,e){var n=+t;return this.float32[0+n]=e,t},Bi);function Bi(){Di.apply(this,arguments)}Ni.prototype.bytesPerElement=4,xn("StructArrayLayout1f4",Ni);var Fi,i=((Fi=Qn)&&(ji.__proto__=Fi),((ji.prototype=Object.create(Fi&&Fi.prototype)).constructor=ji).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},ji.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.int16[0+r]=t,this.int16[1+r]=e,this.int16[2+r]=n,i},ji.prototype.emplace=function(t,e,n,i){var r=3*t;return this.int16[0+r]=e,this.int16[1+r]=n,this.int16[2+r]=i,t},ji);function ji(){Fi.apply(this,arguments)}i.prototype.bytesPerElement=6,xn("StructArrayLayout3i6",i);var Ui,Vi=((Ui=Qn)&&(Zi.__proto__=Ui),((Zi.prototype=Object.create(Ui&&Ui.prototype)).constructor=Zi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Zi.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=2*i,o=4*i;return this.uint32[0+r]=t,this.uint16[2+o]=e,this.uint16[3+o]=n,i},Zi.prototype.emplace=function(t,e,n,i){var r=2*t,o=4*t;return this.uint32[0+r]=e,this.uint16[2+o]=n,this.uint16[3+o]=i,t},Zi);function Zi(){Ui.apply(this,arguments)}Vi.prototype.bytesPerElement=8,xn("StructArrayLayout1ul2ui8",Vi);var qi,Gi=((qi=Qn)&&(Wi.__proto__=qi),((Wi.prototype=Object.create(qi&&qi.prototype)).constructor=Wi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Wi.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.uint16[0+r]=t,this.uint16[1+r]=e,this.uint16[2+r]=n,i},Wi.prototype.emplace=function(t,e,n,i){var r=3*t;return this.uint16[0+r]=e,this.uint16[1+r]=n,this.uint16[2+r]=i,t},Wi);function Wi(){qi.apply(this,arguments)}Gi.prototype.bytesPerElement=6,xn("StructArrayLayout3ui6",Gi);var $i,Hi=(($i=Qn)&&(Ki.__proto__=$i),((Ki.prototype=Object.create($i&&$i.prototype)).constructor=Ki).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Ki.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.uint16[0+i]=t,this.uint16[1+i]=e,n},Ki.prototype.emplace=function(t,e,n){var i=2*t;return this.uint16[0+i]=e,this.uint16[1+i]=n,t},Ki);function Ki(){$i.apply(this,arguments)}Hi.prototype.bytesPerElement=4,xn("StructArrayLayout2ui4",Hi);var Xi,Ji=((Xi=Qn)&&(Yi.__proto__=Xi),((Yi.prototype=Object.create(Xi&&Xi.prototype)).constructor=Yi).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Yi.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.float32[0+i]=t,this.float32[1+i]=e,n},Yi.prototype.emplace=function(t,e,n){var i=2*t;return this.float32[0+i]=e,this.float32[1+i]=n,t},Yi);function Yi(){Xi.apply(this,arguments)}Ji.prototype.bytesPerElement=8,xn("StructArrayLayout2f8",Ji);var Qi,tr=((Qi=Qn)&&(er.__proto__=Qi),((er.prototype=Object.create(Qi&&Qi.prototype)).constructor=er).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},er.prototype.emplaceBack=function(t,e,n,i){var r=this.length;this.resize(r+1);var o=4*r;return this.float32[0+o]=t,this.float32[1+o]=e,this.float32[2+o]=n,this.float32[3+o]=i,r},er.prototype.emplace=function(t,e,n,i,r){var o=4*t;return this.float32[0+o]=e,this.float32[1+o]=n,this.float32[2+o]=i,this.float32[3+o]=r,t},er);function er(){Qi.apply(this,arguments)}tr.prototype.bytesPerElement=16,xn("StructArrayLayout4f16",tr);var nr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new p(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(Yn);nr.prototype.size=24;var ir,rr=((ir=ki)&&(or.__proto__=ir),((or.prototype=Object.create(ir&&ir.prototype)).constructor=or).prototype.get=function(t){return new nr(this,t)},or);function or(){ir.apply(this,arguments)}xn("CollisionBoxArray",rr);var ar=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(Yn);ar.prototype.size=40;var sr,lr=((sr=Oi)&&(ur.__proto__=sr),((ur.prototype=Object.create(sr&&sr.prototype)).constructor=ur).prototype.get=function(t){return new ar(this,t)},ur);function ur(){sr.apply(this,arguments)}xn("PlacedSymbolArray",lr);var cr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(Yn);cr.prototype.size=4;var hr,pr=((hr=Ni)&&(dr.__proto__=hr),((dr.prototype=Object.create(hr&&hr.prototype)).constructor=dr).prototype.getoffsetX=function(t){return this.float32[+t+0]},dr.prototype.get=function(t){return new cr(this,t)},dr);function dr(){hr.apply(this,arguments)}xn("GlyphOffsetArray",pr);var fr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(Yn);fr.prototype.size=6;var mr,yr=((mr=i)&&(gr.__proto__=mr),((gr.prototype=Object.create(mr&&mr.prototype)).constructor=gr).prototype.getx=function(t){return this.int16[3*t+0]},gr.prototype.gety=function(t){return this.int16[3*t+1]},gr.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},gr.prototype.get=function(t){return new fr(this,t)},gr);function gr(){mr.apply(this,arguments)}xn("SymbolLineVertexArray",yr);var vr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(Yn);vr.prototype.size=8;var _r,br=((_r=Vi)&&(xr.__proto__=_r),((xr.prototype=Object.create(_r&&_r.prototype)).constructor=xr).prototype.get=function(t){return new vr(this,t)},xr);function xr(){_r.apply(this,arguments)}xn("FeatureIndexArray",br);function wr(t){void 0===t&&(t=[]),this.segments=t}var Tr=ei([{name:"a_pos",components:2,type:"Int16"}],4).members;wr.prototype.prepareSegment=function(t,e,n){var i=this.segments[this.segments.length-1];return wr.MAX_VERTEX_ARRAY_LENGTH<t&&k("Max vertices per segment is "+wr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>wr.MAX_VERTEX_ARRAY_LENGTH)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(i)),i},wr.prototype.get=function(){return this.segments},wr.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n,i=e[t];for(n in i.vaos)i.vaos[n].destroy()}},wr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xn("SegmentVector",wr);function Er(t,e){return 256*(t=y(Math.floor(t),0,255))+y(Math.floor(e),0,255)}function kr(t){return[Er(255*t.r,255*t.g),Er(255*t.b,255*t.a)]}function Sr(t,e,n){this.value=t,this.name=e,this.type=n,this.statistics={max:-1/0}}Sr.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},Sr.prototype.populatePaintArray=function(){},Sr.prototype.updatePaintArray=function(){},Sr.prototype.upload=function(){},Sr.prototype.destroy=function(){},Sr.prototype.setUniforms=function(t,e,n,i){i=i.constantOr(this.value),t=t.gl;"color"===this.type?t.uniform4f(e.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):t.uniform1f(e.uniforms["u_"+this.name],i)};function Pr(t,e,n){this.expression=t,this.name=e,this.type=n,this.statistics={max:-1/0},t="color"===n?Ji:Ni,this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new t}Pr.prototype.defines=function(){return[]},Pr.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,i=n.length;n.reserve(t);var r=this.expression.evaluate(new Mn(0),e,{});if("color"===this.type)for(var o=kr(r),a=i;a<t;a++)n.emplaceBack(o[0],o[1]);else{for(var s=i;s<t;s++)n.emplaceBack(r);this.statistics.max=Math.max(this.statistics.max,r)}},Pr.prototype.updatePaintArray=function(t,e,n,i){var r=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,i);if("color"===this.type)for(var a=kr(o),s=t;s<e;s++)r.emplace(s,a[0],a[1]);else{for(var l=t;l<e;l++)r.emplace(l,o);this.statistics.max=Math.max(this.statistics.max,o)}},Pr.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Pr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Pr.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0)};function Cr(t,e,n,i,r){this.expression=t,this.name=e,this.type=n,this.useIntegerZoom=i,this.zoom=r,this.statistics={max:-1/0},r="color"===n?tr:Ji,this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new r}Cr.prototype.defines=function(){return[]},Cr.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,i=n.length;n.reserve(t);var r=this.expression.evaluate(new Mn(this.zoom),e,{}),o=this.expression.evaluate(new Mn(this.zoom+1),e,{});if("color"===this.type)for(var a=kr(r),s=kr(o),l=i;l<t;l++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var u=i;u<t;u++)n.emplaceBack(r,o);this.statistics.max=Math.max(this.statistics.max,r,o)}},Cr.prototype.updatePaintArray=function(t,e,n,i){var r=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,i),a=this.expression.evaluate({zoom:this.zoom+1},n,i);if("color"===this.type)for(var s=kr(o),l=kr(a),u=t;u<e;u++)r.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=t;c<e;c++)r.emplace(c,o,a);this.statistics.max=Math.max(this.statistics.max,o,a)}},Cr.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Cr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Cr.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},Cr.prototype.setUniforms=function(t,e,n){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};function Mr(){this.binders={},this.cacheKey="",this._buffers=[],this._idMap={},this._bufferOffset=0}Mr.createDynamic=function(t,e,n){var i,r,o,a,s,l=new Mr,u=[];for(i in t.paint._values)!n(i)||(r=t.paint.get(i))instanceof Vn&&ne(r.property.specification)&&(a=i,s=t.type,o={"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[a]||a.replace(s+"-","").replace(/-/g,"_"),a=r.property.specification.type,s=r.property.useIntegerZoom,"constant"===r.value.kind?(l.binders[i]=new Sr(r.value,o,a),u.push("/u_"+o)):"source"===r.value.kind?(l.binders[i]=new Pr(r.value,o,a),u.push("/a_"+o)):(l.binders[i]=new Cr(r.value,o,a,s,e),u.push("/z_"+o)));return l.cacheKey=u.sort().join(""),l},Mr.prototype.populatePaintArrays=function(t,e,n){for(var i in this.binders)this.binders[i].populatePaintArray(t,e);var r;e.id&&(r=String(e.id),this._idMap[r]=this._idMap[r]||[],this._idMap[r].push({index:n,start:this._bufferOffset,end:t})),this._bufferOffset=t},Mr.prototype.updatePaintArrays=function(t,e,n){var i,r=!1;for(i in t){var o=this._idMap[i];if(o)for(var a=t[i],s=0,l=o;s<l.length;s+=1){var u,c=l[s],h=e.feature(c.index);for(u in this.binders){var p,d=this.binders[u];d instanceof Sr||!0!==d.expression.isStateDependent||(p=n.paint.get(u),d.expression=p.value,d.updatePaintArray(c.start,c.end,h,a),r=!0)}}}return r},Mr.prototype.defines=function(){var t,e=[];for(t in this.binders)e.push.apply(e,this.binders[t].defines());return e},Mr.prototype.setUniforms=function(t,e,n,i){for(var r in this.binders)this.binders[r].setUniforms(t,e,i,n.get(r))},Mr.prototype.getPaintVertexBuffers=function(){return this._buffers},Mr.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n,i=[];for(n in this.binders){var r=this.binders[n];(r instanceof Pr||r instanceof Cr)&&r.paintVertexBuffer&&i.push(r.paintVertexBuffer)}this._buffers=i},Mr.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};function Lr(t,e,n,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,o=e;r<o.length;r+=1){var a=o[r];this.programConfigurations[a.id]=Mr.createDynamic(a,n,i),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1}Lr.prototype.populatePaintArrays=function(t,e,n){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,n);this.needsUpload=!0},Lr.prototype.updatePaintArrays=function(t,e,n){for(var i=0,r=n;i<r.length;i+=1){var o=r[i];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,e,o)||this.needsUpload}},Lr.prototype.get=function(t){return this.programConfigurations[t]},Lr.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Lr.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},xn("ConstantBinder",Sr),xn("SourceExpressionBinder",Pr),xn("CompositeExpressionBinder",Cr),xn("ProgramConfiguration",Mr,{omit:["_buffers"]}),xn("ProgramConfigurationSet",Lr);var Ir=8192,Ar={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function zr(t){for(var e=Ir/t.extent,n=t.loadGeometry(),i=0;i<n.length;i++)for(var r=n[i],o=0;o<r.length;o++){var a=r[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<Ar.min||a.x>Ar.max||a.y<Ar.min||a.y>Ar.max)&&k("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Or(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}function Rr(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new ri,this.indexArray=new Gi,this.segments=new wr,this.programConfigurations=new Lr(Tr,t.layers,t.zoom)}function Dr(t,e,n){for(var i=0;i<t.length;i++){var r=t[i];if(Zr(r,e))return!0;if(jr(e,r,n))return!0}return!1}function Nr(t,e){if(1===t.length&&1===t[0].length)return Vr(e,t[0][0]);for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)if(Vr(t,i[r]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(Vr(e,a[s]))return!0;for(var l=0;l<e.length;l++)if(Fr(a,e[l]))return!0}return!1}function Br(t,e,n){for(var i=0;i<e.length;i++)for(var r=e[i],o=0;o<t.length;o++){var a=t[o];if(3<=a.length)for(var s=0;s<r.length;s++)if(Zr(a,r[s]))return!0;if(function(t,e,n){if(1<t.length){if(Fr(t,e))return!0;for(var i=0;i<e.length;i++)if(jr(e[i],t,n))return!0}for(var r=0;r<t.length;r++)if(jr(t[r],e,n))return!0;return!1}(a,r,n))return!0}return!1}function Fr(t,e){if(0!==t.length&&0!==e.length)for(var n,i,r,o,a=0;a<t.length-1;a++)for(var s=t[a],l=t[a+1],u=0;u<e.length-1;u++)if(n=s,i=l,r=e[u],o=e[u+1],S(n,r,o)!==S(i,r,o)&&S(n,i,r)!==S(n,i,o))return 1}function jr(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var r=1;r<e.length;r++)if(Ur(t,e[r-1],e[r])<i)return 1}function Ur(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return i<0?t.distSqr(e):1<i?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function Vr(t,e){for(var n,i,r,o=!1,a=0;a<t.length;a++)for(var s=0,l=(n=t[a]).length-1;s<n.length;l=s++)i=n[s],r=n[l],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o);return o}function Zr(t,e){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var o=t[i],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function qr(t,e,n){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).binders[t].statistics.max}function Gr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Wr(t,e,n,i,r){if(!e[0]&&!e[1])return t;var o=p.convert(e);"viewport"===n&&o._rotate(-i);for(var a=[],s=0;s<t.length;s++){for(var l=t[s],u=[],c=0;c<l.length;c++)u.push(l[c].sub(o._mult(r)));a.push(u)}return a}Rr.prototype.populate=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var r=i[n],o=r.feature,a=r.index,s=r.sourceLayerIndex;this.layers[0]._featureFilter(new Mn(this.zoom),o)&&(r=zr(o),this.addFeature(o,r,a),e.featureIndex.insert(o,r,a,s,this.index))}},Rr.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},Rr.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Rr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Rr.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Tr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Rr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Rr.prototype.addFeature=function(t,e,n){for(var i=0,r=e;i<r.length;i+=1)for(var o=0,a=r[i];o<a.length;o+=1){var s,l=a[o],u=l.x,c=l.y;u<0||Ir<=u||c<0||Ir<=c||(l=(s=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)).vertexLength,Or(this.layoutVertexArray,u,c,-1,-1),Or(this.layoutVertexArray,u,c,1,-1),Or(this.layoutVertexArray,u,c,1,1),Or(this.layoutVertexArray,u,c,-1,1),this.indexArray.emplaceBack(l,l+1,l+2),this.indexArray.emplaceBack(l,l+3,l+2),s.vertexLength+=4,s.primitiveLength+=2)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},xn("CircleBucket",Rr,{omit:["layers"]});var $r={paint:new Hn({"circle-radius":new Gn(j.paint_circle["circle-radius"]),"circle-color":new Gn(j.paint_circle["circle-color"]),"circle-blur":new Gn(j.paint_circle["circle-blur"]),"circle-opacity":new Gn(j.paint_circle["circle-opacity"]),"circle-translate":new qn(j.paint_circle["circle-translate"]),"circle-translate-anchor":new qn(j.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qn(j.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qn(j.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gn(j.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gn(j.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gn(j.paint_circle["circle-stroke-opacity"])})},Hr="undefined"!=typeof Float32Array?Float32Array:Array;function Kr(){var t=new Hr(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Xr(){var t=new Hr(3);return t[0]=0,t[1]=0,t[2]=0,t}function Jr(t){var e=t[0],n=t[1],t=t[2];return Math.sqrt(e*e+n*n+t*t)}function Yr(t,e,n){var i=new Hr(3);return i[0]=t,i[1]=e,i[2]=n,i}Math.PI;var Qr,qt=Jr,Gt=(Qr=Xr(),function(t,e,n,i,r,o){var a,s;for(e=e||3,n=n||0,s=i?Math.min(i*e+n,t.length):t.length,a=n;a<s;a+=e)Qr[0]=t[a],Qr[1]=t[a+1],Qr[2]=t[a+2],r(Qr,Qr,o),t[a]=Qr[0],t[a+1]=Qr[1],t[a+2]=Qr[2];return t});function to(){var t=new Hr(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function eo(t,e,n){var i=e[0],r=e[1],o=e[2],e=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*e,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*e,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*e,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*e,t}var no,me=(no=to(),function(t,e,n,i,r,o){var a,s;for(e=e||4,n=n||0,s=i?Math.min(i*e+n,t.length):t.length,a=n;a<s;a+=e)no[0]=t[a],no[1]=t[a+1],no[2]=t[a+2],no[3]=t[a+3],r(no,no,o),t[a]=no[0],t[a+1]=no[1],t[a+2]=no[2],t[a+3]=no[3];return t});function io(){var t=new Hr(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}Xr(),Yr(1,0,0),Yr(0,1,0),io(),io(),Kr(),(ye=new Hr(2))[0]=0,ye[1]=0;var ro,Qn=((ro=Xn)&&(oo.__proto__=ro),((oo.prototype=Object.create(ro&&ro.prototype)).constructor=oo).prototype.createBucket=function(t){return new Rr(t)},oo.prototype.queryRadius=function(t){return qr("circle-radius",this,t)+qr("circle-stroke-width",this,t)+Gr(this.paint.get("circle-translate"))},oo.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a,s){for(var l,u,t=Wr(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),n=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?t:(l=s,u=o,t.map(function(t){return t.map(function(t){return ao(t,l,u)})})),p=c?n*a:n,d=0,f=i;d<f.length;d+=1)for(var m=0,y=f[d];m<y.length;m+=1){var g=y[m],v=c?g:ao(g,s,o),_=p,g=eo([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=g[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/g[3]),Dr(h,v,_))return!0}return!1},oo);function oo(t){ro.call(this,t,$r)}function ao(t,e,n){e=eo([],[t.x,t.y,0,1],e);return new p((e[0]/e[3]+1)*n.width*.5,(e[1]/e[3]+1)*n.height*.5)}var so,lo=((so=Rr)&&(uo.__proto__=so),(uo.prototype=Object.create(so&&so.prototype)).constructor=uo);function uo(){so.apply(this,arguments)}function co(t,e,n,i){var r=e.width,e=e.height;if(i){if(i.length!==r*e*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*e*n);return t.width=r,t.height=e,t.data=i,t}function ho(t,e,n){var i=e.width,r=e.height;i===t.width&&r===t.height||(po(t,e=co({},{width:i,height:r},n),{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,r)},n),t.width=i,t.height=r,t.data=e.data)}function po(t,e,n,i,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<r.height;l++)for(var u=((n.y+l)*t.width+n.x)*o,c=((i.y+l)*e.width+i.x)*o,h=0;h<r.width*o;h++)s[c+h]=a[u+h];return e}xn("HeatmapBucket",lo,{omit:["layers"]});var fo=function(t,e){co(this,t,1,e)};fo.prototype.resize=function(t){ho(this,t,1)},fo.prototype.clone=function(){return new fo({width:this.width,height:this.height},new Uint8Array(this.data))},fo.copy=function(t,e,n,i,r){po(t,e,n,i,r,1)};function mo(t,e){co(this,t,4,e)}mo.prototype.resize=function(t){ho(this,t,4)},mo.prototype.clone=function(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))},mo.copy=function(t,e,n,i,r){po(t,e,n,i,r,4)},xn("AlphaImage",fo),xn("RGBAImage",mo);var yo={paint:new Hn({"heatmap-radius":new Gn(j.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gn(j.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qn(j.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $n(j.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qn(j.paint_heatmap["heatmap-opacity"])})};function go(t,e){for(var n=new Uint8Array(1024),i={},r=0,o=0;r<256;r++,o+=4){i[e]=r/255;var a=t.evaluate(i);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new mo({width:256,height:1},n)}var vo,_o,ki=((_o=Xn)&&(Eo.__proto__=_o),((Eo.prototype=Object.create(_o&&_o.prototype)).constructor=Eo).prototype.createBucket=function(t){return new lo(t)},Eo.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},Eo.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=go(t,"heatmapDensity"),this.colorRampTexture=null},Eo.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},Eo.prototype.queryRadius=function(){return 0},Eo.prototype.queryIntersectsFeature=function(){return!1},Eo.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},Eo),bo={paint:new Hn({"hillshade-illumination-direction":new qn(j.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qn(j.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qn(j.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qn(j.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qn(j.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qn(j.paint_hillshade["hillshade-accent-color"])})},Oi=((vo=Xn)&&(To.__proto__=vo),((To.prototype=Object.create(vo&&vo.prototype)).constructor=To).prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},To),xo=ei([{name:"a_pos",components:2,type:"Int16"}],4).members,wo=ko,i=ko;function To(t){vo.call(this,t,bo)}function Eo(t){_o.call(this,t,yo),this._updateColorRamp()}function ko(t,e,n){n=n||2;var i,r,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,p=So(t,0,h,n,!0),d=[];if(!p)return d;if(c&&(p=function(t,e,n,i){for(var r,o,a,s=[],l=0,u=e.length;l<u;l++)(r=So(t,e[l]*i,l<u-1?e[l+1]*i:t.length,i,!1))===r.next&&(r.steiner=!0),s.push(function(t){var e=t,n=t;for(;e.x<n.x&&(n=e),e=e.next,e!==t;);return n}(r));for(s.sort(Mo),l=0;l<s.length;l++)o=s[l],(a=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&a<s){if((a=s)===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}}while((i=i.next)!==e);if(!n)return null;if(r===a)return n.prev;for(var l,u=n,c=n.x,h=n.y,p=1/0,i=n.next;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&Io(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<p||l===p&&i.x>n.x)&&Ro(i,t)&&(n=i,p=l),i=i.next;return n}(o,a=n))&&Po(o=Do(a,o),o.next),n=Po(n,n.next);return n}(t,e,p,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var f=n;f<h;f+=n)(s=t[f])<i&&(i=s),(l=t[f+1])<r&&(r=l),o<s&&(o=s),a<l&&(a=l);u=0!==(u=Math.max(o-i,a-r))?1/u:0}return Co(p,d,n,i,r,u),d}function So(t,e,n,i,r){var o,a;if(r===0<jo(t,e,n,i))for(o=e;o<n;o+=i)a=No(o,t[o],t[o+1],a);else for(o=n-i;e<=o;o-=i)a=No(o,t[o],t[o+1],a);return a&&zo(a,a.next)&&(Bo(a),a=a.next),a}function Po(t,e){if(!t)return t;e=e||t;var n,i=t;do{if(n=!1,i.steiner||!zo(i,i.next)&&0!==Ao(i.prev,i,i.next))i=i.next;else{if(Bo(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Co(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){for(var r=t;null===r.z&&(r.z=Lo(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next,r!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,u=1;do{for(n=t,o=t=null,a=0;n;){for(a++,i=n,e=s=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;0<s||0<l&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(n=(r=n).nextZ,s--):(i=(r=i).nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}}while(o.nextZ=null,u*=2,1<a)}(r)}(t,i,r,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?function(t,e,n,i){var r=t.prev,o=t,a=t.next;if(0<=Ao(r,o,a))return!1;for(var s=(r.x<o.x?r.x<a.x?r:a:o.x<a.x?o:a).x,l=(r.y<o.y?r.y<a.y?r:a:o.y<a.y?o:a).y,u=(r.x>o.x?r.x>a.x?r:a:o.x>a.x?o:a).x,c=(r.y>o.y?r.y>a.y?r:a:o.y>a.y?o:a).y,h=Lo(s,l,e,n,i),p=Lo(u,c,e,n,i),d=t.prevZ,f=t.nextZ;d&&d.z>=h&&f&&f.z<=p;){if(d!==t.prev&&d!==t.next&&Io(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Ao(d.prev,d,d.next))return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&Io(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=Ao(f.prev,f,f.next))return!1;f=f.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Io(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Ao(d.prev,d,d.next))return!1;d=d.prevZ}for(;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&Io(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=Ao(f.prev,f,f.next))return!1;f=f.nextZ}return!0}(t,i,r,o):function(t){var e=t.prev,n=t,i=t.next;if(0<=Ao(e,n,i))return!1;for(var r=t.next.next;r!==t.prev;){if(Io(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&0<=Ao(r.prev,r,r.next))return!1;r=r.next}return!0}(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Bo(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Co(t=function(t,e,n){var i=t;do{var r=i.prev,o=i.next.next}while(!zo(r,o)&&Oo(r,i,i.next,o)&&Ro(r,o)&&Ro(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Bo(i),Bo(i.next),i=t=o),i=i.next,i!==t);return i}(t,e,n),e,n,i,r,o,2):2===a&&function(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Oo(n,n.next,t,e))return 1}while((n=n.next)!==t)}(t,e)&&Ro(t,e)&&Ro(e,t)&&function(t,e){for(var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next,n!==t;);return i}(t,e)}(a,s)){var l=Do(a,s);return a=Po(a,a.next),l=Po(l,l.next),Co(a,e,n,i,r,o),Co(l,e,n,i,r,o)}s=s.next}}while((a=a.next)!==t)}(t,e,n,i,r,o):Co(Po(t),e,n,i,r,o,1);break}}}function Mo(t,e){return t.x-e.x}function Lo(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Io(t,e,n,i,r,o,a,s){return 0<=(r-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(i-s)-(n-a)*(e-s)&&0<=(n-a)*(o-s)-(r-a)*(i-s)}function Ao(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function zo(t,e){return t.x===e.x&&t.y===e.y}function Oo(t,e,n,i){return zo(t,e)&&zo(n,i)||zo(t,i)&&zo(n,e)||0<Ao(t,e,n)!=0<Ao(t,e,i)&&0<Ao(n,i,t)!=0<Ao(n,i,e)}function Ro(t,e){return Ao(t.prev,t,t.next)<0?0<=Ao(t,e,t.next)&&0<=Ao(t,t.prev,e):Ao(t,e,t.prev)<0||Ao(t,t.next,e)<0}function Do(t,e){var n=new Fo(t.i,t.x,t.y),i=new Fo(e.i,e.x,e.y),r=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=r).prev=n,(i.next=n).prev=i,(o.next=i).prev=o,i}function No(t,e,n,i){n=new Fo(t,e,n);return i?(n.next=i.next,(n.prev=i).next.prev=n,i.next=n):(n.prev=n).next=n,n}function Bo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Fo(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jo(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}ko.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(jo(t,0,o,n));if(r)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(jo(t,u,c,n))}for(var h=0,s=0;s<i.length;s+=3){var p=i[s]*n,d=i[s+1]*n,f=i[s+2]*n;h+=Math.abs((t[p]-t[f])*(t[1+d]-t[1+p])-(t[p]-t[d])*(t[1+f]-t[1+p]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},ko.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);0<r&&(i+=t[r-1].length,n.holes.push(i))}return n},wo.default=i;var Uo=Vo;function Vo(t,e,n,i,r){!function t(e,n,i,r,o){for(;i<r;){var a,s,l,u;600<r-i&&(a=r-i+1,s=n-i+1,u=Math.log(a),l=.5*Math.exp(2*u/3),u=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1),t(e,n,Math.max(i,Math.floor(n-s*l/a+u)),Math.min(r,Math.floor(n+(a-s)*l/a+u)),o));var c=e[n],h=i,p=r;for(Zo(e,i,n),0<o(e[r],c)&&Zo(e,i,r);h<p;){for(Zo(e,h,p),h++,p--;o(e[h],c)<0;)h++;for(;0<o(e[p],c);)p--}0===o(e[i],c)?Zo(e,i,p):Zo(e,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}}(t,e,n||0,i||t.length-1,r||qo)}function Zo(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function qo(t,e){return t<e?-1:e<t?1:0}function Go(t,e){var n=t.length;if(n<=1)return[t];for(var i,r,o=[],a=0;a<n;a++){var s=function(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],i+=((n=t[a]).x-e.x)*(e.y+n.y);return i}(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(i&&o.push(i),i=[t[a]]):i.push(t[a]))}if(i&&o.push(i),1<e)for(var l=0;l<o.length;l++)o[l].length<=e||(Uo(o[l],e,1,o[l].length-1,Wo),o[l]=o[l].slice(0,e));return o}function Wo(t,e){return e.area-t.area}Uo.default=Vo;function $o(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new ri,this.indexArray=new Gi,this.indexArray2=new Hi,this.programConfigurations=new Lr(xo,t.layers,t.zoom),this.segments=new wr,this.segments2=new wr}$o.prototype.populate=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var r=i[n],o=r.feature,a=r.index,s=r.sourceLayerIndex;this.layers[0]._featureFilter(new Mn(this.zoom),o)&&(r=zr(o),this.addFeature(o,r,a),e.featureIndex.insert(o,r,a,s,this.index))}},$o.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},$o.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},$o.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},$o.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xo),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},$o.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},$o.prototype.addFeature=function(t,e,n){for(var i=0,r=Go(e,500);i<r.length;i+=1){for(var o=r[i],a=0,s=0,l=o;s<l.length;s+=1)a+=l[s].length;for(var u=this.segments.prepareSegment(a,this.layoutVertexArray,this.indexArray),c=u.vertexLength,h=[],p=[],d=0,f=o;d<f.length;d+=1){var m=f[d];if(0!==m.length){m!==o[0]&&p.push(h.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),g=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(g+m.length-1,g),h.push(m[0].x),h.push(m[0].y);for(var v=1;v<m.length;v++)this.layoutVertexArray.emplaceBack(m[v].x,m[v].y),this.indexArray2.emplaceBack(g+v-1,g+v),h.push(m[v].x),h.push(m[v].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var _=wo(h,p),b=0;b<_.length;b+=3)this.indexArray.emplaceBack(c+_[b],c+_[b+1],c+_[b+2]);u.vertexLength+=a,u.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},xn("FillBucket",$o,{omit:["layers"]});var Ho,Ko={paint:new Hn({"fill-antialias":new qn(j.paint_fill["fill-antialias"]),"fill-opacity":new Gn(j.paint_fill["fill-opacity"]),"fill-color":new Gn(j.paint_fill["fill-color"]),"fill-outline-color":new Gn(j.paint_fill["fill-outline-color"]),"fill-translate":new qn(j.paint_fill["fill-translate"]),"fill-translate-anchor":new qn(j.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wn(j.paint_fill["fill-pattern"])})},Yn=((Ho=Xn)&&(Yo.__proto__=Ho),((Yo.prototype=Object.create(Ho&&Ho.prototype)).constructor=Yo).prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t);t=this.paint._values["fill-outline-color"];"constant"===t.value.kind&&void 0===t.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},Yo.prototype.createBucket=function(t){return new $o(t)},Yo.prototype.queryRadius=function(){return Gr(this.paint.get("fill-translate"))},Yo.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a){return Nr(Wr(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),i)},Yo),Xo=ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Jo=Math.pow(2,13);function Yo(t){Ho.call(this,t,Ko)}function Qo(t,e,n,i,r,o,a,s){t.emplaceBack(e,n,2*Math.floor(i*Jo)+a,r*Jo*2,o*Jo*2,Math.round(s))}function ta(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new ci,this.indexArray=new Gi,this.programConfigurations=new Lr(Xo,t.layers,t.zoom),this.segments=new wr}ta.prototype.populate=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var r=i[n],o=r.feature,a=r.index,s=r.sourceLayerIndex;this.layers[0]._featureFilter(new Mn(this.zoom),o)&&(r=zr(o),this.addFeature(o,r,a),e.featureIndex.insert(o,r,a,s,this.index))}},ta.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},ta.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ta.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ta.prototype.addFeature=function(t,e,n){for(var i,r=0,o=Go(e,500);r<o.length;r+=1){for(var a=o[r],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,p=a;h<p.length;h+=1){var d=p[h];if(0!==d.length&&!((i=d).every(function(t){return t.x<0})||i.every(function(t){return t.x>Ir})||i.every(function(t){return t.y<0})||i.every(function(t){return t.y>Ir})))for(var f=0,m=0;m<d.length;m++){var y,g,v,_=d[m];1<=m&&(y=d[m-1],v=y,(g=_).x===v.x&&(g.x<0||g.x>Ir)||g.y===v.y&&(g.y<0||g.y>Ir)||(c.vertexLength+4>wr.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)),v=_.sub(y)._perp()._unit(),32768<f+(g=y.dist(_))&&(f=0),Qo(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,0,f),Qo(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,1,f),f+=g,Qo(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,f),Qo(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,f),v=c.vertexLength,this.indexArray.emplaceBack(v,v+1,v+2),this.indexArray.emplaceBack(v+1,v+2,v+3),c.vertexLength+=4,c.primitiveLength+=2))}}c.vertexLength+s>wr.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var b=[],x=[],w=c.vertexLength,T=0,E=a;T<E.length;T+=1){var k=E[T];if(0!==k.length){k!==a[0]&&x.push(b.length/2);for(var S=0;S<k.length;S++){var P=k[S];Qo(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),b.push(P.x),b.push(P.y)}}}for(var C=wo(b,x),M=0;M<C.length;M+=3)this.indexArray.emplaceBack(w+C[M],w+C[M+1],w+C[M+2]);c.primitiveLength+=C.length/3,c.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},xn("FillExtrusionBucket",ta,{omit:["layers"]});var ea,na={paint:new Hn({"fill-extrusion-opacity":new qn(j["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gn(j["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qn(j["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qn(j["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wn(j["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gn(j["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gn(j["paint_fill-extrusion"]["fill-extrusion-base"])})},Vi=((ea=Xn)&&(oa.__proto__=ea),((oa.prototype=Object.create(ea&&ea.prototype)).constructor=oa).prototype.createBucket=function(t){return new ta(t)},oa.prototype.queryRadius=function(){return Gr(this.paint.get("fill-extrusion-translate"))},oa.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a){return Nr(Wr(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),i)},oa.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},oa.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},oa),ia=ei([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ra=aa;function oa(t){ea.call(this,t,na)}function aa(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(sa,this,e)}function sa(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}aa.types=["Unknown","Point","LineString","Polygon"],aa.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n,i=t.readVarint()+t.pos,r=1,o=0,a=0,s=0,l=[];t.pos<i;)if(o<=0&&(r=7&(n=t.readVarint()),o=n>>3),o--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&l.push(e),e=[]),e.push(new p(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}return e&&l.push(e),l},aa.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,o=0,a=0,s=1/0,l=-1/0,u=1/0,c=-1/0;t.pos<n;)if(r<=0&&(i=7&(e=t.readVarint()),r=e>>3),r--,1===i||2===i)(o+=t.readSVarint())<s&&(s=o),l<o&&(l=o),(a+=t.readSVarint())<u&&(u=a),c<a&&(c=a);else if(7!==i)throw new Error("unknown command "+i);return[s,u,l,c]},aa.prototype.toGeoJSON=function(t,e,n){var i,r=this.extent*Math.pow(2,n),o=this.extent*t,a=this.extent*e,s=this.loadGeometry(),e=aa.types[this.type];function l(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+a)/r;t[e]=[360*(n.x+o)/r-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}switch(this.type){case 1:for(var u=[],c=0;c<s.length;c++)u[c]=s[c][0];l(s=u);break;case 2:for(c=0;c<s.length;c++)l(s[c]);break;case 3:for(s=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var a=function(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],i+=((n=t[a]).x-e.x)*(e.y+n.y);return i}(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}(s),c=0;c<s.length;c++)for(i=0;i<s[c].length;i++)l(s[c][i])}1===s.length?s=s[0]:e="Multi"+e;e={type:"Feature",geometry:{type:e,coordinates:s},properties:this.properties};return"id"in this&&(e.id=this.id),e};var la=ua;function ua(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ca,this,e),this.length=this._features.length}function ca(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;)var i=t.readVarint()>>3,e=1==i?t.readString():2==i?t.readFloat():3==i?t.readDouble():4==i?t.readVarint64():5==i?t.readVarint():6==i?t.readSVarint():7==i?t.readBoolean():null;return e}(n))}function ha(t,e,n){3!==t||(n=new la(n,n.readVarint()+n.pos)).length&&(e[n.name]=n)}ua.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];t=this._pbf.readVarint()+this._pbf.pos;return new ra(this._pbf,t,this.extent,this._keys,this._values)};var pa={VectorTile:function(t,e){this.layers=t.readFields(ha,{},e)},VectorTileFeature:ra,VectorTileLayer:la},da=pa.VectorTileFeature.types,fa=Math.cos(Math.PI/180*37.5),ma=Math.pow(2,14)/.5;function ya(t,e,n,i,r,o,a){t.emplaceBack(e.x,e.y,i?1:0,r?1:-1,Math.round(63*n.x)+128,Math.round(63*n.y)+128,1+(0===o?0:o<0?-1:1)|(.5*a&63)<<2,.5*a>>6)}function ga(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new di,this.indexArray=new Gi,this.programConfigurations=new Lr(ia,t.layers,t.zoom),this.segments=new wr}function va(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(ma-1)}ga.prototype.populate=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var r=i[n],o=r.feature,a=r.index,s=r.sourceLayerIndex;this.layers[0]._featureFilter(new Mn(this.zoom),o)&&(r=zr(o),this.addFeature(o,r,a),e.featureIndex.insert(o,r,a,s,this.index))}},ga.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},ga.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ga.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ga.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ia),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ga.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ga.prototype.addFeature=function(t,e,n){for(var i=this.layers[0].layout,r=i.get("line-join").evaluate(t,{}),o=i.get("line-cap"),a=i.get("line-miter-limit"),s=i.get("line-round-limit"),l=0,u=e;l<u.length;l+=1){var c=u[l];this.addLine(c,t,r,o,a,s,n)}},ga.prototype.addLine=function(t,e,n,i,r,o,a){var s=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(s={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var l="Polygon"===da[e.type],u=t.length;2<=u&&t[u-1].equals(t[u-2]);)u--;for(var c=0;c<u-1&&t[c].equals(t[c+1]);)c++;if(!(u<(l?3:2))){s&&(s.tileTotal=function(t,e){for(var n,i,r=0,o=c;o<e-1;o++)n=t[o],i=t[o+1],r+=n.dist(i);return r}(t,u)),"bevel"===n&&(r=1.05);var h,p,d,f=Ir/(512*this.overscaling)*15,m=t[c],y=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),g=i,v=l?"butt":i,_=!(this.distance=0),b=void 0,x=void 0,w=void 0,T=void 0;this.e1=this.e2=this.e3=-1,l&&(h=t[u-2],T=m.sub(h)._unit()._perp());for(var E=c;E<u;E++)if(!(x=l&&E===u-1?t[c+1]:t[E+1])||!t[E].equals(x)){T&&(w=T),h&&(b=h),h=t[E],T=x?x.sub(h)._unit()._perp():w;var k=(w=w||T).add(T);0===k.x&&0===k.y||k._unit();var S=k.x*T.x+k.y*T.y,P=0!=S?1/S:1/0,C=S<fa&&b&&x;C&&c<E&&(2*f<(I=h.dist(b))&&(M=h.sub(h.sub(b)._mult(f/I)._round()),this.distance+=M.dist(b),this.addCurrentVertex(M,this.distance,w.mult(1),0,0,!1,y,s),b=M));var M,L=b&&x,I=L?n:x?g:v;if(L&&"round"===I&&(P<o?I="miter":P<=2&&(I="fakeround")),"miter"===I&&r<P&&(I="bevel"),"bevel"===I&&(2<P&&(I="flipbevel"),P<r&&(I="miter")),b&&(this.distance+=h.dist(b)),"miter"===I)k._mult(P),this.addCurrentVertex(h,this.distance,k,0,0,!1,y,s);else if("flipbevel"===I)100<P?k=T.clone().mult(-1):(M=0<w.x*T.y-w.y*T.x?-1:1,L=P*w.add(T).mag()/w.sub(T).mag(),k._perp()._mult(L*M)),this.addCurrentVertex(h,this.distance,k,0,0,!1,y,s),this.addCurrentVertex(h,this.distance,k.mult(-1),0,0,!1,y,s);else if("bevel"===I||"fakeround"===I){var A=0<w.x*T.y-w.y*T.x,P=-Math.sqrt(P*P-1);if(A?(d=0,p=P):(p=0,d=P),_||this.addCurrentVertex(h,this.distance,w,p,d,!1,y,s),"fakeround"===I){for(var z=Math.floor(8*(.5-(S-.5))),O=void 0,R=0;R<z;R++)O=T.mult((R+1)/(z+1))._add(w)._unit(),this.addPieSliceVertex(h,this.distance,O,A,y,s);this.addPieSliceVertex(h,this.distance,k,A,y,s);for(var D=z-1;0<=D;D--)O=w.mult((D+1)/(z+1))._add(T)._unit(),this.addPieSliceVertex(h,this.distance,O,A,y,s)}x&&this.addCurrentVertex(h,this.distance,T,-p,-d,!1,y,s)}else"butt"===I?(_||this.addCurrentVertex(h,this.distance,w,0,0,!1,y,s),x&&this.addCurrentVertex(h,this.distance,T,0,0,!1,y,s)):"square"===I?(_||(this.addCurrentVertex(h,this.distance,w,1,1,!1,y,s),this.e1=this.e2=-1),x&&this.addCurrentVertex(h,this.distance,T,-1,-1,!1,y,s)):"round"===I&&(_||(this.addCurrentVertex(h,this.distance,w,0,0,!1,y,s),this.addCurrentVertex(h,this.distance,w,1,1,!0,y,s),this.e1=this.e2=-1),x&&(this.addCurrentVertex(h,this.distance,T,-1,-1,!0,y,s),this.addCurrentVertex(h,this.distance,T,0,0,!1,y,s)));C&&E<u-1&&(2*f<(C=h.dist(x))&&(C=h.add(x.sub(h)._mult(f/C)._round()),this.distance+=C.dist(h),this.addCurrentVertex(C,this.distance,T.mult(1),0,0,!1,y,s),h=C)),_=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a)}},ga.prototype.addCurrentVertex=function(t,e,n,i,r,o,a,s){var l,u=this.layoutVertexArray,c=this.indexArray;s&&(e=va(e,s)),l=n.clone(),i&&l._sub(n.perp()._mult(i)),ya(u,t,l,o,!1,i,e),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=n.mult(-1),r&&l._sub(n.perp()._mult(r)),ya(u,t,l,o,!0,-r,e),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,ma/2<e&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,i,r,o,a))},ga.prototype.addPieSliceVertex=function(t,e,n,i,r,o){n=n.mult(i?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(e=va(e,o)),ya(a,t,n,!1,i,0,e),this.e3=r.vertexLength++,0<=this.e1&&0<=this.e2&&(s.emplaceBack(this.e1,this.e2,this.e3),r.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},xn("LineBucket",ga,{omit:["layers"]});var _a,ye=new Hn({"line-cap":new qn(j.layout_line["line-cap"]),"line-join":new Gn(j.layout_line["line-join"]),"line-miter-limit":new qn(j.layout_line["line-miter-limit"]),"line-round-limit":new qn(j.layout_line["line-round-limit"])}),ba={paint:new Hn({"line-opacity":new Gn(j.paint_line["line-opacity"]),"line-color":new Gn(j.paint_line["line-color"]),"line-translate":new qn(j.paint_line["line-translate"]),"line-translate-anchor":new qn(j.paint_line["line-translate-anchor"]),"line-width":new Gn(j.paint_line["line-width"]),"line-gap-width":new Gn(j.paint_line["line-gap-width"]),"line-offset":new Gn(j.paint_line["line-offset"]),"line-blur":new Gn(j.paint_line["line-blur"]),"line-dasharray":new Wn(j.paint_line["line-dasharray"]),"line-pattern":new Wn(j.paint_line["line-pattern"]),"line-gradient":new $n(j.paint_line["line-gradient"])}),layout:ye},xa=((_a=Gn)&&(wa.__proto__=_a),((wa.prototype=Object.create(_a&&_a.prototype)).constructor=wa).prototype.possiblyEvaluate=function(t,e){return e=new Mn(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),_a.prototype.possiblyEvaluate.call(this,t,e)},wa.prototype.evaluate=function(t,e,n,i){return e=m({},e,{zoom:Math.floor(e.zoom)}),_a.prototype.evaluate.call(this,t,e,n,i)},new wa(ba.paint.properties["line-width"].specification));function wa(){_a.apply(this,arguments)}xa.useIntegerZoom=!0;var Ta,i=((Ta=Xn)&&(Ea.__proto__=Ta),((Ea.prototype=Object.create(Ta&&Ta.prototype)).constructor=Ea).prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},Ea.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=go(t,"lineProgress"),this.gradientTexture=null},Ea.prototype.recalculate=function(t){Ta.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=xa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},Ea.prototype.createBucket=function(t){return new ga(t)},Ea.prototype.queryRadius=function(t){var e=t,t=ka(qr("line-width",this,e),qr("line-gap-width",this,e)),e=qr("line-offset",this,e);return t/2+Math.abs(e)+Gr(this.paint.get("line-translate"))},Ea.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a){t=Wr(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),o=a/2*ka(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),n=this.paint.get("line-offset").evaluate(e,n);return n&&(i=function(t,e){for(var n=[],i=new p(0,0),r=0;r<t.length;r++){for(var o=t[r],a=[],s=0;s<o.length;s++){var l=o[s-1],u=o[s],c=o[s+1],l=0===s?i:u.sub(l)._unit()._perp(),c=s===o.length-1?i:c.sub(u)._unit()._perp(),l=l._add(c)._unit(),c=l.x*c.x+l.y*c.y;l._mult(1/c),a.push(l._mult(e)._add(u))}n.push(a)}return n}(i,n*a)),Br(t,i,o)},Ea);function Ea(t){Ta.call(this,t,ba)}function ka(t,e){return 0<e?e+2*t:t}var Sa=ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Pa=ei([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ca=(ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ei([{name:"a_placed",components:2,type:"Uint8"}],4)),Ma=(ei([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),La=ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),ei([{type:"Float32",name:"offsetX"}]),ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ia,Aa={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},$n=((Ia=p)&&(za.__proto__=Ia),((za.prototype=Object.create(Ia&&Ia.prototype)).constructor=za).prototype.clone=function(){return new za(this.x,this.y,this.angle,this.segment)},za);function za(t,e,n,i){Ia.call(this,t,e),this.angle=n,void 0!==i&&(this.segment=i)}function Oa(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new Mn(t+1))};if("source"===n.kind)return{functionType:"source"};for(var i=n.zoomStops,r=0;r<i.length&&i[r]<=t;)r++;for(var o=r=Math.max(0,r-1);o<i.length&&i[o]<t+1;)o++;o=Math.min(i.length-1,o);var a={min:i[r],max:i[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new Mn(t+1)),zoomRange:a,sizeRange:{min:n.evaluate(new Mn(a.min)),max:n.evaluate(new Mn(a.max))},propertyValue:e.value}}xn("Anchor",$n);var Ra=pa.VectorTileFeature.types,Da=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Na(t,e,n,i,r,o,a,s){t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),o,a,s?s[0]:0,s?s[1]:0)}function Ba(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Fa(t){this.layoutVertexArray=new yi,this.indexArray=new Gi,this.programConfigurations=t,this.segments=new wr,this.dynamicLayoutVertexArray=new _i,this.opacityVertexArray=new wi,this.placedSymbolArray=new lr}Fa.prototype.upload=function(t,e,n,i){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Sa.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Pa.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Da,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t)},Fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},xn("SymbolBuffers",Fa);function ja(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new wr,this.collisionVertexArray=new Ii}ja.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ca.members,!0)},ja.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},xn("CollisionBuffers",ja);function Ua(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Oa(this.zoom,e["text-size"]),this.iconSizeData=Oa(this.zoom,e["icon-size"]),e=this.layers[0].layout,this.sortFeaturesByY=e.get("text-allow-overlap")||e.get("icon-allow-overlap")||e.get("text-ignore-placement")||e.get("icon-ignore-placement"),this.sourceID=t.sourceID}Ua.prototype.createArrays=function(){this.text=new Fa(new Lr(Sa.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new Fa(new Lr(Sa.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new ja(Ci,Ma.members,Hi),this.collisionCircle=new ja(Ci,La.members,Gi),this.glyphOffsetArray=new pr,this.lineVertexArray=new yr},Ua.prototype.populate=function(t,e){var n=this.layers[0],i=n.layout,r=i.get("text-font"),o=i.get("text-field"),a=i.get("icon-image"),s=("constant"!==o.value.kind||0<o.value.value.length)&&("constant"!==r.value.kind||0<r.value.value.length),l="constant"!==a.value.kind||a.value.value&&0<a.value.value.length;if(this.features=[],s||l){for(var u=e.iconDependencies,c=e.glyphDependencies,h=new Mn(this.zoom),p=0,d=t;p<d.length;p+=1){var f=d[p],m=f.feature,y=f.index,g=f.sourceLayerIndex;if(n._featureFilter(h,m)){var v=void 0;s&&(_=v=n.getValueAndResolveTokens("text-field",m),f=m,"uppercase"===(f=n.layout.get("text-transform").evaluate(f,{}))?_=_.toLocaleUpperCase():"lowercase"===f&&(_=_.toLocaleLowerCase()),Rn.applyArabicShaping&&(_=Rn.applyArabicShaping(_)),v=_);var _=void 0;if(l&&(_=n.getValueAndResolveTokens("icon-image",m)),v||_){var b,g={text:v,icon:_,index:y,sourceLayerIndex:g,geometry:zr(m),properties:m.properties,type:Ra[m.type]};if(void 0!==m.id&&(g.id=m.id),this.features.push(g),_&&(u[_]=!0),v)for(var m=r.evaluate(m,{}).join(","),x=c[m]=c[m]||{},w="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),T=Sn(v),E=0;E<v.length;E++)x[v.charCodeAt(E)]=!0,w&&T&&(b=Aa[v.charAt(E)])&&(x[b.charCodeAt(0)]=!0)}}}"line"===i.get("symbol-placement")&&(this.features=function(e){var r={},o={},a=[],n=0;function t(t){a.push(e[t]),n++}function i(t,e,n){var i=o[t];return delete o[t],o[e]=i,a[i].geometry[0].pop(),a[i].geometry[0]=a[i].geometry[0].concat(n[0]),i}function s(t,e,n){var i=r[e];return delete r[e],r[t]=i,a[i].geometry[0].shift(),a[i].geometry[0]=n[0].concat(a[i].geometry[0]),i}function l(t,e,n){e=n?e[0][e[0].length-1]:e[0][0];return t+":"+e.x+":"+e.y}for(var u=0;u<e.length;u++){var c,h,p,d=e[u],f=d.geometry,m=d.text;m?(c=l(m,f),h=l(m,f,!0),c in o&&h in r&&o[c]!==r[h]?(p=s(c,h,f),d=i(c,h,a[p].geometry),delete r[c],delete o[h],o[l(m,a[d].geometry,!0)]=d,a[p].geometry=null):c in o?i(c,h,f):h in r?s(c,h,f):(t(u),r[c]=n-1,o[h]=n-1)):t(u)}return a.filter(function(t){return t.geometry})}(this.features))}},Ua.prototype.update=function(t,e){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers))},Ua.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Ua.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ua.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ua.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Ua.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a<e.length-1&&(i+=e[a+1].dist(e[a]));for(var s=t.segment||0;0<=s;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},0<s&&(r+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Ua.prototype.addSymbols=function(t,e,n,i,r,o,a,s,l,u){for(var c=t.indexArray,h=t.layoutVertexArray,p=t.dynamicLayoutVertexArray,d=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),f=this.glyphOffsetArray.length,m=d.vertexLength,y=0,g=e;y<g.length;y+=1){var v=g[y],_=v.tl,b=v.tr,x=v.bl,w=v.br,T=v.tex,E=d.vertexLength,k=v.glyphOffset[1];Na(h,s.x,s.y,_.x,k+_.y,T.x,T.y,n),Na(h,s.x,s.y,b.x,k+b.y,T.x+T.w,T.y,n),Na(h,s.x,s.y,x.x,k+x.y,T.x,T.y+T.h,n),Na(h,s.x,s.y,w.x,k+w.y,T.x+T.w,T.y+T.h,n),Ba(p,s,0),c.emplaceBack(E,E+1,E+2),c.emplaceBack(E+1,E+2,E+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,f,this.glyphOffsetArray.length-f,m,l,u,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index)},Ua.prototype._addCollisionDebugVertex=function(t,e,n,i,r){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i.x,i.y,Math.round(r.x),Math.round(r.y))},Ua.prototype.addCollisionDebugVertices=function(t,e,n,i,r,o,a,s){var l=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),u=l.vertexLength,c=r.layoutVertexArray,h=r.collisionVertexArray;this._addCollisionDebugVertex(c,h,o,a.anchor,new p(t,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new p(n,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new p(n,i)),this._addCollisionDebugVertex(c,h,o,a.anchor,new p(t,i)),l.vertexLength+=4,s?((s=r.indexArray).emplaceBack(u,u+1,u+2),s.emplaceBack(u,u+2,u+3),l.primitiveLength+=2):((r=r.indexArray).emplaceBack(u,u+1),r.emplaceBack(u+1,u+2),r.emplaceBack(u+2,u+3),r.emplaceBack(u+3,u),l.primitiveLength+=4)},Ua.prototype.generateCollisionDebugBuffers=function(){for(var t=0,e=this.symbolInstances;t<e.length;t+=1){var n=e[t];n.textCollisionFeature={boxStartIndex:n.textBoxStartIndex,boxEndIndex:n.textBoxEndIndex},n.iconCollisionFeature={boxStartIndex:n.iconBoxStartIndex,boxEndIndex:n.iconBoxEndIndex};for(var i=0;i<2;i++){var r=n[0===i?"textCollisionFeature":"iconCollisionFeature"];if(r)for(var o=r.boxStartIndex;o<r.boxEndIndex;o++){var a=this.collisionBoxArray.get(o),s=a.x1,l=a.y1,u=a.x2,c=a.y2,h=0<a.radius;this.addCollisionDebugVertices(s,l,u,c,h?this.collisionCircle:this.collisionBox,a.anchorPoint,n,h)}}}},Ua.prototype.deserializeCollisionBoxes=function(t,e,n,i,r){for(var o={},a=e;a<n;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=i;l<r;l++){var u=t.get(l);if(0===u.radius){o.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},o.iconFeatureIndex=u.featureIndex;break}}return o},Ua.prototype.hasTextData=function(){return 0<this.text.segments.get().length},Ua.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},Ua.prototype.hasCollisionBoxData=function(){return 0<this.collisionBox.segments.get().length},Ua.prototype.hasCollisionCircleData=function(){return 0<this.collisionCircle.segments.get().length},Ua.prototype.sortFeatures=function(t){var n=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(1<this.text.segments.get().length||1<this.icon.segments.get().length))){for(var e=[],i=0;i<this.symbolInstances.length;i++)e.push(i);var r=Math.sin(t),o=Math.cos(t);e.sort(function(t,e){t=n.symbolInstances[t],e=n.symbolInstances[e];return(0|Math.round(r*t.anchor.x+o*t.anchor.y))-(0|Math.round(r*e.anchor.x+o*e.anchor.y))||e.featureIndex-t.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var a=0,s=e;a<s.length;a+=1){var l=s[a],u=n.symbolInstances[l];n.featureSortOrder.push(u.featureIndex);for(var c=0,h=u.placedTextSymbolIndices;c<h.length;c+=1)for(var p=h[c],p=n.text.placedSymbolArray.get(p),d=p.vertexStartIndex+4*p.numGlyphs,f=p.vertexStartIndex;f<d;f+=4)n.text.indexArray.emplaceBack(f,f+1,f+2),n.text.indexArray.emplaceBack(f+1,f+2,f+3);l=n.icon.placedSymbolArray.get(l);l.numGlyphs&&(l=l.vertexStartIndex,n.icon.indexArray.emplaceBack(l,l+1,l+2),n.icon.indexArray.emplaceBack(l+1,l+2,l+3))}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},xn("SymbolBucket",Ua,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),Ua.MAX_GLYPHS=65535,Ua.addDynamicAttributes=Ba;function Va(t,e){e=e.pixelRatio,this.paddedRect=t,this.pixelRatio=e}var Za,qa,Ga,ye=new Hn({"symbol-placement":new qn(j.layout_symbol["symbol-placement"]),"symbol-spacing":new qn(j.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qn(j.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new qn(j.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new qn(j.layout_symbol["icon-ignore-placement"]),"icon-optional":new qn(j.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qn(j.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gn(j.layout_symbol["icon-size"]),"icon-text-fit":new qn(j.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qn(j.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gn(j.layout_symbol["icon-image"]),"icon-rotate":new Gn(j.layout_symbol["icon-rotate"]),"icon-padding":new qn(j.layout_symbol["icon-padding"]),"icon-keep-upright":new qn(j.layout_symbol["icon-keep-upright"]),"icon-offset":new Gn(j.layout_symbol["icon-offset"]),"icon-anchor":new Gn(j.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qn(j.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qn(j.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qn(j.layout_symbol["text-rotation-alignment"]),"text-field":new Gn(j.layout_symbol["text-field"]),"text-font":new Gn(j.layout_symbol["text-font"]),"text-size":new Gn(j.layout_symbol["text-size"]),"text-max-width":new Gn(j.layout_symbol["text-max-width"]),"text-line-height":new qn(j.layout_symbol["text-line-height"]),"text-letter-spacing":new Gn(j.layout_symbol["text-letter-spacing"]),"text-justify":new Gn(j.layout_symbol["text-justify"]),"text-anchor":new Gn(j.layout_symbol["text-anchor"]),"text-max-angle":new qn(j.layout_symbol["text-max-angle"]),"text-rotate":new Gn(j.layout_symbol["text-rotate"]),"text-padding":new qn(j.layout_symbol["text-padding"]),"text-keep-upright":new qn(j.layout_symbol["text-keep-upright"]),"text-transform":new Gn(j.layout_symbol["text-transform"]),"text-offset":new Gn(j.layout_symbol["text-offset"]),"text-allow-overlap":new qn(j.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new qn(j.layout_symbol["text-ignore-placement"]),"text-optional":new qn(j.layout_symbol["text-optional"])}),Wa={paint:new Hn({"icon-opacity":new Gn(j.paint_symbol["icon-opacity"]),"icon-color":new Gn(j.paint_symbol["icon-color"]),"icon-halo-color":new Gn(j.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gn(j.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gn(j.paint_symbol["icon-halo-blur"]),"icon-translate":new qn(j.paint_symbol["icon-translate"]),"icon-translate-anchor":new qn(j.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gn(j.paint_symbol["text-opacity"]),"text-color":new Gn(j.paint_symbol["text-color"]),"text-halo-color":new Gn(j.paint_symbol["text-halo-color"]),"text-halo-width":new Gn(j.paint_symbol["text-halo-width"]),"text-halo-blur":new Gn(j.paint_symbol["text-halo-blur"]),"text-translate":new qn(j.paint_symbol["text-translate"]),"text-translate-anchor":new qn(j.paint_symbol["text-translate-anchor"])}),layout:ye},ye=((Ga=Xn)&&(Qa.__proto__=Ga),((Qa.prototype=Object.create(Ga&&Ga.prototype)).constructor=Qa).prototype.recalculate=function(t){Ga.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},Qa.prototype.getValueAndResolveTokens=function(t,e){var n,i=this.layout.get(t).evaluate(e,{}),t=this._unevaluatedLayout._values[t];return t.isDataDriven()||Ce(t.value)?i:(n=e.properties,i.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},Qa.prototype.createBucket=function(t){return new Ua(t)},Qa.prototype.queryRadius=function(){return 0},Qa.prototype.queryIntersectsFeature=function(){return!1},Qa),$a={paint:new Hn({"background-color":new qn(j.paint_background["background-color"]),"background-pattern":new Wn(j.paint_background["background-pattern"]),"background-opacity":new qn(j.paint_background["background-opacity"])})},Wn=((qa=Xn)&&(Ya.__proto__=qa),(Ya.prototype=Object.create(qa&&qa.prototype)).constructor=Ya),Ha={paint:new Hn({"raster-opacity":new qn(j.paint_raster["raster-opacity"]),"raster-hue-rotate":new qn(j.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qn(j.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qn(j.paint_raster["raster-brightness-max"]),"raster-saturation":new qn(j.paint_raster["raster-saturation"]),"raster-contrast":new qn(j.paint_raster["raster-contrast"]),"raster-resampling":new qn(j.paint_raster["raster-resampling"]),"raster-fade-duration":new qn(j.paint_raster["raster-fade-duration"])})},Ka={circle:Qn,heatmap:ki,hillshade:Oi,fill:Yn,"fill-extrusion":Vi,line:i,symbol:ye,background:Wn,raster:((Za=Xn)&&(Ja.__proto__=Za),(Ja.prototype=Object.create(Za&&Za.prototype)).constructor=Ja)},Xa=n(function(t,e){function n(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function d(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}t.exports=(n.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,i,r,o=[],a=0;a<t.length;a++)if(n=t[a].w||t[a].width,i=t[a].h||t[a].height,r=t[a].id,n&&i){if(!(r=this.packOne(n,i,r)))continue;e.inPlace&&(t[a].x=r.x,t[a].y=r.y,t[a].id=r.id),o.push(r)}return this.shrink(),o},n.prototype.packOne=function(t,e,n){var i,r,o,a,s,l,u,c,h={freebin:-1,shelf:-1,waste:1/0},p=0;if("string"==typeof n||"number"==typeof n){if(i=this.getBin(n))return this.ref(i),i;"number"==typeof n&&(this.maxId=Math.max(n,this.maxId))}else n=++this.maxId;for(a=0;a<this.freebins.length;a++){if(e===(i=this.freebins[a]).maxh&&t===i.maxw)return this.allocFreebin(a,t,e,n);e>i.maxh||t>i.maxw||e<=i.maxh&&t<=i.maxw&&(o=i.maxw*i.maxh-t*e)<h.waste&&(h.waste=o,h.freebin=a)}for(a=0;a<this.shelves.length;a++)if(p+=(r=this.shelves[a]).h,!(t>r.free)){if(e===r.h)return this.allocShelf(a,t,e,n);e>r.h||e<r.h&&(o=(r.h-e)*t)<h.waste&&(h.freebin=-1,h.waste=o,h.shelf=a)}return-1!==h.freebin?this.allocFreebin(h.freebin,t,e,n):-1!==h.shelf?this.allocShelf(h.shelf,t,e,n):e<=this.h-p&&t<=this.w?(r=new d(p,this.w,e),this.allocShelf(this.shelves.push(r)-1,t,e,n)):this.autoResize?(s=l=this.h,((u=c=this.w)<=s||u<t)&&(c=2*Math.max(t,u)),(s<u||s<e)&&(l=2*Math.max(e,s)),this.resize(c,l),this.packOne(t,e,n)):null},n.prototype.allocFreebin=function(t,e,n,i){t=this.freebins.splice(t,1)[0];return t.id=i,t.w=e,t.h=n,t.refcount=0,this.bins[i]=t,this.ref(t),t},n.prototype.allocShelf=function(t,e,n,i){n=this.shelves[t].alloc(e,n,i);return this.bins[i]=n,this.ref(n),n},n.prototype.shrink=function(){if(0<this.shelves.length){for(var t=0,e=0,n=0;n<this.shelves.length;n++){var i=this.shelves[n];e+=i.h,t=Math.max(i.w-i.free,t)}this.resize(t,e)}},n.prototype.getBin=function(t){return this.bins[t]},n.prototype.ref=function(t){var e;return 1==++t.refcount&&(e=t.h,this.stats[e]=1+(0|this.stats[e])),t.refcount},n.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},n.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},n.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},d.prototype.alloc=function(t,e,s){if(t>this.free||e>this.h)return null;var n=this.x;return this.x+=t,this.free-=t,new function(t,e,n,i,r,o,a){this.id=s,this.x=e,this.y=n,this.w=i,this.h=r,this.maxw=o||i,this.maxh=a||r,this.refcount=0}(0,n,this.y,t,e,t,this.h)},d.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},n)}),Oi={tl:{configurable:!0},br:{configurable:!0},displaySize:{configurable:!0}};function Ja(t){Za.call(this,t,Ha)}function Ya(t){qa.call(this,t,$a)}function Qa(t){Ga.call(this,t,Wa)}Oi.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Oi.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Oi.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Va.prototype,Oi);Yn=function(t){var e,n=new mo({width:0,height:0}),i={},r=new Xa(0,0,{autoResize:!0});for(e in t){var o=t[e],a=r.packOne(o.data.width+2,o.data.height+2);n.resize({width:r.w,height:r.h}),mo.copy(o.data,n,{x:0,y:0},{x:a.x+1,y:a.y+1},o.data),i[e]=new Va(a,o)}r.shrink(),n.resize({width:r.w,height:r.h}),this.image=n,this.positions=i};xn("ImagePosition",Va),xn("ImageAtlas",Yn);function ts(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)}var es=self.HTMLImageElement,ns=self.HTMLCanvasElement,is=self.HTMLVideoElement,rs=self.ImageData;ts.prototype.update=function(t,e){var n=t.width,i=t.height,r=!this.size||this.size[0]!==n||this.size[1]!==i,o=this.context,a=o.gl;this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),r?(this.size=[n,i],o.pixelStoreUnpack.set(1),this.format!==a.RGBA||e&&!1===e.premultiply||o.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof es||t instanceof ns||t instanceof is||t instanceof rs?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,n,i,0,this.format,a.UNSIGNED_BYTE,t.data)):t instanceof es||t instanceof ns||t instanceof is||t instanceof rs?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,i,a.RGBA,a.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},ts.prototype.bind=function(t,e,n){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},ts.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ts.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};function os(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,p=n?-1:1,n=t[e+h];for(h+=p,o=n&(1<<-c)-1,n>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;0<c;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(n?-1:1);a+=Math.pow(2,i),o-=u}return(n?-1:1)*a*Math.pow(2,o-i)}function as(t,e,n,i,r,o){var a,s,l=8*o-r-1,u=(1<<l)-1,c=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(i=Math.pow(2,-a))<1&&(a--,i*=2),2<=(e+=1<=a+c?h/i:h*Math.pow(2,1-c))*i&&(a++,i/=2),u<=a+c?(s=0,a=u):1<=a+c?(s=(e*i-1)*Math.pow(2,r),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));8<=r;t[n+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,l+=r;0<l;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*o}var ss=ls;function ls(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function us(t){return t.type===ls.Bytes?t.readVarint()+t.pos:t.pos+1}function cs(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function hs(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;t<=r;r--)n.buf[r+i]=n.buf[r]}function ps(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function ds(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function fs(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function ms(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function ys(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function gs(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function vs(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function _s(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function bs(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function xs(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ws(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Ts(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Es(t,e,n){1===t&&n.readMessage(ks,e)}function ks(t,e,n){var i,r,o,a,s;3===t&&(i=(s=n.readMessage(Ss,{})).id,r=s.bitmap,o=s.width,a=s.height,t=s.left,n=s.top,s=s.advance,e.push({id:i,bitmap:new fo({width:o+6,height:a+6},r),metrics:{width:o,height:a,left:t,top:n,advance:s}}))}function Ss(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}ls.Varint=0,ls.Fixed64=1,ls.Bytes=2,ls.Fixed32=5,ls.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=xs(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Ts(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=xs(this.buf,this.pos)+4294967296*xs(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=xs(this.buf,this.pos)+4294967296*Ts(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=os(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=os(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n=this.buf,i=127&(e=n[this.pos++]);return e<128?i:(i|=(127&(e=n[this.pos++]))<<7,e<128?i:(i|=(127&(e=n[this.pos++]))<<14,e<128?i:(i|=(127&(e=n[this.pos++]))<<21,e<128?i:function(t,e,n){var i,r=n.buf,o=(112&(i=r[n.pos++]))>>4;if(i<128)return cs(t,o,e);if(o|=(127&(i=r[n.pos++]))<<3,i<128)return cs(t,o,e);if(o|=(127&(i=r[n.pos++]))<<10,i<128)return cs(t,o,e);if(o|=(127&(i=r[n.pos++]))<<17,i<128)return cs(t,o,e);if(o|=(127&(i=r[n.pos++]))<<24,i<128)return cs(t,o,e);if(o|=(1&(i=r[n.pos++]))<<31,i<128)return cs(t,o,e);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&n[this.pos])<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var i="",r=e;r<n;){var o,a,s,l=t[r],u=null,c=239<l?4:223<l?3:191<l?2:1;if(n<r+c)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[r+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),r+=c}return i}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=us(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=us(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=us(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=us(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=us(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=us(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=us(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=us(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=us(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){t&=7;if(t===ls.Varint)for(;127<this.buf[this.pos++];);else if(t===ls.Bytes)this.pos=this.readVarint()+this.pos;else if(t===ls.Fixed32)this.pos+=4;else{if(t!==ls.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e,n=this.length||16;n<this.pos+t;)n*=2;n!==this.length&&((e=new Uint8Array(n)).set(this.buf),this.buf=e,this.length=n)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ws(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ws(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ws(this.buf,-1&t,this.pos),ws(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ws(this.buf,-1&t,this.pos),ws(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){268435455<(r=+r||0)||r<0?function(t){var e,n,i;if(0<=r?(i=r%4294967296|0,e=r/4294967296|0):(e=~(-r/4294967296),4294967295^(i=~(-r%4294967296))?i=i+1|0:e=e+1|(i=0)),0x10000000000000000<=r||r<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),n=i,(i=t).buf[i.pos++]=127&n|128,n>>>=7,i.buf[i.pos++]=127&n|128,n>>>=7,i.buf[i.pos++]=127&n|128,n>>>=7,i.buf[i.pos++]=127&n|128,n>>>=7,i.buf[i.pos]=127&n,e=(7&(n=e))<<4,(t=t).buf[t.pos++]|=e|((n>>>=3)?128:0),n&&(t.buf[t.pos++]=127&n|((n>>>=7)?128:0),n&&(t.buf[t.pos++]=127&n|((n>>>=7)?128:0),n&&(t.buf[t.pos++]=127&n|((n>>>=7)?128:0),n&&(t.buf[t.pos++]=127&n|((n>>>=7)?128:0),n&&(t.buf[t.pos++]=127&n)))))}(this):(this.realloc(4),this.buf[this.pos++]=127&r|(127<r?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(127<r?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(127<r?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if(55295<(i=e.charCodeAt(o))&&i<57344){if(!r){56319<i||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);t=this.pos-e;128<=t&&hs(e,t,this),this.pos=e-1,this.writeVarint(t),this.pos+=t},writeFloat:function(t){this.realloc(4),as(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),as(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);e=this.pos-n;128<=e&&hs(n,e,this),this.pos=n-1,this.writeVarint(e),this.pos+=e},writeMessage:function(t,e,n){this.writeTag(t,ls.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,ps,e)},writePackedSVarint:function(t,e){this.writeMessage(t,ds,e)},writePackedBoolean:function(t,e){this.writeMessage(t,ys,e)},writePackedFloat:function(t,e){this.writeMessage(t,fs,e)},writePackedDouble:function(t,e){this.writeMessage(t,ms,e)},writePackedFixed32:function(t,e){this.writeMessage(t,gs,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,vs,e)},writePackedFixed64:function(t,e){this.writeMessage(t,_s,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,bs,e)},writeBytesField:function(t,e){this.writeTag(t,ls.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,ls.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,ls.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,ls.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,ls.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,ls.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,ls.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,ls.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,ls.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,ls.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};Vi=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,_(["receive"],this),this.target.addEventListener("message",this.receive,!1)};Vi.prototype.send=function(t,e,n,i){var r=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[r]=n);n=[];this.target.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(r),data:wn(e,n)},n)},Vi.prototype.receive=function(t){var e,n,i=this,r=t.data,o=r.id;r.targetMapId&&this.mapId!==r.targetMapId||(e=function(t,e){var n=[];i.target.postMessage({sourceMapId:i.mapId,type:"<response>",id:String(o),error:t?wn(t):null,data:wn(e,n)},n)},"<response>"===r.type?(n=this.callbacks[r.id],delete this.callbacks[r.id],n&&r.error?n(Tn(r.error)):n&&n(null,Tn(r.data))):void 0!==r.id&&this.parent[r.type]?this.parent[r.type](r.sourceMapId,Tn(r.data),e):void 0!==r.id&&this.parent.getWorkerSource?(t=r.type.split("."),n=Tn(r.data),this.parent.getWorkerSource(r.sourceMapId,t[0],n.source)[t[1]](n,e)):this.parent[r.type](Tn(r.data)))},Vi.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};i=n(function(t,e){function a(t,e,n){var i=r(256*t,256*(e=Math.pow(2,n)-e-1),n),n=r(256*(t+1),256*(e+1),n);return i[0]+","+i[1]+","+n[0]+","+n[1]}function r(t,e,n){n=2*Math.PI*6378137/256/Math.pow(2,n);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}(e=e).getURL=function(t,e,n,i,r,o){return o=o||{},t+"?"+["bbox="+a(n,i,r),"format="+(o.format||"image/png"),"service="+(o.service||"WMS"),"version="+(o.version||"1.1.1"),"request="+(o.request||"GetMap"),"srs="+(o.srs||"EPSG:3857"),"width="+(o.width||256),"height="+(o.height||256),"layers="+e].join("&")},e.getTileBBox=a,e.getMercCoords=r,Object.defineProperty(e,"__esModule",{value:!0})});e(i);function Ps(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Is(0,t,e,n)}var Cs=i.getTileBBox;Ps.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Ps.prototype.url=function(t,e){var n=Cs(this.x,this.y,this.z),i=function(t,e,n){for(var i,r="",o=t;0<o;o--)r+=(e&(i=1<<o-1)?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)};function Ms(t,e){this.wrap=t,this.canonical=e,this.key=Is(t,e.z,e.x,e.y)}function Ls(t,e,n,i,r){this.overscaledZ=t,this.wrap=e,this.canonical=new Ps(n,+i,+r),this.key=Is(e,t,i,r)}function Is(t,e,n,i){(t*=2)<0&&(t=-1*t-1);var r=1<<e;return 32*(r*r*t+r*i+n)+e}Ls.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Ls.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Ls(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ls(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Ls.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Ls.prototype.children=function(t){if(this.overscaledZ>=t)return[new Ls(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,t=2*this.canonical.y;return[new Ls(e,this.wrap,e,n,t),new Ls(e,this.wrap,e,1+n,t),new Ls(e,this.wrap,e,n,1+t),new Ls(e,this.wrap,e,1+n,1+t)]},Ls.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Ls.prototype.wrapped=function(){return new Ls(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ls.prototype.unwrapTo=function(t){return new Ls(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Ls.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ls.prototype.toUnwrapped=function(){return new Ms(this.wrap,this.canonical)},Ls.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ls.prototype.toCoordinate=function(){return new u(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},xn("CanonicalTileID",Ps),xn("OverscaledTileID",Ls,{omit:["posMatrix"]});function As(t,e,n){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))}As.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},As.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},As.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},xn("Level",As);ye=function(t,e,n){this.uid=t,this.scale=e||1,this.level=n||new As(256,512),this.loaded=!!n};ye.prototype.loadFromImage=function(t,e){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");if(e&&"mapbox"!==e&&"terrarium"!==e)return k('"'+e+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.level=new As(t.width,t.width/2),t=t.data;this._unpackData(n,t,e||"mapbox");for(var i=0;i<n.dim;i++)n.set(-1,i,n.get(0,i)),n.set(n.dim,i,n.get(n.dim-1,i)),n.set(i,-1,n.get(i,0)),n.set(i,n.dim,n.get(i,n.dim-1));n.set(-1,-1,n.get(0,0)),n.set(n.dim,-1,n.get(n.dim-1,0)),n.set(-1,n.dim,n.get(0,n.dim-1)),n.set(n.dim,n.dim,n.get(n.dim-1,n.dim-1)),this.loaded=!0},ye.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},ye.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},ye.prototype._unpackData=function(t,e,n){for(var i={mapbox:this._unpackMapbox,terrarium:this._unpackTerrarium}[n],r=0;r<t.dim;r++)for(var o=0;o<t.dim;o++){var a=4*(r*t.dim+o);t.set(o,r,this.scale*i(e[a],e[1+a],e[2+a]))}},ye.prototype.getPixels=function(){return new mo({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},ye.prototype.backfillBorder=function(t,e,n){var i=this.level,r=t.level;if(i.dim!==r.dim)throw new Error("level mismatch (dem dimension)");var o=e*i.dim,a=e*i.dim+i.dim,s=n*i.dim,l=n*i.dim+i.dim;switch(e){case-1:o=a-1;break;case 1:a=o+1}switch(n){case-1:s=l-1;break;case 1:l=s+1}for(var u=y(o,-i.border,i.dim+i.border),c=y(a,-i.border,i.dim+i.border),t=y(s,-i.border,i.dim+i.border),h=y(l,-i.border,i.dim+i.border),p=-e*i.dim,d=-n*i.dim,f=t;f<h;f++)for(var m=u;m<c;m++)i.set(m,f,r.get(m+p,f+d))},xn("DEMData",ye);function zs(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}var Os=ei([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);zs.prototype.encode=function(t){return this._stringToNumber[t]},zs.prototype.decode=function(t){return this._numberToString[t]};function Rs(t,e,n,i){this.type="Feature",(this._vectorTileFeature=t)._z=e,t._x=n,t._y=i,this.properties=t.properties,null!=t.id&&(this.id=t.id)}Wn={geometry:{configurable:!0}};Wn.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Wn.geometry.set=function(t){this._geometry=t},Rs.prototype.toJSON=function(){var t,e={geometry:this.geometry};for(t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Rs.prototype,Wn);Oi=function(){this.state={},this.stateChanges={}};Oi.prototype.updateState=function(t,e,n){e=String(e),this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][e]=this.stateChanges[t][e]||{},m(this.stateChanges[t][e],n)},Oi.prototype.getState=function(t,e){e=String(e);var n=this.state[t]||{},t=this.stateChanges[t]||{};return m({},n[e],t[e])},Oi.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Oi.prototype.coalesceChanges=function(t,e){var n,i={};for(n in this.stateChanges){this.state[n]=this.state[n]||{};var r,o={};for(r in this.stateChanges[n])this.state[n][r]||(this.state[n][r]={}),m(this.state[n][r],this.stateChanges[n][r]),o[r]=this.state[n][r];i[n]=o}if(this.stateChanges={},0!==Object.keys(i).length)for(var a in t)t[a].setFeatureState(i,e)};i=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new yn(Ir,16,0),this.featureIndexArray=n||new br};function Ds(t,e){return e-t}i.prototype.insert=function(t,e,n,i,r){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);for(var a=0;a<e.length;a++){for(var s=e[a],l=[1/0,1/0,-1/0,-1/0],u=0;u<s.length;u++){var c=s[u];l[0]=Math.min(l[0],c.x),l[1]=Math.min(l[1],c.y),l[2]=Math.max(l[2],c.x),l[3]=Math.max(l[3],c.y)}l[0]<Ir&&l[1]<Ir&&0<=l[2]&&0<=l[3]&&this.grid.insert(o,l[0],l[1],l[2],l[3])}},i.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new pa.VectorTile(new ss(this.rawTileData)).layers,this.sourceLayerCoder=new zs(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},i.prototype.query=function(r,e,o){var a=this;this.loadVTLayers();for(var n=r.params||{},s=Ir/r.tileSize/r.scale,l=Ze(n.filter),u=r.queryGeometry,t=r.queryPadding*s,i=1/0,c=1/0,h=-1/0,p=-1/0,d=0;d<u.length;d++)for(var f=u[d],m=0;m<f.length;m++)var y=f[m],i=Math.min(i,y.x),c=Math.min(c,y.y),h=Math.max(h,y.x),p=Math.max(p,y.y);var g=this.grid.query(i-t,c-t,h+t,p+t);g.sort(Ds);for(var v,_={},b=0;b<g.length;b++)!function(t){var i;(t=g[t])!==v&&(v=t,t=a.featureIndexArray.get(t),i=null,a.loadMatchingFeature(_,t.bucketIndex,t.sourceLayerIndex,t.featureIndex,l,n.layers,e,function(t,e){i=i||zr(t);var n={};return t.id&&(n=o.getState(e.sourceLayer||"_geojsonTileLayer",String(t.id))),e.queryIntersectsFeature(u,t,n,i,a.z,r.transform,s,r.posMatrix)}))}(b);return _},i.prototype.loadMatchingFeature=function(t,e,n,i,r,o,a,s){var l=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(0<=e.indexOf(t[n]))return 1}(o,l)){var n=this.sourceLayerCoder.decode(n),u=this.vtLayers[n].feature(i);if(r(new Mn(this.tileID.overscaledZ),u))for(var c=0;c<l.length;c++){var h,p,d=l[c];o&&o.indexOf(d)<0||(!(p=a[d])||s&&!s(u,p)||((h=new Rs(u,this.z,this.x,this.y)).layer=p.serialize(),void 0===(p=t[d])&&(p=t[d]=[]),p.push({featureIndex:i,feature:h})))}}},i.prototype.lookupSymbolFeatures=function(t,e,n,i,r,o){var a={};this.loadVTLayers();for(var s=Ze(i),l=0,u=t;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(a,e,n,c,s,r,o)}return a},i.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var i=0,r=n[e];i<r.length;i+=1)if(t===r[i])return!0;return!1},xn("FeatureIndex",i,{omit:["rawTileData","sourceLayerCoder"]});Wn=function(t,e){this.tileID=t,this.uid=g++,this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.expiredRequestCount=0,this.state="loading"};Wn.prototype.registerFadeDuration=function(t){t+=this.timeAdded;t<a.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Wn.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Wn.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a,o.stateDependentLayers=a.filter(function(t){return t.isStateDependent()});for(var s=0,l=a;s<l.length;s+=1)n[l[s].id]=o}}return n}(t.buckets,e.style),n)for(var i in this.buckets){var r=this.buckets[i];r instanceof Ua&&(r.justReloaded=!0)}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a.layerIds[0]).queryRadius(a))}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new rr},Wn.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Wn.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Wn.prototype.getBucket=function(t){return this.buckets[t.id]},Wn.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var i=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new ts(t,this.iconAtlasImage,i.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ts(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},Wn.prototype.queryRenderedFeatures=function(t,e,n,i,r,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,scale:i,tileSize:this.tileSize,posMatrix:s,transform:o,params:r,queryPadding:this.queryPadding*a},t,e):{}},Wn.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),i=e?e.sourceLayer:"",r=n._geojsonTileLayer||n[i];if(r)for(var o=Ze(e&&e.filter),a={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},s=0;s<r.length;s++){var l=r.feature(s);o(new Mn(this.tileID.overscaledZ),l)&&((l=new Rs(l,a.z,a.x,a.y)).tile=a,t.push(l))}}},Wn.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Wn.prototype.setMask=function(t,e){if(!h(this.mask,t)&&(this.mask=t,this.clearMask(),!h(t,{0:!0}))){var n=new si,i=new Gi;this.segments=new wr,this.segments.prepareSegment(0,n,i);for(var r=Object.keys(t),o=0;o<r.length;o++){var a=t[r[o]],s=Ir>>a.z,l=new p(a.x*s,a.y*s),a=new p(l.x+s,l.y+s),s=this.segments.prepareSegment(4,n,i);n.emplaceBack(l.x,l.y,l.x,l.y),n.emplaceBack(a.x,l.y,a.x,l.y),n.emplaceBack(l.x,a.y,l.x,a.y),n.emplaceBack(a.x,a.y,a.x,a.y);a=s.vertexLength;i.emplaceBack(a,a+1,a+2),i.emplaceBack(a+1,a+2,a+3),s.vertexLength+=4,s.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,Os.members),this.maskedIndexBuffer=e.createIndexBuffer(i)}},Wn.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Wn.prototype.setExpiryData=function(t){var r,e,n,i=this.expirationTime;t.cacheControl?(e=(e=t.cacheControl,r={},e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,e,n,i){i=n||i;return r[e]=!i||i.toLowerCase(),""}),r["max-age"]&&(e=parseInt(r["max-age"],10),isNaN(e)?delete r["max-age"]:r["max-age"]=e),r))["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"]):t.expires&&(this.expirationTime=new Date(t.expires).getTime()),this.expirationTime&&(e=Date.now(),t=!1,this.expirationTime>e?t=!1:i&&!(this.expirationTime<i)&&(n=this.expirationTime-i)?this.expirationTime=e+Math.max(n,3e4):t=!0,t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0)},Wn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Wn.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n,i=this.latestFeatureIndex.loadVTLayers();for(n in this.buckets){var r=this.buckets[n],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],o=t[o];a&&o&&0!==Object.keys(o).length&&(r.update(o,a),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(r.layerIds[0]).queryRadius(r))))}}};var Ns={horizontal:1,vertical:2,horizontalOnly:3},Bs={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fs={};function js(t,e,n,i){var r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function Us(t,e,n,i,r,o){for(var a=null,s=js(e,n,r,o),l=0,u=i;l<u.length;l+=1){var c=u[l],h=js(e-c.x,n,r,o)+c.badness;h<=s&&(a=c,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function Vs(t,e,n,i){if(!n)return[];if(!t)return[];for(var r,o=[],a=function(t,e,n,i){for(var r=0,o=0;o<t.length;o++){var a=i[t.charCodeAt(o)];a&&(r+=a.metrics.advance+e)}return r/Math.max(1,Math.ceil(r/n))}(t,e,n,i),s=0,l=0;l<t.length;l++){var u=t.charCodeAt(l),c=i[u];c&&!Bs[u]&&(s+=c.metrics.advance+e),l<t.length-1&&(Fs[u]||!((r=u)<11904)&&(kn["Bopomofo Extended"](r)||kn.Bopomofo(r)||kn["CJK Compatibility Forms"](r)||kn["CJK Compatibility Ideographs"](r)||kn["CJK Compatibility"](r)||kn["CJK Radicals Supplement"](r)||kn["CJK Strokes"](r)||kn["CJK Symbols and Punctuation"](r)||kn["CJK Unified Ideographs Extension A"](r)||kn["CJK Unified Ideographs"](r)||kn["Enclosed CJK Letters and Months"](r)||kn["Halfwidth and Fullwidth Forms"](r)||kn.Hiragana(r)||kn["Ideographic Description Characters"](r)||kn["Kangxi Radicals"](r)||kn["Katakana Phonetic Extensions"](r)||kn.Katakana(r)||kn["Vertical Forms"](r)||kn["Yi Radicals"](r)||kn["Yi Syllables"](r)))&&o.push(Us(l+1,s,a,o,(c=u,r=t.charCodeAt(l+1),u=void 0,u=0,10===c&&(u-=1e4),40!==c&&65288!==c||(u+=50),41!==r&&65289!==r||(u+=50),u),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Us(t.length,s,a,o,0,!0))}function Zs(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}Fs[10]=!0,Fs[32]=!0,Fs[38]=!0,Fs[40]=!0,Fs[41]=!0,Fs[43]=!0,Fs[45]=!0,Fs[47]=!0,Fs[173]=!0,Fs[183]=!0,Fs[8203]=!0,Fs[8208]=!0,Fs[8211]=!0,Fs[8231]=!0,t.unwrapExports=e,t.createCommonjsModule=n,t.default=p,t.default$1=self,t.default$2=a,t.getJSON=function(e,n){var i=I(e);return i.setRequestHeader("Accept","application/json"),i.onerror=function(){n(new Error(i.statusText))},i.onload=function(){if(200<=i.status&&i.status<300&&i.response){var t;try{t=JSON.parse(i.response)}catch(t){return n(t)}n(null,t)}else 401===i.status&&e.url.match(/mapbox.com/)?n(new M(i.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",i.status,e.url)):n(new M(i.statusText,i.status,e.url))},i.send(),{cancel:function(){return i.abort()}}},t.getImage=function(t,r){return A(t,function(t,e){var n,i;t?r(t):e&&(n=new self.Image,i=self.URL||self.webkitURL,n.onload=function(){r(null,n),i.revokeObjectURL(n.src)},t=new self.Blob([new Uint8Array(e.data)],{type:"image/png"}),n.cacheControl=e.cacheControl,n.expires=e.expires,n.src=e.data.byteLength?i.createObjectURL(t):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=")})},t.ResourceType=P,t.RGBAImage=mo,t.default$3=Xa,t.ImagePosition=Va,t.default$4=ts,t.getArrayBuffer=A,t.default$5=function(t){return new ss(t).readFields(Es,[])},t.default$6=kn,t.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);var r=t.length,o=new Array(t.length),a=null;t.forEach(function(t,n){e(t,function(t,e){t&&(a=t),o[n]=e,0==--r&&i(a,o)})})},t.AlphaImage=fo,t.default$7=j,t.endsWith=b,t.extend=m,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],t=t[2];return n+=90,n*=Math.PI/180,t*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(t),y:e*Math.sin(n)*Math.sin(t),z:e*Math.cos(t)}},t.Evented=D,t.validateStyle=hn,t.validateLight=pn,t.emitValidationErrors=mn,t.default$8=ut,t.number=At,t.Properties=Hn,t.Transitionable=Bn,t.Transitioning=jn,t.PossiblyEvaluated=Zn,t.DataConstantProperty=qn,t.warnOnce=k,t.uniqueId=v,t.default$9=Vi,t.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i];r in t&&(n[r]=t[r])}return n},t.wrap=function(t,e,n){var i=n-e,i=((t-e)%i+i)%i+e;return i===e?n:i},t.clamp=y,t.Event=R,t.ErrorEvent=B,t.OverscaledTileID=Ls,t.default$10=Ir,t.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,i=-1/0,r=-1/0,o=0;o<t.length;o++)e=Math.min(e,t[o].column),n=Math.min(n,t[o].row),i=Math.max(i,t[o].column),r=Math.max(r,t[o].row);var a=i-e,s=r-n,s=Math.max(a,s),s=Math.max(0,Math.floor(-Math.log(s)/Math.LN2));return new u((e+i)/2,(n+r)/2,0).zoomTo(s)},t.CanonicalTileID=Ps,t.RasterBoundsArray=si,t.default$11=Os,t.getVideo=function(t,e){var n=self.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(var i=0;i<t.length;i++){var r=self.document.createElement("source"),o=t[i],a=void 0;(a=self.document.createElement("a")).href=o,a.protocol===self.document.location.protocol&&a.host===self.document.location.host||(n.crossOrigin="Anonymous"),r.src=t[i],n.appendChild(r)}return{cancel:function(){}}},t.default$12=U,t.bindAll=_,t.default$13=h,t.default$14=Wn,t.default$15=u,t.keysDifference=function(t,e){var n,i=[];for(n in t)n in e||i.push(n);return i},t.default$16=Oi,t.default$17=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.create=function(){var t=new Hr(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],y=e[14],g=e[15],v=n*s-i*a,_=n*l-r*a,b=n*u-o*a,x=i*l-r*s,w=i*u-o*s,T=r*u-o*l,E=c*m-h*f,k=c*y-p*f,S=c*g-d*f,P=h*y-p*m,C=h*g-d*m,M=p*g-d*y,e=v*M-_*C+b*P+x*S-w*k+T*E;return e?(e=1/e,t[0]=(s*M-l*C+u*P)*e,t[1]=(r*C-i*M-o*P)*e,t[2]=(m*T-y*w+g*x)*e,t[3]=(p*w-h*T-d*x)*e,t[4]=(l*S-a*M-u*k)*e,t[5]=(n*M-r*S+o*k)*e,t[6]=(y*b-f*T-g*_)*e,t[7]=(c*T-p*b+d*_)*e,t[8]=(a*C-s*S+u*E)*e,t[9]=(i*S-n*C-o*E)*e,t[10]=(f*w-m*b+g*v)*e,t[11]=(h*b-c*w-d*v)*e,t[12]=(s*k-a*P-l*E)*e,t[13]=(n*P-i*k+r*E)*e,t[14]=(m*_-f*x-y*v)*e,t[15]=(c*x-h*_+p*v)*e,t):null},t.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],m=e[12],y=e[13],g=e[14],v=e[15],_=n[0],b=n[1],x=n[2],e=n[3];return t[0]=_*i+b*s+x*h+e*m,t[1]=_*r+b*l+x*p+e*y,t[2]=_*o+b*u+x*d+e*g,t[3]=_*a+b*c+x*f+e*v,_=n[4],b=n[5],x=n[6],e=n[7],t[4]=_*i+b*s+x*h+e*m,t[5]=_*r+b*l+x*p+e*y,t[6]=_*o+b*u+x*d+e*g,t[7]=_*a+b*c+x*f+e*v,_=n[8],b=n[9],x=n[10],e=n[11],t[8]=_*i+b*s+x*h+e*m,t[9]=_*r+b*l+x*p+e*y,t[10]=_*o+b*u+x*d+e*g,t[11]=_*a+b*c+x*f+e*v,_=n[12],b=n[13],x=n[14],e=n[15],t[12]=_*i+b*s+x*h+e*m,t[13]=_*r+b*l+x*p+e*y,t[14]=_*o+b*u+x*d+e*g,t[15]=_*a+b*c+x*f+e*v,t},t.translate=function(t,e,n){var i,r,o,a,s,l,u,c,h,p,d,f=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*f+e[4]*m+e[8]*y+e[12],t[13]=e[1]*f+e[5]*m+e[9]*y+e[13],t[14]=e[2]*f+e[6]*m+e[10]*y+e[14],t[15]=e[3]*f+e[7]*m+e[11]*y+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],n=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=d,t[11]=n,t[12]=i*f+s*m+h*y+e[12],t[13]=r*f+l*m+p*y+e[13],t[14]=o*f+u*m+d*y+e[14],t[15]=a*f+c*m+n*y+e[15]),t},t.scale=function(t,e,n){var i=n[0],r=n[1],n=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],n=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*i,t[5]=a*r+c*i,t[6]=s*r+h*i,t[7]=l*r+n*i,t[8]=u*r-o*i,t[9]=c*r-a*i,t[10]=h*r-s*i,t[11]=n*r-l*i,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],n=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+u*i,t[1]=a*r+c*i,t[2]=s*r+h*i,t[3]=l*r+n*i,t[4]=u*r-o*i,t[5]=c*r-a*i,t[6]=h*r-s*i,t[7]=n*r-l*i,t},t.perspective=function(t,e,n,i,r){var o=1/Math.tan(e/2),e=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*e,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*e,t[15]=0,t},t.ortho=function(t,e,n,i,r,o,a){var s=1/(e-n),l=1/(i-r),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*u,t[15]=1,t},t.create$1=to,t.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3];return 0<(e=n*n+i*i+r*r+o*o)&&(e=1/Math.sqrt(e),t[0]=n*e,t[1]=i*e,t[2]=r*e,t[3]=o*e),t},t.transformMat4=eo,t.forEach=me,t.getSizeData=Oa,t.evaluateSizeForFeature=function(t,e,n){return"source"===t.functionType?n.lowerSize/10:"composite"===t.functionType?At(n.lowerSize/10,n.upperSize/10,e.uSizeT):e.uSize},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var i=t.propertyValue,r=t.zoomRange,o=t.sizeRange,r=y(Oe(i,n.specification).interpolationFactor(e,r.min,r.max),0,1);return{uSizeT:0,uSize:o.min+r*(o.max-o.min)}}o=t.propertyValue,t=t.zoomRange;return{uSizeT:y(Oe(o,n.specification).interpolationFactor(e,t.min,t.max),0,1),uSize:0}},t.addDynamicAttributes=Ba,t.default$18=Wa,t.WritingMode=Ns,t.multiPolygonIntersectsBufferedPoint=Dr,t.multiPolygonIntersectsMultiPolygon=Nr,t.multiPolygonIntersectsBufferedMultiLine=Br,t.polygonIntersectsPolygon=function(t,e){for(var n=0;n<t.length;n++)if(Zr(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(Zr(t,e[i]))return!0;return!!Fr(t,e)},t.distToSegmentSquared=Ur,t.default$19=Xn,t.default$20=function(t){return new Ka[t.type](t)},t.clone=T,t.filterObject=w,t.mapObject=x,t.registerForPluginAvailability=function(t){return An?t({pluginURL:An,completionCallback:Ln}):On.once("pluginAvailable",t),t},t.evented=On,t.default$21=En,t.createLayout=ei,t.default$22=Mr,t.create$2=Kr,t.fromRotation=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=0,t[3]=-n,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.create$3=Xr,t.length=Jr,t.fromValues=Yr,t.normalize$1=function(t,e){var n=e[0],i=e[1],r=e[2],r=n*n+i*i+r*r;return 0<r&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],e=n[1],n=n[2];return t[0]=r*n-o*e,t[1]=o*a-i*n,t[2]=i*e-r*a,t},t.transformMat3=function(t,e,n){var i=e[0],r=e[1],e=e[2];return t[0]=i*n[0]+r*n[3]+e*n[6],t[1]=i*n[1]+r*n[4]+e*n[7],t[2]=i*n[2]+r*n[5]+e*n[8],t},t.len=qt,t.forEach$1=Gt,t.PosArray=ri,t.UnwrappedTileID=Ms,t.create$4=function(){var t=new Hr(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},t.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],e=Math.sin(n),n=Math.cos(n);return t[0]=i*n+o*e,t[1]=r*n+a*e,t[2]=i*-e+o*n,t[3]=r*-e+a*n,t},t.ease=f,t.bezier=d,t.default$23=Mn,t.setRTLTextPlugin=function(t,e){if(In)throw new Error("setRTLTextPlugin cannot be called multiple times.");In=!0,An=a.resolveURL(t),Ln=function(t){t?(In=!1,An=null,e&&e(t)):zn=!0},On.fire(new R("pluginAvailable",{pluginURL:An,completionCallback:Ln}))},t.values=function(t){var e,n=[];for(e in t)n.push(t[e]);return n},t.default$24=Ze,t.default$25=$n,t.register=xn,t.GLYPH_PBF_BORDER=3,t.shapeText=function(t,a,s,e,n,T,l,i,r,o){var u=t.trim();o===Ns.vertical&&(u=function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n+1)||null,r=t.charCodeAt(n-1)||null;i&&Cn(i)&&!Aa[t[n+1]]||r&&Cn(r)&&!Aa[t[n-1]]||!Aa[t[n]]?e+=t[n]:e+=Aa[t[n]]}return e}(u));var c=[],t={positionedGlyphs:c,text:u,top:i[1],bottom:i[1],left:i[0],right:i[0],writingMode:o},i=Rn.processBidirectionalText;return function(t,e,r,o,n,i,a,s){for(var l=0,u=-17,c=0,h=t.positionedGlyphs,p="right"===T?1:"left"===T?0:.5,d=0,f=r;d<f.length;d+=1){var m=f[d];if((m=m.trim()).length){for(var y,g=h.length,v=0;v<m.length;v++){var _=m.charCodeAt(v),b=e[_];b&&(Pn(_)&&i!==Ns.horizontal?(h.push({glyph:_,x:l,y:0,vertical:!0}),l+=s+a):(h.push({glyph:_,x:l,y:u,vertical:!1}),l+=b.metrics.advance+a))}h.length!==g&&(y=l-a,c=Math.max(y,c),function(t,e,n,i,r){if(r){e=e[t[i].glyph];if(e)for(var e=e.metrics.advance,o=(t[i].x+e)*r,a=n;a<=i;a++)t[a].x-=o}}(h,e,g,h.length-1,p)),l=0,u+=o}else u+=o}var n=Zs(n),x=n.horizontalAlign,w=n.verticalAlign;!function(t){for(var e=(p-x)*c,n=(-w*r.length+.5)*o,i=0;i<t.length;i++)t[i].x+=e,t[i].y+=n}(h);n=r.length*o;t.top+=-w*n,t.bottom=t.top+n,t.left+=-x*c,t.right=t.left+c}(t,a,i?i(u,Vs(u,l,s,a)):function(t){for(var e=[],n=0,i=0,r=Vs(u,l,s,a);i<r.length;i+=1){var o=r[i];e.push(t.substring(n,o)),n=o}return n<t.length&&e.push(t.substring(n,t.length)),e}(u),e,n,o,l,r),!!c.length&&t},t.shapeIcon=function(t,e,n){var i=Zs(n),r=i.horizontalAlign,n=i.verticalAlign,i=e[0],e=e[1],i=i-t.displaySize[0]*r,r=i+t.displaySize[0],n=e-t.displaySize[1]*n;return{image:t,top:n,bottom:n+t.displaySize[1],left:i,right:r}},t.allowsVerticalWritingMode=Sn,t.allowsLetterSpacing=function(t){for(var e,n=0,i=t;n<i.length;n+=1)if(e=i[n].charCodeAt(0),kn.Arabic(e)||kn["Arabic Supplement"](e)||kn["Arabic Extended-A"](e)||kn["Arabic Presentation Forms-A"](e)||kn["Arabic Presentation Forms-B"](e))return!1;return!0},t.default$26=Go,t.default$27=Ua,t.default$28=i,t.CollisionBoxArray=rr,t.default$29=zs,t.default$30=Yn,t.default$31=pa,t.default$32=ss,t.default$33=ye,t.__moduleExports=pa,t.default$34=p,t.__moduleExports$1=ss,t.plugin=Rn}),t(0,function(W){function m(t){for(var e="",n=0,i=W.default$17;n<i.length;n+=1)e+="/"+function t(e){var n=typeof e;if("number"==n||"boolean"==n||"string"==n||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var i="[",r=0,o=e;r<o.length;r+=1)i+=t(o[r])+",";return i+"]"}for(var a=Object.keys(e).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+t(e[a[l]])+",";return s+"}"}(t[i[n]]);return e}function e(t){t&&this.replace(t)}function $(t,e,n,i,r){if(void 0===e.segment)return 1;for(var o=e,a=e.segment+1,s=0;-n/2<s;){if(--a<0)return;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<n/2;){var c=t[a-1],h=t[a],p=t[a+1];if(!p)return;c=c.angleTo(h)-h.angleTo(p),c=Math.abs((c+3*Math.PI)%(2*Math.PI)-Math.PI);for(l.push({distance:s,angleDelta:c}),u+=c;s-l[0].distance>i;)u-=l.shift().angleDelta;if(r<u)return;a++,s+=h.dist(p)}return 1}function H(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function K(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}e.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},e.prototype.update=function(t,e){for(var n=this,i=0,r=t;i<r.length;i+=1){var o=r[i];n._layerConfigs[o.id]=o;o=n._layers[o.id]=W.default$20(o);o._featureFilter=W.default$24(o.filter)}for(var a=0,s=e;a<s.length;a+=1){var l=s[a];delete n._layerConfigs[l],delete n._layers[l]}this.familiesBySource={};for(var u=0,c=function(t){for(var e={},n=0;n<t.length;n++){var i=m(t[n]);(e[i]||(e[i]=[])).push(t[n])}var r,o=[];for(r in e)o.push(e[r]);return o}(W.values(this._layerConfigs));u<c.length;u+=1){var h,p,d=c[u].map(function(t){return n._layers[t.id]}),f=d[0];"none"!==f.visibility&&(h=f.source||"",((p=(p=n.familiesBySource[h])||(n.familiesBySource[h]={}))[f=f.sourceLayer||"_geojsonTileLayer"]||(p[f]=[])).push(d))}};var X=function(){this.opacity=0,this.targetOpacity=0,this.time=0};X.prototype.clone=function(){var t=new X;return t.opacity=this.opacity,t.targetOpacity=this.targetOpacity,t.time=this.time,t},W.register("OpacityState",X);var J=function(t,e,n,i,r,o,a,s,l,u,c,h){var p,d,f=a.top*s-l,m=a.bottom*s+l,y=a.left*s-l,l=a.right*s+l;this.boxStartIndex=t.length,u?(p=l-y,0<(d=m-f)&&(d=Math.max(10*s,d),this._addLineCollisionCircles(t,e,n,n.segment,p,d,i,r,o,c))):(h&&(e=new W.default(y,f),p=new W.default(l,f),d=new W.default(y,m),c=new W.default(l,m),h=h*Math.PI/180,e._rotate(h),p._rotate(h),d._rotate(h),c._rotate(h),y=Math.min(e.x,p.x,d.x,c.x),l=Math.max(e.x,p.x,d.x,c.x),f=Math.min(e.y,p.y,d.y,c.y),m=Math.max(e.y,p.y,d.y,c.y)),t.emplaceBack(n.x,n.y,y,f,l,m,i,r,o,0,0)),this.boxEndIndex=t.length};J.prototype._addLineCollisionCircles=function(t,e,n,i,r,o,a,s,l,u){var c=o/2,h=Math.floor(r/c),u=1+.4*Math.log(u)/Math.LN2,p=Math.floor(h*u/2),d=-o/2,f=n,m=i+1,y=d,g=-r/2,v=g-r/4;do{if(--m<0){if(g<y)return;m=0;break}}while(y-=e[m].dist(f),f=e[m],v<y);for(var _=e[m].dist(e[m+1]),b=-p;b<h+p;b++){var x=b*c,w=g+x;if(x<0&&(w+=x),r<x&&(w+=x-r),!(w<y)){for(;y+_<w;){if(y+=_,++m+1>=e.length)return;_=e[m].dist(e[m+1])}var T=w-y,x=e[m],T=e[m+1].sub(x)._unit()._mult(T)._add(x)._round(),x=Math.abs(w-d)<c?0:.8*(w-d);t.emplaceBack(T.x,T.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,x)}}};var Y=i,t=i;function i(t,e){if(!(this instanceof i))return new i(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||r,0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function r(t,e){return t<e?-1:e<t?1:0}function Q(t,e){return e.max-t.max}function tt(t,e,n,i){this.p=new W.default(t,e),this.h=n,this.d=function(t,e){for(var n=!1,i=1/0,r=0;r<e.length;r++)for(var o=e[r],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(n=!n),i=Math.min(i,W.distToSegmentSquared(t,u,c))}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}function E(t,e,n,i,r,o){t.createArrays(),t.symbolInstances=[];var a=512*t.overscaling;t.tilePixelRatio=W.default$10/a,t.compareText={},t.iconsNeedLinear=!1;var s,l,u=t.layers[0].layout,a=t.layers[0]._unevaluatedLayout._values,c={};"composite"===t.textSizeData.functionType&&(l=(s=t.textSizeData.zoomRange).min,s=s.max,c.compositeTextSizes=[a["text-size"].possiblyEvaluate(new W.default$23(l)),a["text-size"].possiblyEvaluate(new W.default$23(s))]),"composite"===t.iconSizeData.functionType&&(s=(l=t.iconSizeData.zoomRange).min,l=l.max,c.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new W.default$23(s)),a["icon-size"].possiblyEvaluate(new W.default$23(l))]),c.layoutTextSize=a["text-size"].possiblyEvaluate(new W.default$23(t.zoom+1)),c.layoutIconSize=a["icon-size"].possiblyEvaluate(new W.default$23(t.zoom+1)),c.textMaxSize=a["text-size"].possiblyEvaluate(new W.default$23(18));for(var h=24*u.get("text-line-height"),p="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),d=u.get("text-keep-upright"),f=0,m=t.features;f<m.length;f+=1){var y,g,v=m[f],_=u.get("text-font").evaluate(v,{}).join(","),b=e[_]||{},x=n[_]||{},w={},T=v.text;T&&(E=u.get("text-offset").evaluate(v,{}).map(function(t){return 24*t}),g=24*u.get("text-letter-spacing").evaluate(v,{}),k=W.allowsLetterSpacing(T)?g:0,y=u.get("text-anchor").evaluate(v,{}),_=u.get("text-justify").evaluate(v,{}),g="point"===u.get("symbol-placement")?24*u.get("text-max-width").evaluate(v,{}):0,w.horizontal=W.shapeText(T,b,g,h,y,_,k,E,24,W.WritingMode.horizontal),W.allowsVerticalWritingMode(T)&&p&&d&&(w.vertical=W.shapeText(T,b,g,h,y,_,k,E,24,W.WritingMode.vertical)));var E,k=void 0;!v.icon||(E=i[v.icon])&&(k=W.shapeIcon(r[v.icon],u.get("icon-offset").evaluate(v,{}),u.get("icon-anchor").evaluate(v,{})),void 0===t.sdfIcons?t.sdfIcons=E.sdf:t.sdfIcons!==E.sdf&&W.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),E.pixelRatio===t.pixelRatio&&0===u.get("icon-rotate").constantOr(1)||(t.iconsNeedLinear=!0)),(w.horizontal||k)&&function(n,i,r,o,a,s){var t=s.layoutTextSize.evaluate(i,{}),e=s.layoutIconSize.evaluate(i,{}),l=s.textMaxSize.evaluate(i,{});function u(t,e){e.x<0||e.x>=W.default$10||e.y<0||e.y>=W.default$10||n.symbolInstances.push(function(t,e,n,i,b,r,o,a,s,l,u,c,h,p,d,f,m,y,g,v,_){var x=t.addToLineVertexArray(e,n),w=0,T=0,E=0,k=i.horizontal?i.horizontal.text:"",S=[];i.horizontal&&(P=r.layout.get("text-rotate").evaluate(g,{}),P=new J(o,n,e,a,s,l,i.horizontal,u,c,h,t.overscaling,P),T+=et(t,e,i.horizontal,r,h,g,p,x,i.vertical?W.WritingMode.horizontal:W.WritingMode.horizontalOnly,S,v,_),i.vertical&&(E+=et(t,e,i.vertical,r,h,g,p,x,W.WritingMode.vertical,S,v,_)));var P,h=P?P.boxStartIndex:t.collisionBoxArray.length,v=P?P.boxEndIndex:t.collisionBoxArray.length;b&&(P=function(t,e,n){var i,r,o,a,s,l,u,c,h,p,d,f=b.image,m=t.layout,y=b.top-1/f.pixelRatio,g=b.left-1/f.pixelRatio,v=b.bottom+1/f.pixelRatio,_=b.right+1/f.pixelRatio;v="none"!==m.get("icon-text-fit")&&e?(d=_-g,h=v-y,u=m.get("text-size").evaluate(n,{})/24,i=e.left*u,l=e.right*u,r=e.top*u,o=l-i,c=e.bottom*u-r,p=m.get("icon-text-fit-padding")[0],a=m.get("icon-text-fit-padding")[1],s=m.get("icon-text-fit-padding")[2],l=m.get("icon-text-fit-padding")[3],e="width"===m.get("icon-text-fit")?.5*(c-h):0,u="height"===m.get("icon-text-fit")?.5*(o-d):0,d="width"===m.get("icon-text-fit")||"both"===m.get("icon-text-fit")?o:d,c="height"===m.get("icon-text-fit")||"both"===m.get("icon-text-fit")?c:h,h=new W.default(i+u-l,r+e-p),p=new W.default(i+u+a+d,r+e-p),d=new W.default(i+u+a+d,r+e+s+c),new W.default(i+u-l,r+e+s+c)):(h=new W.default(g,y),p=new W.default(_,y),d=new W.default(_,v),new W.default(g,v));t=t.layout.get("icon-rotate").evaluate(n,{})*Math.PI/180;return t&&(n=Math.sin(t),t=[t=Math.cos(t),-n,n,t],h._matMult(t),p._matMult(t),v._matMult(t),d._matMult(t)),[{tl:h,tr:p,bl:v,br:d,tex:f.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(r,i.horizontal,g),i=r.layout.get("icon-rotate").evaluate(g,{}),C=new J(o,n,e,a,s,l,b,d,f,!1,t.overscaling,i),w=4*P.length,f=null,"source"===(i=t.iconSizeData).functionType?f=[10*r.layout.get("icon-size").evaluate(g,{})]:"composite"===i.functionType&&(f=[10*_.compositeIconSizes[0].evaluate(g,{}),10*_.compositeIconSizes[1].evaluate(g,{})]),t.addSymbols(t.icon,P,f,y,m,g,!1,e,x.lineStartIndex,x.lineLength));var x=C?C.boxStartIndex:t.collisionBoxArray.length,C=C?C.boxEndIndex:t.collisionBoxArray.length;return t.glyphOffsetArray.length>=W.default$27.MAX_GLYPHS&&W.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:k,textBoxStartIndex:h,textBoxEndIndex:v,iconBoxStartIndex:x,iconBoxEndIndex:C,textOffset:p,iconOffset:y,anchor:e,line:n,featureIndex:a,feature:g,numGlyphVertices:T,numVerticalGlyphVertices:E,numIconVertices:w,textOpacityState:new X,iconOpacityState:new X,isDuplicate:!1,placedTextSymbolIndices:S,crossTileID:0}}(n,e,t,r,o,n.layers[0],n.collisionBoxArray,i.index,i.sourceLayerIndex,n.index,p,y,_,c,f,g,b,h,i,a,s))}void 0===l&&(l=t);var c=(x=n.layers[0].layout).get("text-offset").evaluate(i,{}),h=x.get("icon-offset").evaluate(i,{}),t=t/24,p=n.tilePixelRatio*t,d=n.tilePixelRatio*l/24,f=n.tilePixelRatio*e,m=n.tilePixelRatio*x.get("symbol-spacing"),y=x.get("text-padding")*n.tilePixelRatio,g=x.get("icon-padding")*n.tilePixelRatio,v=x.get("text-max-angle")/180*Math.PI,_="map"===x.get("text-rotation-alignment")&&"point"!==x.get("symbol-placement"),b="map"===x.get("icon-rotation-alignment")&&"point"!==x.get("symbol-placement"),x=x.get("symbol-placement"),w=m/2;if("line"===x)for(var T=0,E=function(t,e,n){for(var i=[],r=0;r<t.length;r++)for(var o=t[r],a=void 0,s=0;s<o.length-1;s++){var l=o[s],u=o[s+1];l.x<0&&u.x<0||(l.x<0?l=new W.default(0,l.y+(u.y-l.y)*((0-l.x)/(u.x-l.x)))._round():u.x<0&&(u=new W.default(0,l.y+(u.y-l.y)*((0-l.x)/(u.x-l.x)))._round()),l.y<0&&u.y<0||(l.y<0?l=new W.default(l.x+(u.x-l.x)*((0-l.y)/(u.y-l.y)),0)._round():u.y<0&&(u=new W.default(l.x+(u.x-l.x)*((0-l.y)/(u.y-l.y)),0)._round()),l.x>=e&&u.x>=e||(l.x>=e?l=new W.default(e,l.y+(u.y-l.y)*((e-l.x)/(u.x-l.x)))._round():u.x>=e&&(u=new W.default(e,l.y+(u.y-l.y)*((e-l.x)/(u.x-l.x)))._round()),l.y>=n&&u.y>=n||(l.y>=n?l=new W.default(l.x+(u.x-l.x)*((n-l.y)/(u.y-l.y)),n)._round():u.y>=n&&(u=new W.default(l.x+(u.x-l.x)*((n-l.y)/(u.y-l.y)),n)._round()),a&&l.equals(a[a.length-1])||(a=[l],i.push(a)),a.push(u)))))}return i}(i.geometry,W.default$10,W.default$10);T<E.length;T+=1)for(var k=E[T],S=0,P=function(t,e,n,i,r,o,a,s,l){var u=i?.6*o*a:0,i=K(i,r),r=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-i*a<e/4&&(e=i*a+e/4),function t(e,n,i,r,o,a,s,l,u){for(var c=a/2,h=H(e),p=0,d=n-i,f=[],m=0;m<e.length-1;m++){for(var y=e[m],g=e[m+1],v=y.dist(g),_=g.angleTo(y);d+i<p+v;){var b=((d+=i)-p)/v,x=W.number(y.x,g.x,b),b=W.number(y.y,g.y,b);0<=x&&x<u&&0<=b&&b<u&&0<=d-c&&d+c<=h&&((b=new W.default$25(x,b,_,m))._round(),r&&!$(e,b,a,r,o)||f.push(b))}p+=v}return l||f.length||s||(f=t(e,p/2,i,r,o,a,s,!0,u)),f}(t,r?e/2*s%e:(i/2+2*o)*a*s%e,e,u,n,i*a,r,!1,l)}(k,m,v,r.vertical||r.horizontal,o,24,d,n.overscaling,W.default$10);S<P.length;S+=1){var C=P[S],M=r.horizontal;M&&function(t,e,n,i){t=t.compareText;if(e in t){for(var r=t[e],o=r.length-1;0<=o;o--)if(i.dist(r[o])<n)return!0}else t[e]=[];return t[e].push(i),!1}(n,M.text,w,C)||u(k,C)}else if("line-center"===x)for(var L=0,I=i.geometry;L<I.length;L+=1){var A,z=I[L];1<z.length&&((A=function(t,e,n,i,r,o){for(var a=n?.6*r*o:0,s=K(n,i),l=0,u=H(t)/2,c=0;c<t.length-1;c++){var h=t[c],p=t[c+1],d=h.dist(p);if(u<l+d){var f=(u-l)/d,m=W.number(h.x,p.x,f),f=W.number(h.y,p.y,f),h=new W.default$25(m,f,p.angleTo(h),c);return(h._round(),a&&!$(t,h,s,a,e))?void 0:h}l+=d}}(z,v,r.vertical||r.horizontal,o,24,d))&&u(z,A))}else if("Polygon"===i.type)for(var O=0,R=W.default$26(i.geometry,0);O<R.length;O+=1){var D=R[O],N=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var i=1/0,r=1/0,o=-1/0,a=-1/0,s=t[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<i)&&(i=u.x),(!l||u.y<r)&&(r=u.y),(!l||u.x>o)&&(o=u.x),(!l||u.y>a)&&(a=u.y)}var c=o-i,h=a-r,p=Math.min(c,h),d=p/2,f=new Y(null,Q);if(0===p)return new W.default(i,r);for(var m=i;m<o;m+=p)for(var y=r;y<a;y+=p)f.push(new tt(m+d,y+d,d,t));for(var g=function(t){for(var e=0,n=0,i=0,r=t[0],o=0,a=r.length,s=a-1;o<a;s=o++){var l=r[o],u=r[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,i+=(l.y+u.y)*c,e+=3*c}return new tt(n/e,i/e,0,t)}(t),v=f.length;f.length;){var _=f.pop();(_.d>g.d||!g.d)&&(g=_,n&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,v)),_.max-g.d<=e||(d=_.h/2,f.push(new tt(_.p.x-d,_.p.y-d,d,t)),f.push(new tt(_.p.x+d,_.p.y-d,d,t)),f.push(new tt(_.p.x-d,_.p.y+d,d,t)),f.push(new tt(_.p.x+d,_.p.y+d,d,t)),v+=4)}return n&&(console.log("num probes: "+v),console.log("best distance: "+g.d)),g.p}(D,16);u(D[0],new W.default$25(N.x,N.y,0))}else if("LineString"===i.type)for(var B=0,F=i.geometry;B<F.length;B+=1){var j=F[B];u(j,new W.default$25(j[0].x,j[0].y,0))}else if("Point"===i.type)for(var U=0,V=i.geometry;U<V.length;U+=1)for(var Z=0,q=V[U];Z<q.length;Z+=1){var G=q[Z];u([G],new W.default$25(G.x,G.y,0))}}(t,v,w,k,x,c)}o&&t.generateCollisionDebugBuffers()}function et(t,e,n,i,r,o,a,s,l,u,c,h){var p=function(t,e,n,i,r){for(var o=e.layout.get("text-rotate").evaluate(i,{})*Math.PI/180,a=e.layout.get("text-offset").evaluate(i,{}).map(function(t){return 24*t}),s=t.positionedGlyphs,l=[],u=0;u<s.length;u++){var c,h,p,d,f,m,y,g,v,_=s[u],b=r[_.glyph];!b||(c=b.rect)&&(m=W.GLYPH_PBF_BORDER+1,y=b.metrics.advance/2,h=n?[_.x+y,_.y]:[0,0],p=n?[0,0]:[_.x+y+a[0],_.y+a[1]],f=b.metrics.left-m-y+p[0],d=-b.metrics.top-m+p[1],b=f+c.w,m=d+c.h,p=new W.default(f,d),d=new W.default(b,d),f=new W.default(f,m),m=new W.default(b,m),n&&_.vertical&&(g=new W.default(-y,y),y=-Math.PI/2,v=new W.default(5,0),p._rotateAround(y,g)._add(v),d._rotateAround(y,g)._add(v),f._rotateAround(y,g)._add(v),m._rotateAround(y,g)._add(v)),o&&(g=Math.sin(o),v=[v=Math.cos(o),-g,g,v],p._matMult(v),d._matMult(v),f._matMult(v),m._matMult(v)),l.push({tl:p,tr:d,bl:f,br:m,tex:c,writingMode:t.writingMode,glyphOffset:h}))}return l}(n,i,r,o,c),n=t.textSizeData,c=null;return"source"===n.functionType?c=[10*i.layout.get("text-size").evaluate(o,{})]:"composite"===n.functionType&&(c=[10*h.compositeTextSizes[0].evaluate(o,{}),10*h.compositeTextSizes[1].evaluate(o,{})]),t.addSymbols(t.text,p,c,a,r,o,l,e,s.lineStartIndex,s.lineLength),u.push(t.text.placedSymbolArray.length-1),4*p.length}i.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];0<t;){var r=t-1>>1,o=e[r];if(0<=n(i,o))break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(s=e[o=a]),0<=n(s,r))break;e[t]=s,t=o}e[t]=r}},Y.default=t;function k(t){var e,n=new W.AlphaImage({width:0,height:0}),i={},r=new W.default$3(0,0,{autoResize:!0});for(e in t){var o,a=t[e],s=i[e]={};for(o in a){var l,u=a[+o];u&&0!==u.bitmap.width&&0!==u.bitmap.height&&(l=r.packOne(u.bitmap.width+2,u.bitmap.height+2),n.resize({width:r.w,height:r.h}),W.AlphaImage.copy(u.bitmap,n,{x:0,y:0},{x:l.x+1,y:l.y+1},u.bitmap),s[o]={rect:l,metrics:u.metrics})}}r.shrink(),n.resize({width:r.w,height:r.h}),this.image=n,this.positions=i}W.register("GlyphAtlas",k);function n(t){this.tileID=new W.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming}function S(t,e){for(var n=new W.default$23(e),i=0,r=t;i<r.length;i+=1)r[i].recalculate(n)}n.prototype.parse=function(t,e,n,r){var i=this;this.status="parsing",this.data=t,this.collisionBoxArray=new W.CollisionBoxArray;var o=new W.default$29(Object.keys(t.layers).sort()),a=new W.default$28(this.tileID);a.bucketLayerIDs=[];var s,l,u,c,h={},p={featureIndex:a,iconDependencies:{},glyphDependencies:{}},d=e.familiesBySource[this.source];for(c in d){var f=t.layers[c];if(f){1===f.version&&W.warnOnce('Vector tile source "'+i.source+'" layer "'+c+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var m=o.encode(c),y=[],g=0;g<f.length;g++){var v=f.feature(g);y.push({feature:v,index:g,sourceLayerIndex:m})}for(var _=0,b=d[c];_<b.length;_+=1){var x=b[_],w=x[0];w.minzoom&&i.zoom<Math.floor(w.minzoom)||w.maxzoom&&i.zoom>=w.maxzoom||"none"!==w.visibility&&(S(x,i.zoom),(h[w.id]=w.createBucket({index:a.bucketLayerIDs.length,layers:x,zoom:i.zoom,pixelRatio:i.pixelRatio,overscaling:i.overscaling,collisionBoxArray:i.collisionBoxArray,sourceLayerIndex:m,sourceID:i.source})).populate(y,p),a.bucketLayerIDs.push(x.map(function(t){return t.id})))}}}e=W.mapObject(p.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(e).length?n.send("getGlyphs",{uid:this.uid,stacks:e},function(t,e){s||(s=t,l=e,T.call(i))}):l={};e=Object.keys(p.iconDependencies);function T(){if(s)return r(s);if(l&&u){var t,e=new k(l),n=new W.default$30(u);for(t in h){var i=h[t];i instanceof W.default$27&&(S(i.layers,this.zoom),E(i,l,e.positions,u,n.positions,this.showCollisionBoxes))}this.status="done",r(null,{buckets:W.values(h).filter(function(t){return!t.isEmpty()}),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,iconAtlasImage:n.image})}}e.length?n.send("getImages",{icons:e},function(t,e){s||(s=t,u=e,T.call(i))}):u={},T.call(this)};var o="undefined"!=typeof performance,c={getEntriesByName:function(t){return!!(o&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(o&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(o&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(o&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(o&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},t=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},c.mark(this._marks.start)};function a(t,n){var e=W.getArrayBuffer(t.request,function(t,e){t?n(t):e&&n(null,{vectorTile:new W.default$31.VectorTile(new W.default$32(e.data)),rawData:e.data,cacheControl:e.cacheControl,expires:e.expires})});return function(){e.cancel(),n()}}t.prototype.finish=function(){c.mark(this._marks.end);var t=c.getEntriesByName(this._marks.measure);return 0===t.length&&(c.measure(this._marks.measure,this._marks.start,this._marks.end),t=c.getEntriesByName(this._marks.measure),c.clearMarks(this._marks.start),c.clearMarks(this._marks.end),c.clearMeasures(this._marks.measure)),t},c.Performance=t;function s(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||a,this.loading={},this.loaded={}}s.prototype.loadTile=function(t,o){var a=this,s=t.uid;this.loading||(this.loading={});var l=!!(t&&t.request&&t.request.collectResourceTiming)&&new c.Performance(t.request),u=this.loading[s]=new n(t);u.abort=this.loadVectorData(t,function(t,e){if(delete a.loading[s],t||!e)return o(t);var n=e.rawData,i={};e.expires&&(i.expires=e.expires),e.cacheControl&&(i.cacheControl=e.cacheControl);var r={};!l||(t=l.finish())&&(r.resourceTiming=JSON.parse(JSON.stringify(t))),u.vectorTile=e.vectorTile,u.parse(e.vectorTile,a.layerIndex,a.actor,function(t,e){return t||!e?o(t):void o(null,W.extend({rawTileData:n.slice(0)},e,i,r))}),a.loaded=a.loaded||{},a.loaded[s]=u})},s.prototype.reloadTile=function(t,i){var r,e=this.loaded,n=t.uid,o=this;e&&e[n]&&((r=e[n]).showCollisionBoxes=t.showCollisionBoxes,t=function(t,e){var n=r.reloadCallback;n&&(delete r.reloadCallback,r.parse(r.vectorTile,o.layerIndex,o.actor,n)),i(t,e)},"parsing"===r.status?r.reloadCallback=t:"done"===r.status&&r.parse(r.vectorTile,this.layerIndex,this.actor,t))},s.prototype.abortTile=function(t,e){var n=this.loading,t=t.uid;n&&n[t]&&n[t].abort&&(n[t].abort(),delete n[t]),e()},s.prototype.removeTile=function(t,e){var n=this.loaded,t=t.uid;n&&n[t]&&delete n[t],e()};function l(){this.loading={},this.loaded={}}l.prototype.loadTile=function(t,e){var n=t.uid,i=t.encoding,r=new W.default$33(n);(this.loading[n]=r).loadFromImage(t.rawImageData,i),delete this.loading[n],this.loaded=this.loaded||{},e(null,this.loaded[n]=r)},l.prototype.removeTile=function(t){var e=this.loaded,t=t.uid;e&&e[t]&&delete e[t]};var u=6378137;function h(t){var e=0;if(t&&0<t.length){e+=Math.abs(p(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(p(t[n]))}return e}function p(t){var e,n,i,r,o,a,s=0,l=t.length;if(2<l){for(a=0;a<l;a++)o=a===l-2?(i=l-2,r=l-1,0):a===l-1?(i=l-1,r=0,1):(r=(i=a)+1,a+2),e=t[i],n=t[r],s+=(d(t[o][0])-d(e[0]))*Math.sin(d(n[1]));s=s*u*u/2}return s}function d(t){return t*Math.PI/180}var f={geometry:function t(e){var n,i=0;switch(e.type){case"Polygon":return h(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=h(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},ring:p};function y(e,n){return function(t){return e(t,n)}}function g(t,e){e=!!e,t[0]=v(t[0],e);for(var n=1;n<t.length;n++)t[n]=v(t[n],!e);return t}function v(t,e){return 0<=f.ring(t)===e?t:t.reverse()}function _(t){this._feature=t,this.extent=W.default$10,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}var b=W.default$31.VectorTileFeature.prototype.toGeoJSON;_.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],e=0,n=this._feature.geometry;e<n.length;e+=1){var i=n[e];t.push([new W.default(i[0],i[1])])}return t}for(var r=[],o=0,a=this._feature.geometry;o<a.length;o+=1){for(var s=[],l=0,u=a[o];l<u.length;l+=1){var c=u[l];s.push(new W.default(c[0],c[1]))}r.push(s)}return r},_.prototype.toGeoJSON=function(t,e,n){return b.call(this,t,e,n)};var x=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=W.default$10,this.length=t.length,this._features=t};x.prototype.feature=function(t){return new _(this._features[t])};var t=W.__moduleExports.VectorTileFeature,w=T;function T(t,e){this.options=e||{},this.features=t,this.length=t.length}function P(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}T.prototype.feature=function(t){return new P(this.features[t],this.options.extent)},P.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],i=[],r=0;r<n.length;r++)i.push(new W.default$34(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},P.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++)var l=a[s],e=Math.min(e,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y);return[e,i,n,r]},P.prototype.toGeoJSON=t.prototype.toGeoJSON;var C=M,t=w;function M(t){var e=new W.__moduleExports$1;return function(t,e){for(var n in t.layers)e.writeMessage(3,L,t.layers[n])}(t,e),e.finish()}function L(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);for(var n={keys:[],values:[],keycache:{},valuecache:{}},i=0;i<t.length;i++)n.feature=t.feature(i),e.writeMessage(2,I,n);var r=n.keys;for(i=0;i<r.length;i++)e.writeStringField(3,r[i]);var o=n.values;for(i=0;i<o.length;i++)e.writeMessage(4,D,o[i])}function I(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,A,t),e.writeVarintField(3,n.type),e.writeMessage(4,R,n)}function A(t,e){var n,i=t.feature,r=t.keys,o=t.values,a=t.keycache,s=t.valuecache;for(n in i.properties){var l=a[n];void 0===l&&(r.push(n),l=r.length-1,a[n]=l),e.writeVarint(l);var u=i.properties[n],c=typeof u;"string"!=c&&"boolean"!=c&&"number"!=c&&(u=JSON.stringify(u));l=c+":"+u,c=s[l];void 0===c&&(o.push(u),c=o.length-1,s[l]=c),e.writeVarint(c)}}function z(t,e){return(e<<3)+(7&t)}function O(t){return t<<1^t>>31}function R(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===i&&(u=l.length),e.writeVarint(z(1,u));for(var c=3===i?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==i&&e.writeVarint(z(2,c-1));var p=l[h].x-r,d=l[h].y-o;e.writeVarint(O(p)),e.writeVarint(O(d)),r+=p,o+=d}3===i&&e.writeVarint(7)}}function D(t,e){var n=typeof t;"string"==n?e.writeStringField(1,t):"boolean"==n?e.writeBooleanField(7,t):"number"==n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function N(t,e,n,i){B(t,n,i),B(e,2*n,2*i),B(e,2*n+1,2*i+1)}function B(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function F(t,e,n,i){n=t-n,i=e-i;return n*n+i*i}function j(t,e,n,i,r){return new U(t,e,n,i,r)}function U(t,e,n,i,r){e=e||V,n=n||Z,r=r||Array,this.nodeSize=i||64,this.points=t,this.ids=new r(t.length),this.coords=new r(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=n(t[o]);!function t(e,n,i,r,o,a){var s;o-r<=i||(function t(e,n,i,r,o,a){for(;r<o;){var s,l,u,c;600<o-r&&(s=o-r+1,l=i-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1),t(e,n,i,Math.max(r,Math.floor(i-l*u/s+c)),Math.min(o,Math.floor(i+(s-l)*u/s+c)),a));var h=n[2*i+a],p=r,d=o;for(N(e,n,r,i),n[2*o+a]>h&&N(e,n,r,o);p<d;){for(N(e,n,p,d),p++,d--;n[2*p+a]<h;)p++;for(;n[2*d+a]>h;)d--}n[2*r+a]===h?N(e,n,r,d):N(e,n,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}(e,n,s=Math.floor((r+o)/2),r,o,a%2),t(e,n,i,r,s-1,a+1),t(e,n,i,s+1,o,a+1))}(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function V(t){return t[0]}function Z(t){return t[1]}function q(t){this.options=ot(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function G(t){return{type:"Feature",properties:nt(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(t=(180-360*t.y)*Math.PI/180,360*Math.atan(Math.exp(t))/Math.PI-90)]}}}function nt(t){var e=t.numPoints,n=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return ot(ot({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function it(t){return t/360+.5}function rt(t){t=Math.sin(t*Math.PI/180),t=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return t<0?0:1<t?1:t}function ot(t,e){for(var n in e)t[n]=e[n];return t}function at(t){return t.x}function st(t){return t.y}function lt(t,e,n,i){i={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)ut(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)ut(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)ut(t,e[i][r])}(i),i}function ut(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function ct(t,e,n){if(e.geometry){var i=e.geometry.coordinates,r=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[];if("Point"===r)ht(i,a);else if("MultiPoint"===r)for(var s=0;s<i.length;s++)ht(i[s],a);else if("LineString"===r)pt(i,a,o,!1);else if("MultiLineString"===r){if(n.lineMetrics){for(s=0;s<i.length;s++)a=[],pt(i[s],a,o,!1),t.push(lt(e.id,"LineString",a,e.properties));return}dt(i,a,o,!1)}else if("Polygon"===r)dt(i,a,o,!0);else{if("MultiPolygon"!==r){if("GeometryCollection"!==r)throw new Error("Input data is not a valid GeoJSON object.");for(s=0;s<e.geometry.geometries.length;s++)ct(t,{id:e.id,geometry:e.geometry.geometries[s],properties:e.properties},n);return}for(s=0;s<i.length;s++){var l=[];dt(i[s],l,o,!0),a.push(l)}}t.push(lt(e.id,r,a,e.properties))}}function ht(t,e){e.push(ft(t[0])),e.push(mt(t[1])),e.push(0)}function pt(t,e,n,i){for(var r,o,a=0,s=0;s<t.length;s++){var l=ft(t[s][0]),u=mt(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=i?(r*u-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(u-o,2))),r=l,o=u}var c=e.length-3;e[2]=1,function t(e,n,i,r){for(var o,a,s,l,u,c,h,p,d,f=r,m=i-n>>1,y=i-n,g=e[n],v=e[n+1],_=e[i],b=e[i+1],x=n+3;x<i;x+=3){var w=(a=e[x],s=e[x+1],w=d=p=void 0,w=(h=b)-(u=v),0===(d=(c=_)-(l=g))&&0===w||(1<(p=((a-l)*d+(s-u)*w)/(d*d+w*w))?(l=c,u=h):0<p&&(l+=d*p,u+=w*p)),(d=a-l)*d+(w=s-u)*w);f<w?(o=x,f=w):w!==f||(w=Math.abs(x-m))<y&&(o=x,y=w)}r<f&&(3<o-n&&t(e,n,o,r),e[o+2]=f,3<i-o&&t(e,o,i,r))}(e,0,c,n),e[2+c]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function dt(t,e,n,i){for(var r=0;r<t.length;r++){var o=[];pt(t[r],o,n,i),e.push(o)}}function ft(t){return t/360+.5}function mt(t){t=Math.sin(t*Math.PI/180),t=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return t<0?0:1<t?1:t}function yt(t,e,n,i,r,o,a,s){if(i/=e,o>=(n/=e)&&a<i)return t;if(a<n||i<=o)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.type,d=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(n<=d&&f<i)l.push(c);else if(!(f<n||i<=d)){var m=[];if("Point"===p||"MultiPoint"===p)!function(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];n<=a&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}(h,m,n,i,r);else if("LineString"===p)gt(h,m,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===p)_t(h,m,n,i,r,!1);else if("Polygon"===p)_t(h,m,n,i,r,!0);else if("MultiPolygon"===p)for(var y=0;y<h.length;y++){var g=[];_t(h[y],g,n,i,r,!0),g.length&&m.push(g)}if(m.length)if(s.lineMetrics&&"LineString"===p)for(y=0;y<m.length;y++)l.push(lt(c.id,p,m[y],c.tags));else"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(lt(c.id,p,m,c.tags))}}return l.length?l:null}function gt(t,e,n,i,r,o,a){for(var s,l,u=vt(t),c=0===r?xt:wt,h=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],m=t[p+2],y=t[p+3],g=t[p+4],v=0===r?d:f,_=0===r?y:g,b=!1;a&&(s=Math.sqrt(Math.pow(d-y,2)+Math.pow(f-g,2))),v<n?n<=_&&(l=c(u,d,f,y,g,n),a&&(u.start=h+s*l)):i<=v?_<i&&(l=c(u,d,f,y,g,i),a&&(u.start=h+s*l)):bt(u,d,f,m),_<n&&n<=v&&(l=c(u,d,f,y,g,n),b=!0),i<_&&v<=i&&(l=c(u,d,f,y,g,i),b=!0),!o&&b&&(a&&(u.end=h+s*l),e.push(u),u=vt(t)),a&&(h+=s)}var x=t.length-3,d=t[x],f=t[1+x],m=t[2+x];(v=0===r?d:f)>=n&&v<=i&&bt(u,d,f,m),x=u.length-3,o&&3<=x&&(u[x]!==u[0]||u[1+x]!==u[1])&&bt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function vt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function _t(t,e,n,i,r,o){for(var a=0;a<t.length;a++)gt(t[a],e,n,i,r,o,!1)}function bt(t,e,n,i){t.push(e),t.push(n),t.push(i)}function xt(t,e,n,i,r,o){e=(o-e)/(i-e);return t.push(o),t.push(n+(r-n)*e),t.push(1),e}function wt(t,e,n,i,r,o){n=(o-n)/(r-n);return t.push(e+(i-e)*n),t.push(o),t.push(1),n}function Tt(t,e){for(var n=[],i=0;i<t.length;i++){var r,o=t[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=Et(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(Et(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(Et(o.geometry[s][u],e));r.push(l)}n.push(lt(o.id,a,r,o.tags))}return n}function Et(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function kt(t,e){if(t.transformed)return t;for(var n,i=1<<t.z,r=t.x,o=t.y,a=0;a<t.features.length;a++){var s=t.features[a],l=s.geometry,u=s.type;if(s.geometry=[],1===u)for(n=0;n<l.length;n+=2)s.geometry.push(St(l[n],l[n+1],e,i,r,o));else for(n=0;n<l.length;n++){for(var c=[],h=0;h<l[n].length;h+=2)c.push(St(l[n][h],l[n][h+1],e,i,r,o));s.geometry.push(c)}}return t.transformed=!0,t}function St(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function Pt(t,e,n,i,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,function(t,e,n,i){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Ct(a,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)Ct(a,r[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var u=r[l];for(s=0;s<u.length;s++)Ct(a,u[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}i={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(i.id=e.id),t.features.push(i)}}(a,t[s],o,r);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function Ct(t,e,n,i,r,o){var a=i*i;if(0<i&&e.size<(r?a:i))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(0<n===e)for(i=0,r=t.length;i<r/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=a,t[r-1-i]=s}}(s,o),t.push(s)}}function Mt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");var i,r,o,a,s=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)ct(n,t.features[i],e);else"Feature"===t.type?ct(n,t,e):ct(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=s,o=(r=e).buffer/r.extent,t=yt(a=i,1,-1-o,o,0,-1,2,r),e=yt(i,1,1-o,2+o,0,-1,2,r),(t||e)&&(a=yt(i,1,-o,1+o,0,-1,2,r)||[],t&&(a=Tt(t,1).concat(a)),e&&(a=a.concat(Tt(e,-1)))),(s=a).length&&this.splitTile(s,0,0,0),n&&(s.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Lt(t,e,n){return 32*((1<<t)*n+e)+t}function It(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);t=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!t)return e(null,null);n=new x(t.features),t=C(n);0===t.byteOffset&&t.byteLength===t.buffer.byteLength||(t=new Uint8Array(t)),e(null,{vectorTile:n,rawData:t.buffer})}C.fromVectorTileJs=M,C.fromGeojsonVt=function(t,e){e=e||{};var n,i={};for(n in t)i[n]=new w(t[n].features,e),i[n].name=n,i[n].version=e.version,i[n].extent=e.extent;return M({layers:i})},C.GeoJSONWrapper=t,Mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!(q.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!(U.prototype={range:function(t,e,n,i){return function(t,e,n,i,r,o,a){for(var s=[0,t.length-1,0],l=[];s.length;){var u=s.pop(),c=s.pop(),h=s.pop();if(c-h<=a)for(var p=h;p<=c;p++)f=e[2*p],m=e[2*p+1],n<=f&&f<=r&&i<=m&&m<=o&&l.push(t[p]);else{var d=Math.floor((h+c)/2),f=e[2*d],m=e[2*d+1];n<=f&&f<=r&&i<=m&&m<=o&&l.push(t[d]);var y=(u+1)%2;(0===u?n<=f:i<=m)&&(s.push(h),s.push(d-1),s.push(y)),(0===u?f<=r:m<=o)&&(s.push(d+1),s.push(c),s.push(y))}}return l}(this.ids,this.coords,t,e,n,i,this.nodeSize)},within:function(t,e,n){return function(t,e,n,i,r,o){for(var a=[0,t.length-1,0],s=[],l=r*r;a.length;){var u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var p=h;p<=c;p++)F(e[2*p],e[2*p+1],n,i)<=l&&s.push(t[p]);else{var d=Math.floor((h+c)/2),f=e[2*d],m=e[2*d+1];F(f,m,n,i)<=l&&s.push(t[d]);var y=(u+1)%2;(0===u?n-r<=f:i-r<=m)&&(a.push(h),a.push(d-1),a.push(y)),(0===u?f<=n+r:m<=i+r)&&(a.push(d+1),a.push(c),a.push(y))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}),reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;for(var i,r,o=[],a=0;a<t.length;a++)t[a].geometry&&o.push({x:it((r=t[i=a].geometry.coordinates)[0]),y:rt(r[1]),zoom:1/0,id:i,parentId:-1});this.trees[this.options.maxZoom+1]=j(o,at,st,this.options.nodeSize,Float32Array),e&&console.timeEnd(n);for(var s=this.options.maxZoom;s>=this.options.minZoom;s--){var l=+Date.now(),o=this._cluster(o,s);this.trees[s]=j(o,at,st,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",s,o.length,+Date.now()-l)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){var n=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(360<=t[2]-t[0])n=-180,r=180;else if(r<n){var a=this.getClusters([n,i,180,o],e),t=this.getClusters([-180,i,r,o],e);return a.concat(t)}for(var s=this.trees[this._limitZoom(e)],l=s.range(it(n),rt(o),it(r),rt(i)),u=[],c=0;c<l.length;c++){var h=s.points[l[c]];u.push(h.numPoints?G(h):this.points[h.id])}return u},getChildren:function(t){var e=t>>5,n=t%32,i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);e=r.points[e];if(!e)throw new Error(i);for(var n=this.options.radius/(this.options.extent*Math.pow(2,n-1)),o=r.within(e.x,e.y,n),a=[],s=0;s<o.length;s++){var l=r.points[o[s]];l.parentId===t&&a.push(l.numPoints?G(l):this.points[l.id])}if(0===a.length)throw new Error(i);return a},getLeaves:function(t,e,n){e=e||10,n=n||0;var i=[];return this._appendLeaves(i,t,e,n,0),i},getTile:function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options.extent,a=this.options.radius/o,s=(n-a)/r,t=(n+1+a)/r,o={features:[]};return this._addTileFeatures(i.range((e-a)/r,s,(e+1+a)/r,t),i.points,e,n,r,o),0===e&&this._addTileFeatures(i.range(1-a/r,s,1,t),i.points,r,n,r,o),e===r-1&&this._addTileFeatures(i.range(0,s,a/r,t),i.points,-1,n,r,o),o.features.length?o:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,i,r){for(var o=this.getChildren(e),a=0;a<o.length;a++){var s=o[a].properties;if(s&&s.cluster?r+s.point_count<=i?r+=s.point_count:r=this._appendLeaves(t,s.cluster_id,n,i,r):r<i?r++:t.push(o[a]),t.length===n)break}return r},_addTileFeatures:function(t,e,n,i,r,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*r-n)),Math.round(this.options.extent*(s.y*r-i))]],tags:s.numPoints?nt(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],i=this.options.radius/(this.options.extent*Math.pow(2,e)),r=0;r<t.length;r++){var o=t[r];if(!(o.zoom<=e)){o.zoom=e;var a=this.trees[e+1],s=a.within(o.x,o.y,i),l=o.numPoints||1,u=o.x*l,c=o.y*l,h=null;this.options.reduce&&(h=this.options.initial(),this._accumulate(h,o));for(var p=(r<<5)+(e+1),d=0;d<s.length;d++){var f,m=a.points[s[d]];m.zoom<=e||(m.zoom=e,f=m.numPoints||1,u+=m.x*f,c+=m.y*f,l+=f,m.parentId=p,this.options.reduce&&this._accumulate(h,m))}1===l?n.push(o):(o.parentId=p,n.push({x:u/l,y:c/l,zoom:1/0,id:p,parentId:-1,numPoints:l,properties:h}))}}return n},_accumulate:function(t,e){e=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,e)}}),debug:0},Mt.prototype.splitTile=function(t,e,n,i,r,o,a){for(var s=[t,e,n,i],l=this.options,u=l.debug;s.length;){i=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c,h,p,d,f,m,y,g,v=1<<e,_=Lt(e,n,i),b=this.tiles[_];if(!b&&(1<u&&console.time("creation"),b=this.tiles[_]=Pt(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),u)&&(1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,b.numFeatures,b.numPoints,b.numSimplified),console.timeEnd("creation")),g="z"+e,this.stats[g]=(this.stats[g]||0)+1,this.total++),b.source=t,r){if(e===l.maxZoom||e===r)continue;var x=1<<r-e;if(n!==Math.floor(o/x)||i!==Math.floor(a/x))continue}else if(e===l.indexMaxZoom||b.numPoints<=l.indexMaxPoints)continue;b.source=null,0!==t.length&&(1<u&&console.time("clipping"),f=.5-(d=.5*l.buffer/l.extent),m=1+d,y=c=h=p=null,g=yt(t,v,n-d,n+(_=.5+d),0,b.minX,b.maxX,l),x=yt(t,v,n+f,n+m,0,b.minX,b.maxX,l),t=null,g&&(y=yt(g,v,i-d,i+_,1,b.minY,b.maxY,l),c=yt(g,v,i+f,i+m,1,b.minY,b.maxY,l),g=null),x&&(h=yt(x,v,i-d,i+_,1,b.minY,b.maxY,l),p=yt(x,v,i+f,i+m,1,b.minY,b.maxY,l),x=null),1<u&&console.timeEnd("clipping"),s.push(y||[],e+1,2*n,2*i),s.push(c||[],e+1,2*n,2*i+1),s.push(h||[],e+1,2*n+1,2*i),s.push(p||[],e+1,2*n+1,2*i+1))}},Mt.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,o=i.debug;if(t<0||24<t)return null;i=1<<t,i=Lt(t,e=(e%i+i)%i,n);if(this.tiles[i])return kt(this.tiles[i],r);1<o&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var a,s=t,l=e,u=n;!a&&0<s;)s--,l=Math.floor(l/2),u=Math.floor(u/2),a=this.tiles[Lt(s,l,u)];return a&&a.source?(1<o&&console.log("found parent tile z%d-%d-%d",s,l,u),1<o&&console.time("drilling down"),this.splitTile(a.source,s,l,u,t,e,n),1<o&&console.timeEnd("drilling down"),this.tiles[i]?kt(this.tiles[i],r):null):null};var At,zt=((At=s)&&(Ot.__proto__=At),((Ot.prototype=Object.create(At&&At.prototype)).constructor=Ot).prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ot.prototype._loadData=function(){var r,o,a,s=this;this._pendingCallback&&this._pendingLoadDataParams&&(r=this._pendingCallback,o=this._pendingLoadDataParams,delete this._pendingCallback,delete this._pendingLoadDataParams,a=!!(o&&o.request&&o.request.collectResourceTiming)&&new c.Performance(o.request),this.loadGeoJSON(o,function(t,e){if(t||!e)return r(t);if("object"!=typeof e)return r(new Error("Input data is not a valid GeoJSON object."));!function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(y(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return r=n,"Polygon"===(i=e).type?i.coordinates=g(i.coordinates,r):"MultiPolygon"===i.type&&(i.coordinates=i.coordinates.map(y(g,r))),i;default:return e}var i,r}(e,!0);try{s._geoJSONIndex=o.cluster?new q(o.superclusterOptions).load(e.features):new Mt(e,o.geojsonVtOptions)}catch(t){return r(t)}s.loaded={};var n,i={};!a||(n=a.finish())&&(i.resourceTiming={},i.resourceTiming[o.source]=JSON.parse(JSON.stringify(n))),r(null,i)}))},Ot.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ot.prototype.reloadTile=function(t,e){var n=this.loaded,i=t.uid;return n&&n[i]?At.prototype.reloadTile.call(this,t,e):this.loadTile(t,e)},Ot.prototype.loadGeoJSON=function(t,e){if(t.request)W.getJSON(t.request,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},Ot.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},Ot.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},Ot.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},Ot.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},Ot),t=function(t){var n=this;this.self=t,this.actor=new W.default$9(t,this),this.layerIndexes={},this.workerSourceTypes={vector:s,geojson:zt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(t){if(W.plugin.isLoaded())throw new Error("RTL text plugin already registered.");W.plugin.applyArabicShaping=t.applyArabicShaping,W.plugin.processBidirectionalText=t.processBidirectionalText}};function Ot(t,e,n){At.call(this,t,e,It),n&&(this.loadGeoJSON=n)}return t.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},t.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},t.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},t.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},t.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},t.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},t.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},t.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},t.prototype.removeSource=function(t,e,n){var i;this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]&&(i=this.workerSources[t][e.type][e.source],delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n())},t.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},t.prototype.loadRTLTextPlugin=function(t,e,n){try{W.plugin.isLoaded()||(this.self.importScripts(e),n(W.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+e)))}catch(t){n(t.toString())}},t.prototype.getLayerIndex=function(t){return this.layerIndexes[t]||(this.layerIndexes[t]=new e)},t.prototype.getWorkerSource=function(i,t,e){var n,r=this;return this.workerSources[i]||(this.workerSources[i]={}),this.workerSources[i][t]||(this.workerSources[i][t]={}),this.workerSources[i][t][e]||(n={send:function(t,e,n){r.actor.send(t,e,n,i)}},this.workerSources[i][t][e]=new this.workerSourceTypes[t](n,this.getLayerIndex(i))),this.workerSources[i][t][e]},t.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new l),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new t(self),t}),t(0,function(R){var n=R.createCommonjsModule(function(t){function r(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if("Worker"in window&&"Blob"in window&&"URL"in window){var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&(e=t&&t.failIfMajorPerformanceCaveat,void 0===o[e]&&(o[e]=(n=e,i=document.createElement("canvas"),(t=Object.create(r.webGLContextAttributes)).failIfMajorPerformanceCaveat=n,i.probablySupportsContext?i.probablySupportsContext("webgl",t)||i.probablySupportsContext("experimental-webgl",t):i.supportsContext?i.supportsContext("webgl",t)||i.supportsContext("experimental-webgl",t):i.getContext("webgl",t)||i.getContext("experimental-webgl",t))),o[e]));var e,n,i}t.exports?t.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var o={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),f={create:function(t,e,n){t=R.default$1.document.createElement(t);return e&&(t.className=e),n&&n.appendChild(t),t},createNS:function(t,e){return R.default$1.document.createElementNS(t,e)}},i=R.default$1.document?R.default$1.document.documentElement.style:null;function t(t){if(!i)return null;for(var e=0;e<t.length;e++)if(t[e]in i)return t[e];return t[0]}var e,r=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);f.disableDrag=function(){i&&r&&(e=i[r],i[r]="none")},f.enableDrag=function(){i&&r&&(i[r]=e)};var o=t(["transform","WebkitTransform"]),a=!(f.setTransform=function(t,e){t.style[o]=e});try{var s=Object.defineProperty({},"passive",{get:function(){a=!0}});R.default$1.addEventListener("test",s,s),R.default$1.removeEventListener("test",s,s)}catch(R){a=!1}f.addEventListener=function(t,e,n,i){void 0===i&&(i={}),"passive"in i&&a?t.addEventListener(e,n,i):t.addEventListener(e,n,i.capture)},f.removeEventListener=function(t,e,n,i){void 0===i&&(i={}),"passive"in i&&a?t.removeEventListener(e,n,i):t.removeEventListener(e,n,i.capture)};var l=function(t){t.preventDefault(),t.stopPropagation(),R.default$1.removeEventListener("click",l,!0)};f.suppressClick=function(){R.default$1.addEventListener("click",l,!0),R.default$1.setTimeout(function(){R.default$1.removeEventListener("click",l,!0)},0)},f.mousePos=function(t,e){var n=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new R.default(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},f.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),i=[],r="touchend"===e.type?e.changedTouches:e.touches,o=0;o<r.length;o++)i.push(new R.default(r[o].clientX-n.left-t.clientLeft,r[o].clientY-n.top-t.clientTop));return i},f.mouseButton=function(t){return void 0!==R.default$1.InstallTrigger&&2===t.button&&t.ctrlKey&&0<=R.default$1.navigator.platform.toUpperCase().indexOf("MAC")?0:t.button},f.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var u={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},c="See https://www.mapbox.com/api-documentation/#access-tokens";function h(t,e){var n=v(u.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!u.REQUIRE_ACCESS_TOKEN)return _(t);if(!(e=e||u.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return t.params.push("access_token="+e),_(t)}function p(t){return 0===t.indexOf("mapbox:")}function y(t,e,n,i){var r=v(t);return p(t)?(r.path="/styles/v1"+r.path+"/sprite"+e+n,h(r,i)):(r.path+=""+e+n,_(r))}function d(t,e,n){return e&&p(e)?(e=v(t),t=2<=R.default$2.devicePixelRatio||512===n?"@2x":"",n=R.default$2.supportsWebp?".webp":"$1",e.path=e.path.replace(m,t+n),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(u.ACCESS_TOKEN||""))}(e.params),_(e)):t}var m=/(\.(png|jpg)\d*)(?=$)/,g=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function v(t){t=t.match(g);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function _(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var b=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new R.default$3(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new R.RGBAImage({width:64,height:64}),this.dirty=!0};b.prototype.isLoaded=function(){return this.loaded},b.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var i=n[e],r=i.ids,i=i.callback;this._notify(r,i)}this.requestors=[]}},b.prototype.getImage=function(t){return this.images[t]},b.prototype.addImage=function(t,e){this.images[t]=e},b.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},b.prototype.listImages=function(){return Object.keys(this.images)},b.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var i=0,r=t;i<r.length;i+=1){var o=r[i];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},b.prototype._notify=function(t,e){for(var n={},i=0,r=t;i<r.length;i+=1){var o=r[i],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},b.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},b.prototype.getPattern=function(t){var e=this.patterns[t];if(e)return e.position;var n=this.getImage(t);if(!n)return null;var i=n.data.width+2,r=n.data.height+2,o=this.shelfPack.packOne(i,r);if(!o)return null;this.atlasImage.resize(this.getPixelSize());var a=n.data,s=this.atlasImage,l=o.x+1,e=o.y+1,i=a.width,r=a.height;R.RGBAImage.copy(a,s,{x:0,y:0},{x:l,y:e},{width:i,height:r}),R.RGBAImage.copy(a,s,{x:0,y:r-1},{x:l,y:e-1},{width:i,height:1}),R.RGBAImage.copy(a,s,{x:0,y:0},{x:l,y:e+r},{width:i,height:1}),R.RGBAImage.copy(a,s,{x:i-1,y:0},{x:l-1,y:e},{width:1,height:r}),R.RGBAImage.copy(a,s,{x:0,y:0},{x:l+i,y:e},{width:1,height:r}),this.dirty=!0;n=new R.ImagePosition(o,n);return this.patterns[t]={bin:o,position:n},n},b.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new R.default$4(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)};var x=T,w=1e20;function T(t,e,n,i,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;n=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=n,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(n*n),this.gridInner=new Float64Array(n*n),this.f=new Float64Array(n),this.d=new Float64Array(n),this.z=new Float64Array(n+1),this.v=new Int16Array(n),this.middle=Math.round(n/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function E(t,e,n,i,r,o,a){for(var s=0;s<e;s++){for(var l=0;l<n;l++)i[l]=t[l*e+s];for(k(i,r,o,a,n),l=0;l<n;l++)t[l*e+s]=r[l]}for(l=0;l<n;l++){for(s=0;s<e;s++)i[s]=t[l*e+s];for(k(i,r,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function k(t,e,n,i,r){i[n[0]=0]=-w,i[1]=+w;for(var o=1,a=0;o<r;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=i[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,i[a]=s,i[a+1]=+w}for(a=o=0;o<r;o++){for(;i[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}T.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var r=e.data[4*i+3]/255;this.gridOuter[i]=1==r?0:0==r?w:Math.pow(Math.max(0,.5-r),2),this.gridInner[i]=1==r?w:0==r?0:Math.pow(Math.max(0,r-.5),2)}for(E(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),E(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var o=this.gridOuter[i]-this.gridInner[i];n[i]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n};var S=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};S.prototype.setURL=function(t){this.url=t},S.prototype.getGlyphs=function(t,l){var e,u=this,n=[];for(e in t)for(var i=0,r=t[e];i<r.length;i+=1){var o=r[i];n.push({stack:e,id:o})}R.asyncAll(n,function(t,n){var o,a,i=t.stack,r=t.id,s=u.entries[i],t=(s=s||(u.entries[i]={glyphs:{},requests:{}})).glyphs[r];void 0!==t||(t=u._tinySDF(s,i,r))?n(null,{stack:i,id:r,glyph:t}):65535<256*(o=Math.floor(r/256))?n(new Error("glyphs > 65535 not supported")):((a=s.requests[o])||(a=s.requests[o]=[],S.loadGlyphRange(i,o,u.url,u.requestTransform,function(t,e){if(e)for(var n in e)s.glyphs[+n]=e[+n];for(var i=0,r=a;i<r.length;i+=1)(0,r[i])(t,e);delete s.requests[o]})),a.push(function(t,e){t?n(t):e&&n(null,{stack:i,id:r,glyph:e[r]||null})}))},function(t,e){if(t)l(t);else if(e){for(var n={},i=0,r=e;i<r.length;i+=1){var o=r[i],a=o.stack,s=o.id,o=o.glyph;(n[a]||(n[a]={}))[s]=o&&{id:o.id,bitmap:o.bitmap.clone(),metrics:o.metrics}}l(null,n)}})},S.prototype._tinySDF=function(t,e,n){var i=this.localIdeographFontFamily;if(i&&(R.default$6["CJK Unified Ideographs"](n)||R.default$6["Hangul Syllables"](n))){var r,o=t.tinySDF;return o||(r="400",/bold/i.test(e)?r="900":/medium/i.test(e)?r="500":/light/i.test(e)&&(r="200"),o=t.tinySDF=new S.TinySDF(24,3,8,.25,i,r)),{id:n,bitmap:new R.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=function(t,e,n,i,a){var r=256*e,e=255+r,e=i(function(t){if(!p(t))return t;t=v(t);return t.path="/fonts/v1"+t.path,h(t,void 0)}(n).replace("{fontstack}",t).replace("{range}",r+"-"+e),R.ResourceType.Glyphs);R.getArrayBuffer(e,function(t,e){if(t)a(t);else if(e){for(var n={},i=0,r=R.default$5(e.data);i<r.length;i+=1){var o=r[i];n[o.id]=o}a(null,n)}})},S.TinySDF=x;var P=function(){this.specification=R.default$7.light.position};P.prototype.possiblyEvaluate=function(t,e){return R.sphericalToCartesian(t.expression.evaluate(e))},P.prototype.interpolate=function(t,e,n){return{x:R.number(t.x,e.x,n),y:R.number(t.y,e.y,n),z:R.number(t.z,e.z,n)}};var C,M=new R.Properties({anchor:new R.DataConstantProperty(R.default$7.light.anchor),position:new P,color:new R.DataConstantProperty(R.default$7.light.color),intensity:new R.DataConstantProperty(R.default$7.light.intensity)}),L=((C=R.Evented)&&(A.__proto__=C),((A.prototype=Object.create(C&&C.prototype)).constructor=A).prototype.getLight=function(){return this._transitionable.serialize()},A.prototype.setLight=function(t){if(!this._validate(R.validateLight,t))for(var e in t){var n=t[e];R.endsWith(e,"-transition")?this._transitionable.setTransition(e.slice(0,-"-transition".length),n):this._transitionable.setValue(e,n)}},A.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},A.prototype.hasTransition=function(){return this._transitioning.hasTransition()},A.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},A.prototype._validate=function(t,e){return R.emitValidationErrors(this,t.call(R.validateStyle,R.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:R.default$7})))},A),I=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};function A(t){C.call(this),this._transitionable=new R.Transitionable(M),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}I.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},I.prototype.addDash=function(t,e){var n=e?7:0,i=2*n+1;if(this.nextRow+i>this.height)return R.warnOnce("LineAtlas out of space"),null;for(var r=0,o=0;o<t.length;o++)r+=t[o];for(var a=this.width/r,s=a/2,l=t.length%2==1,u=-n;u<=n;u++)for(var c=this.nextRow+n+u,h=this.width*c,p=l?-t[t.length-1]:0,d=t[0],f=1,m=0;m<this.width;m++){for(;d<m/a;)p=d,d+=t[f],l&&f===t.length-1&&(d+=t[0]),f++;var y=Math.abs(m-p*a),g=Math.abs(m-d*a),v=Math.min(y,g),_=f%2==1,b=void 0;b=e?(y=n?u/n*(1+s):0,_?(g=s-Math.abs(y),Math.sqrt(v*v+g*g)):s-Math.sqrt(v*v+y*y)):(_?1:-1)*v,this.data[3+4*(h+m)]=Math.max(0,Math.min(255,b+128))}var x={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:r};return this.nextRow+=i,this.dirty=!0,x},I.prototype.bind=function(t){t=t.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))};var z=function t(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=R.uniqueId();for(var i=this.workerPool.acquire(this.id),r=0;r<i.length;r++){var o=i[r],o=new t.Actor(o,n,this.id);o.name="Worker "+r,this.actors.push(o)}};function O(t,e,n){function i(t,e){if(t)return n(t);e&&(t=R.pick(e,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]),e.vector_layers&&(t.vectorLayers=e.vector_layers,t.vectorLayerIds=t.vectorLayers.map(function(t){return t.id})),n(null,t))}return t.url?R.getJSON(e(function(t){if(!p(t))return t;t=v(t);return t.path="/v4/"+t.authority+".json",t.params.push("secure"),h(t,void 0)}(t.url),R.ResourceType.Source),i):R.default$2.frame(function(){return i(null,t)})}z.prototype.broadcast=function(n,i,t){t=t||function(){},R.asyncAll(this.actors,function(t,e){t.send(n,i,e)},t)},z.prototype.send=function(t,e,n,i){return"number"==typeof i&&!isNaN(i)||(i=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[i].send(t,e,n),i},z.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},z.Actor=R.default$9;function D(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}D.prototype.wrap=function(){return new D(R.wrap(this.lng,-180,180),this.lat)},D.prototype.toArray=function(){return[this.lng,this.lat]},D.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},D.prototype.toBounds=function(t){var e=360*t/40075017,t=e/Math.cos(Math.PI/180*this.lat);return new N(new D(this.lng-t,this.lat-e),new D(this.lng+t,this.lat+e))},D.convert=function(t){if(t instanceof D)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new D(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new D(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var N=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};N.prototype.setNorthEast=function(t){return this._ne=t instanceof D?new D(t.lng,t.lat):D.convert(t),this},N.prototype.setSouthWest=function(t){return this._sw=t instanceof D?new D(t.lng,t.lat):D.convert(t),this},N.prototype.extend=function(t){var e,n,i=this._sw,r=this._ne;if(t instanceof D)n=e=t;else{if(!(t instanceof N))return Array.isArray(t)?t.every(Array.isArray)?this.extend(N.convert(t)):this.extend(D.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return i||r?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),r.lng=Math.max(n.lng,r.lng),r.lat=Math.max(n.lat,r.lat)):(this._sw=new D(e.lng,e.lat),this._ne=new D(n.lng,n.lat)),this},N.prototype.getCenter=function(){return new D((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},N.prototype.getSouthWest=function(){return this._sw},N.prototype.getNorthEast=function(){return this._ne},N.prototype.getNorthWest=function(){return new D(this.getWest(),this.getNorth())},N.prototype.getSouthEast=function(){return new D(this.getEast(),this.getSouth())},N.prototype.getWest=function(){return this._sw.lng},N.prototype.getSouth=function(){return this._sw.lat},N.prototype.getEast=function(){return this._ne.lng},N.prototype.getNorth=function(){return this._ne.lat},N.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},N.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},N.prototype.isEmpty=function(){return!(this._sw&&this._ne)},N.convert=function(t){return!t||t instanceof N?t:new N(t)};function B(t,e,n){this.bounds=N.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24}B.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},B.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),n=Math.floor(this.latY(this.bounds.getNorth(),t.z)),i=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),r=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<i&&t.y>=n&&t.y<r},B.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},B.prototype.latY=function(t,e){var n=R.clamp(Math.sin(Math.PI/180*t),-.9999,.9999),t=Math.pow(2,e)/(2*Math.PI);return Math.pow(2,e-1)+.5*Math.log((1+n)/(1-n))*-t};var F,j,U,V,Z=((V=R.Evented)&&(J.__proto__=V),((J.prototype=Object.create(V&&V.prototype)).constructor=J).prototype.load=function(){var n=this;this.fire(new R.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._transformRequest,function(t,e){n._tileJSONRequest=null,t?n.fire(new R.ErrorEvent(t)):e&&(R.extend(n,e),e.bounds&&(n.tileBounds=new B(e.bounds,n.minzoom,n.maxzoom)),n.fire(new R.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new R.Event("data",{dataType:"source",sourceDataType:"content"})))})},J.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},J.prototype.onAdd=function(t){this.map=t,this.load()},J.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},J.prototype.serialize=function(){return R.extend({},this._options)},J.prototype.loadTile=function(n,i){var t=d(n.tileID.canonical.url(this.tiles,this.scheme),this.url),t={request:this.map._transformRequest(t,R.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:R.default$2.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function e(t,e){return n.aborted?i(null):t?i(t):(e&&e.resourceTiming&&(n.resourceTiming=e.resourceTiming),this.map._refreshExpiredTiles&&n.setExpiryData(e),n.loadVectorData(e,this.map.painter),i(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}t.request.collectResourceTiming=this._collectResourceTiming,void 0===n.workerID||"expired"===n.state?n.workerID=this.dispatcher.send("loadTile",t,e.bind(this)):"loading"===n.state?n.reloadCallback=i:this.dispatcher.send("reloadTile",t,e.bind(this),n.workerID)},J.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},J.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},J.prototype.hasTransition=function(){return!1},J),q=((U=R.Evented)&&(X.__proto__=U),((X.prototype=Object.create(U&&U.prototype)).constructor=X).prototype.load=function(){var n=this;this.fire(new R.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._transformRequest,function(t,e){n._tileJSONRequest=null,t?n.fire(new R.ErrorEvent(t)):e&&(R.extend(n,e),e.bounds&&(n.tileBounds=new B(e.bounds,n.minzoom,n.maxzoom)),n.fire(new R.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new R.Event("data",{dataType:"source",sourceDataType:"content"})))})},X.prototype.onAdd=function(t){this.map=t,this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},X.prototype.serialize=function(){return R.extend({},this._options)},X.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},X.prototype.loadTile=function(i,r){var o=this,t=d(i.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);i.request=R.getImage(this.map._transformRequest(t,R.ResourceType.Tile),function(t,e){var n;delete i.request,i.aborted?(i.state="unloaded",r(null)):t?(i.state="errored",r(t)):e&&(o.map._refreshExpiredTiles&&i.setExpiryData(e),delete e.cacheControl,delete e.expires,t=(n=o.map.painter.context).gl,i.texture=o.map.painter.getTileTexture(e.width),i.texture?i.texture.update(e,{useMipmap:!0}):(i.texture=new R.default$4(n,e,t.RGBA,{useMipmap:!0}),i.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE,t.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&t.texParameterf(t.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),i.state="loaded",r(null))})},X.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},X.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},X.prototype.hasTransition=function(){return!1},X),G=((j=q)&&(K.__proto__=j),((K.prototype=Object.create(j&&j.prototype)).constructor=K).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},K.prototype.loadTile=function(n,i){var t=d(n.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);n.request=R.getImage(this.map._transformRequest(t,R.ResourceType.Tile),function(t,e){delete n.request,n.aborted?(n.state="unloaded",i(null)):t?(n.state="errored",i(t)):e&&(this.map._refreshExpiredTiles&&n.setExpiryData(e),delete e.cacheControl,delete e.expires,e=R.default$2.getImageData(e),e={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:e,encoding:this.encoding},n.workerID&&"expired"!==n.state||(n.workerID=this.dispatcher.send("loadDEMTile",e,function(t,e){t&&(n.state="errored",i(t)),e&&(n.dem=e,n.needsHillshadePrepare=!0,n.state="loaded",i(null))}.bind(this))))}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)},K.prototype._getNeighboringTiles=function(t){var e=t.canonical,n=Math.pow(2,e.z),i=(e.x-1+n)%n,r=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+n)%n,a=e.x+1===n?t.wrap+1:t.wrap,s={};return s[new R.OverscaledTileID(t.overscaledZ,r,e.z,i,e.y).key]={backfilled:!1},s[new R.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},0<e.y&&(s[new R.OverscaledTileID(t.overscaledZ,r,e.z,i,e.y-1).key]={backfilled:!1},s[new R.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new R.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<n&&(s[new R.OverscaledTileID(t.overscaledZ,r,e.z,i,e.y+1).key]={backfilled:!1},s[new R.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new R.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),s},K.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},K),W=((F=R.Evented)&&(H.__proto__=F),((H.prototype=Object.create(F&&F.prototype)).constructor=H).prototype.load=function(){var e=this;this.fire(new R.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){t?e.fire(new R.ErrorEvent(t)):(t={dataType:"source",sourceDataType:"metadata"},e._collectResourceTiming&&e._resourceTiming&&0<e._resourceTiming.length&&(t.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new R.Event("data",t)))})},H.prototype.onAdd=function(t){this.map=t,this.load()},H.prototype.setData=function(t){var e=this;return this._data=t,this.fire(new R.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){t?e.fire(new R.ErrorEvent(t)):(t={dataType:"source",sourceDataType:"content"},e._collectResourceTiming&&e._resourceTiming&&0<e._resourceTiming.length&&(t.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new R.Event("data",t)))}),this},H.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},H.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},H.prototype.getClusterLeaves=function(t,e,n,i){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i,this.workerID),this},H.prototype._updateWorkerData=function(n){var i=this,r=R.extend({},this.workerOptions),t=this._data;"string"==typeof t?(r.request=this.map._transformRequest(R.default$2.resolveURL(t),R.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(t),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(t,e){i._removed||e&&e.abandoned||(i._loaded=!0,e&&e.resourceTiming&&e.resourceTiming[i.id]&&(i._resourceTiming=e.resourceTiming[i.id].slice(0)),i.dispatcher.send(i.type+".coalesce",{source:r.source},null,i.workerID),n(t))},this.workerID)},H.prototype.loadTile=function(n,i){var r=this,o=void 0===n.workerID?"loadTile":"reloadTile",t={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:R.default$2.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};n.workerID=this.dispatcher.send(o,t,function(t,e){return n.unloadVectorData(),n.aborted?i(null):t?i(t):(n.loadVectorData(e,r.map.painter,"reloadTile"==o),i(null))},this.workerID)},H.prototype.abortTile=function(t){t.aborted=!0},H.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},H.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},H.prototype.serialize=function(){return R.extend({},this._options,{type:this.type,data:this._data})},H.prototype.hasTransition=function(){return!1},H),$=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function H(t,e,n,i){F.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=n,this.setEventedParent(i),this._data=e.data,this._options=R.extend({},e),this._collectResourceTiming=e.collectResourceTiming,this._resourceTiming=[],void 0!==e.maxzoom&&(this.maxzoom=e.maxzoom),e.type&&(this.type=e.type),e.attribution&&(this.attribution=e.attribution);i=R.default$10/this.tileSize;this.workerOptions=R.extend({source:this.id,cluster:e.cluster||!1,geojsonVtOptions:{buffer:(void 0!==e.buffer?e.buffer:128)*i,tolerance:(void 0!==e.tolerance?e.tolerance:.375)*i,extent:R.default$10,maxZoom:this.maxzoom,lineMetrics:e.lineMetrics||!1},superclusterOptions:{maxZoom:void 0!==e.clusterMaxZoom?Math.min(e.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:R.default$10,radius:(e.clusterRadius||50)*i,log:!1}},e.workerOptions)}function K(t,e,n,i){j.call(this,t,e,n,i),this.type="raster-dem",this.maxzoom=22,this._options=R.extend({},e),this.encoding=e.encoding||"mapbox"}function X(t,e,n,i){U.call(this),this.id=t,this.dispatcher=n,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=R.extend({},e),R.extend(this,R.pick(e,["url","scheme","tileSize"]))}function J(t,e,n,i){if(V.call(this),this.id=t,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,R.extend(this,R.pick(e,["url","scheme","tileSize"])),this._options=R.extend({type:"vector"},e),this._collectResourceTiming=e.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}$.prototype.bind=function(t,e,n,i,r,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==i.length,u=0;!l&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(l=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,n,i,r,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind())},$.prototype.freshBind=function(t,e,n,i,r,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,d=n;p<d.length;p+=1)d[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(var f=0,m=n;f<m.length;f+=1){var y=m[f];y.bind(),y.setVertexAttribPointers(c,t,r)}o&&(o.bind(),o.setVertexAttribPointers(c,t,r)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),u.currentNumAttributes=l},$.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Y,Q,tt,et=((tt=R.Evented)&&(ot.__proto__=tt),((ot.prototype=Object.create(tt&&tt.prototype)).constructor=ot).prototype.load=function(){var n=this;this.fire(new R.Event("dataloading",{dataType:"source"})),this.url=this.options.url,R.getImage(this.map._transformRequest(this.url,R.ResourceType.Image),function(t,e){t?n.fire(new R.ErrorEvent(t)):e&&(n.image=R.default$2.getImageData(e),n._finishLoading())})},ot.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new R.Event("data",{dataType:"source",sourceDataType:"metadata"})))},ot.prototype.onAdd=function(t){this.map=t,this.load()},ot.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,t=t.map(function(t){return e.transform.locationCoordinate(D.convert(t)).zoomTo(0)}),n=this.centerCoord=R.getCoordinatesCenter(t);n.column=Math.floor(n.column),n.row=Math.floor(n.row),this.tileID=new R.CanonicalTileID(n.zoom,n.column,n.row),this.minzoom=this.maxzoom=n.zoom;t=t.map(function(t){t=t.zoomTo(n.zoom);return new R.default(Math.round((t.column-n.column)*R.default$10),Math.round((t.row-n.row)*R.default$10))});return this._boundsArray=new R.RasterBoundsArray,this._boundsArray.emplaceBack(t[0].x,t[0].y,0,0),this._boundsArray.emplaceBack(t[1].x,t[1].y,R.default$10,0),this._boundsArray.emplaceBack(t[3].x,t[3].y,0,R.default$10),this._boundsArray.emplaceBack(t[2].x,t[2].y,R.default$10,R.default$10),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new R.Event("data",{dataType:"source",sourceDataType:"content"})),this},ot.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t,e=this.map.painter.context,n=e.gl;for(t in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,R.default$11.members)),this.boundsVAO||(this.boundsVAO=new $),this.texture||(this.texture=new R.default$4(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[t];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},ot.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t).buckets={}:t.state="errored",e(null)},ot.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},ot.prototype.hasTransition=function(){return!1},ot),x=((Q=et)&&(rt.__proto__=Q),((rt.prototype=Object.create(Q&&Q.prototype)).constructor=rt).prototype.load=function(){var n=this,t=this.options;this.urls=[];for(var e=0,i=t.urls;e<i.length;e+=1){var r=i[e];n.urls.push(n.map._transformRequest(r,R.ResourceType.Source).url)}R.getVideo(this.urls,function(t,e){t?n.fire(new R.ErrorEvent(t)):e&&(n.video=e,n.video.loop=!0,n.video.addEventListener("playing",function(){n.map._rerender()}),n.map&&n.video.play(),n._finishLoading())})},rt.prototype.getVideo=function(){return this.video},rt.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},rt.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t,e=this.map.painter.context,n=e.gl;for(t in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,R.default$11.members)),this.boundsVAO||(this.boundsVAO=new $),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new R.default$4(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[t];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},rt.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},rt.prototype.hasTransition=function(){return this.video&&!this.video.paused},rt),P=((Y=et)&&(it.__proto__=Y),((it.prototype=Object.create(Y&&Y.prototype)).constructor=it).prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof R.default$1.HTMLCanvasElement?this.options.canvas:R.default$1.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new R.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},it.prototype.getCanvas=function(){return this.canvas},it.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},it.prototype.onRemove=function(){this.pause()},it.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e,n=this.map.painter.context,i=n.gl;for(e in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,R.default$11.members)),this.boundsVAO||(this.boundsVAO=new $),this.texture?t?this.texture.update(this.canvas):this._playing&&(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.canvas)):(this.texture=new R.default$4(n,this.canvas,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[e];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},it.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},it.prototype.hasTransition=function(){return this._playing},it.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},it),nt={vector:Z,raster:q,"raster-dem":G,geojson:W,video:x,image:et,canvas:P};function it(t,e,n,i){Y.call(this,t,e,n,i),e.coordinates?Array.isArray(e.coordinates)&&4===e.coordinates.length&&!e.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new R.ErrorEvent(new R.default$12("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new R.ErrorEvent(new R.default$12("sources."+t,null,'missing required property "coordinates"'))),e.animate&&"boolean"!=typeof e.animate&&this.fire(new R.ErrorEvent(new R.default$12("sources."+t,null,'optional "animate" property must be a boolean value'))),e.canvas?"string"==typeof e.canvas||e.canvas instanceof R.default$1.HTMLCanvasElement||this.fire(new R.ErrorEvent(new R.default$12("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new R.ErrorEvent(new R.default$12("sources."+t,null,'missing required property "canvas"'))),this.options=e,this.animate=void 0===e.animate||e.animate}function rt(t,e,n,i){Q.call(this,t,e,n,i),this.roundZoom=!0,this.type="video",this.options=e}function ot(t,e,n,i){tt.call(this),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=e}function at(t,e){t=t.tileID,e=e.tileID;return t.overscaledZ-e.overscaledZ||t.canonical.y-e.canonical.y||t.wrap-e.wrap||t.canonical.x-e.canonical.x}function st(t,e){this.max=t,this.onRemove=e,this.reset()}st.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var i=n[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},st.prototype.add=function(t,e,n){var i=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var o,a={value:e,timeout:void 0};return void 0!==n&&(a.timeout=setTimeout(function(){i.remove(t,a)},n)),this.data[r].push(a),this.order.push(r),this.order.length>this.max&&(o=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(o),this},st.prototype.has=function(t){return t.wrapped().key in this.data},st.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},st.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},st.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},st.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,t=void 0===e?0:this.data[n].indexOf(e),e=this.data[n][t];return this.data[n].splice(t,1),e.timeout&&clearTimeout(e.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(e.value),this.order.splice(this.order.indexOf(n),1),this},st.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};function lt(t,e,n){var i=(this.context=t).gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}lt.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},lt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},lt.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},lt.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};function ut(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,i=(this.context=t).gl,this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}var ct={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};ut.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ut.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},ut.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var i=this.attributes[n],i=e.attributes[i.name];void 0!==i&&t.enableVertexAttribArray(i)}},ut.prototype.setVertexAttribPointers=function(t,e,n){for(var i=0;i<this.attributes.length;i++){var r=this.attributes[i],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[ct[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}},ut.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};function ht(t){this.context=t,this.current=R.default$8.transparent}ht.prototype.get=function(){return this.current},ht.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};function pt(t){this.context=t,this.current=1}pt.prototype.get=function(){return this.current},pt.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};function dt(t){this.context=t,this.current=0}dt.prototype.get=function(){return this.current},dt.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};function ft(t){this.context=t,this.current=[!0,!0,!0,!0]}ft.prototype.get=function(){return this.current},ft.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};function mt(t){this.context=t,this.current=!0}mt.prototype.get=function(){return this.current},mt.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};function yt(t){this.context=t,this.current=255}yt.prototype.get=function(){return this.current},yt.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};function gt(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}}gt.prototype.get=function(){return this.current},gt.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};function vt(t){this.context=t,t=this.context.gl,this.current=[t.KEEP,t.KEEP,t.KEEP]}vt.prototype.get=function(){return this.current},vt.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};function _t(t){this.context=t,this.current=!1}_t.prototype.get=function(){return this.current},_t.prototype.set=function(t){var e;this.current!==t&&(e=this.context.gl,t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t)};function bt(t){this.context=t,this.current=[0,1]}bt.prototype.get=function(){return this.current},bt.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};function xt(t){this.context=t,this.current=!1}xt.prototype.get=function(){return this.current},xt.prototype.set=function(t){var e;this.current!==t&&(e=this.context.gl,t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t)};function wt(t){this.context=t,this.current=t.gl.LESS}wt.prototype.get=function(){return this.current},wt.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};function Tt(t){this.context=t,this.current=!1}Tt.prototype.get=function(){return this.current},Tt.prototype.set=function(t){var e;this.current!==t&&(e=this.context.gl,t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t)};function Et(t){this.context=t,t=this.context.gl,this.current=[t.ONE,t.ZERO]}Et.prototype.get=function(){return this.current},Et.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};function kt(t){this.context=t,this.current=R.default$8.transparent}kt.prototype.get=function(){return this.current},kt.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};function St(t){this.context=t,this.current=null}St.prototype.get=function(){return this.current},St.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};function Pt(t){this.context=t,this.current=t.gl.TEXTURE0}Pt.prototype.get=function(){return this.current},Pt.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};function Ct(t){this.context=t,t=this.context.gl,this.current=[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}Ct.prototype.get=function(){return this.current},Ct.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};function Mt(t){this.context=t,this.current=null}Mt.prototype.get=function(){return this.current},Mt.prototype.set=function(t){var e;this.current!==t&&((e=this.context.gl).bindFramebuffer(e.FRAMEBUFFER,t),this.current=t)};function Lt(t){this.context=t,this.current=null}Lt.prototype.get=function(){return this.current},Lt.prototype.set=function(t){var e;this.current!==t&&((e=this.context.gl).bindRenderbuffer(e.RENDERBUFFER,t),this.current=t)};function It(t){this.context=t,this.current=null}It.prototype.get=function(){return this.current},It.prototype.set=function(t){var e;this.current!==t&&((e=this.context.gl).bindTexture(e.TEXTURE_2D,t),this.current=t)};function At(t){this.context=t,this.current=null}At.prototype.get=function(){return this.current},At.prototype.set=function(t){var e;this.current!==t&&((e=this.context.gl).bindBuffer(e.ARRAY_BUFFER,t),this.current=t)};function zt(t){this.context=t,this.current=null}zt.prototype.get=function(){return this.current},zt.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};function Ot(t){this.context=t,this.current=null}Ot.prototype.get=function(){return this.current},Ot.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};function Rt(t){this.context=t,this.current=4}Rt.prototype.get=function(){return this.current},Rt.prototype.set=function(t){var e;this.current!==t&&((e=this.context.gl).pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t)};function Dt(t){this.context=t,this.current=!1}Dt.prototype.get=function(){return this.current},Dt.prototype.set=function(t){var e;this.current!==t&&((e=this.context.gl).pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t)};Z=function(t,e){this.context=t,this.current=null,this.parent=e};Z.prototype.get=function(){return this.current};function Nt(t,e,n){this.context=t,this.width=e,this.height=n,n=t.gl,n=this.framebuffer=n.createFramebuffer(),this.colorAttachment=new jt(t,n),this.depthAttachment=new Ut(t,n)}var Bt,Ft,jt=((Ft=Z)&&(Zt.__proto__=Ft),((Zt.prototype=Object.create(Ft&&Ft.prototype)).constructor=Zt).prototype.set=function(t){var e;!this.dirty&&this.current===t||(e=this.context.gl,this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1)},Zt.prototype.setDirty=function(){this.dirty=!0},Zt),Ut=((Bt=Z)&&(Vt.__proto__=Bt),((Vt.prototype=Object.create(Bt&&Bt.prototype)).constructor=Vt).prototype.set=function(t){var e;this.current!==t&&(e=this.context.gl,this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t)},Vt);function Vt(){Bt.apply(this,arguments)}function Zt(t,e){Ft.call(this,t,e),this.dirty=!1}Nt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e),t.deleteFramebuffer(this.framebuffer)};var qt=function(t,e,n){this.func=t,this.mask=e,this.range=n};qt.ReadOnly=!1,qt.ReadWrite=!0,qt.disabled=new qt(519,qt.ReadOnly,[0,1]);var Gt=function(t,e,n,i,r,o){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o};Gt.disabled=new Gt({func:519,mask:0},0,0,7680,7680,7680);function Wt(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}Wt.disabled=new Wt(Wt.Replace=[1,0],R.default$8.transparent,[!1,!1,!1,!1]),Wt.unblended=new Wt(Wt.Replace,R.default$8.transparent,[!0,!0,!0,!0]),Wt.alphaBlended=new Wt([1,771],R.default$8.transparent,[!0,!0,!0,!0]);function $t(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ht(this),this.clearDepth=new pt(this),this.clearStencil=new dt(this),this.colorMask=new ft(this),this.depthMask=new mt(this),this.stencilMask=new yt(this),this.stencilFunc=new gt(this),this.stencilOp=new vt(this),this.stencilTest=new _t(this),this.depthRange=new bt(this),this.depthTest=new xt(this),this.depthFunc=new wt(this),this.blend=new Tt(this),this.blendFunc=new Et(this),this.blendColor=new kt(this),this.program=new St(this),this.activeTexture=new Pt(this),this.viewport=new Ct(this),this.bindFramebuffer=new Mt(this),this.bindRenderbuffer=new Lt(this),this.bindTexture=new It(this),this.bindVertexBuffer=new At(this),this.bindElementBuffer=new zt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ot(this),this.pixelStoreUnpack=new Rt(this),this.pixelStoreUnpackPremultiplyAlpha=new Dt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")}$t.prototype.createIndexBuffer=function(t,e){return new lt(this,t,e)},$t.prototype.createVertexBuffer=function(t,e,n){return new ut(this,t,e,n)},$t.prototype.createRenderbuffer=function(t,e,n){var i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r},$t.prototype.createFramebuffer=function(t,e){return new Nt(this,t,e)},$t.prototype.clear=function(t){var e=t.color,n=t.depth,i=this.gl,t=0;e&&(t|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(t|=i.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),i.clear(t)},$t.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},$t.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},$t.prototype.setColorMode=function(t){R.default$13(t.blendFunction,Wt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)};var Ht,Kt=((Ht=R.Evented)&&(Xt.__proto__=Ht),((Xt.prototype=Object.create(Ht&&Ht.prototype)).constructor=Xt).prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},Xt.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},Xt.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},Xt.prototype.getSource=function(){return this._source},Xt.prototype.pause=function(){this._paused=!0},Xt.prototype.resume=function(){var t;this._paused&&(t=this._shouldReloadOnResume,this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform))},Xt.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},Xt.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},Xt.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},Xt.prototype.serialize=function(){return this._source.serialize()},Xt.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},Xt.prototype.getIds=function(){var r=this;return Object.keys(this._tiles).map(Number).sort(function(t,e){var n=r._tiles[t].tileID,i=r._tiles[e].tileID,t=new R.default(n.canonical.x,n.canonical.y).rotate(r.transform.angle),e=new R.default(i.canonical.x,i.canonical.y).rotate(r.transform.angle);return n.overscaledZ-i.overscaledZ||e.y-t.y||e.x-t.x})},Xt.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},Xt.prototype.hasRenderableParent=function(t){t=this.findLoadedParent(t,0,{});return!!t&&this._isIdRenderable(t.tileID.key)},Xt.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},Xt.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},Xt.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},Xt.prototype._tileLoaded=function(t,e,n,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire(new R.ErrorEvent(i,{tile:t})):this.update(this.transform));t.timeAdded=R.default$2.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new R.Event("data",{dataType:"source",tile:t,coord:t.tileID})),this.map&&(this.map.painter.tileExtentVAO.vao=null)},Xt.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var i=e[n];t.neighboringTiles&&t.neighboringTiles[i]&&(r(t,i=this.getTileByID(i)),r(i,t))}function r(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0==i||1<Math.abs(i)||(1<Math.abs(n)&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},Xt.prototype.getTile=function(t){return this.getTileByID(t.key)},Xt.prototype.getTileByID=function(t){return this._tiles[t]},Xt.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},Xt.prototype._findLoadedChildren=function(t,e,n){var i,r=!1;for(i in this._tiles){var o=this._tiles[i];if(!(n[i]||!o.hasData()||o.tileID.overscaledZ<=t.overscaledZ||o.tileID.overscaledZ>e)){var a=Math.pow(2,o.tileID.canonical.z-t.canonical.z);if(Math.floor(o.tileID.canonical.x/a)===t.canonical.x&&Math.floor(o.tileID.canonical.y/a)===t.canonical.y)for(n[i]=o.tileID,r=!0;o&&o.tileID.overscaledZ-1>t.overscaledZ;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);if(!s)break;(o=this._tiles[s.key])&&o.hasData()&&(delete n[i],n[s.key]=s)}}}return r},Xt.prototype.findLoadedParent=function(t,e,n){for(var i=t.overscaledZ-1;e<=i;i--){var r=t.scaledTo(i);if(!r)return;var o=String(r.key),a=this._tiles[o];if(a&&a.hasData())return n[o]=r,a;if(this._cache.has(r))return n[o]=r,this._cache.get(r)}},Xt.prototype.updateCacheSize=function(t){t=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),t=Math.floor(5*t),t="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,t):t;this._cache.setMaxSize(t)},Xt.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){var i,r,o,a={};for(i in this._tiles){var s=this._tiles[i];s.tileID=s.tileID.unwrapTo(s.tileID.wrap+n),a[s.tileID.key]=s}for(r in this._tiles=a,this._timers)clearTimeout(this._timers[r]),delete this._timers[r];for(o in this._tiles){var l=this._tiles[o];this._setTileReloadTimer(o,l)}}},Xt.prototype.update=function(t){var e,n=this;if(this.transform=t,this._sourceLoaded&&!this._paused){this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?e=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new R.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(e=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(e=e.filter(function(t){return n._source.hasTile(t)}))):e=[];var i,t=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),r=Math.max(t-Xt.maxOverzooming,this._source.minzoom),o=Math.max(t+Xt.maxUnderzooming,this._source.minzoom),a=this._updateRetainedTiles(e,t),s={};if(Yt(this._source.type))for(var l=Object.keys(a),u=0;u<l.length;u++){var c=l[u],h=a[c],p=n._tiles[c];p&&(void 0===p.fadeEndTime||p.fadeEndTime>=R.default$2.now())&&(n._findLoadedChildren(h,o,a)&&(a[c]=h),(h=n.findLoadedParent(h,r,s))&&n._addTile(h.tileID))}for(i in s)a[i]||(n._coveredTiles[i]=!0);for(i in s)a[i]=s[i];for(var d=R.keysDifference(this._tiles,a),f=0;f<d.length;f++)n._removeTile(d[f])}},Xt.prototype._updateRetainedTiles=function(t,e){for(var n={},i={},r=Math.max(e-Xt.maxOverzooming,this._source.minzoom),o=Math.max(e+Xt.maxUnderzooming,this._source.minzoom),a=0;a<t.length;a++){var s=t[a],l=this._addTile(s),u=!1;if(l.hasData())n[s.key]=s;else{u=l.wasRequested(),n[s.key]=s;var c=!0;if(e+1>this._source.maxzoom){var h=s.children(this._source.maxzoom)[0],p=this.getTile(h);p&&p.hasData()?n[h.key]=h:c=!1}else{this._findLoadedChildren(s,o,n);for(var d=s.children(this._source.maxzoom),f=0;f<d.length;f++)if(!n[d[f].key]){c=!1;break}}if(!c)for(var m=s.overscaledZ-1;r<=m;--m){var y=s.scaledTo(m);if(i[y.key])break;if(i[y.key]=!0,!(l=this.getTile(y))&&u&&(l=this._addTile(y)),l&&(n[y.key]=y,u=l.wasRequested(),l.hasData()))break}}}return n},Xt.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var n=Boolean(e);return n||(e=new R.default$14(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new R.Event("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null},Xt.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);e=e.getExpiryTimeout();e&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},e))},Xt.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),0<e.uses||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},Xt.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},Xt.prototype.tilesIn=function(t,e){for(var n=[],i=this.getIds(),r=1/0,o=1/0,a=-1/0,s=-1/0,l=t[0].zoom,u=0;u<t.length;u++)var c=t[u],r=Math.min(r,c.column),o=Math.min(o,c.row),a=Math.max(a,c.column),s=Math.max(s,c.row);for(var h=0;h<i.length;h++){var p=this._tiles[i[h]],d=p.tileID,f=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),m=e*p.queryPadding*R.default$10/p.tileSize/f,y=[Jt(d,new R.default$15(r,o,l)),Jt(d,new R.default$15(a,s,l))];if(y[0].x-m<R.default$10&&y[0].y-m<R.default$10&&0<=y[1].x+m&&0<=y[1].y+m){for(var g=[],v=0;v<t.length;v++)g.push(Jt(d,t[v]));n.push({tile:p,tileID:d,queryGeometry:[g],scale:f})}}return n},Xt.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(function(t){return e._tiles[t].tileID}),n=0,i=t;n<i.length;n+=1){var r=i[n];r.posMatrix=e.transform.calculatePosMatrix(r.toUnwrapped())}return t},Xt.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Yt(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=R.default$2.now())return!0}return!1},Xt.prototype.setFeatureState=function(t,e,n){t=t||"_geojsonTileLayer",this._state.updateState(t,e,n)},Xt.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},Xt);function Xt(t,n,i){var e=this;Ht.call(this),this.id=t,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(e._sourceLoaded=!0),e._sourceLoaded&&!e._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(e.reload(),e.transform&&e.update(e.transform))}),this.on("error",function(){e._sourceErrored=!0}),this._source=function(t,e){e=new nt[n.type](t,n,i,e);if(e.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+e.id);return R.bindAll(["load","abort","unload","serialize","prepare"],e),e}(t,this),this._tiles={},this._cache=new st(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={},this._state=new R.default$16}function Jt(t,e){e=e.zoomTo(t.canonical.z);return new R.default((e.column-(t.canonical.x+t.wrap*Math.pow(2,t.canonical.z)))*R.default$10,(e.row-t.canonical.y)*R.default$10)}function Yt(t){return"raster"===t||"image"===t||"video"===t}function Qt(){return new R.default$1.Worker(oi.workerUrl)}Kt.maxOverzooming=10,Kt.maxUnderzooming=3;var te,ee=function(){this.active={}};function ne(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=function(t,e){var n,i={};for(n in t)"ref"!==n&&(i[n]=t[n]);return R.default$17.forEach(function(t){t in e&&(i[t]=e[t])}),i}(t[i],e[t[i].ref]));return t}ee.prototype.acquire=function(t){if(!this.workers){var e=oi.workerCount;for(this.workers=[];this.workers.length<e;)this.workers.push(new Qt)}return this.active[t]=!0,this.workers.slice()},ee.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var ie={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function re(t,e,n){n.push({command:ie.addSource,args:[t,e[t]]})}function oe(t,e,n){e.push({command:ie.removeSource,args:[t]}),n[t]=!0}function ae(t,e,n,i,r,o){for(var a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(R.default$13(t[a],e[a])||n.push({command:o,args:[i,a,e[a],r]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(R.default$13(t[a],e[a])||n.push({command:o,args:[i,a,e[a],r]}))}function se(t){return t.id}function le(t,e){return t[e.id]=e,t}function ue(t,e,n){var i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}ue.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},ue.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},ue.prototype.insertCircle=function(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)},ue.prototype._insertBoxCell=function(t,e,n,i,r,o){this.boxCells[r].push(o)},ue.prototype._insertCircleCell=function(t,e,n,i,r,o){this.circleCells[r].push(o)},ue.prototype._query=function(t,e,n,i,r,o){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return o?a.filter(o):a}var p={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,i,this._queryCell,a,p,o),r?0<a.length:a},ue.prototype._queryCircle=function(t,e,n,i,r){var o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!i&&[];var u=[],n={hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,n,r),i?0<u.length:u},ue.prototype.query=function(t,e,n,i,r){return this._query(t,e,n,i,!1,r)},ue.prototype.hitTest=function(t,e,n,i,r){return this._query(t,e,n,i,!0,r)},ue.prototype.hitTestCircle=function(t,e,n,i){return this._queryCircle(t,e,n,!0,i)},ue.prototype._queryCell=function(t,e,n,i,r,o,a,s){var l=a.seenUids,u=this.boxCells[r];if(null!==u)for(var c=this.bboxes,h=0,p=u;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(t<=c[2+f]&&e<=c[3+f]&&n>=c[0+f]&&i>=c[1+f]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:c[f],y1:c[1+f],x2:c[2+f],y2:c[3+f]})}}}r=this.circleCells[r];if(null!==r)for(var m=this.circles,y=0,g=r;y<g.length;y+=1){var v=g[y];if(!l.circle[v]){l.circle[v]=!0;var _=3*v;if(this._circleAndRectCollide(m[_],m[1+_],m[2+_],t,e,n,i)&&(!s||s(this.circleKeys[v]))){if(a.hitTest)return o.push(!0),!0;var b=m[_],x=m[1+_],_=m[2+_];o.push({key:this.circleKeys[v],x1:b-_,y1:x-_,x2:b+_,y2:x+_})}}}},ue.prototype._queryCellCircle=function(t,e,n,i,r,o,a,s){var l=a.circle,u=a.seenUids,a=this.boxCells[r];if(null!==a)for(var c=this.bboxes,h=0,p=a;h<p.length;h+=1){var d=p[h];if(!u.box[d]){u.box[d]=!0;var f=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,c[0+f],c[1+f],c[2+f],c[3+f])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}r=this.circleCells[r];if(null!==r)for(var m=this.circles,y=0,g=r;y<g.length;y+=1){var v=g[y];if(!u.circle[v]){u.circle[v]=!0;var _=3*v;if(this._circlesCollide(m[_],m[1+_],m[2+_],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[v])))return o.push(!0),!0}}},ue.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i),p=l;p<=c;p++)for(var d=u;d<=h;d++){var f=this.xCellCount*d+p;if(r.call(this,t,e,n,i,f,o,a,s))return}},ue.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},ue.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},ue.prototype._circlesCollide=function(t,e,n,i,r,o){t=i-t,e=r-e,o=n+o;return t*t+e*e<o*o},ue.prototype._circleAndRectCollide=function(t,e,n,i,r,o,a){o=(o-i)/2,i=Math.abs(t-(i+o));if(o+n<i)return!1;a=(a-r)/2,r=Math.abs(e-(r+a));if(a+n<r)return!1;if(i<=o||r<=a)return!0;o=i-o,a=r-a;return o*o+a*a<=n*n};var ce=R.default$18.layout;function he(t,e,n,i,r){var o=R.identity(new Float32Array(16));return e?(R.identity(o),R.scale(o,o,[1/r,1/r,1]),n||R.rotateZ(o,o,i.angle)):(R.scale(o,o,[i.width/2,-i.height/2,1]),R.translate(o,o,[1,-1,0]),R.multiply(o,o,t)),o}function pe(t,e){t=[t.x,t.y,0,1];be(t,t,e);e=t[3];return{point:new R.default(t[0]/e,t[1]/e),signedDistanceFromCamera:e}}function de(t,e,n,i,r,o,a,s,l,u,c,h){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),p=e.getoffsetX(p-1),m=ge(t*m,n,i,r,o,a,s.segment,d,f,l,u,c,h);if(!m)return null;h=ge(t*p,n,i,r,o,a,s.segment,d,f,l,u,c,h);return h?{first:m,last:h}:null}function fe(t,e,n,i){return t===R.WritingMode.horizontal&&Math.abs(n.y-e.y)>Math.abs(n.x-e.x)*i?{useVertical:!0}:(t===R.WritingMode.vertical?e.y<n.y:e.x>n.x)?{needsFlipping:!0}:null}function me(t,e,n,i,r,o,a,s,l,u,c,h,p,d){var f,m=e/24,y=t.lineOffsetX*e,g=t.lineOffsetY*e;if(1<t.numGlyphs){var v=t.glyphStartIndex+t.numGlyphs,_=t.lineStartIndex,b=t.lineStartIndex+t.lineLength,x=de(m,s,y,g,n,c,h,t,l,o,p,!1);if(!x)return{notEnoughRoom:!0};e=pe(x.first.point,a).point,a=pe(x.last.point,a).point;if(i&&!n){a=fe(t.writingMode,e,a,d);if(a)return a}f=[x.first];for(var w=t.glyphStartIndex+1;w<v-1;w++)f.push(ge(m*s.getoffsetX(w),y,g,n,c,h,t.segment,_,b,l,o,p,!1));f.push(x.last)}else{if(i&&!n){var x=pe(h,r).point,i=t.lineStartIndex+t.segment+1,T=new R.default(l.getx(i),l.gety(i)),i=pe(T,r),T=0<i.signedDistanceFromCamera?i.point:ye(h,T,x,1,r),T=fe(t.writingMode,x,T,d);if(T)return T}T=ge(m*s.getoffsetX(t.glyphStartIndex),y,g,n,c,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,o,p,!1);if(!T)return{notEnoughRoom:!0};f=[T]}for(var E=0,k=f;E<k.length;E+=1){var S=k[E];R.addDynamicAttributes(u,S.point,S.angle)}return{}}function ye(t,e,n,i,r){r=pe(t.add(t.sub(e)._unit()),r).point,r=n.sub(r);return n.add(r._mult(i/r.mag()))}function ge(t,e,n,i,r,o,a,s,l,u,c,h,p){var t=i?t-e:t+e,d=0<t?1:-1,e=0;i&&(d*=-1,e=Math.PI),d<0&&(e+=Math.PI);for(var f=0<d?s+a:s+a+1,a=f,m=r,y=r,g=0,v=0,_=Math.abs(t);g+v<=_;){if((f+=d)<s||l<=f)return null;var b,x,y=m;void 0===(m=h[f])&&(m=0<(x=pe(b=new R.default(u.getx(f),u.gety(f)),c)).signedDistanceFromCamera?h[f]=x.point:(x=f-d,ye(0===g?o:new R.default(u.getx(x),u.gety(x)),b,y,_-g+1,c))),g+=v,v=y.dist(m)}r=(_-g)/v,t=m.sub(y),r=t.mult(r)._add(y);return r._add(t._unit()._perp()._mult(n*d)),{point:r,angle:e+Math.atan2(m.y-y.y,m.x-y.x),tileDistance:p?{prevTileDistance:f-d===a?0:u.gettileUnitDistanceFromAnchor(f-d),lastSegmentViewportDistance:_-g}:null}}var ve=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function _e(t,e){for(var n=0;n<t;n++){var i=e.length;e.resize(i+4),e.float32.set(ve,3*i)}}function be(t,e,n){var i=e[0],e=e[1];return t[0]=n[0]*i+n[4]*e+n[12],t[1]=n[1]*i+n[5]*e+n[13],t[3]=n[3]*i+n[7]*e+n[15],t}function xe(t,e,n){void 0===e&&(e=new ue(t.width+200,t.height+200,25)),void 0===n&&(n=new ue(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}function we(t,e,n){t[e+4]=n?1:0}function Te(t,e,n){return e*(R.default$10/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}xe.prototype.placeCollisionBox=function(t,e,n,i,r){var o=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,i=t.y1*a+o.point.y,n=t.x2*a+o.point.x,o=t.y2*a+o.point.y;return!this.isInsideGrid(s,i,n,o)||!e&&this.grid.hitTest(s,i,n,o,r)?{box:[],offscreen:!1}:{box:[s,i,n,o],offscreen:this.isOffscreen(s,i,n,o)}},xe.prototype.approximateTileDistance=function(t,e,n,i,r){i=r?1:i/this.pitchfactor,n=t.lastSegmentViewportDistance*n;return t.prevTileDistance+n+(i-1)*n*Math.abs(Math.sin(e))},xe.prototype.placeCollisionCircles=function(t,e,n,i,r,o,a,s,l,u,c,h,p,d){var f=[],m=this.projectAnchor(u,o.anchorX,o.anchorY),y=l/24,g=o.lineOffsetX*l,v=o.lineOffsetY*l,l=new R.default(o.anchorX,o.anchorY),_=de(y,s,g,v,!1,pe(l,c).point,l,o,a,c,{},!0),b=!1,x=!1,w=!0,T=m.perspectiveRatio*i,n=1/(i*n),E=0,k=0;_&&(E=this.approximateTileDistance(_.first.tileDistance,_.first.angle,n,m.cameraDistance,p),k=this.approximateTileDistance(_.last.tileDistance,_.last.angle,n,m.cameraDistance,p));for(var S=0;S<t.length;S+=5){var P=t[S],C=t[S+1],M=t[S+2],L=t[S+3];if(!_||L<-E||k<L)we(t,S,!1);else{P=this.projectPoint(u,P,C),C=M*T;if(0<f.length){var I=P.x-f[f.length-4],A=P.y-f[f.length-3];if(I*I+A*A<C*C*2&&S+8<t.length){var z=t[S+8];if(-E<z&&z<k){we(t,S,!1);continue}}}M=S/5;f.push(P.x,P.y,C,M),we(t,S,!0);I=P.x-C,A=P.y-C,z=P.x+C,M=P.y+C,w=w&&this.isOffscreen(I,A,z,M),x=x||this.isInsideGrid(I,A,z,M);if(!e&&this.grid.hitTestCircle(P.x,P.y,C,d)){if(!h)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!x?[]:f,offscreen:w}},xe.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var e=[],n=1/0,i=1/0,r=-1/0,o=-1/0,a=0,s=t;a<s.length;a+=1){var l=s[a],l=new R.default(l.x+100,l.y+100),n=Math.min(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.x),o=Math.max(o,l.y);e.push(l)}for(var u={},c={},h=0,p=this.grid.query(n,i,r,o).concat(this.ignoredGrid.query(n,i,r,o));h<p.length;h+=1){var d=p[h],f=d.key;void 0===u[f.bucketInstanceId]&&(u[f.bucketInstanceId]={}),u[f.bucketInstanceId][f.featureIndex]||(d=[new R.default(d.x1,d.y1),new R.default(d.x2,d.y1),new R.default(d.x2,d.y2),new R.default(d.x1,d.y2)],R.polygonIntersectsPolygon(e,d)&&(u[f.bucketInstanceId][f.featureIndex]=!0,void 0===c[f.bucketInstanceId]&&(c[f.bucketInstanceId]=[]),c[f.bucketInstanceId].push(f.featureIndex)))}return c},xe.prototype.insertCollisionBox=function(t,e,n,i,r){r={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};(e?this.ignoredGrid:this.grid).insert(r,t[0],t[1],t[2],t[3])},xe.prototype.insertCollisionCircles=function(t,e,n,i,r){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:i,collisionGroupID:r},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},xe.prototype.projectAnchor=function(t,e,n){n=[e,n,0,1];return be(n,n,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5,cameraDistance:n[3]}},xe.prototype.projectPoint=function(t,e,n){n=[e,n,0,1];return be(n,n,t),new R.default((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100)},xe.prototype.projectAndGetPerspectiveRatio=function(t,e,n){n=[e,n,0,1];return be(n,n,t),{point:new R.default((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},xe.prototype.isOffscreen=function(t,e,n,i){return n<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},xe.prototype.isInsideGrid=function(t,e,n,i){return 0<=n&&t<this.gridRightBoundary&&0<=i&&e<this.gridBottomBoundary};function Ee(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n}var ke=R.default$18.layout;Ee.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};function Se(t,e,n,i,r){this.text=new Ee(t?t.text:null,e,n,r),this.icon=new Ee(t?t.icon:null,e,i,r)}Se.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};function Pe(t,e,n){this.text=t,this.icon=e,this.skipFade=n}function Ce(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}Ce.prototype.get=function(t){return this.crossSourceCollisions?{ID:0,predicate:null}:(this.collisionGroups[t]||(e=++this.maxGroupID,this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}),this.collisionGroups[t]);var e};function Me(t,e,n){this.transform=t.clone(),this.collisionIndex=new xe(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Ce(n)}function Le(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}Me.prototype.placeLayerTile=function(t,e,n,i){var r,o,a,s,l,u=e.getBucket(t),c=e.latestFeatureIndex;u&&c&&t.id===u.layerIds[0]&&(r=e.collisionBoxArray,l=u.layers[0].layout,o=Math.pow(2,this.transform.zoom-e.tileID.overscaledZ),a=e.tileSize/R.default$10,t=he(s=this.transform.calculatePosMatrix(e.tileID.toUnwrapped()),"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,Te(e,1,this.transform.zoom)),l=he(s,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,Te(e,1,this.transform.zoom)),this.retainedQueryData[u.bucketInstanceId]=new function(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}(u.bucketInstanceId,c,u.sourceLayerIndex,u.index,e.tileID),this.placeLayerBucket(u,s,t,l,o,a,n,i,r))},Me.prototype.placeLayerBucket=function(t,e,n,i,r,o,a,s,l){for(var u=t.layers[0].layout,c=R.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,ke.properties["text-size"]),h=!t.hasTextData()||u.get("text-optional"),p=!t.hasIconData()||u.get("icon-optional"),d=this.collisionGroups.get(t.sourceID),f=0,m=t.symbolInstances;f<m.length;f+=1){var y,g,v,_,b,x,w,T,E,k,S,P=m[f];s[P.crossTileID]||(k=void 0!==P.feature.text,y=void 0!==P.feature.icon,S=!0,v=E=g=null,b=_=0,P.collisionArrays||(P.collisionArrays=t.deserializeCollisionBoxes(l,P.textBoxStartIndex,P.textBoxEndIndex,P.iconBoxStartIndex,P.iconBoxEndIndex)),P.collisionArrays.textFeatureIndex&&(_=P.collisionArrays.textFeatureIndex),P.collisionArrays.textBox&&(k=0<(g=this.collisionIndex.placeCollisionBox(P.collisionArrays.textBox,u.get("text-allow-overlap"),o,e,d.predicate)).box.length,S=S&&g.offscreen),(x=P.collisionArrays.textCircles)&&(w=t.text.placedSymbolArray.get(P.placedTextSymbolIndices[0]),T=R.evaluateSizeForFeature(t.textSizeData,c,w),E=this.collisionIndex.placeCollisionCircles(x,u.get("text-allow-overlap"),r,o,P.key,w,t.lineVertexArray,t.glyphOffsetArray,T,e,n,a,"map"===u.get("text-pitch-alignment"),d.predicate),k=u.get("text-allow-overlap")||0<E.circles.length,S=S&&E.offscreen),P.collisionArrays.iconFeatureIndex&&(b=P.collisionArrays.iconFeatureIndex),P.collisionArrays.iconBox&&(y=0<(v=this.collisionIndex.placeCollisionBox(P.collisionArrays.iconBox,u.get("icon-allow-overlap"),o,e,d.predicate)).box.length,S=S&&v.offscreen),h||p?p?h||(y=y&&k):k=y&&k:y=k=y&&k,k&&g&&this.collisionIndex.insertCollisionBox(g.box,u.get("text-ignore-placement"),t.bucketInstanceId,_,d.ID),y&&v&&this.collisionIndex.insertCollisionBox(v.box,u.get("icon-ignore-placement"),t.bucketInstanceId,b,d.ID),k&&E&&this.collisionIndex.insertCollisionCircles(E.circles,u.get("text-ignore-placement"),t.bucketInstanceId,_,d.ID),this.placements[P.crossTileID]=new Pe(k,y,S||t.justReloaded),s[P.crossTileID]=!0)}t.justReloaded=!1},Me.prototype.commit=function(t,e){this.commitTime=e;var n,i,r=!1,o=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,a=t?t.opacities:{};for(n in this.placements)var s=this.placements[n],l=a[n],r=l?(this.opacities[n]=new Se(l,o,s.text,s.icon),r||s.text!==l.text.placed||s.icon!==l.icon.placed):(this.opacities[n]=new Se(null,o,s.text,s.icon,s.skipFade),r||s.text||s.icon);for(i in a){var u,c=a[i];this.opacities[i]||((u=new Se(c,o,!1,!1)).isHidden()||(this.opacities[i]=u,r=r||c.text.placed||c.icon.placed))}r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},Me.prototype.updateLayerOpacities=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1){var o=r[i],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},Me.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var i=t.layers[0].layout,r=new Se(null,0,!1,!1,!0),o=new Se(null,0,i.get("text-allow-overlap"),i.get("icon-allow-overlap"),!0),a=0;a<t.symbolInstances.length;a++){var s=t.symbolInstances[a],l=e[s.crossTileID],u=this.opacities[s.crossTileID];l?u=r:u||(u=o,this.opacities[s.crossTileID]=u),e[s.crossTileID]=!0;var c=0<s.numGlyphVertices||0<s.numVerticalGlyphVertices,h=0<s.numIconVertices;if(c){for(var p=Be(u.text),d=(s.numGlyphVertices+s.numVerticalGlyphVertices)/4,f=0;f<d;f++)t.text.opacityVertexArray.emplaceBack(p);for(var m=0,y=s.placedTextSymbolIndices;m<y.length;m+=1){var g=y[m];t.text.placedSymbolArray.get(g).hidden=u.text.isHidden()}}if(h){for(var v=Be(u.icon),_=0;_<s.numIconVertices/4;_++)t.icon.opacityVertexArray.emplaceBack(v);t.icon.placedSymbolArray.get(a).hidden=u.icon.isHidden()}s.collisionArrays||(s.collisionArrays=t.deserializeCollisionBoxes(n,s.textBoxStartIndex,s.textBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex));h=s.collisionArrays;if(h){h.textBox&&t.hasCollisionBoxData()&&Le(t.collisionBox.collisionVertexArray,u.text.placed,!1),h.iconBox&&t.hasCollisionBoxData()&&Le(t.collisionBox.collisionVertexArray,u.icon.placed,!1);var b=h.textCircles;if(b&&t.hasCollisionCircleData())for(var x=0;x<b.length;x+=5){var w=l||0===b[x+4];Le(t.collisionCircle.collisionVertexArray,u.text.placed,w)}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},Me.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},Me.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Me.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},Me.prototype.setStale=function(){this.stale=!0};var Ie=Math.pow(2,25),Ae=Math.pow(2,24),ze=Math.pow(2,17),Oe=Math.pow(2,16),Re=Math.pow(2,9),De=Math.pow(2,8),Ne=Math.pow(2,1);function Be(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,t=Math.floor(127*t.opacity);return t*Ie+e*Ae+t*ze+e*Oe+t*Re+e*De+t*Ne+e}function Fe(){this._currentTileIndex=0,this._seenCrossTileIDs={}}Fe.prototype.continuePlacement=function(t,e,n,i,r){for(;this._currentTileIndex<t.length;){var o=t[this._currentTileIndex];if(e.placeLayerTile(i,o,n,this._seenCrossTileIDs),this._currentTileIndex++,r())return!0}};function je(t,e,n,i,r,o){this.placement=new Me(t,r,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}je.prototype.isDone=function(){return this._done},je.prototype.continuePlacement=function(t,e,n){for(var i=this,r=R.default$2.now(),o=function(){var t=R.default$2.now()-r;return!i._forceFullPlacement&&2<t};0<=this._currentPlacementIndex;){var a=e[t[i._currentPlacementIndex]],s=i.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(i._inProgressLayer||(i._inProgressLayer=new Fe),i._inProgressLayer.continuePlacement(n[a.source],i.placement,i._showCollisionBoxes,a,o))return;delete i._inProgressLayer}i._currentPlacementIndex--}this._done=!0},je.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};function Ue(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0,r=e;i<r.length;i+=1){var o=r[i],a=o.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,t)})}}var Ve=512/R.default$10/2;Ue.prototype.getScaledCoordinates=function(t,e){var n=e.canonical.z-this.tileID.canonical.z,n=Ve/Math.pow(2,n),t=t.anchor;return{x:Math.floor((e.canonical.x*R.default$10+t.x)*n),y:Math.floor((e.canonical.y*R.default$10+t.y)*n)}},Ue.prototype.findMatches=function(t,e,n){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0,o=t;r<o.length;r+=1){var a=o[r];if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s)for(var l=this.getScaledCoordinates(a,e),u=0,c=s;u<c.length;u+=1){var h=c[u];if(Math.abs(h.coord.x-l.x)<=i&&Math.abs(h.coord.y-l.y)<=i&&!n[h.crossTileID]){n[h.crossTileID]=!0,a.crossTileID=h.crossTileID;break}}}}};function Ze(){this.maxCrossTileID=0}Ze.prototype.generate=function(){return++this.maxCrossTileID};function qe(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}qe.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var i,r=this.indexes[n],o={};for(i in r){var a=r[i];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),o[a.tileID.key]=a}this.indexes[n]=o}this.lng=t},qe.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0,r=e.symbolInstances;i<r.length;i+=1)r[i].crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var o,a=this.usedCrossTileIDs[t.overscaledZ];for(o in this.indexes){var s=this.indexes[o];if(Number(o)>t.overscaledZ)for(var l in s){var u=s[l];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,a)}else{var c=s[t.scaledTo(Number(o)).key];c&&c.findMatches(e.symbolInstances,t,a)}}for(var h=0,p=e.symbolInstances;h<p.length;h+=1){var d=p[h];d.crossTileID||(d.crossTileID=n.generate(),a[d.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ue(t,e.symbolInstances,e.bucketInstanceId),!0},qe.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var i=0,r=e.indexedSymbolInstances[n];i<r.length;i+=1){var o=r[i];delete this.usedCrossTileIDs[t][o.crossTileID]}},qe.prototype.removeStaleBuckets=function(t){var e,n=!1;for(e in this.indexes){var i,r=this.indexes[e];for(i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(e,r[i]),delete r[i],n=!0)}return n};var Ge=function(){this.layerIndexes={},this.crossTileIDs=new Ze,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ge.prototype.addLayer=function(t,e,n){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new qe);var r=!1,o={};i.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(l.tileID,u,this.crossTileIDs)&&(r=!0),o[u.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r},Ge.prototype.pruneUnusedLayers=function(t){var e,n={};for(e in t.forEach(function(t){n[t]=!0}),this.layerIndexes)n[e]||delete this.layerIndexes[e]};function We(t,e){return R.emitValidationErrors(t,e&&e.filter(function(t){return"source.canvas"!==t.identifier}))}var $e,He=R.pick(ie,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ke=R.pick(ie,["setCenter","setZoom","setBearing","setPitch"]),Xe=(($e=R.Evented)&&(Je.__proto__=$e),Je.prototype=Object.create($e&&$e.prototype),(Je.prototype.constructor=Je).prototype.loadURL=function(t,e){var n=this;void 0===e&&(e={}),this.fire(new R.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof e.validate?e.validate:!p(t);t=function(t,e){if(!p(t))return t;t=v(t);return t.path="/styles/v1"+t.path,h(t,e)}(t,e.accessToken);t=this.map._transformRequest(t,R.ResourceType.Style);this._request=R.getJSON(t,function(t,e){n._request=null,t?n.fire(new R.ErrorEvent(t)):e&&n._load(e,i)})},Je.prototype.loadJSON=function(t,e){var n=this;void 0===e&&(e={}),this.fire(new R.Event("dataloading",{dataType:"style"})),this._request=R.default$2.frame(function(){n._request=null,n._load(t,!1!==e.validate)})},Je.prototype._load=function(t,e){var n,c,h,p,d,i,r,o=this;if(!e||!We(this,R.validateStyle(t))){for(var a in this._loaded=!0,(this.stylesheet=t).sources)o.addSource(a,t.sources[a],{validate:!1});t.sprite?this._spriteRequest=(n=t.sprite,e=this.map._transformRequest,c=function(t,e){if(o._spriteRequest=null,t)o.fire(new R.ErrorEvent(t));else if(e)for(var n in e)o.imageManager.addImage(n,e[n]);o.imageManager.setLoaded(!0),o.fire(new R.Event("data",{dataType:"style"}))},s=1<R.default$2.devicePixelRatio?"@2x":"",i=R.getJSON(e(y(n,s,".json"),R.ResourceType.SpriteJSON),function(t,e){i=null,d||(d=t,h=e,m())}),r=R.getImage(e(y(n,s,".png"),R.ResourceType.SpriteImage),function(t,e){r=null,d||(d=t,p=e,m())}),{cancel:function(){i&&(i.cancel(),i=null),r&&(r.cancel(),r=null)}}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var s=ne(this.stylesheet.layers);this._order=s.map(function(t){return t.id}),this._layers={};for(var l=0,u=s;l<u.length;l+=1){var f=u[l];(f=R.default$20(f)).setEventedParent(o,{layer:{id:f.id}}),o._layers[f.id]=f}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new L(this.stylesheet.light),this.fire(new R.Event("data",{dataType:"style"})),this.fire(new R.Event("style.load"))}function m(){if(d)c(d);else if(h&&p){var t,e=R.default$2.getImageData(p),n={};for(t in h){var i=h[t],r=i.width,o=i.height,a=i.x,s=i.y,l=i.sdf,u=i.pixelRatio,i=new R.RGBAImage({width:r,height:o});R.RGBAImage.copy(e,i,{x:a,y:s},{x:0,y:0},{width:r,height:o}),n[t]={data:i,pixelRatio:u,sdf:l}}c(null,n)}}},Je.prototype._validateLayer=function(t){var e,n=this.sourceCaches[t.source];n&&(!(e=t.sourceLayer)||("geojson"===(n=n.getSource()).type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(e))&&this.fire(new R.ErrorEvent(new Error('Source layer "'+e+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"'))))},Je.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},Je.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},Je.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},Je.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Je.prototype.update=function(t){if(this._loaded){if(this._changed){var e,n,i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(e in(i.length||r.length)&&this._updateWorkerLayers(i,r),this._updatedSources){var o=this._updatedSources[e];"reload"===o?this._reloadSource(e):"clear"===o&&this._clearSource(e)}for(n in this._updatedPaintProps)this._layers[n].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates(),this.fire(new R.Event("data",{dataType:"style"}))}for(var a in this.sourceCaches)this.sourceCaches[a].used=!1;for(var s=0,l=this._order;s<l.length;s+=1){var u=l[s],u=this._layers[u];u.recalculate(t),!u.isHidden(t.zoom)&&u.source&&(this.sourceCaches[u.source].used=!0)}this.light.recalculate(t),this.z=t.zoom}},Je.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},Je.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},Je.prototype.setState=function(t){var e=this;if(this._checkLoaded(),We(this,R.validateStyle(t)))return!1;(t=R.clone(t)).layers=ne(t.layers);var n=function(t,e){if(!t)return[{command:ie.setStyle,args:[e]}];var n=[];try{if(!R.default$13(t.version,e.version))return[{command:ie.setStyle,args:[e]}];R.default$13(t.center,e.center)||n.push({command:ie.setCenter,args:[e.center]}),R.default$13(t.zoom,e.zoom)||n.push({command:ie.setZoom,args:[e.zoom]}),R.default$13(t.bearing,e.bearing)||n.push({command:ie.setBearing,args:[e.bearing]}),R.default$13(t.pitch,e.pitch)||n.push({command:ie.setPitch,args:[e.pitch]}),R.default$13(t.sprite,e.sprite)||n.push({command:ie.setSprite,args:[e.sprite]}),R.default$13(t.glyphs,e.glyphs)||n.push({command:ie.setGlyphs,args:[e.glyphs]}),R.default$13(t.transition,e.transition)||n.push({command:ie.setTransition,args:[e.transition]}),R.default$13(t.light,e.light)||n.push({command:ie.setLight,args:[e.light]});var i={},r=[];!function(t,e,n,i){var r,o,a,s,l;for(r in e=e||{},t=t||{})t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||oe(r,n,i));for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)?R.default$13(t[r],e[r])||("geojson"===t[r].type&&"geojson"===e[r].type&&function(t,e,n){for(var i in t[n])if(t[n].hasOwnProperty(i)&&"data"!==i&&!R.default$13(t[n][i],e[n][i]))return;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!R.default$13(t[n][i],e[n][i]))return;return 1}(t,e,r)?n.push({command:ie.setGeoJSONSourceData,args:[r,e[r].data]}):(o=r,a=e,s=n,l=i,oe(o,s,l),re(o,a,s))):re(r,e,n))}(t.sources,e.sources,r,i);var o=[];t.layers&&t.layers.forEach(function(t){i[t.source]?n.push({command:ie.removeLayer,args:[t.id]}):o.push(t)}),n=n.concat(r),function(t,e,n){e=e||[];for(var i,r,o,a,s,l=(t=t||[]).map(se),u=e.map(se),c=t.reduce(le,{}),h=e.reduce(le,{}),p=l.slice(),d=Object.create(null),f=0,m=0;f<l.length;f++)i=l[f],h.hasOwnProperty(i)?m++:(n.push({command:ie.removeLayer,args:[i]}),p.splice(p.indexOf(i,m),1));for(m=f=0;f<u.length;f++)i=u[u.length-1-f],p[p.length-1-f]!==i&&(c.hasOwnProperty(i)?(n.push({command:ie.removeLayer,args:[i]}),p.splice(p.lastIndexOf(i,p.length-m),1)):m++,a=p[p.length-f],n.push({command:ie.addLayer,args:[h[i],a]}),p.splice(p.length-f,0,i),d[i]=!0);for(f=0;f<u.length;f++)if(r=c[i=u[f]],o=h[i],!d[i]&&!R.default$13(r,o))if(R.default$13(r.source,o.source)&&R.default$13(r["source-layer"],o["source-layer"])&&R.default$13(r.type,o.type)){for(s in ae(r.layout,o.layout,n,i,null,ie.setLayoutProperty),ae(r.paint,o.paint,n,i,null,ie.setPaintProperty),R.default$13(r.filter,o.filter)||n.push({command:ie.setFilter,args:[i,o.filter]}),R.default$13(r.minzoom,o.minzoom)&&R.default$13(r.maxzoom,o.maxzoom)||n.push({command:ie.setLayerZoomRange,args:[i,o.minzoom,o.maxzoom]}),r)r.hasOwnProperty(s)&&"layout"!==s&&"paint"!==s&&"filter"!==s&&"metadata"!==s&&"minzoom"!==s&&"maxzoom"!==s&&(0===s.indexOf("paint.")?ae(r[s],o[s],n,i,s.slice(6),ie.setPaintProperty):R.default$13(r[s],o[s])||n.push({command:ie.setLayerProperty,args:[i,s,o[s]]}));for(s in o)o.hasOwnProperty(s)&&!r.hasOwnProperty(s)&&"layout"!==s&&"paint"!==s&&"filter"!==s&&"metadata"!==s&&"minzoom"!==s&&"maxzoom"!==s&&(0===s.indexOf("paint.")?ae(r[s],o[s],n,i,s.slice(6),ie.setPaintProperty):R.default$13(r[s],o[s])||n.push({command:ie.setLayerProperty,args:[i,s,o[s]]}))}else n.push({command:ie.removeLayer,args:[i]}),a=p[p.lastIndexOf(i)+1],n.push({command:ie.addLayer,args:[o,a]})}(o,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:ie.setStyle,args:[e]}]}return n}(this.serialize(),t).filter(function(t){return!(t.command in Ke)});if(0===n.length)return!1;var i=n.filter(function(t){return!(t.command in He)});if(0<i.length)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},Je.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire(new R.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,e),this.fire(new R.Event("data",{dataType:"style"}))},Je.prototype.getImage=function(t){return this.imageManager.getImage(t)},Je.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new R.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this.fire(new R.Event("data",{dataType:"style"}))},Je.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Je.prototype.addSource=function(t,e,n){var i,r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");0<=["vector","raster","geojson","video","image"].indexOf(e.type)&&this._validate(R.validateStyle.source,"sources."+t,e,null,n)||(this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0),(i=this.sourceCaches[t]=new Kt(t,e,this.dispatcher)).style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:t}}),i.onAdd(this.map),this._changed=!0)},Je.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var e in this._layers)if(this._layers[e].source===t)return this.fire(new R.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+e+'" is using it.')));var n=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],n.fire(new R.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),n.setEventedParent(null),n.clearTiles(),n.onRemove&&n.onRemove(this.map),this._changed=!0},Je.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},Je.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},Je.prototype.addLayer=function(t,e,n){this._checkLoaded();var i=t.id;this.getLayer(i)?this.fire(new R.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map'))):("object"==typeof t.source&&(this.addSource(i,t.source),t=R.clone(t),t=R.extend(t,{source:i})),this._validate(R.validateStyle.layer,"layers."+i,t,{arrayIndex:-1},n)||(n=R.default$20(t),this._validateLayer(n),n.setEventedParent(this,{layer:{id:i}}),t=e?this._order.indexOf(e):this._order.length,e&&-1===t?this.fire(new R.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(t,0,i),this._layerOrderChanged=!0,this._layers[i]=n,this._removedLayers[i]&&n.source&&(t=this._removedLayers[i],delete this._removedLayers[i],t.type!==n.type?this._updatedSources[n.source]="clear":(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause())),this._updateLayer(n))))},Je.prototype.moveLayer=function(t,e){var n;this._checkLoaded(),this._changed=!0,this._layers[t]?t!==e&&(n=this._order.indexOf(t),this._order.splice(n,1),n=e?this._order.indexOf(e):this._order.length,e&&-1===n?this.fire(new R.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(n,0,t),this._layerOrderChanged=!0)):this.fire(new R.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},Je.prototype.removeLayer=function(t){this._checkLoaded();var e,n=this._layers[t];n?(n.setEventedParent(null),e=this._order.indexOf(t),this._order.splice(e,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]):this.fire(new R.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},Je.prototype.getLayer=function(t){return this._layers[t]},Je.prototype.setLayerZoomRange=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===e&&i.maxzoom===n||(null!=e&&(i.minzoom=e),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new R.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},Je.prototype.setFilter=function(t,e){this._checkLoaded();var n=this.getLayer(t);if(n){if(!R.default$13(n.filter,e))return null==e?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(R.validateStyle.filter,"layers."+n.id+".filter",e)||(n.filter=R.clone(e),this._updateLayer(n)))}else this.fire(new R.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},Je.prototype.getFilter=function(t){return R.clone(this.getLayer(t).filter)},Je.prototype.setLayoutProperty=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);i?R.default$13(i.getLayoutProperty(e),n)||(i.setLayoutProperty(e,n),this._updateLayer(i)):this.fire(new R.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},Je.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},Je.prototype.setPaintProperty=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);i?R.default$13(i.getPaintProperty(e),n)||(i.setPaintProperty(e,n)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new R.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},Je.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},Je.prototype.setFeatureState=function(t,e){this._checkLoaded();var n=t.source,i=t.sourceLayer,r=this.sourceCaches[n];void 0!==r?"vector"!==r.getSource().type||i?r.setFeatureState(i,t.id,e):this.fire(new R.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new R.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},Je.prototype.getFeatureState=function(t){this._checkLoaded();var e=t.source,n=t.sourceLayer,i=this.sourceCaches[e];if(void 0!==i){if("vector"!==i.getSource().type||n)return i.getFeatureState(n,t.id);this.fire(new R.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new R.ErrorEvent(new Error("The source '"+e+"' does not exist in the map's style.")))},Je.prototype.getTransition=function(){return R.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Je.prototype.serialize=function(){var e=this;return R.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:R.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(t){return void 0!==t})},Je.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},Je.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;0<=n;n--)for(var i=this._order[n],r=0,o=t;r<o.length;r+=1){var a=o[r][i];if(a)for(var s=0,l=a;s<l.length;s+=1){var u=l[s];e.push(u)}}return e},Je.prototype.queryRenderedFeatures=function(t,e,n){e&&e.filter&&this._validate(R.validateStyle.filter,"queryRenderedFeatures.filter",e.filter);var i={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire(new R.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var r=0,o=e.layers;r<o.length;r+=1){var a=o[r],s=this._layers[a];if(!s)return this.fire(new R.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be queried for features."))),[];i[s.source]=!0}}var l,u=[];for(l in this.sourceCaches)e.layers&&!i[l]||u.push(function(n,t,e,i,r){var o=r.maxPitchScaleFactor();(e=n.tilesIn(e,o)).sort(at);for(var f=[],a=0,s=e;a<s.length;a+=1){var l=s[a];f.push({wrappedTileID:l.tileID.wrapped().key,queryResults:l.tile.queryRenderedFeatures(t,n._state,l.queryGeometry,l.scale,i,r,o,n.transform.calculatePosMatrix(l.tileID.toUnwrapped()))})}var u,c=function(){for(var t={},e={},n=0,i=f;n<i.length;n+=1){var r,o=i[n],a=o.queryResults,o=o.wrappedTileID,s=e[o]=e[o]||{};for(r in a)for(var l=a[r],u=s[r]=s[r]||{},c=t[r]=t[r]||[],h=0,p=l;h<p.length;h+=1){var d=p[h];u[d.featureIndex]||(u[d.featureIndex]=!0,c.push(d.feature))}}return t}();for(u in c)c[u].forEach(function(t){var e=n.getFeatureState(t.layer["source-layer"],t.id);t.source=t.layer.source,t.layer["source-layer"]&&(t.sourceLayer=t.layer["source-layer"]),t.state=e});return c}(this.sourceCaches[l],this._layers,t.worldCoordinate,e,n));return this.placement&&u.push(function(l,i,t,u,e,n){for(var c={},h=e.queryRenderedSymbols(t),r=[],o=0,a=Object.keys(h).map(Number);o<a.length;o+=1){var s=a[o];r.push(n[s])}r.sort(at);for(var p=0,d=r;p<d.length;p+=1)!function(){var t,r=d[p],e=r.featureIndex.lookupSymbolFeatures(h[r.bucketInstanceId],r.bucketIndex,r.sourceLayerIndex,u.filter,u.layers,l);for(t in e){var n=c[t]=c[t]||[],i=e[t];i.sort(function(t,e){var n=r.featureSortOrder;if(n){var i=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex});for(var o=0,a=i;o<a.length;o+=1){var s=a[o];n.push(s.feature)}}}();for(var f in c)!function(n){c[n].forEach(function(t){var e=l[n],e=i[e.source].getFeatureState(t.layer["source-layer"],t.id);t.source=t.layer.source,t.layer["source-layer"]&&(t.sourceLayer=t.layer["source-layer"]),t.state=e})}(f);return c}(this._layers,this.sourceCaches,t.viewport,e,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(u)},Je.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(R.validateStyle.filter,"querySourceFeatures.filter",e.filter);t=this.sourceCaches[t];return t?function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),i=[],r={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(i,t))}return i}(t,e):[]},Je.prototype.addSourceType=function(t,e,n){return Je.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(Je.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},Je.prototype.getLight=function(){return this.light.getLight()},Je.prototype.setLight=function(t){this._checkLoaded();var e,n,i=this.light.getLight(),r=!1;for(e in t)if(!R.default$13(t[e],i[e])){r=!0;break}r&&(n={now:R.default$2.now(),transition:R.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(t),this.light.updateTransitions(n))},Je.prototype._validate=function(t,e,n,i,r){return(!r||!1!==r.validate)&&We(this,t.call(R.validateStyle,R.extend({key:e,style:this.serialize(),value:n,styleSpec:R.default$7},i)))},Je.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),R.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},Je.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},Je.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},Je.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},Je.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},Je.prototype._updatePlacement=function(t,e,n,i){for(var r=!1,o=!1,a={},s=0,l=this._order;s<l.length;s+=1){var u,c=l[s],c=this._layers[c];"symbol"===c.type&&(a[c.source]||(u=this.sourceCaches[c.source],a[c.source]=u.getRenderableIds().map(function(t){return u.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})),c=this.crossTileSymbolIndex.addLayer(c,a[c.source],t.center.lng),r=r||c)}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var h=this._layerOrderChanged;if((h||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(R.default$2.now()))&&(this.pauseablePlacement=new je(t,this._order,h,e,n,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,a),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,R.default$2.now()),o=!0),r&&this.pauseablePlacement.placement.setStale()),o||r)for(var p=0,d=this._order;p<d.length;p+=1){var f=d[p],f=this._layers[f];"symbol"===f.type&&this.placement.updateLayerOpacities(f,a[f.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(R.default$2.now())},Je.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},Je.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},Je);function Je(t,e){var r=this;void 0===e&&(e={}),$e.call(this),this.map=t,this.dispatcher=new z(te=te||new ee,this),this.imageManager=new b,this.glyphManager=new S(t._transformRequest,e.localIdeographFontFamily),this.lineAtlas=new I(256,512),this.crossTileSymbolIndex=new Ge,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new R.default$21,this._loaded=!1,this._resetUpdates();var n=this;this._rtlTextPluginCallback=Je.registerForPluginAvailability(function(t){for(var e in n.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),n.sourceCaches)n.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){t=r.sourceCaches[t.sourceId];if(t){var e=t.getSource();if(e&&e.vectorLayerIds)for(var n in r._layers){var i=r._layers[n];i.source===e.id&&r._validateLayer(i)}}}})}Xe.getSourceType=function(t){return nt[t]},Xe.setSourceType=function(t,e){nt[t]=e},Xe.registerForPluginAvailability=R.registerForPluginAvailability;var Ye,Qe=R.createLayout([{name:"a_pos",type:"Int16",components:2}]),tn={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_a.y + 2.0) / 2.0) / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_b.y + 2.0) / 2.0) / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},en=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(Ye in tn)!function(t){var a={};(t=tn[t]).fragmentSource=t.fragmentSource.replace(en,function(t,e,n,i,r){return a[r]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nvarying "+n+" "+i+" "+r+";\n#else\nuniform "+n+" "+i+" u_"+r+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+r+"\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n"}),t.vertexSource=t.vertexSource.replace(en,function(t,e,n,i,r){var o="float"===i?"vec2":"vec4";return a[r]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float a_"+r+"_t;\nattribute "+n+" "+o+" a_"+r+";\nvarying "+n+" "+i+" "+r+";\n#else\nuniform "+n+" "+i+" u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = unpack_mix_"+o+"(a_"+r+", a_"+r+"_t);\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float a_"+r+"_t;\nattribute "+n+" "+o+" a_"+r+";\n#else\nuniform "+n+" "+i+" u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+n+" "+i+" "+r+" = unpack_mix_"+o+"(a_"+r+", a_"+r+"_t);\n#else\n    "+n+" "+i+" "+r+" = u_"+r+";\n#endif\n"})}(Ye);function nn(t,e,n,i){var r=t.gl;this.program=r.createProgram(),t=n.defines().concat("#define DEVICE_PIXEL_RATIO "+R.default$2.devicePixelRatio.toFixed(1)),i&&t.push("#define OVERDRAW_INSPECTOR;"),i=t.concat(rn.prelude.fragmentSource,e.fragmentSource).join("\n"),t=t.concat(rn.prelude.vertexSource,e.vertexSource).join("\n"),e=r.createShader(r.FRAGMENT_SHADER),r.shaderSource(e,i),r.compileShader(e),r.attachShader(this.program,e),e=r.createShader(r.VERTEX_SHADER),r.shaderSource(e,t),r.compileShader(e),r.attachShader(this.program,e);for(var o=n.layoutAttributes||[],a=0;a<o.length;a++)r.bindAttribLocation(this.program,a,o[a].name);r.linkProgram(this.program),this.numAttributes=r.getProgramParameter(this.program,r.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var s=0;s<this.numAttributes;s++){var l=r.getActiveAttrib(this.program,s);l&&(this.attributes[l.name]=r.getAttribLocation(this.program,l.name))}for(var u=r.getProgramParameter(this.program,r.ACTIVE_UNIFORMS),c=0;c<u;c++){var h=r.getActiveUniform(this.program,c);h&&(this.uniforms[h.name]=r.getUniformLocation(this.program,h.name))}}var rn=tn;function on(t,e,n,i,r){var o=t.context,a=o.gl,s=r?t.useProgram("collisionCircle"):t.useProgram("collisionBox");o.setDepthMode(qt.disabled),o.setStencilMode(Gt.disabled),o.setColorMode(t.colorModeForRenderPass());for(var l=0;l<i.length;l++){var u,c=i[l],h=e.getTile(c),p=h.getBucket(n);!p||(u=r?p.collisionCircle:p.collisionBox)&&(a.uniformMatrix4fv(s.uniforms.u_matrix,!1,c.posMatrix),a.uniform1f(s.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),p=Te(h,1,t.transform.zoom),c=Math.pow(2,t.transform.zoom-h.tileID.overscaledZ),a.uniform1f(s.uniforms.u_pixels_to_tile_units,p),a.uniform2f(s.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(p*c),t.transform.pixelsToGLUnits[1]/(p*c)),a.uniform1f(s.uniforms.u_overscale_factor,h.tileID.overscaleFactor()),s.draw(o,r?a.TRIANGLES:a.LINES,n.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,null,u.collisionVertexBuffer,null))}}nn.prototype.draw=function(t,e,n,i,r,o,a,s,l){for(var u,c=t.gl,h=((u={})[c.LINES]=2,u[c.TRIANGLES]=3,u[e]),p=0,d=o.get();p<d.length;p+=1){var f=d[p],m=f.vaos||(f.vaos={});(m[n]||(m[n]=new $)).bind(t,this,i,a?a.getPaintVertexBuffers():[],r,f.vertexOffset,s,l),c.drawElements(e,f.primitiveLength*h,c.UNSIGNED_SHORT,f.primitiveOffset*h*2)}};var an=R.identity(new Float32Array(16)),sn=R.default$18.layout;function ln(t,e,n,i,r,o,a,s,l,u){var c,h=t.context,p=h.gl,d=t.transform,f="map"===s,m="map"===l,y=f&&"point"!==n.layout.get("symbol-placement"),g=f&&!m&&!y;h.setDepthMode(m?t.depthModeForSublayer(0,qt.ReadOnly):qt.disabled);for(var v,_,b,x,w=0,T=i;w<T.length;w+=1){var E,k,S,P,C,M,L,I,A=T[w],z=e.getTile(A),O=z.getBucket(n);O&&(E=r?O.text:O.icon)&&E.segments.get().length&&(k=E.programConfigurations.get(n.id),S=r||O.sdfIcons,P=r?O.textSizeData:O.iconSizeData,c||(c=t.useProgram(S?"symbolSDF":"symbolIcon",k),k.setUniforms(t.context,c,n.paint,{zoom:t.transform.zoom}),b=c,M=r,x=g,v=m,k=P,L=_=void 0,_=(P=t).context.gl,L=P.transform,_.uniform1i(b.uniforms.u_pitch_with_map,v?1:0),_.uniform1f(b.uniforms.u_is_text,M?1:0),_.uniform1f(b.uniforms.u_pitch,L.pitch/360*2*Math.PI),P="constant"===k.functionType||"source"===k.functionType,v="constant"===k.functionType||"camera"===k.functionType,_.uniform1i(b.uniforms.u_is_size_zoom_constant,P?1:0),_.uniform1i(b.uniforms.u_is_size_feature_constant,v?1:0),_.uniform1f(b.uniforms.u_camera_to_center_distance,L.cameraToCenterDistance),void 0!==(M=R.evaluateSizeForZoom(k,L.zoom,sn.properties[M?"text-size":"icon-size"])).uSizeT&&_.uniform1f(b.uniforms.u_size_t,M.uSizeT),void 0!==M.uSize&&_.uniform1f(b.uniforms.u_size,M.uSize),_.uniform1f(b.uniforms.u_aspect_ratio,L.width/L.height),_.uniform1i(b.uniforms.u_rotate_symbol,x?1:0)),h.activeTexture.set(p.TEXTURE0),p.uniform1i(c.uniforms.u_texture,0),r?(z.glyphAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.uniform2fv(c.uniforms.u_texsize,z.glyphAtlasTexture.size)):(C=1!==n.layout.get("icon-size").constantOr(0)||O.iconsNeedLinear,I=m||0!==d.pitch,z.iconAtlasTexture.bind(S||t.options.rotating||t.options.zooming||C||I?p.LINEAR:p.NEAREST,p.CLAMP_TO_EDGE),p.uniform2fv(c.uniforms.u_texsize,z.iconAtlasTexture.size)),p.uniformMatrix4fv(c.uniforms.u_matrix,!1,t.translatePosMatrix(A.posMatrix,z,o,a)),M=Te(z,1,t.transform.zoom),L=he(A.posMatrix,m,f,t.transform,M),_=A.posMatrix,b=m,x=f,C=t.transform,I=M,M=void 0,M=R.identity(new Float32Array(16)),b?(R.multiply(M,M,_),R.scale(M,M,[I,I,1]),x||R.rotateZ(M,M,-C.angle)):(R.scale(M,M,[1,-1,1]),R.translate(M,M,[-1,-1,0]),R.scale(M,M,[2/C.width,2/C.height,1])),I=M,p.uniformMatrix4fv(c.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(I,z,o,a,!0)),y?(p.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,an),function(t,e,n,i,r,o,a,s){var l=i?t.textSizeData:t.iconSizeData,u=R.evaluateSizeForZoom(l,n.transform.zoom,ce.properties[i?"text-size":"icon-size"]),c=[256/n.width*2+1,256/n.height*2+1],h=(i?t.text:t.icon).dynamicLayoutVertexArray;h.clear();for(var p=t.lineVertexArray,d=(i?t.text:t.icon).placedSymbolArray,f=n.transform.width/n.transform.height,m=!1,y=0;y<d.length;y++){var g,v,_,b,x,w=d.get(y);w.hidden||w.writingMode===R.WritingMode.vertical&&!m?_e(w.numGlyphs,h):(m=!1,_=[w.anchorX,w.anchorY,0,1],R.transformMat4(_,_,e),v=c,b=void 0,b=(g=_)[0]/g[3],g=g[1]/g[3],b>=-v[0]&&b<=v[0]&&g>=-v[1]&&g<=v[1]?(x=.5+_[3]/n.transform.cameraToCenterDistance*.5,b=R.evaluateSizeForFeature(l,u,w),g=a?b*x:b/x,_=pe(v=new R.default(w.anchorX,w.anchorY),r).point,m=(x=me(w,g,!(b={}),s,e,r,o,t.glyphOffsetArray,p,h,_,v,b,f)).useVertical,(x.notEnoughRoom||m||x.needsFlipping&&me(w,g,!0,s,e,r,o,t.glyphOffsetArray,p,h,_,v,b,f).notEnoughRoom)&&_e(w.numGlyphs,h)):_e(w.numGlyphs,h))}(i?t.text:t.icon).dynamicLayoutVertexBuffer.updateData(h)}(O,A.posMatrix,t,r,L,I,m,u)):p.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,L),p.uniform1f(c.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),x=c,C=n,M=E,z=r,O=m,I=A=void 0,A=(L=t).context,I=A.gl,L=L.transform,S&&(z=0!==C.paint.get(z?"text-halo-width":"icon-halo-width").constantOr(1),L=O?Math.cos(L._pitch)*L.cameraToCenterDistance:1,I.uniform1f(x.uniforms.u_gamma_scale,L),z&&(I.uniform1f(x.uniforms.u_is_halo,1),un(M,C,A,x)),I.uniform1f(x.uniforms.u_is_halo,0)),un(M,C,A,x))}}function un(t,e,n,i){i.draw(n,n.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}var cn=function(t,e){if(!t)return!1;var n=e.imageManager.getPattern(t.from),t=e.imageManager.getPattern(t.to);return!n||!t},hn=function(t,e,n){var i=e.context,r=i.gl,o=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);r.uniform1i(n.uniforms.u_image,0),r.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),r.uniform2fv(n.uniforms.u_pattern_br_a,o.br),r.uniform2fv(n.uniforms.u_pattern_tl_b,a.tl),r.uniform2fv(n.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize(),l=s.width,s=s.height;r.uniform2fv(n.uniforms.u_texsize,[l,s]),r.uniform1f(n.uniforms.u_mix,t.t),r.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),r.uniform2fv(n.uniforms.u_pattern_size_b,a.displaySize),r.uniform1f(n.uniforms.u_scale_a,t.fromScale),r.uniform1f(n.uniforms.u_scale_b,t.toScale),i.activeTexture.set(r.TEXTURE0),e.imageManager.bind(e.context)},pn=function(t,e,n){var i=e.context.gl;i.uniform1f(n.uniforms.u_tile_units_to_pixels,1/Te(t,1,e.transform.tileZoom));var r=Math.pow(2,t.tileID.overscaledZ),e=t.tileSize*Math.pow(2,e.transform.tileZoom)/r,r=e*(t.tileID.canonical.x+t.tileID.wrap*r),t=e*t.tileID.canonical.y;i.uniform2f(n.uniforms.u_pixel_coord_upper,r>>16,t>>16),i.uniform2f(n.uniforms.u_pixel_coord_lower,65535&r,65535&t)};function dn(t,e,n,i,r){if(!cn(n.paint.get("fill-pattern"),t))for(var o=!0,a=0,s=i;a<s.length;a+=1){var l=s[a],u=e.getTile(l),c=u.getBucket(n);c&&(t.context.setStencilMode(t.stencilModeForClipping(l)),r(t,e,n,u,l,c,o),o=!1)}}function fn(t,e,n,i,r,o,a){var s=t.context.gl,l=o.programConfigurations.get(n.id);yn("fill",n.paint.get("fill-pattern"),t,l,n,i,r,a).draw(t.context,s.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,l)}function mn(t,e,n,i,r,o,a){var s=t.context.gl,l=o.programConfigurations.get(n.id),a=yn("fillOutline",n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),t,l,n,i,r,a);s.uniform2f(a.uniforms.u_world,s.drawingBufferWidth,s.drawingBufferHeight),a.draw(t.context,s.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,l)}function yn(t,e,n,i,r,o,a,s){var l,u=n.context.program.get();return e?(l=n.useProgram(t+"Pattern",i),!s&&l.program===u||(i.setUniforms(n.context,l,r.paint,{zoom:n.transform.zoom}),hn(e,n,l)),pn(o,n,l)):(l=n.useProgram(t,i),!s&&l.program===u||i.setUniforms(n.context,l,r.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"))),l}function gn(t,e){this.context=new $t(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Kt.maxUnderzooming+Kt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new R.default$22,this.crossTileSymbolIndex=new Ge}var vn={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},_n={symbol:function(t,e,n,i){var r;"translucent"===t.renderPass&&((r=t.context).setStencilMode(Gt.disabled),r.setColorMode(t.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&ln(t,e,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&ln(t,e,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&(on(t=t,e=e,n=n,i=i,!1),on(t,e,n,i,!0)))},circle:function(t,e,n,i){if("translucent"===t.renderPass){var r=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==r.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=t.context,l=s.gl;s.setDepthMode(t.depthModeForSublayer(0,qt.ReadOnly)),s.setStencilMode(Gt.disabled),s.setColorMode(t.colorModeForRenderPass());for(var u=!0,c=0;c<i.length;c++){var h,p,d,f=i[c],m=e.getTile(f),y=m.getBucket(n);y&&(d=t.context.program.get(),h=y.programConfigurations.get(n.id),p=t.useProgram("circle",h),!u&&p.program===d||(h.setUniforms(s,p,n.paint,{zoom:t.transform.zoom}),u=!1),l.uniform1f(p.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),l.uniform1i(p.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")?(l.uniform1i(p.uniforms.u_pitch_with_map,1),d=Te(m,1,t.transform.zoom),l.uniform2f(p.uniforms.u_extrude_scale,d,d)):(l.uniform1i(p.uniforms.u_pitch_with_map,0),l.uniform2fv(p.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits)),l.uniformMatrix4fv(p.uniforms.u_matrix,!1,t.translatePosMatrix(f.posMatrix,m,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),p.draw(s,l.TRIANGLES,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,h))}}}},heatmap:function(t,e,n,i){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var r=t.context,o=r.gl;r.setDepthMode(t.depthModeForSublayer(0,qt.ReadOnly)),r.setStencilMode(Gt.disabled),function(t,e,n){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r,o=n.heatmapFbo;o?(i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),t.bindFramebuffer.set(o.framebuffer)):(r=i.createTexture(),i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),o=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,n,i,r){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),r.colorAttachment.set(i),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,n,i,r))}(t,e,r,o))}(r,t,n),r.clear({color:R.default$8.transparent}),r.setColorMode(new Wt([o.ONE,o.ONE],R.default$8.transparent,[!0,!0,!0,!0]));for(var a=!0,s=0;s<i.length;s++){var l,u,c,h,p,d,f=i[s];e.hasRenderableParent(f)||(u=(l=e.getTile(f)).getBucket(n))&&(c=t.context.program.get(),h=u.programConfigurations.get(n.id),p=t.useProgram("heatmap",h),d=t.transform.zoom,!a&&p.program===c||(h.setUniforms(t.context,p,n.paint,{zoom:d}),a=!1),o.uniform1f(p.uniforms.u_extrude_scale,Te(l,1,d)),o.uniform1f(p.uniforms.u_intensity,n.paint.get("heatmap-intensity")),o.uniformMatrix4fv(p.uniforms.u_matrix,!1,f.posMatrix),p.draw(r,o.TRIANGLES,n.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,h))}r.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),y=n,g=(m=t).context,v=g.gl,(_=y.heatmapFbo)&&(g.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,_.colorAttachment.get()),g.activeTexture.set(v.TEXTURE1),(y.colorRampTexture||(y.colorRampTexture=new R.default$4(g,y.colorRamp,v.RGBA))).bind(v.LINEAR,v.CLAMP_TO_EDGE),g.setDepthMode(qt.disabled),g.setStencilMode(Gt.disabled),g=m.useProgram("heatmapTexture"),y=y.paint.get("heatmap-opacity"),v.uniform1f(g.uniforms.u_opacity,y),v.uniform1i(g.uniforms.u_image,0),v.uniform1i(g.uniforms.u_color_ramp,1),y=R.create(),R.ortho(y,0,m.width,m.height,0,0,1),v.uniformMatrix4fv(g.uniforms.u_matrix,!1,y),v.uniform2f(g.uniforms.u_world,v.drawingBufferWidth,v.drawingBufferHeight),m.viewportVAO.bind(m.context,g,m.viewportBuffer,[]),v.drawArrays(v.TRIANGLE_STRIP,0,4)));var m,y,g,v,_},line:function(t,e,n,i){if("translucent"===t.renderPass){var r=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0!==r.constantOr(1)&&0!==o.constantOr(1)){o=t.context;o.setDepthMode(t.depthModeForSublayer(0,qt.ReadOnly)),o.setColorMode(t.colorModeForRenderPass());for(var a,s=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":n.paint.get("line-gradient")?"lineGradient":"line",l=!0,u=0,c=i;u<c.length;u+=1){var h,p,d,f,m=c[u],y=e.getTile(m),g=y.getBucket(n);g&&(h=g.programConfigurations.get(n.id),f=t.context.program.get(),p=t.useProgram(s,h),d=l||p.program!==f,f=a!==y.tileID.overscaledZ,d&&h.setUniforms(t.context,p,n.paint,{zoom:t.transform.zoom}),function(t,e,n,i,r,o,a,s,l){var u,c,h,p,d=e.context,f=d.gl,m=r.paint.get("line-dasharray"),y=r.paint.get("line-pattern");if(s||l){var g=1/Te(n,1,e.transform.tileZoom);if(m){u=e.lineAtlas.getDash(m.from,"round"===r.layout.get("line-cap")),c=e.lineAtlas.getDash(m.to,"round"===r.layout.get("line-cap"));var l=u.width*m.fromScale,v=c.width*m.toScale;f.uniform2f(t.uniforms.u_patternscale_a,g/l,-u.height/2),f.uniform2f(t.uniforms.u_patternscale_b,g/v,-c.height/2),f.uniform1f(t.uniforms.u_sdfgamma,e.lineAtlas.width/(256*Math.min(l,v)*R.default$2.devicePixelRatio)/2)}else if(y){if(h=e.imageManager.getPattern(y.from),p=e.imageManager.getPattern(y.to),!h||!p)return;f.uniform2f(t.uniforms.u_pattern_size_a,h.displaySize[0]*y.fromScale/g,h.displaySize[1]),f.uniform2f(t.uniforms.u_pattern_size_b,p.displaySize[0]*y.toScale/g,p.displaySize[1]);v=e.imageManager.getPixelSize(),g=v.width,v=v.height;f.uniform2fv(t.uniforms.u_texsize,[g,v])}f.uniform2f(t.uniforms.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}if(s&&(m?(f.uniform1i(t.uniforms.u_image,0),d.activeTexture.set(f.TEXTURE0),e.lineAtlas.bind(d),f.uniform1f(t.uniforms.u_tex_y_a,u.y),f.uniform1f(t.uniforms.u_tex_y_b,c.y),f.uniform1f(t.uniforms.u_mix,m.t)):y&&(f.uniform1i(t.uniforms.u_image,0),d.activeTexture.set(f.TEXTURE0),e.imageManager.bind(d),f.uniform2fv(t.uniforms.u_pattern_tl_a,h.tl),f.uniform2fv(t.uniforms.u_pattern_br_a,h.br),f.uniform2fv(t.uniforms.u_pattern_tl_b,p.tl),f.uniform2fv(t.uniforms.u_pattern_br_b,p.br),f.uniform1f(t.uniforms.u_fade,y.t))),d.setStencilMode(e.stencilModeForClipping(o)),o=e.translatePosMatrix(o.posMatrix,n,r.paint.get("line-translate"),r.paint.get("line-translate-anchor")),f.uniformMatrix4fv(t.uniforms.u_matrix,!1,o),f.uniform1f(t.uniforms.u_ratio,1/Te(n,1,e.transform.zoom)),r.paint.get("line-gradient")){d.activeTexture.set(f.TEXTURE0);e=r.gradientTexture;if(!r.gradient)return;(e=e||(r.gradientTexture=new R.default$4(d,r.gradient,f.RGBA))).bind(f.LINEAR,f.CLAMP_TO_EDGE),f.uniform1i(t.uniforms.u_image,0)}t.draw(d,f.TRIANGLES,r.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,a)}(p,t,y,g,n,m,h,d,f),a=y.tileID.overscaledZ,l=!1)}}}},fill:function(t,e,n,i){var r,o=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");0!==a.constantOr(1)&&((r=t.context).setColorMode(t.colorModeForRenderPass()),a=n.paint.get("fill-pattern")||1!==o.constantOr(R.default$8.transparent).a||1!==a.constantOr(0)?"translucent":"opaque",t.renderPass===a&&(r.setDepthMode(t.depthModeForSublayer(1,"opaque"===t.renderPass?qt.ReadWrite:qt.ReadOnly)),dn(t,e,n,i,fn)),"translucent"===t.renderPass&&n.paint.get("fill-antialias")&&(r.setDepthMode(t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,qt.ReadOnly)),dn(t,e,n,i,mn)))},"fill-extrusion":function(t,e,n,i){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){h=n,d=(c=t).context,f=d.gl,m=h.viewportFrame,c.depthRboNeedsClear&&c.setupOffscreenDepthRenderbuffer(),m||((p=new R.default$4(d,{width:c.width,height:c.height,data:null},f.RGBA)).bind(f.LINEAR,f.CLAMP_TO_EDGE),(m=h.viewportFrame=d.createFramebuffer(c.width,c.height)).colorAttachment.set(p.texture)),d.bindFramebuffer.set(m.framebuffer),m.depthAttachment.set(c.depthRbo),c.depthRboNeedsClear&&(d.clear({depth:1}),c.depthRboNeedsClear=!1),d.clear({color:R.default$8.transparent}),d.setStencilMode(Gt.disabled),d.setDepthMode(new qt(f.LEQUAL,qt.ReadWrite,[0,1])),d.setColorMode(c.colorModeForRenderPass());for(var r=!0,o=0,a=i;o<a.length;o+=1){var s=a[o],l=e.getTile(s),u=l.getBucket(n);u&&(function(t,e,n,i,r,o){var a=t.context,s=a.gl,l=e.paint.get("fill-extrusion-pattern"),u=t.context.program.get(),c=r.programConfigurations.get(e.id),h=t.useProgram(l?"fillExtrusionPattern":"fillExtrusion",c);if(!o&&h.program===u||c.setUniforms(a,h,e.paint,{zoom:t.transform.zoom}),l){if(cn(l,t))return;hn(l,t,h),pn(n,t,h),s.uniform1f(h.uniforms.u_height_factor,-Math.pow(2,i.overscaledZ)/n.tileSize/8)}t.context.gl.uniformMatrix4fv(h.uniforms.u_matrix,!1,t.translatePosMatrix(i.posMatrix,n,e.paint.get("fill-extrusion-translate"),e.paint.get("fill-extrusion-translate-anchor"))),o=h,l=(u=t).context.gl,i=u.style.light,t=[(n=i.properties.get("position")).x,n.y,n.z],n=R.create$2(),"viewport"===i.properties.get("anchor")&&R.fromRotation(n,-u.transform.angle),R.transformMat3(t,t,n),n=i.properties.get("color"),l.uniform3fv(o.uniforms.u_lightpos,t),l.uniform1f(o.uniforms.u_lightintensity,i.properties.get("intensity")),l.uniform3f(o.uniforms.u_lightcolor,n.r,n.g,n.b),h.draw(a,s.TRIANGLES,e.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,c)}(t,n,l,s,u,r),r=!1)}}else"translucent"===t.renderPass&&(p=t,(f=(m=n).viewportFrame)&&(c=(d=p.context).gl,i=p.useProgram("extrusionTexture"),d.setStencilMode(Gt.disabled),d.setDepthMode(qt.disabled),d.setColorMode(p.colorModeForRenderPass()),d.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,f.colorAttachment.get()),c.uniform1f(i.uniforms.u_opacity,m.paint.get("fill-extrusion-opacity")),c.uniform1i(i.uniforms.u_image,0),m=R.create(),R.ortho(m,0,p.width,p.height,0,0,1),c.uniformMatrix4fv(i.uniforms.u_matrix,!1,m),c.uniform2f(i.uniforms.u_world,c.drawingBufferWidth,c.drawingBufferHeight),p.viewportVAO.bind(d,i,p.viewportBuffer,[]),c.drawArrays(c.TRIANGLE_STRIP,0,4)));var c,h,p,d,f,m},hillshade:function(t,e,n,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var r=t.context,o=e.getSource().maxzoom;r.setDepthMode(t.depthModeForSublayer(0,qt.ReadOnly)),r.setStencilMode(Gt.disabled),r.setColorMode(t.colorModeForRenderPass());for(var a=0,s=i;a<s.length;a+=1){var l=s[a],u=e.getTile(l);u.needsHillshadePrepare&&"offscreen"===t.renderPass?(p=u,d=o,_=v=g=y=m=f=void 0,v=(h=t).context,_=v.gl,p.dem&&p.dem.level&&(f=p.dem.level.dim,g=p.dem.getPixels(),v.activeTexture.set(_.TEXTURE1),v.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||h.getTileTexture(p.tileSize),p.demTexture?((m=p.demTexture).update(g,{premultiply:!1}),m.bind(_.NEAREST,_.CLAMP_TO_EDGE)):(p.demTexture=new R.default$4(v,g,_.RGBA,{premultiply:!1}),p.demTexture.bind(_.NEAREST,_.CLAMP_TO_EDGE)),v.activeTexture.set(_.TEXTURE0),(g=p.fbo)||((y=new R.default$4(v,{width:f,height:f,data:null},_.RGBA)).bind(_.LINEAR,_.CLAMP_TO_EDGE),(g=p.fbo=v.createFramebuffer(f,f)).colorAttachment.set(y.texture)),v.bindFramebuffer.set(g.framebuffer),v.viewport.set([0,0,f,f]),y=R.create(),R.ortho(y,0,R.default$10,-R.default$10,0,0,1),R.translate(y,y,[0,-R.default$10,0]),g=h.useProgram("hillshadePrepare"),_.uniformMatrix4fv(g.uniforms.u_matrix,!1,y),_.uniform1f(g.uniforms.u_zoom,p.tileID.overscaledZ),_.uniform2fv(g.uniforms.u_dimension,[2*f,2*f]),_.uniform1i(g.uniforms.u_image,1),_.uniform1f(g.uniforms.u_maxzoom,d),d=h.rasterBoundsBuffer,h.rasterBoundsVAO.bind(v,g,d,[]),_.drawArrays(_.TRIANGLE_STRIP,0,d.length),p.needsHillshadePrepare=!1)):"translucent"===t.renderPass&&(c=u,l=n,p=d=_=g=v=h=f=y=m=void 0,_=(u=t).context,d=_.gl,(p=c.fbo)&&(m=u.useProgram("hillshade"),y=u.transform.calculatePosMatrix(c.tileID.toUnwrapped(),!0),f=m,h=u,g=(v=l).paint.get("hillshade-illumination-direction")*(Math.PI/180),"viewport"===v.paint.get("hillshade-illumination-anchor")&&(g-=h.transform.angle),h.context.gl.uniform2f(f.uniforms.u_light,v.paint.get("hillshade-exaggeration"),g),f=u,v=c.tileID.toCoordinate(),g=new R.default$15(v.column,v.row+1,v.zoom),g=[f.transform.coordinateLocation(v).lat,f.transform.coordinateLocation(g).lat],_.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,p.colorAttachment.get()),d.uniformMatrix4fv(m.uniforms.u_matrix,!1,y),d.uniform2fv(m.uniforms.u_latrange,g),d.uniform1i(m.uniforms.u_image,0),g=l.paint.get("hillshade-shadow-color"),d.uniform4f(m.uniforms.u_shadow,g.r,g.g,g.b,g.a),g=l.paint.get("hillshade-highlight-color"),d.uniform4f(m.uniforms.u_highlight,g.r,g.g,g.b,g.a),g=l.paint.get("hillshade-accent-color"),d.uniform4f(m.uniforms.u_accent,g.r,g.g,g.b,g.a),c.maskedBoundsBuffer&&c.maskedIndexBuffer&&c.segments?m.draw(_,d.TRIANGLES,l.id,c.maskedBoundsBuffer,c.maskedIndexBuffer,c.segments):(c=u.rasterBoundsBuffer,u.rasterBoundsVAO.bind(_,m,c,[]),d.drawArrays(d.TRIANGLE_STRIP,0,c.length))))}r.viewport.set([0,0,t.width,t.height])}var c,h,p,d,f,m,y,g,v,_},raster:function(t,e,n,i){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")){var r,o=t.context,a=o.gl,s=e.getSource(),l=t.useProgram("raster");o.setStencilMode(Gt.disabled),o.setColorMode(t.colorModeForRenderPass()),a.uniform1f(l.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),a.uniform1f(l.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),a.uniform1f(l.uniforms.u_saturation_factor,0<(r=n.paint.get("raster-saturation"))?1-1/(1.001-r):-r),a.uniform1f(l.uniforms.u_contrast_factor,0<(r=n.paint.get("raster-contrast"))?1/(1-r):1+r),a.uniform3fv(l.uniforms.u_spin_weights,function(t){t*=Math.PI/180;var e=Math.sin(t),t=Math.cos(t);return[(2*t+1)/3,(-Math.sqrt(3)*e-t+1)/3,(Math.sqrt(3)*e-t+1)/3]}(n.paint.get("raster-hue-rotate"))),a.uniform1f(l.uniforms.u_buffer_scale,1),a.uniform1i(l.uniforms.u_image0,0),a.uniform1i(l.uniforms.u_image1,1);for(var u=i.length&&i[0].overscaledZ,c=0,h=i;c<h.length;c+=1){var p=h[c];o.setDepthMode(t.depthModeForSublayer(p.overscaledZ-u,1===n.paint.get("raster-opacity")?qt.ReadWrite:qt.ReadOnly,a.LESS));var d=e.getTile(p),f=t.transform.calculatePosMatrix(p.toUnwrapped(),!0);d.registerFadeDuration(n.paint.get("raster-fade-duration")),a.uniformMatrix4fv(l.uniforms.u_matrix,!1,f);var m=e.findLoadedParent(p,0,{}),y=function(t,e,n,i,r){if(0<(a=i.paint.get("raster-fade-duration"))){var o=R.default$2.now(),i=(o-t.timeAdded)/a,a=e?(o-e.timeAdded)/a:-1,n=n.getSource(),n=r.coveringZoomLevel({tileSize:n.tileSize,roundZoom:n.roundZoom}),n=!e||Math.abs(e.tileID.overscaledZ-n)>Math.abs(t.tileID.overscaledZ-n),a=n&&t.refreshedUponExpiration?1:R.clamp(n?i:1-a,0,1);return t.refreshedUponExpiration&&1<=i&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-a}:{opacity:a,mix:0}}return{opacity:1,mix:0}}(d,m,e,n,t.transform),g=void 0,f=void 0,p="nearest"===n.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;o.activeTexture.set(a.TEXTURE0),d.texture.bind(p,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.activeTexture.set(a.TEXTURE1),m?(m.texture.bind(p,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,m.tileID.overscaledZ-d.tileID.overscaledZ),f=[d.tileID.canonical.x*g%1,d.tileID.canonical.y*g%1]):d.texture.bind(p,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),a.uniform2fv(l.uniforms.u_tl_parent,f||[0,0]),a.uniform1f(l.uniforms.u_scale_parent,g||1),a.uniform1f(l.uniforms.u_fade_t,y.mix),a.uniform1f(l.uniforms.u_opacity,y.opacity*n.paint.get("raster-opacity")),s instanceof et?(y=s.boundsBuffer,s.boundsVAO.bind(o,l,y,[]),a.drawArrays(a.TRIANGLE_STRIP,0,y.length)):d.maskedBoundsBuffer&&d.maskedIndexBuffer&&d.segments?l.draw(o,a.TRIANGLES,n.id,d.maskedBoundsBuffer,d.maskedIndexBuffer,d.segments):(d=t.rasterBoundsBuffer,t.rasterBoundsVAO.bind(o,l,d,[]),a.drawArrays(a.TRIANGLE_STRIP,0,d.length))}}},background:function(t,e,n){var i=n.paint.get("background-color"),r=n.paint.get("background-opacity");if(0!==r){var o,a=t.context,s=a.gl,l=t.transform,u=l.tileSize,c=n.paint.get("background-pattern"),n=c||1!==i.a||1!==r?"translucent":"opaque";if(t.renderPass===n){if(a.setStencilMode(Gt.disabled),a.setDepthMode(t.depthModeForSublayer(0,"opaque"==n?qt.ReadWrite:qt.ReadOnly)),a.setColorMode(t.colorModeForRenderPass()),c){if(cn(c,t))return;o=t.useProgram("backgroundPattern"),hn(c,t,o),t.tileExtentPatternVAO.bind(a,o,t.tileExtentBuffer,[])}else o=t.useProgram("background"),s.uniform4fv(o.uniforms.u_color,[i.r,i.g,i.b,i.a]),t.tileExtentVAO.bind(a,o,t.tileExtentBuffer,[]);s.uniform1f(o.uniforms.u_opacity,r);for(var h=0,p=l.coveringTiles({tileSize:u});h<p.length;h+=1){var d=p[h];c&&pn({tileID:d,tileSize:u},t,o),s.uniformMatrix4fv(o.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(d.toUnwrapped())),s.drawArrays(s.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}},debug:function(t,e,n){for(var i=0;i<n.length;i++)!function(t,e,n){var i=t.context,r=i.gl,o=n.posMatrix,a=t.useProgram("debug");i.setDepthMode(qt.disabled),i.setStencilMode(Gt.disabled),i.setColorMode(t.colorModeForRenderPass()),r.uniformMatrix4fv(a.uniforms.u_matrix,!1,o),r.uniform4f(a.uniforms.u_color,1,0,0,1),t.debugVAO.bind(i,a,t.debugBuffer,[]),r.drawArrays(r.LINE_STRIP,0,t.debugBuffer.length);for(var s=function(t,e){for(var n,i,r,o,a,s,l=[],u=0,c=t.length;u<c;u++)if(r=vn[t[u]]){for(s=null,n=0,i=r[1].length;n<i;n+=2)s=-1===r[1][n]&&-1===r[1][n+1]?null:(o=e+5*r[1][n],a=200-5*r[1][n+1],s&&l.push(s.x,s.y,o,a),{x:o,y:a});e+=5*r[0]}return l}(n.toString(),50),l=new R.PosArray,u=0;u<s.length;u+=2)l.emplaceBack(s[u],s[u+1]);var c=i.createVertexBuffer(l,Qe.members);(new $).bind(i,a,c,[]),r.uniform4f(a.uniforms.u_color,1,1,1,1);for(var e=e.getTile(n).tileSize,h=R.default$10/(Math.pow(2,t.transform.zoom-n.overscaledZ)*e),p=[[-1,-1],[-1,1],[1,-1],[1,1]],d=0;d<p.length;d++){var f=p[d];r.uniformMatrix4fv(a.uniforms.u_matrix,!1,R.translate([],o,[h*f[0],h*f[1],0])),r.drawArrays(r.LINES,0,c.length)}r.uniform4f(a.uniforms.u_color,0,0,0,1),r.uniformMatrix4fv(a.uniforms.u_matrix,!1,o),r.drawArrays(r.LINES,0,c.length)}(t,e,n[i])}};function bn(t,e){var n;return t.row>e.row&&(n=t,t=e,e=n),{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function xn(t,e,n,i,r){var n=Math.max(n,Math.floor(e.y0)),o=Math.min(i,Math.ceil(e.y1));(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0)&&(i=t,t=e,e=i);for(var a=t.dx/t.dy,s=e.dx/e.dy,l=0<t.dx,u=e.dx<0,c=n;c<o;c++){var h=a*Math.max(0,Math.min(t.dy,c+l-t.y0))+t.x0,p=s*Math.max(0,Math.min(e.dy,c+u-e.y0))+e.x0;r(Math.floor(p),Math.ceil(h),c)}}function wn(t,e,n,i,r,o){var a,s=bn(t,e),e=bn(e,n),t=bn(n,t);s.dy>e.dy&&(a=s,s=e,e=a),s.dy>t.dy&&(a=s,s=t,t=a),e.dy>t.dy&&(a=e,e=t,t=a),s.dy&&xn(t,s,i,r,o),e.dy&&xn(t,e,i,r,o)}gn.prototype.resize=function(t,e){var n=this.context.gl;if(this.width=t*R.default$2.devicePixelRatio,this.height=e*R.default$2.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,r=this.style._order;i<r.length;i+=1){var o=r[i];this.style._layers[o].resize()}this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},gn.prototype.setup=function(){var t=this.context,e=new R.PosArray;e.emplaceBack(0,0),e.emplaceBack(R.default$10,0),e.emplaceBack(0,R.default$10),e.emplaceBack(R.default$10,R.default$10),this.tileExtentBuffer=t.createVertexBuffer(e,Qe.members),this.tileExtentVAO=new $,this.tileExtentPatternVAO=new $;e=new R.PosArray;e.emplaceBack(0,0),e.emplaceBack(R.default$10,0),e.emplaceBack(R.default$10,R.default$10),e.emplaceBack(0,R.default$10),e.emplaceBack(0,0),this.debugBuffer=t.createVertexBuffer(e,Qe.members),this.debugVAO=new $;e=new R.RasterBoundsArray;e.emplaceBack(0,0,0,0),e.emplaceBack(R.default$10,0,R.default$10,0),e.emplaceBack(0,R.default$10,0,R.default$10),e.emplaceBack(R.default$10,R.default$10,R.default$10,R.default$10),this.rasterBoundsBuffer=t.createVertexBuffer(e,R.default$11.members),this.rasterBoundsVAO=new $;e=new R.PosArray;e.emplaceBack(0,0),e.emplaceBack(1,0),e.emplaceBack(0,1),e.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(e,Qe.members),this.viewportVAO=new $},gn.prototype.clearStencil=function(){var t=this.context,e=t.gl;t.setColorMode(Wt.disabled),t.setDepthMode(qt.disabled),t.setStencilMode(new Gt({func:e.ALWAYS,mask:0},0,255,e.ZERO,e.ZERO,e.ZERO));var n=R.create();R.ortho(n,0,this.width,this.height,0,0,1),R.scale(n,n,[e.drawingBufferWidth,e.drawingBufferHeight,0]);var i=this.useProgram("clippingMask");e.uniformMatrix4fv(i.uniforms.u_matrix,!1,n),this.viewportVAO.bind(t,i,this.viewportBuffer,[]),e.drawArrays(e.TRIANGLE_STRIP,0,4)},gn.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(Wt.disabled),e.setDepthMode(qt.disabled);var i=1;this._tileClippingMaskIDs={};for(var r=0,o=t;r<o.length;r+=1){var a=o[r],s=this._tileClippingMaskIDs[a.key]=i++;e.setStencilMode(new Gt({func:n.ALWAYS,mask:0},s,255,n.KEEP,n.KEEP,n.REPLACE));s=this.useProgram("clippingMask");n.uniformMatrix4fv(s.uniforms.u_matrix,!1,a.posMatrix),this.tileExtentVAO.bind(this.context,s,this.tileExtentBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}},gn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Gt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},gn.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new Wt([t.CONSTANT_COLOR,t.ONE],new R.default$8(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Wt.unblended:Wt.alphaBlended},gn.prototype.depthModeForSublayer=function(t,e,n){var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,t=i-1+this.depthRange;return new qt(n||this.context.gl.LEQUAL,e,[t,i])},gn.prototype.render=function(t,e){var n,i=this;for(n in this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(R.default$2.now()),t.sourceCaches){var r=i.style.sourceCaches[n];r.used&&r.prepare(i.context)}function o(t){var e=l[t];!function(t,e){for(var n=t.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<n.length;i++){var r={},o=n[i],a=n.slice(i+1);(function t(e,n,i,r,o){for(var a=0;a<i.length;a++){var s=i[a];if(r.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var l=n.children(1/0),u=0;u<l.length;u++)t(e,l[u],i.slice(a),r,o);return}}var c=n.overscaledZ-e.overscaledZ,c=new R.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));o[c.key]=o[c.key]||c})(o.tileID.wrapped(),o.tileID,a,new R.OverscaledTileID(0,o.tileID.wrap+1,0,0,0),r),o.setMask(r,e)}}(e.getVisibleCoordinates().map(function(t){return e.getTile(t)}),i.context)}var a,s=this.style._order,l=R.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type});for(a in l)o(a);this.renderPass="offscreen";var u,c=[];this.depthRboNeedsClear=!0;for(var h=0;h<s.length;h++){var p=i.style._layers[s[h]];p.hasOffscreenPass()&&!p.isHidden(i.transform.zoom)&&(p.source!==(u&&u.id)&&(c=[],(u=i.style.sourceCaches[p.source])&&(c=u.getVisibleCoordinates()).reverse()),c.length&&i.renderLayer(i,u,p,c))}this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?R.default$8.black:R.default$8.transparent,depth:1}),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var d,f=[];for(this.currentLayer=s.length-1,this.currentLayer;0<=this.currentLayer;this.currentLayer--){var m=i.style._layers[s[i.currentLayer]];m.source!==(d&&d.id)&&(f=[],(d=i.style.sourceCaches[m.source])&&(i.clearStencil(),f=d.getVisibleCoordinates(),d.getSource().isTileClipped&&i._renderTileClippingMasks(f))),i.renderLayer(i,d,m,f)}this.renderPass="translucent";var y,g=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<s.length;this.currentLayer++){var v=i.style._layers[s[i.currentLayer]];v.source!==(y&&y.id)&&(g=[],(y=i.style.sourceCaches[v.source])&&(i.clearStencil(),g=y.getVisibleCoordinates(),y.getSource().isTileClipped&&i._renderTileClippingMasks(g)),g.reverse()),i.renderLayer(i,y,v,g)}!this.options.showTileBoundaries||(t=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]])&&_n.debug(this,t,t.getVisibleCoordinates())},gn.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},gn.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||"background"!==n.type&&!i.length||(this.id=n.id,_n[n.type](t,e,n,i))},gn.prototype.translatePosMatrix=function(t,e,n,i,r){if(!n[0]&&!n[1])return t;var o=r?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;o&&(i=Math.sin(o),o=Math.cos(o),n=[n[0]*o-n[1]*i,n[0]*i+n[1]*o]);e=[r?n[0]:Te(e,n[0],this.transform.zoom),r?n[1]:Te(e,n[1],this.transform.zoom),0],n=new Float32Array(16);return R.translate(n,t,e),n},gn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},gn.prototype.getTileTexture=function(t){t=this._tileTextures[t];return t&&0<t.length?t.pop():null},gn.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new nn(this.context,rn[t],e,this._showOverdrawInspector)),this.cache[n]},gn.prototype.useProgram=function(t,e){e=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(e.program),e};function Tn(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new D(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}}q={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};Tn.prototype.clone=function(){var t=new Tn(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},q.minZoom.get=function(){return this._minZoom},q.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},q.maxZoom.get=function(){return this._maxZoom},q.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},q.renderWorldCopies.get=function(){return this._renderWorldCopies},q.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},q.worldSize.get=function(){return this.tileSize*this.scale},q.centerPoint.get=function(){return this.size._div(2)},q.size.get=function(){return new R.default(this.width,this.height)},q.bearing.get=function(){return-this.angle/Math.PI*180},q.bearing.set=function(t){t=-R.wrap(t,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=R.create$4(),R.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},q.pitch.get=function(){return this._pitch/Math.PI*180},q.pitch.set=function(t){t=R.clamp(t,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},q.fov.get=function(){return this._fov/Math.PI*180},q.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},q.zoom.get=function(){return this._zoom},q.zoom.set=function(t){t=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},q.center.get=function(){return this._center},q.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Tn.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},Tn.prototype.getVisibleUnwrappedCoordinates=function(t){var e=this.pointCoordinate(new R.default(0,0),0),n=this.pointCoordinate(new R.default(this.width,0),0),e=Math.floor(e.column),i=Math.floor(n.column),r=[new R.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var o=e;o<=i;o++)0!==o&&r.push(new R.UnwrappedTileID(o,t));return r},Tn.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),n=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var i=this.pointCoordinate(this.centerPoint,e),r=new R.default(i.column-.5,i.row-.5);return function(a,t,s,l){void 0===l&&(l=!0);var u=1<<a,c={};function e(t,e,n){var i,r,o;if(0<=n&&n<=u)for(i=t;i<e;i++)r=Math.floor(i/u),o=(i%u+u)%u,0!==r&&!0!==l||(o=new R.OverscaledTileID(s,r,a,o,n),c[o.key]=o)}return wn(t[0],t[1],t[2],0,u,e),wn(t[2],t[3],t[0],0,u,e),Object.keys(c).map(function(t){return c[t]})}(e,[this.pointCoordinate(new R.default(0,0),e),this.pointCoordinate(new R.default(this.width,0),e),this.pointCoordinate(new R.default(this.width,this.height),e),this.pointCoordinate(new R.default(0,this.height),e)],t.reparseOverscaled?n:e,this._renderWorldCopies).sort(function(t,e){return r.dist(t.canonical)-r.dist(e.canonical)})},Tn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},q.unmodified.get=function(){return this._unmodified},Tn.prototype.zoomScale=function(t){return Math.pow(2,t)},Tn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Tn.prototype.project=function(t){return new R.default(this.lngX(t.lng),this.latY(t.lat))},Tn.prototype.unproject=function(t){return new D(this.xLng(t.x),this.yLat(t.y))},q.x.get=function(){return this.lngX(this.center.lng)},q.y.get=function(){return this.latY(this.center.lat)},q.point.get=function(){return new R.default(this.x,this.y)},Tn.prototype.lngX=function(t){return(180+t)*this.worldSize/360},Tn.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},Tn.prototype.xLng=function(t){return 360*t/this.worldSize-180},Tn.prototype.yLat=function(t){t=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},Tn.prototype.setLocationAtPoint=function(t,e){e=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(e)),this._renderWorldCopies&&(this.center=this.center.wrap())},Tn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Tn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Tn.prototype.locationCoordinate=function(t){return new R.default$15(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Tn.prototype.coordinateLocation=function(t){t=t.zoomTo(this.zoom);return new D(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},Tn.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var n=[t.x,t.y,0,1],i=[t.x,t.y,1,1];R.transformMat4(n,n,this.pixelMatrixInverse),R.transformMat4(i,i,this.pixelMatrixInverse);var r=n[3],o=i[3],a=n[0]/r,s=i[0]/o,l=n[1]/r,t=i[1]/o,r=n[2]/r,o=i[2]/o,r=r==o?0:(0-r)/(o-r);return new R.default$15(R.number(a,s,r)/this.tileSize,R.number(l,t,r)/this.tileSize,this.zoom)._zoomTo(e)},Tn.prototype.coordinatePoint=function(t){t=t.zoomTo(this.zoom),t=[t.column*this.tileSize,t.row*this.tileSize,0,1];return R.transformMat4(t,t,this.pixelMatrix),new R.default(t[0]/t[3],t[1]/t[3])},Tn.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var n=t.key,i=e?this._alignedPosMatrixCache:this._posMatrixCache;if(i[n])return i[n];var r=t.canonical,o=this.worldSize/this.zoomScale(r.z),a=r.x+Math.pow(2,r.z)*t.wrap,t=R.identity(new Float64Array(16));return R.translate(t,t,[a*o,r.y*o,0]),R.scale(t,t,[o/R.default$10,o/R.default$10,1]),R.multiply(t,e?this.alignedProjMatrix:this.projMatrix,t),i[n]=new Float32Array(t),i[n]},Tn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,i,r=-90,o=90,a=-180,s=180,l=this.size,u=this._unmodified;this.latRange&&(n=this.latRange,r=this.latY(n[1]),n=(o=this.latY(n[0]))-r<l.y?l.y/(o-r):0),this.lngRange&&(h=this.lngRange,a=this.lngX(h[0]),i=(s=this.lngX(h[1]))-a<l.x?l.x/(s-a):0);var c,h=Math.max(i||0,n||0);if(h)return this.center=this.unproject(new R.default(i?(s+a)/2:this.x,n?(o+r)/2:this.y)),this.zoom+=this.scaleZoom(h),this._unmodified=u,void(this._constraining=!1);this.latRange&&((h=this.y)-(c=l.y/2)<r&&(e=r+c),o<h+c&&(e=o-c)),this.lngRange&&((c=this.x)-(l=l.x/2)<a&&(t=a+l),s<c+l&&(t=s-l)),void 0===t&&void 0===e||(this.center=this.unproject(new R.default(void 0!==t?t:this.x,void 0!==e?e:this.y))),this._unmodified=u,this._constraining=!1}},Tn.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),i=this.x,r=this.y,o=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),a=new Float64Array(16);R.perspective(a,this._fov,this.width/this.height,1,o),R.scale(a,a,[1,-1,1]),R.translate(a,a,[0,0,-this.cameraToCenterDistance]),R.rotateX(a,a,this._pitch),R.rotateZ(a,a,this.angle),R.translate(a,a,[-i,-r,0]);e=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));R.scale(a,a,[1,1,e,1]),this.projMatrix=a;t=this.width%2/2,n=this.height%2/2,o=Math.cos(this.angle),e=Math.sin(this.angle),i=i-Math.round(i)+o*t+e*n,e=r-Math.round(r)+o*n+e*t,t=new Float64Array(a);if(R.translate(t,t,[.5<i?i-1:i,.5<e?e-1:e,0]),this.alignedProjMatrix=t,a=R.create(),R.scale(a,a,[this.width/2,-this.height/2,1]),R.translate(a,a,[1,-1,0]),this.pixelMatrix=R.multiply(new Float64Array(16),a,this.projMatrix),!(a=R.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Tn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new R.default(0,0)).zoomTo(this.zoom),t=[t.column*this.tileSize,t.row*this.tileSize,0,1];return R.transformMat4(t,t,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Tn.prototype,q);function En(){var t,e,n,i;R.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(t=this._updateHashUnthrottled.bind(this),e=!1,n=0,i=function(){n=0,e&&(t(),n=setTimeout(i,300),e=!1)},function(){return e=!0,n||i(),n})}En.prototype.addTo=function(t){return this._map=t,R.default$1.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},En.prototype.remove=function(){return R.default$1.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},En.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),o=Math.round(e.lng*r)/r,a=Math.round(e.lat*r)/r,i=this._map.getBearing(),e=this._map.getPitch(),r="";return r+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(i||e)&&(r+="/"+Math.round(10*i)/10),e&&(r+="/"+Math.round(e)),r},En.prototype._onHashChange=function(){var t=R.default$1.location.hash.replace("#","").split("/");return 3<=t.length&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},En.prototype._updateHashUnthrottled=function(){var t=this.getHashString();R.default$1.history.replaceState(R.default$1.history.state,"",t)};var kn=function(a){function t(t,e,n,i){void 0===i&&(i={});var r=f.mousePos(e.getCanvasContainer(),n),o=e.unproject(r);a.call(this,t,R.extend({point:r,lngLat:o,originalEvent:n},i)),this._defaultPrevented=!1,this.target=e}a&&(t.__proto__=a);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(R.Event),Sn=function(s){function t(t,e,n){var i=f.touchPos(e.getCanvasContainer(),n),r=i.map(function(t){return e.unproject(t)}),o=i.reduce(function(t,e,n,i){return t.add(e.div(i.length))},new R.default(0,0)),a=e.unproject(o);s.call(this,t,{points:i,point:o,lngLats:r,lngLat:a,originalEvent:n}),this._defaultPrevented=!1}s&&(t.__proto__=s);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(R.Event),Pn=function(i){function t(t,e,n){i.call(this,t,{originalEvent:n}),this._defaultPrevented=!1}i&&(t.__proto__=i);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(R.Event),G=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,R.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};G.prototype.isEnabled=function(){return!!this._enabled},G.prototype.isActive=function(){return!!this._active},G.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},G.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},G.prototype.onWheel=function(t){var e,n,i;this.isEnabled()&&(e=t.deltaMode===R.default$1.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,i=(n=R.default$2.now())-(this._lastWheelEventTime||0),this._lastWheelEventTime=n,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":400<i?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this.isActive()||this._start(t)),t.preventDefault())},G.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},G.prototype._start=function(t){this._delta&&(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new R.Event("movestart",{originalEvent:t})),this._map.fire(new R.Event("zoomstart",{originalEvent:t})),this._finishTimeout&&clearTimeout(this._finishTimeout),t=f.mousePos(this._el,t),this._around=D.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(t)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)))},G.prototype._onScrollFrame=function(){var t,e,n,i,r,o,a=this;this._frameId=null,this.isActive()&&(t=this._map.transform,0!==this._delta&&(o="wheel"===this._type&&4.000244140625<Math.abs(this._delta)?1/450:.01,r=2/(1+Math.exp(-Math.abs(this._delta*o))),this._delta<0&&0!==r&&(r=1/r),i="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale,this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(i*r))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0),e="number"==typeof this._targetZoom?this._targetZoom:t.zoom,n=this._startZoom,o=this._easing,i=!1,"wheel"===this._type&&n&&o?(o=o(r=Math.min((R.default$2.now()-this._lastWheelEventTime)/200,1)),t.zoom=R.number(n,e,o),r<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):i=!0):(t.zoom=e,i=!0),t.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new R.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new R.Event("zoom",{originalEvent:this._lastWheelEvent})),i&&(this._active=!1,this._finishTimeout=setTimeout(function(){a._map.fire(new R.Event("zoomend",{originalEvent:a._lastWheelEvent})),a._map.fire(new R.Event("moveend",{originalEvent:a._lastWheelEvent})),delete a._targetZoom},200)))},G.prototype._smoothOutEasing=function(t){var e,n,i=R.ease;return this._prevEase&&(n=this._prevEase,e=(R.default$2.now()-n.start)/n.duration,n=n.easing(.01+e)-n.easing(e),e=.27/Math.sqrt(n*n+1e-4)*.01,n=Math.sqrt(.0729-e*e),i=R.bezier(e,n,.25,1)),this._prevEase={start:R.default$2.now(),duration:t,easing:i},i};W=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1,R.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};W.prototype.isEnabled=function(){return!!this._enabled},W.prototype.isActive=function(){return!!this._active},W.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},W.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},W.prototype.onMouseDown=function(t){this.isEnabled()&&t.shiftKey&&0===t.button&&(R.default$1.document.addEventListener("mousemove",this._onMouseMove,!1),R.default$1.document.addEventListener("keydown",this._onKeyDown,!1),R.default$1.document.addEventListener("mouseup",this._onMouseUp,!1),f.disableDrag(),this._startPos=this._lastPos=f.mousePos(this._el,t),this._active=!0)},W.prototype._onMouseMove=function(t){var e,n,i,r=f.mousePos(this._el,t);this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance||(e=this._startPos,this._lastPos=r,this._box||(this._box=f.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t)),n=Math.min(e.x,r.x),i=Math.max(e.x,r.x),t=Math.min(e.y,r.y),r=Math.max(e.y,r.y),f.setTransform(this._box,"translate("+n+"px,"+t+"px)"),this._box.style.width=i-n+"px",this._box.style.height=r-t+"px")},W.prototype._onMouseUp=function(t){var e,n,i;0===t.button&&(e=this._startPos,n=f.mousePos(this._el,t),i=(new N).extend(this._map.unproject(e)).extend(this._map.unproject(n)),this._finish(),f.suppressClick(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(i,{linear:!0}).fire(new R.Event("boxzoomend",{originalEvent:t,boxZoomBounds:i})))},W.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},W.prototype._finish=function(){this._active=!1,R.default$1.document.removeEventListener("mousemove",this._onMouseMove,!1),R.default$1.document.removeEventListener("keydown",this._onKeyDown,!1),R.default$1.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(f.remove(this._box),this._box=null),f.enableDrag(),delete this._startPos,delete this._lastPos},W.prototype._fireEvent=function(t,e){return this._map.fire(new R.Event(t,{originalEvent:e}))};function Cn(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._state="disabled",this._button=e.button||"right",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,R.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)}var Mn=R.bezier(0,0,.25,1);Cn.prototype.isEnabled=function(){return"disabled"!==this._state},Cn.prototype.isActive=function(){return"active"===this._state},Cn.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Cn.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Cn.prototype.onMouseDown=function(t){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=f.mouseButton(t),this._eventButton!==(t.ctrlKey?0:2))return}else{if(t.ctrlKey||0!==f.mouseButton(t))return;this._eventButton=0}f.disableDrag(),R.default$1.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),R.default$1.document.addEventListener("mouseup",this._onMouseUp),R.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[R.default$2.now(),this._map.getBearing()]],this._startPos=this._lastPos=f.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},Cn.prototype._onMouseMove=function(t){var e=f.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Cn.prototype._onDragFrame=function(){this._frameId=null;var t,e,n,i,r,o=this._lastMoveEvent;o&&(t=this._map.transform,e=this._startPos,n=this._lastPos,i=.8*(e.x-n.x),r=-.5*(e.y-n.y),e=t.bearing-i,n=t.pitch-r,r=(i=this._inertia)[i.length-1],this._drainInertiaBuffer(),i.push([R.default$2.now(),this._map._normalizeBearing(e,r[1])]),t.bearing=e,this._pitchWithRotate&&(this._fireEvent("pitch",o),t.pitch=n),this._fireEvent("rotate",o),this._fireEvent("move",o),delete this._lastMoveEvent,this._startPos=this._lastPos)},Cn.prototype._onMouseUp=function(t){if(f.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",f.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},Cn.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Cn.prototype._unbind=function(){R.default$1.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),R.default$1.document.removeEventListener("mouseup",this._onMouseUp),R.default$1.removeEventListener("blur",this._onBlur),f.enableDrag()},Cn.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},Cn.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();function n(){Math.abs(l)<e._bearingSnap?s.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)}var i,r,o,a,s=this._map,l=s.getBearing(),u=this._inertia;u.length<2?n():(a=u[0],i=u[u.length-1],o=u[u.length-2],r=s._normalizeBearing(l,o[1]),o=(u=i[1]-a[1])<0?-1:1,a=(i[0]-a[0])/1e3,0!=u&&0!=a?(180<(u=Math.abs(.25/a*u))&&(u=180),r+=o*u*((u=u/180)/2),Math.abs(s._normalizeBearing(r,0))<this._bearingSnap&&(r=s._normalizeBearing(0,r)),s.rotateTo(r,{duration:1e3*u,easing:Mn,noMoveStart:!0},{originalEvent:t})):n())},Cn.prototype._fireEvent=function(t,e){return this._map.fire(new R.Event(t,e?{originalEvent:e}:{}))},Cn.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=R.default$2.now();0<t.length&&160<e-t[0][0];)t.shift()};var Ln=R.bezier(0,0,.3,1),x=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._state="disabled",this._clickTolerance=e.clickTolerance||1,R.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};x.prototype.isEnabled=function(){return"disabled"!==this._state},x.prototype.isActive=function(){return"active"===this._state},x.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},x.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},x.prototype.onMouseDown=function(t){"enabled"===this._state&&(t.ctrlKey||0!==f.mouseButton(t)||(f.addEventListener(R.default$1.document,"mousemove",this._onMove,{capture:!0}),f.addEventListener(R.default$1.document,"mouseup",this._onMouseUp),this._start(t)))},x.prototype.onTouchStart=function(t){"enabled"===this._state&&(1<t.touches.length||(f.addEventListener(R.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),f.addEventListener(R.default$1.document,"touchend",this._onTouchEnd),this._start(t)))},x.prototype._start=function(t){R.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=f.mousePos(this._el,t),this._inertia=[[R.default$2.now(),this._startPos]]},x.prototype._onMove=function(t){t.preventDefault();var e=f.mousePos(this._el,t);this._lastPos.equals(e)||"pending"===this._state&&e.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=t,this._lastPos=e,this._drainInertiaBuffer(),this._inertia.push([R.default$2.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",t),this._fireEvent("movestart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},x.prototype._onDragFrame=function(){this._frameId=null;var t,e=this._lastMoveEvent;e&&((t=this._map.transform).setLocationAtPoint(t.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",e),this._fireEvent("move",e),this._startPos=this._lastPos,delete this._lastMoveEvent)},x.prototype._onMouseUp=function(t){if(0===f.mouseButton(t))switch(this._state){case"active":this._state="enabled",f.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},x.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},x.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},x.prototype._unbind=function(){f.removeEventListener(R.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),f.removeEventListener(R.default$1.document,"touchend",this._onTouchEnd),f.removeEventListener(R.default$1.document,"mousemove",this._onMove,{capture:!0}),f.removeEventListener(R.default$1.document,"mouseup",this._onMouseUp),f.removeEventListener(R.default$1,"blur",this._onBlur)},x.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},x.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e,n,i,r=this._inertia;r.length<2?this._fireEvent("moveend",t):(e=r[r.length-1],n=r[0],i=e[1].sub(n[1]),0==(r=(e[0]-n[0])/1e3)||e[1].equals(n[1])?this._fireEvent("moveend",t):(1400<(r=(i=i.mult(.3/r)).mag())&&(r=1400,i._unit()._mult(r)),r=r/750,i=i.mult(-r/2),this._map.panBy(i,{duration:1e3*r,easing:Ln,noMoveStart:!0},{originalEvent:t})))},x.prototype._fireEvent=function(t,e){return this._map.fire(new R.Event(t,e?{originalEvent:e}:{}))},x.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=R.default$2.now();0<t.length&&160<e-t[0][0];)t.shift()};P=function(t){this._map=t,this._el=t.getCanvasContainer(),R.bindAll(["_onKeyDown"],this)};function In(t){return t*(2-t)}P.prototype.isEnabled=function(){return!!this._enabled},P.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},P.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},P.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,i=0,r=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?i=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),s={duration:300,delayEndEvents:500,easing:In,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*i,offset:[100*-r,100*-o],center:a.getCenter()};a.easeTo(s,{originalEvent:t})}};Z=function(t){this._map=t,R.bindAll(["_onDblClick","_onZoomEnd"],this)};Z.prototype.isEnabled=function(){return!!this._enabled},Z.prototype.isActive=function(){return!!this._active},Z.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Z.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Z.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(1<t.points.length||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},Z.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Z.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Z.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var An=R.bezier(0,0,.15,1),q=function(t){this._map=t,this._el=t.getCanvasContainer(),R.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};q.prototype.isEnabled=function(){return!!this._enabled},q.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},q.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},q.prototype.disableRotation=function(){this._rotationDisabled=!0},q.prototype.enableRotation=function(){this._rotationDisabled=!1},q.prototype.onStart=function(t){var e;this.isEnabled()&&2===t.touches.length&&(e=f.mousePos(this._el,t.touches[0]),t=f.mousePos(this._el,t.touches[1]),this._startVec=e.sub(t),this._gestureIntent=void 0,this._inertia=[],f.addEventListener(R.default$1.document,"touchmove",this._onMove,{passive:!1}),f.addEventListener(R.default$1.document,"touchend",this._onEnd))},q.prototype._getTouchEventData=function(t){var e=f.mousePos(this._el,t.touches[0]),n=f.mousePos(this._el,t.touches[1]),t=e.sub(n);return{vec:t,center:e.add(n).div(2),scale:t.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*t.angleWith(this._startVec)/Math.PI}},q.prototype._onMove=function(t){var e,n,i;2===t.touches.length&&(e=(n=this._getTouchEventData(t)).vec,i=n.scale,n=n.bearing,this._gestureIntent||(i=.15<Math.abs(1-i),10<Math.abs(n)?this._gestureIntent="rotate":i&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new R.Event(this._gestureIntent+"start",{originalEvent:t})),this._map.fire(new R.Event("movestart",{originalEvent:t})),this._startVec=e)),this._lastTouchEvent=t,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),t.preventDefault())},q.prototype._onTouchFrame=function(){this._frameId=null;var t,e,n,i,r,o,a=this._gestureIntent;a&&(t=this._map.transform,this._startScale||(this._startScale=t.scale,this._startBearing=t.bearing),e=(o=this._getTouchEventData(this._lastTouchEvent)).center,n=o.bearing,i=o.scale,r=t.pointLocation(e),o=t.locationPoint(r),"rotate"===a&&(t.bearing=this._startBearing+n),t.zoom=t.scaleZoom(this._startScale*i),t.setLocationAtPoint(r,o),this._map.fire(new R.Event(a,{originalEvent:this._lastTouchEvent})),this._map.fire(new R.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([R.default$2.now(),i,e]))},q.prototype._onEnd=function(t){f.removeEventListener(R.default$1.document,"touchmove",this._onMove,{passive:!1}),f.removeEventListener(R.default$1.document,"touchend",this._onEnd);var e,n,i,r,o=this._gestureIntent,a=this._startScale;this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,o&&(this._map.fire(new R.Event(o+"end",{originalEvent:t})),this._drainInertiaBuffer(),n=this._inertia,e=this._map,n.length<2?e.snapToNorth({},{originalEvent:t}):(i=n[n.length-1],r=n[0],a=(o=e.transform.scaleZoom(a*i[1]))-(n=e.transform.scaleZoom(a*r[1])),r=(i[0]-r[0])/1e3,i=i[2],0!=r&&o!==n?(r=.15*a/r,2.5<Math.abs(r)&&(r=0<r?2.5:-2.5),(r=o+r*(o=1e3*Math.abs(r/(12*.15)))/2e3)<0&&(r=0),e.easeTo({zoom:r,duration:o,easing:An,around:this._aroundCenter?e.getCenter():e.unproject(i),noMoveStart:!0},{originalEvent:t})):e.snapToNorth({},{originalEvent:t})))},q.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=R.default$2.now();2<t.length&&160<e-t[0][0];)t.shift()};function zn(t){void 0===t&&(t={}),this.options=t,R.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)}var On,Rn={scrollZoom:G,boxZoom:W,dragRotate:Cn,dragPan:x,keyboard:P,doubleClickZoom:Z,touchZoomRotate:q},G=((On=R.Evented)&&(Dn.__proto__=On),((Dn.prototype=Object.create(On&&On.prototype)).constructor=Dn).prototype.getCenter=function(){return this.transform.center},Dn.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},Dn.prototype.panBy=function(t,e,n){return t=R.default.convert(t).mult(-1),this.panTo(this.transform.center,R.extend({offset:t},e),n)},Dn.prototype.panTo=function(t,e,n){return this.easeTo(R.extend({center:t},e),n)},Dn.prototype.getZoom=function(){return this.transform.zoom},Dn.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},Dn.prototype.zoomTo=function(t,e,n){return this.easeTo(R.extend({zoom:t},e),n)},Dn.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},Dn.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},Dn.prototype.getBearing=function(){return this.transform.bearing},Dn.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},Dn.prototype.rotateTo=function(t,e,n){return this.easeTo(R.extend({bearing:t},e),n)},Dn.prototype.resetNorth=function(t,e){return this.rotateTo(0,R.extend({duration:1e3},t),e),this},Dn.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},Dn.prototype.getPitch=function(){return this.transform.pitch},Dn.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},Dn.prototype.cameraForBounds=function(t,e){if("number"==typeof(e=R.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding&&(s=e.padding,e.padding={top:s,bottom:s,right:s,left:s}),R.default$13(Object.keys(e.padding).sort(function(t,e){return t<e?-1:e<t?1:0}),["bottom","left","right","top"])){t=N.convert(t);var n=[(e.padding.left-e.padding.right)/2,(e.padding.top-e.padding.bottom)/2],i=Math.min(e.padding.right,e.padding.left),r=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+n[0],e.offset[1]+n[1]];var o=R.default.convert(e.offset),a=this.transform,s=a.project(t.getNorthWest()),n=a.project(t.getSouthEast()),t=n.sub(s),i=(a.width-2*i-2*Math.abs(o.x))/t.x,t=(a.height-2*r-2*Math.abs(o.y))/t.y;if(!(t<0||i<0))return e.center=a.unproject(s.add(n).div(2)),e.zoom=Math.min(a.scaleZoom(a.scale*Math.min(i,t)),e.maxZoom),e.bearing=0,e;R.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else R.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},Dn.prototype.fitBounds=function(t,e,n){t=this.cameraForBounds(t,e);return t?(e=R.extend(t,e)).linear?this.easeTo(e,n):this.flyTo(e,n):this},Dn.prototype.jumpTo=function(t,e){this.stop();var n=this.transform,i=!1,r=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(i=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=D.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(r=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),this.fire(new R.Event("movestart",e)).fire(new R.Event("move",e)),i&&this.fire(new R.Event("zoomstart",e)).fire(new R.Event("zoom",e)).fire(new R.Event("zoomend",e)),r&&this.fire(new R.Event("rotatestart",e)).fire(new R.Event("rotate",e)).fire(new R.Event("rotateend",e)),o&&this.fire(new R.Event("pitchstart",e)).fire(new R.Event("pitch",e)).fire(new R.Event("pitchend",e)),this.fire(new R.Event("moveend",e))},Dn.prototype.easeTo=function(t,i){var r=this;this.stop(),!1===(t=R.extend({offset:[0,0],duration:500,easing:R.ease},t)).animate&&(t.duration=0);var o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u="zoom"in t?+t.zoom:a,c="bearing"in t?this._normalizeBearing(t.bearing,s):s,h="pitch"in t?+t.pitch:l,p=o.centerPoint.add(R.default.convert(t.offset)),e=o.pointLocation(p),n=D.convert(t.center||e);this._normalizeCenter(n);var d,f,m=o.project(e),y=o.project(n).sub(m),g=o.zoomScale(u-a);return t.around&&(d=D.convert(t.around),f=o.locationPoint(d)),this._zooming=u!==a,this._rotating=s!==c,this._pitching=h!==l,this._prepareEase(i,t.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(t){var e,n;r._zooming&&(o.zoom=R.number(a,u,t)),r._rotating&&(o.bearing=R.number(s,c,t)),r._pitching&&(o.pitch=R.number(l,h,t)),d?o.setLocationAtPoint(d,f):(n=o.zoomScale(o.zoom-a),e=a<u?Math.min(2,g):Math.max(.5,g),e=Math.pow(e,1-t),n=o.unproject(m.add(y.mult(t*e)).mult(n)),o.setLocationAtPoint(o.renderWorldCopies?n.wrap():n,p)),r._fireMoveEvents(i)},function(){t.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(i)},t.delayEndEvents):r._afterEase(i)},t),this},Dn.prototype._prepareEase=function(t,e){this._moving=!0,e||this.fire(new R.Event("movestart",t)),this._zooming&&this.fire(new R.Event("zoomstart",t)),this._rotating&&this.fire(new R.Event("rotatestart",t)),this._pitching&&this.fire(new R.Event("pitchstart",t))},Dn.prototype._fireMoveEvents=function(t){this.fire(new R.Event("move",t)),this._zooming&&this.fire(new R.Event("zoom",t)),this._rotating&&this.fire(new R.Event("rotate",t)),this._pitching&&this.fire(new R.Event("pitch",t))},Dn.prototype._afterEase=function(t){var e=this._zooming,n=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,e&&this.fire(new R.Event("zoomend",t)),n&&this.fire(new R.Event("rotateend",t)),i&&this.fire(new R.Event("pitchend",t)),this.fire(new R.Event("moveend",t))},Dn.prototype.flyTo=function(t,i){var r=this;this.stop(),t=R.extend({offset:[0,0],speed:1.2,curve:1.42,easing:R.ease},t);var o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u="zoom"in t?R.clamp(+t.zoom,o.minZoom,o.maxZoom):a,c="bearing"in t?this._normalizeBearing(t.bearing,s):s,h="pitch"in t?+t.pitch:l,e=o.zoomScale(u-a),p=o.centerPoint.add(R.default.convert(t.offset)),n=o.pointLocation(p),d=D.convert(t.center||n);this._normalizeCenter(d);var f=o.project(n),m=o.project(d).sub(f),y=t.curve,g=Math.max(o.width,o.height),v=g/e,_=m.mag();"minZoom"in t&&(E=R.clamp(Math.min(t.minZoom,a,u),o.minZoom,o.maxZoom),E=g/o.zoomScale(E-a),y=Math.sqrt(E/_*2));var b=y*y;function x(t){t=(v*v-g*g+(t?-1:1)*b*b*_*_)/(2*(t?v:g)*b*_);return Math.log(Math.sqrt(t*t+1)-t)}function w(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}var E,k=x(0),S=function(t){return T(k)/T(k+y*t)},P=function(t){return g*((T(k)*(w(t=k+y*t)/T(t))-w(k))/b)/_},C=(x(1)-k)/y;if(Math.abs(_)<1e-6||!isFinite(C)){if(Math.abs(g-v)<1e-6)return this.easeTo(t,i);var M=v<g?-1:1,C=Math.abs(Math.log(v/g))/y,P=function(){return 0},S=function(t){return Math.exp(M*y*t)}}return"duration"in t?t.duration=+t.duration:(E="screenSpeed"in t?+t.screenSpeed/y:+t.speed,t.duration=1e3*C/E),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=h!==l,this._prepareEase(i,!1),this._ease(function(t){var e=t*C,n=1/S(e);o.zoom=1===t?u:a+o.scaleZoom(n),r._rotating&&(o.bearing=R.number(s,c,t)),r._pitching&&(o.pitch=R.number(l,h,t));n=o.unproject(f.add(m.mult(P(e))).mult(n));o.setLocationAtPoint(o.renderWorldCopies?n.wrap():n,p),r._fireMoveEvents(i)},function(){return r._afterEase(i)},t),this},Dn.prototype.isEasing=function(){return!!this._easeFrameId},Dn.prototype.stop=function(){var t;return this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd&&(t=this._onEaseEnd,delete this._onEaseEnd,t.call(this)),this},Dn.prototype._ease=function(t,e,n){!1===n.animate||0===n.duration?(t(1),e()):(this._easeStart=R.default$2.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Dn.prototype._renderFrameCallback=function(){var t=Math.min((R.default$2.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Dn.prototype._normalizeBearing=function(t,e){t=R.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},Dn.prototype._normalizeCenter=function(t){var e=this.transform;e.renderWorldCopies&&!e.lngRange&&(e=t.lng-e.center.lng,t.lng+=180<e?-360:e<-180?360:0)},Dn);function Dn(t,e){On.call(this),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=e.bearingSnap,R.bindAll(["_renderFrameCallback"],this)}zn.prototype.getDefaultPosition=function(){return"bottom-right"},zn.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=f.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},zn.prototype.onRemove=function(){f.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},zn.prototype._updateEditLink=function(){var t,e=(e=this._editLink)||(this._editLink=this._container.querySelector(".mapbox-improve-map")),i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:u.ACCESS_TOKEN}];e&&(t=i.reduce(function(t,e,n){return e.value&&(t+=e.key+"="+e.value+(n<i.length-1?"&":"")),t},"?"),e.href="https://www.mapbox.com/feedback/"+t+(this._map._hash?this._map._hash.getHashString(!0):""))},zn.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},zn.prototype._updateAttributions=function(){if(this._map.style){var t,i=[];this._map.style.stylesheet&&(t=this._map.style.stylesheet,this.styleOwner=t.owner,this.styleId=t.id);var e,n=this._map.style.sourceCaches;for(e in n){var r=n[e].getSource();r.attribution&&i.indexOf(r.attribution)<0&&i.push(r.attribution)}i.sort(function(t,e){return t.length-e.length}),(i=i.filter(function(t,e){for(var n=e+1;n<i.length;n++)if(0<=i[n].indexOf(t))return!1;return!0})).length?(this._container.innerHTML=i.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},zn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};function Nn(){R.bindAll(["_updateLogo"],this),R.bindAll(["_updateCompact"],this)}Nn.prototype.onAdd=function(t){this._map=t,this._container=f.create("div","mapboxgl-ctrl");t=f.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Nn.prototype.onRemove=function(){f.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Nn.prototype.getDefaultPosition=function(){return"bottom-left"},Nn.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Nn.prototype._logoRequired=function(){if(this._map.style){var t,e=this._map.style.sourceCaches;for(t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},Nn.prototype._updateCompact=function(){var t=this._container.children;t.length&&(t=t[0],this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact"))};function Bn(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}Bn.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Bn.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,i=e?this._queue.concat(e):this._queue;n<i.length;n+=1){var r=i[n];if(r.id===t)return void(r.cancelled=!0)}},Bn.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(!i.cancelled&&(i.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Bn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Fn=R.default$1.HTMLImageElement,jn=R.default$1.HTMLElement,Un={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},W=function(s){function t(t){if(null!=(t=R.extend({},Un,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var e=new Tn(t.minZoom,t.maxZoom,t.renderWorldCopies);s.call(this,e,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new Bn;var n=t.transformRequest;if(this._transformRequest=n?function(t,e){return n(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof t.container){e=R.default$1.document.getElementById(t.container);if(!e)throw new Error("Container '"+t.container+"' not found.");this._container=e}else{if(!(t.container instanceof jn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),R.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==R.default$1&&(R.default$1.addEventListener("online",this._onWindowOnline,!1),R.default$1.addEventListener("resize",this._onWindowResize,!1)),function(n,i){var t,r=n.getCanvasContainer(),o=null,a=!1,s=null;for(t in Rn)n[t]=new Rn[t](n,i),i.interactive&&i[t]&&n[t].enable(i[t]);f.addEventListener(r,"mouseout",function(t){n.fire(new kn("mouseout",n,t))}),f.addEventListener(r,"mousedown",function(t){a=!0,s=f.mousePos(r,t);var e=new kn("mousedown",n,t);n.fire(e),e.defaultPrevented||(i.interactive&&!n.doubleClickZoom.isActive()&&n.stop(),n.boxZoom.onMouseDown(t),n.boxZoom.isActive()||n.dragPan.isActive()||n.dragRotate.onMouseDown(t),n.boxZoom.isActive()||n.dragRotate.isActive()||n.dragPan.onMouseDown(t))}),f.addEventListener(r,"mouseup",function(t){var e=n.dragRotate.isActive();o&&!e&&n.fire(new kn("contextmenu",n,o)),o=null,a=!1,n.fire(new kn("mouseup",n,t))}),f.addEventListener(r,"mousemove",function(t){if(!n.dragPan.isActive()&&!n.dragRotate.isActive()){for(var e=t.target;e&&e!==r;)e=e.parentNode;e===r&&n.fire(new kn("mousemove",n,t))}}),f.addEventListener(r,"mouseover",function(t){for(var e=t.target;e&&e!==r;)e=e.parentNode;e===r&&n.fire(new kn("mouseover",n,t))}),f.addEventListener(r,"touchstart",function(t){var e=new Sn("touchstart",n,t);n.fire(e),e.defaultPrevented||(i.interactive&&n.stop(),n.boxZoom.isActive()||n.dragRotate.isActive()||n.dragPan.onTouchStart(t),n.touchZoomRotate.onStart(t),n.doubleClickZoom.onTouchStart(e))},{passive:!1}),f.addEventListener(r,"touchmove",function(t){n.fire(new Sn("touchmove",n,t))},{passive:!1}),f.addEventListener(r,"touchend",function(t){n.fire(new Sn("touchend",n,t))}),f.addEventListener(r,"touchcancel",function(t){n.fire(new Sn("touchcancel",n,t))}),f.addEventListener(r,"click",function(t){var e=f.mousePos(r,t);(e.equals(s)||e.dist(s)<i.clickTolerance)&&n.fire(new kn("click",n,t))}),f.addEventListener(r,"dblclick",function(t){t=new kn("dblclick",n,t);n.fire(t),t.defaultPrevented||n.doubleClickZoom.onDblClick(t)}),f.addEventListener(r,"contextmenu",function(t){var e=n.dragRotate.isActive();a||e?a&&(o=t):n.fire(new kn("contextmenu",n,t)),t.preventDefault()}),f.addEventListener(r,"wheel",function(t){i.interactive&&n.stop();var e=new Pn("wheel",n,t);n.fire(e),e.defaultPrevented||n.scrollZoom.onWheel(t)},{passive:!1})}(this,t),this._hash=t.hash&&(new En).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new zn),this.addControl(new Nn,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}s&&(t.__proto__=s);var e={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),t=this._controlPositions[e];return-1!==e.indexOf("bottom")?t.insertBefore(n,t.firstChild):t.appendChild(n),this},t.prototype.removeControl=function(t){return t.onRemove(this),this},t.prototype.resize=function(t){var e=this._containerDimensions(),n=e[0],e=e[1];return this._resizeCanvas(n,e),this.transform.resize(n,e),this.painter.resize(n,e),this.fire(new R.Event("movestart",t)).fire(new R.Event("move",t)).fire(new R.Event("resize",t)).fire(new R.Event("moveend",t)),this},t.prototype.getBounds=function(){return(new N).extend(this.transform.pointLocation(new R.default(0,0))).extend(this.transform.pointLocation(new R.default(this.transform.width,0))).extend(this.transform.pointLocation(new R.default(this.transform.width,this.transform.height))).extend(this.transform.pointLocation(new R.default(0,this.transform.height)))},t.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new N([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},t.prototype.setMaxBounds=function(t){var e;return t?(e=N.convert(t),this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()):null==t&&(this.transform.lngRange=null,this.transform.latRange=null,this._update()),this},t.prototype.setMinZoom=function(t){if(0<=(t=null==t?0:t)&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},t.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update(),this},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(t){return this.transform.locationPoint(D.convert(t))},t.prototype.unproject=function(t){return this.transform.pointLocation(R.default.convert(t))},t.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},t.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},t.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},t.prototype.on=function(i,r,o){var t,a=this;if(void 0===o)return s.prototype.on.call(this,i,r);var e,n=function(){if("mouseenter"===i||"mouseover"===i){var n=!1;return{layer:r,listener:o,delegates:{mousemove:function(t){var e=a.getLayer(r)?a.queryRenderedFeatures(t.point,{layers:[r]}):[];e.length?n||(n=!0,o.call(a,new kn(i,a,t.originalEvent,{features:e}))):n=!1},mouseout:function(){n=!1}}}}if("mouseleave"!==i&&"mouseout"!==i)return{layer:r,listener:o,delegates:((t={})[i]=function(t){var e=a.getLayer(r)?a.queryRenderedFeatures(t.point,{layers:[r]}):[];e.length&&(t.features=e,o.call(a,t),delete t.features)},t)};var e=!1;return{layer:r,listener:o,delegates:{mousemove:function(t){(a.getLayer(r)?a.queryRenderedFeatures(t.point,{layers:[r]}):[]).length?e=!0:e&&(e=!1,o.call(a,new kn(i,a,t.originalEvent)))},mouseout:function(t){e&&(e=!1,o.call(a,new kn(i,a,t.originalEvent)))}}}}();for(e in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[i]=this._delegatedListeners[i]||[],this._delegatedListeners[i].push(n),n.delegates)a.on(e,n.delegates[e]);return this},t.prototype.off=function(t,e,n){if(void 0===n)return s.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],r=0;r<i.length;r++){var o=i[r];if(o.layer===e&&o.listener===n){for(var a in o.delegates)this.off(a,o.delegates[a]);return i.splice(r,1),this}}return this},t.prototype.queryRenderedFeatures=function(t,e){var n;return e=2===arguments.length?(t=arguments[0],arguments[1]):1===arguments.length&&((n=arguments[0])instanceof R.default||Array.isArray(n))?(t=arguments[0],{}):1===arguments.length?(t=void 0,arguments[0]):(t=void 0,{}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(t),e,this.transform):[]},t.prototype._makeQueryGeometry=function(t){var e,n=this;return void 0===t&&(t=[R.default.convert([0,0]),R.default.convert([this.transform.width,this.transform.height])]),{viewport:e=t instanceof R.default||"number"==typeof t[0]?[R.default.convert(t)]:[(e=[R.default.convert(t[0]),R.default.convert(t[1])])[0],new R.default(e[1].x,e[0].y),e[1],new R.default(e[0].x,e[1].y),e[0]],worldCoordinate:e.map(function(t){return n.transform.pointCoordinate(t)})}},t.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},t.prototype.setStyle=function(t,e){if((!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t&&"object"==typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){R.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Xe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)):delete this.style,this},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():R.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},t.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];if(void 0!==e)return e.loaded();this.fire(new R.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},t.prototype.areTilesLoaded=function(){var t,e=this.style&&this.style.sourceCaches;for(t in e){var n,i=e[t]._tiles;for(n in i){var r=i[n];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},t.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},t.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},t.prototype.getSource=function(t){return this.style.getSource(t)},t.prototype.addImage=function(t,e,n){void 0===n&&(n={});var i=n.pixelRatio;void 0===i&&(i=1);var r=n.sdf;if(void 0===r&&(r=!1),e instanceof Fn){var o=R.default$2.getImageData(e),n=o.width,a=o.height,o=o.data;this.style.addImage(t,{data:new R.RGBAImage({width:n,height:a},o),pixelRatio:i,sdf:r})}else{if(void 0===e.width||void 0===e.height)return this.fire(new R.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));a=e.width,o=e.height,e=e.data;this.style.addImage(t,{data:new R.RGBAImage({width:a,height:o},new Uint8Array(e)),pixelRatio:i,sdf:r})}},t.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new R.ErrorEvent(new Error("Missing required image id"))),!1)},t.prototype.removeImage=function(t){this.style.removeImage(t)},t.prototype.loadImage=function(t,e){R.getImage(this._transformRequest(t,R.ResourceType.Image),e)},t.prototype.listImages=function(){return this.style.listImages()},t.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},t.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},t.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},t.prototype.getLayer=function(t){return this.style.getLayer(t)},t.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},t.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},t.prototype.getFilter=function(t){return this.style.getFilter(t)},t.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0),this},t.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},t.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},t.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},t.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.setFeatureState=function(t,e){this.style.setFeatureState(t,e),this._update()},t.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},t.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==R.default$1.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&R.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},t.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=f.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=f.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=f.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");e=this._containerDimensions();this._resizeCanvas(e[0],e[1]);var n=this._controlContainer=f.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=f.create("div","mapboxgl-ctrl-"+t,n)})},t.prototype._resizeCanvas=function(t,e){var n=R.default$1.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},t.prototype._setupPainter=function(){var t=R.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},n.webGLContextAttributes),t=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);t?this.painter=new gn(t,this.transform):this.fire(new R.ErrorEvent(new Error("Failed to initialize WebGL")))},t.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new R.Event("webglcontextlost",{originalEvent:t}))},t.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new R.Event("webglcontextrestored",{originalEvent:t}))},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},t.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender())},t.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},t.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},t.prototype._render=function(){this._renderTaskQueue.run();var t,e,n=!1;return this.style&&this._styleDirty&&(this._styleDirty=!1,t=this.transform.zoom,e=R.default$2.now(),this.style.zoomHistory.update(t,e),1===(e=(t=new R.default$23(t,{now:e,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()})).crossFadingFactor())&&e===this._crossFadingFactor||(n=!0,this._crossFadingFactor=e),this.style.update(t)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new R.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new R.Event("load"))),this.style&&(this.style.hasTransitions()||n)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==R.default$1&&(R.default$1.removeEventListener("resize",this._onWindowResize,!1),R.default$1.removeEventListener("online",this._onWindowOnline,!1));var t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),Vn(this._canvasContainer),Vn(this._controlContainer),Vn(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new R.Event("remove"))},t.prototype._rerender=function(){var t=this;this.style&&!this._frame&&(this._frame=R.default$2.frame(function(){t._frame=null,t._render()}))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},e.showTileBoundaries.get=function(){return!!this._showTileBoundaries},e.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},e.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},e.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&((this._showCollisionBoxes=t)?this.style._generateCollisionBoxes():this._update())},e.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},e.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},e.repaint.get=function(){return!!this._repaint},e.repaint.set=function(t){this._repaint=t,this._update()},e.vertices.get=function(){return!!this._vertices},e.vertices.set=function(t){this._vertices=t,this._update()},t.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(new R.Event(t.dataType+"data",t))},t.prototype._onDataLoading=function(t){this.fire(new R.Event(t.dataType+"dataloading",t))},Object.defineProperties(t.prototype,e),t}(G);function Vn(t){t.parentNode&&t.parentNode.removeChild(t)}var Zn={showCompass:!0,showZoom:!0},x=function(t){var e=this;this.options=R.extend({},Zn,t),this._container=f.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return e._map.zoomOut()})),this.options.showCompass&&(R.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return e._map.resetNorth()}),this._compassArrow=f.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function qn(t,e,n){var i,r,o;for(t=new D(t.lng,t.lat),e&&(i=new D(t.lng-360,t.lat),r=new D(t.lng+360,t.lat),o=n.locationPoint(t).distSqr(e),n.locationPoint(i).distSqr(e)<o?t=i:n.locationPoint(r).distSqr(e)<o&&(t=r));180<Math.abs(t.lng-n.center.lng);){var a=n.locationPoint(t);if(0<=a.x&&0<=a.y&&a.x<=n.width&&a.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}x.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},x.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Cn(t,{button:"left",element:this._compass}),f.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},x.prototype.onRemove=function(){f.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),f.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},x.prototype._createButton=function(t,e,n){t=f.create("button",t,this._container);return t.type="button",t.setAttribute("aria-label",e),t.addEventListener("click",n),t};var Gn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Wn(t,e,n){var i,r=t.classList;for(i in Gn)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}var $n,Hn,Kn,Xn=((Kn=R.Evented)&&(ti.__proto__=Kn),((ti.prototype=Object.create(Kn&&Kn.prototype)).constructor=ti).prototype.addTo=function(t){return this.remove(),(this._map=t).getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},ti.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),delete this._map),f.remove(this._element),this._popup&&this._popup.remove(),this},ti.prototype.getLngLat=function(){return this._lngLat},ti.prototype.setLngLat=function(t){return this._lngLat=D.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},ti.prototype.getElement=function(){return this._element},ti.prototype.setPopup=function(t){var e;return this._popup&&(this._popup.remove(),this._popup=null),t&&("offset"in t.options||(e=Math.sqrt(Math.pow(13.5,2)/2),t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset),this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)),this},ti.prototype._onMapClick=function(t){var e=t.originalEvent.target,t=this._element;this._popup&&(e===t||t.contains(e))&&this.togglePopup()},ti.prototype.getPopup=function(){return this._popup},ti.prototype.togglePopup=function(){var t=this._popup;return t&&(t.isOpen()?t.remove():t.addTo(this._map)),this},ti.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=qn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),f.setTransform(this._element,Gn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),Wn(this._element,this._anchor,"marker"))},ti.prototype.getOffset=function(){return this._offset},ti.prototype.setOffset=function(t){return this._offset=R.default.convert(t),this._update(),this},ti.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new R.Event("dragstart"))),this.fire(new R.Event("drag"))},ti.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new R.Event("dragend")),this._state="inactive"},ti.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},ti.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},ti.prototype.isDraggable=function(){return this._draggable},ti),Jn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},P=((Hn=R.Evented)&&(Qn.__proto__=Hn),((Qn.prototype=Object.create(Hn&&Hn.prototype)).constructor=Qn).prototype.onAdd=function(t){var e;return this._map=t,this._container=f.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==$n?e($n):void 0!==R.default$1.navigator.permissions?R.default$1.navigator.permissions.query({name:"geolocation"}).then(function(t){$n="denied"!==t.state,e($n)}):($n=!!R.default$1.navigator.geolocation,e($n)),this._container},Qn.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(R.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),f.remove(this._container),this._map=void 0},Qn.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new R.Event("geolocate",t)),this._finish()},Qn.prototype._updateCamera=function(t){var e=new D(t.coords.longitude,t.coords.latitude),t=t.coords.accuracy;this._map.fitBounds(e.toBounds(t),this.options.fitBoundsOptions,{geolocateSource:!0})},Qn.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},Qn.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new R.Event("error",t)),this._finish()},Qn.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Qn.prototype._setupUI=function(t){var e=this;!1!==t?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=f.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=f.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Xn(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire(new R.Event("trackuserlocationend")))})):R.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},Qn.prototype.trigger=function(){if(!this._setup)return R.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new R.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new R.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new R.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=R.default$1.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else R.default$1.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Qn.prototype._clearWatch=function(){R.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Qn),Yn={maxWidth:100,unit:"metric"},Z=function(t){this.options=R.extend({},Yn,t),R.bindAll(["_onMove","setUnit"],this)};function Qn(t){Hn.call(this),this.options=R.extend({},Jn,t),R.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}function ti(t){if(Kn.call(this),(arguments[0]instanceof R.default$1.HTMLElement||2===arguments.length)&&(t=R.extend({element:t},arguments[1])),R.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._draggable=t&&t.draggable||!1,this._state="inactive",t&&t.element)this._element=t.element,this._offset=R.default.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=f.create("div");var e=f.createNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"height","41px"),e.setAttributeNS(null,"width","27px"),e.setAttributeNS(null,"viewBox","0 0 27 41");var n=f.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"stroke","none"),n.setAttributeNS(null,"stroke-width","1"),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"fill-rule","evenodd");var i=f.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"fill-rule","nonzero");var r=f.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"transform","translate(3.0, 29.0)"),r.setAttributeNS(null,"fill","#000000");for(var o=0,a=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];o<a.length;o+=1){var s=a[o],l=f.createNS("http://www.w3.org/2000/svg","ellipse");l.setAttributeNS(null,"opacity","0.04"),l.setAttributeNS(null,"cx","10.5"),l.setAttributeNS(null,"cy","5.80029008"),l.setAttributeNS(null,"rx",s.rx),l.setAttributeNS(null,"ry",s.ry),r.appendChild(l)}var u=f.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);var c=f.createNS("http://www.w3.org/2000/svg","path");c.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(c);var h=f.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25"),h.setAttributeNS(null,"fill","#000000");var p=f.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),h.appendChild(p);var d=f.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");n=f.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"transform","translate(8.0, 8.0)");c=f.createNS("http://www.w3.org/2000/svg","circle");c.setAttributeNS(null,"fill","#000000"),c.setAttributeNS(null,"opacity","0.25"),c.setAttributeNS(null,"cx","5.5"),c.setAttributeNS(null,"cy","5.5"),c.setAttributeNS(null,"r","5.4999962");p=f.createNS("http://www.w3.org/2000/svg","circle");p.setAttributeNS(null,"fill","#FFFFFF"),p.setAttributeNS(null,"cx","5.5"),p.setAttributeNS(null,"cy","5.5"),p.setAttributeNS(null,"r","5.4999962"),n.appendChild(c),n.appendChild(p),i.appendChild(r),i.appendChild(u),i.appendChild(h),i.appendChild(d),i.appendChild(n),e.appendChild(i),this._element.appendChild(e),this._offset=R.default.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}function ei(t,e,n){var i,r,o=n&&n.maxWidth||100,a=t._container.clientHeight/2,s=(r=t.unproject([0,a]),i=t.unproject([o,a]),s=Math.PI/180,t=r.lat*s,a=i.lat*s,r=Math.sin(t)*Math.sin(a)+Math.cos(t)*Math.cos(a)*Math.cos((i.lng-r.lng)*s),6371e3*Math.acos(Math.min(r,1)));n&&"imperial"===n.unit?5280<(r=3.2808*s)?ni(e,o,r/5280,"mi"):ni(e,o,r,"ft"):n&&"nautical"===n.unit?ni(e,o,s/1852,"nm"):ni(e,o,s,"m")}function ni(t,e,n,i){var r,o=(r=n,(o=Math.pow(10,(""+Math.floor(r)).length-1))*(o=10<=(o=r/o)?10:5<=o?5:3<=o?3:2<=o?2:1)),n=o/n;"m"===i&&1e3<=o&&(o/=1e3,i="km"),t.style.width=e*n+"px",t.innerHTML=o+i}Z.prototype.getDefaultPosition=function(){return"bottom-left"},Z.prototype._onMove=function(){ei(this._map,this._container,this.options)},Z.prototype.onAdd=function(t){return this._map=t,this._container=f.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Z.prototype.onRemove=function(){f.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Z.prototype.setUnit=function(t){this.options.unit=t,ei(this._map,this._container,this.options)};q=function(){this._fullscreen=!1,R.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in R.default$1.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in R.default$1.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in R.default$1.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in R.default$1.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};q.prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=f.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",R.warnOnce("This device does not support fullscreen mode.")),this._container},q.prototype.onRemove=function(){f.remove(this._container),this._map=null,R.default$1.document.removeEventListener(this._fullscreenchange,this._changeIcon)},q.prototype._checkFullscreenSupport=function(){return!!(R.default$1.document.fullscreenEnabled||R.default$1.document.mozFullScreenEnabled||R.default$1.document.msFullscreenEnabled||R.default$1.document.webkitFullscreenEnabled)},q.prototype._setupUI=function(){var t=this._fullscreenButton=f.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);t.setAttribute("aria-label","Toggle fullscreen"),t.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),R.default$1.document.addEventListener(this._fullscreenchange,this._changeIcon)},q.prototype._isFullscreen=function(){return this._fullscreen},q.prototype._changeIcon=function(){(R.default$1.document.fullscreenElement||R.default$1.document.mozFullScreenElement||R.default$1.document.webkitFullscreenElement||R.default$1.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},q.prototype._onClickFullscreen=function(){this._isFullscreen()?R.default$1.document.exitFullscreen?R.default$1.document.exitFullscreen():R.default$1.document.mozCancelFullScreen?R.default$1.document.mozCancelFullScreen():R.default$1.document.msExitFullscreen?R.default$1.document.msExitFullscreen():R.default$1.document.webkitCancelFullScreen&&R.default$1.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var ii,ri={closeButton:!0,closeOnClick:!0,className:""},G=((ii=R.Evented)&&(ai.__proto__=ii),((ai.prototype=Object.create(ii&&ii.prototype)).constructor=ai).prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new R.Event("open")),this},ai.prototype.isOpen=function(){return!!this._map},ai.prototype.remove=function(){return this._content&&f.remove(this._content),this._container&&(f.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new R.Event("close")),this},ai.prototype.getLngLat=function(){return this._lngLat},ai.prototype.setLngLat=function(t){return this._lngLat=D.convert(t),this._pos=null,this._update(),this},ai.prototype.setText=function(t){return this.setDOMContent(R.default$1.document.createTextNode(t))},ai.prototype.setHTML=function(t){var e,n=R.default$1.document.createDocumentFragment(),i=R.default$1.document.createElement("body");for(i.innerHTML=t;e=i.firstChild;)n.appendChild(e);return this.setDOMContent(n)},ai.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},ai.prototype._createContent=function(){this._content&&f.remove(this._content),this._content=f.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=f.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},ai.prototype._update=function(){var t,e,n,i,r,o=this;this._map&&this._lngLat&&this._content&&(this._container||(this._container=f.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=f.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return o._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=qn(this._lngLat,this._pos,this._map.transform)),t=this._pos=this._map.project(this._lngLat),e=this.options.anchor,r=function t(e){if(e){if("number"==typeof e){var n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new R.default(0,0),top:new R.default(0,e),"top-left":new R.default(n,n),"top-right":new R.default(-n,n),bottom:new R.default(0,-e),"bottom-left":new R.default(n,-n),"bottom-right":new R.default(-n,-n),left:new R.default(e,0),right:new R.default(-e,0)}}if(e instanceof R.default||Array.isArray(e)){n=R.default.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:R.default.convert(e.center||[0,0]),top:R.default.convert(e.top||[0,0]),"top-left":R.default.convert(e["top-left"]||[0,0]),"top-right":R.default.convert(e["top-right"]||[0,0]),bottom:R.default.convert(e.bottom||[0,0]),"bottom-left":R.default.convert(e["bottom-left"]||[0,0]),"bottom-right":R.default.convert(e["bottom-right"]||[0,0]),left:R.default.convert(e.left||[0,0]),right:R.default.convert(e.right||[0,0])}}return t(new R.default(0,0))}(this.options.offset),e||(n=this._container.offsetWidth,i=this._container.offsetHeight,i=t.y+r.bottom.y<i?["top"]:t.y>this._map.transform.height-i?["bottom"]:[],t.x<n/2?i.push("left"):t.x>this._map.transform.width-n/2&&i.push("right"),e=0===i.length?"bottom":i.join("-")),r=t.add(r[e]).round(),f.setTransform(this._container,Gn[e]+" translate("+r.x+"px,"+r.y+"px)"),Wn(this._container,e,"popup"))},ai.prototype._onClickClose=function(){this.remove()},ai),oi={version:"0.47.0",supported:n,workerCount:Math.max(Math.floor(R.default$2.hardwareConcurrency/2),1),setRTLTextPlugin:R.setRTLTextPlugin,Map:W,NavigationControl:x,GeolocateControl:P,AttributionControl:zn,ScaleControl:Z,FullscreenControl:q,Popup:G,Marker:Xn,Style:Xe,LngLat:D,LngLatBounds:N,Point:R.default,Evented:R.Evented,config:u,get accessToken(){return u.ACCESS_TOKEN},set accessToken(t){u.ACCESS_TOKEN=t},workerUrl:""};function ai(t){ii.call(this),this.options=R.extend(Object.create(ri),t),R.bindAll(["_update","_onClickClose"],this)}return oi}),a}()},function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),i=n(6),i=n.n(i),o=n(5),a=n(11),s=n(10);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d(n);return t=i?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==l(t)&&"function"!=typeof t?p(e):t}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(i,r.a.Component);var n=h(i);function i(t){var e;return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),f(p(e=n.call(this,t)),"handleParcelChange",function(t){null!=t?e.setState({selectedParcel:t,selectedParcelPID:t.properties.PID_LONG}):e.setState({selectedParcel:null,selectedParcelPID:null})}),f(p(e),"handleParcelIDSearch",function(t){e.setState({searchedParcelID:t.target.value})}),f(p(e),"searchForParcelIDButton",function(){1==e.state.searchForParcelIDButtonClicked?e.setState({searchForParcelIDButtonClicked:!1}):e.setState({searchForParcelIDButtonClicked:!0})}),f(p(e),"handleBufferChange",function(t){e.setState({bufferDistance:t.target.value})}),f(p(e),"handleBufferParcels",function(t){e.setState({bufferParcels:t})}),f(p(e),"updateParcelBufferButton",function(){1==e.state.bufferButtonClicked?e.setState({bufferButtonClicked:!1}):e.setState({bufferButtonClicked:!0})}),e.state={selectedParcel:null,selectedParcelPID:"",bufferDistance:0,bufferParcels:[],bufferButtonClicked:!1,searchedParcelID:"",searchForParcelIDButtonClicked:!1},e}return u(i.prototype,[{key:"render",value:function(){return r.a.createElement(o.h,{className:"paragraphs-items paragraphs-items-field-components paragraphs-items-full paragraphs-items-field-components-full g abutters"},r.a.createElement(o.c,{lg:"3",className:"item left-item col-lg-3"},r.a.createElement(s.default,{selectedParcelPID:this.state.selectedParcelPID,handleBufferChange:this.handleBufferChange,bufferDistance:this.state.bufferDistance,bufferParcels:this.state.bufferParcels,updateParcelBufferButton:this.updateParcelBufferButton,searchedParcelID:this.state.searchedParcelID,handleParcelIDSearch:this.handleParcelIDSearch,searchForParcelIDButton:this.searchForParcelIDButton,selectedParcel:this.state.selectedParcel})),r.a.createElement(o.c,{lg:"9",className:"item right-item p-lg-0 pr-md-5 pl-md-5 col-lg-9"},r.a.createElement(a.default,{handleParcelChange:this.handleParcelChange,bufferDistance:this.state.bufferDistance,handleBufferParcels:this.handleBufferParcels,bufferButtonClicked:this.state.bufferButtonClicked,searchedParcelID:this.state.searchedParcelID,searchForParcelIDButtonClicked:this.state.searchForParcelIDButtonClicked,selectedParcel:this.state.selectedParcel})))}}]),i}();e.default=n,i.a.render(r.a.createElement(n,null),document.getElementById("web-app"))},function(t,e,n){"use strict";n.r(e),n.d(e,"VERSION",function(){return i.a}),n.d(e,"Support",function(){return s}),n.d(e,"options",function(){return o}),n.d(e,"Util",function(){return V}),n.d(e,"get",function(){return m}),n.d(e,"post",function(){return c}),n.d(e,"request",function(){return p}),n.d(e,"Task",function(){return Z}),n.d(e,"task",function(){return q}),n.d(e,"Query",function(){return G}),n.d(e,"query",function(){return W}),n.d(e,"Find",function(){return H}),n.d(e,"find",function(){return K}),n.d(e,"Identify",function(){return J}),n.d(e,"identify",function(){return Y}),n.d(e,"IdentifyFeatures",function(){return Q}),n.d(e,"identifyFeatures",function(){return tt}),n.d(e,"IdentifyImage",function(){return nt}),n.d(e,"identifyImage",function(){return it}),n.d(e,"Service",function(){return ot}),n.d(e,"service",function(){return at}),n.d(e,"MapService",function(){return st}),n.d(e,"mapService",function(){return lt}),n.d(e,"ImageService",function(){return ct}),n.d(e,"imageService",function(){return ht}),n.d(e,"FeatureLayerService",function(){return dt}),n.d(e,"featureLayerService",function(){return ft}),n.d(e,"BasemapLayer",function(){return yt}),n.d(e,"basemapLayer",function(){return gt}),n.d(e,"TiledMapLayer",function(){return vt}),n.d(e,"tiledMapLayer",function(){return _t}),n.d(e,"RasterLayer",function(){return xt}),n.d(e,"ImageMapLayer",function(){return wt}),n.d(e,"imageMapLayer",function(){return Tt}),n.d(e,"DynamicMapLayer",function(){return Et}),n.d(e,"dynamicMapLayer",function(){return kt}),n.d(e,"FeatureManager",function(){return Mt}),n.d(e,"FeatureLayer",function(){return Lt}),n.d(e,"featureLayer",function(){return It});var i=n(21),r=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,e=""===document.documentElement.style.pointerEvents,s={cors:r,pointerEvents:e},o={attributionWidthOffset:55},f=n(2),a=0;function l(t){var e,n,i,r="";for(e in t.f=t.f||"json",t)t.hasOwnProperty(e)&&(n=t[e],i=Object.prototype.toString.call(n),r.length&&(r+="&"),n="[object Array]"===i?"[object Object]"===Object.prototype.toString.call(n[0])?JSON.stringify(n):n.join(","):"[object Object]"===i?JSON.stringify(n):"[object Date]"===i?n.valueOf():n,r+=encodeURIComponent(e)+"="+encodeURIComponent(n));return r}function u(i,r){var o=new window.XMLHttpRequest;return o.onerror=function(t){o.onreadystatechange=f.Util.falseFn,i.call(r,{error:{code:500,message:"XMLHttpRequest error"}},null)},o.onreadystatechange=function(){var e,n;if(4===o.readyState){try{e=JSON.parse(o.responseText)}catch(t){e=null,n={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!n&&e.error&&(n=e.error,e=null),o.onerror=f.Util.falseFn,i.call(r,n,e)}},o.ontimeout=function(){this.onerror()},o}function c(t,e,n,i){n=u(n,i);return n.open("POST",t),null!=i&&void 0!==i.options&&(n.timeout=i.options.timeout),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(l(e)),n}function h(t,e,n,i){n=u(n,i);return n.open("GET",t+"?"+l(e),!0),null!=i&&void 0!==i.options&&(n.timeout=i.options.timeout,i.options.withCredentials&&(n.withCredentials=!0)),n.send(null),n}function p(t,e,n,i){var r=l(e),o=u(n,i),a=(t+"?"+r).length;if(a<=2e3&&s.cors?o.open("GET",t+"?"+r):2e3<a&&s.cors&&(o.open("POST",t),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=i&&void 0!==i.options&&(o.timeout=i.options.timeout,i.options.withCredentials&&(o.withCredentials=!0)),a<=2e3&&s.cors)o.send(null);else{if(!(2e3<a&&s.cors))return a<=2e3&&!s.cors?d(t,e,n,i):void y("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");o.send(r)}return o}function d(t,e,i,r){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var o="c"+a;e.callback="window._EsriLeafletCallbacks."+o,window._EsriLeafletCallbacks[o]=function(t){var e,n;!0!==window._EsriLeafletCallbacks[o]&&("[object Object]"!==(n=Object.prototype.toString.call(t))&&"[object Array]"!==n&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),i.call(r,e,t),window._EsriLeafletCallbacks[o]=!0)};var n=f.DomUtil.create("script",null,document.body);return n.type="text/javascript",n.src=t+"?"+l(e),n.id=o,n.onerror=function(t){t&&!0!==window._EsriLeafletCallbacks[o]&&(i.call(r,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[o]=!0)},f.DomUtil.addClass(n,"esri-leaflet-jsonp"),a++,{id:o,url:n.src,abort:function(){window._EsriLeafletCallbacks._callback[o]({code:0,message:"Request aborted."})}}}var m=s.cors?h:d;function y(){console&&console.warn&&console.warn.apply(console,arguments)}m.CORS=h,m.JSONP=d;function g(t,e){for(var n=0;n<t.length-1;n++)for(var i=0;i<e.length-1;i++)if(function(t,e,n,i){var r=(i[0]-n[0])*(t[1]-n[1])-(i[1]-n[1])*(t[0]-n[0]),o=(e[0]-t[0])*(t[1]-n[1])-(e[1]-t[1])*(t[0]-n[0]),t=(i[1]-n[1])*(e[0]-t[0])-(i[0]-n[0])*(e[1]-t[1]);if(0!=t){r=r/t,t=o/t;if(0<=r&&r<=1&&0<=t&&t<=1)return!0}return!1}(t[n],t[n+1],e[i],e[i+1]))return!0;return!1}function v(t){return function(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return 1}(t[0],t[t.length-1])||t.push(t[0]),t}function _(t){for(var e,n=0,i=0,r=t.length,o=t[i];i<r-1;i++)n+=((e=t[i+1])[0]-o[0])*(e[1]+o[1]),o=e;return 0<=n}function b(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function x(t){var e=[],n=t.slice(0);if(4<=(t=v(n.shift().slice(0))).length){_(t)||t.reverse(),e.push(t);for(var i=0;i<n.length;i++){var r=v(n[i].slice(0));4<=r.length&&(_(r)&&r.reverse(),e.push(r))}}return e}var w={request:p,get:m,post:c},T=function t(e,r){var n={};if(e.features){n.type="FeatureCollection",n.features=[];for(var i=0;i<e.features.length;i++)n.features.push(t(e.features[i],r))}if("number"==typeof e.x&&"number"==typeof e.y&&(n.type="Point",n.coordinates=[e.x,e.y],"number"==typeof e.z&&n.coordinates.push(e.z)),e.points&&(n.type="MultiPoint",n.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(n.type="LineString",n.coordinates=e.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=e.paths.slice(0))),e.rings&&(n=function(t){for(var e,n,i=[],r=[],o=0;o<t.length;o++){var a,s=v(t[o].slice(0));s.length<4||(_(s)?(a=[s.slice().reverse()],i.push(a)):r.push(s.slice().reverse()))}for(var l,u,c,h=[];r.length;){n=r.pop();for(var p=!1,d=i.length-1;0<=d;d--)if(e=i[d][0],c=void 0,c=g(l=e,u=n),u=function(t,e){for(var n=!1,i=-1,r=t.length,o=r-1;++i<r;o=i)(t[i][1]<=e[1]&&e[1]<t[o][1]||t[o][1]<=e[1]&&e[1]<t[i][1])&&e[0]<(t[o][0]-t[i][0])*(e[1]-t[i][1])/(t[o][1]-t[i][1])+t[i][0]&&(n=!n);return n}(l,u[0]),!(c||!u)){i[d].push(n),p=!0;break}p||h.push(n)}for(;h.length;){n=h.pop();var f=!1;for(d=i.length-1;0<=d;d--)if(e=i[d][0],g(e,n)){i[d].push(n),f=!0;break}f||i.push([n.reverse()])}return 1===i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(n.type="Polygon",n.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(n.type="Feature",n.geometry=e.geometry?t(e.geometry):null,n.properties=e.attributes?b(e.attributes):null,e.attributes))try{n.id=function(t){for(var e=r?[r,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<e.length;n++){var i=e[n];if(i in t&&("string"==typeof t[i]||"number"==typeof t[i]))return t[i]}throw Error("No valid id attribute found")}(e.attributes)}catch(t){}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n},E=function t(e,n){n=n||"OBJECTID";var i,r={wkid:4326},o={};switch(e.type){case"Point":o.x=e.coordinates[0],o.y=e.coordinates[1],o.spatialReference=r;break;case"MultiPoint":o.points=e.coordinates.slice(0),o.spatialReference=r;break;case"LineString":o.paths=[e.coordinates.slice(0)],o.spatialReference=r;break;case"MultiLineString":o.paths=e.coordinates.slice(0),o.spatialReference=r;break;case"Polygon":o.rings=x(e.coordinates.slice(0)),o.spatialReference=r;break;case"MultiPolygon":o.rings=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=x(t[n]),r=i.length-1;0<=r;r--){var o=i[r].slice(0);e.push(o)}return e}(e.coordinates.slice(0)),o.spatialReference=r;break;case"Feature":e.geometry&&(o.geometry=t(e.geometry,n)),o.attributes=e.properties?b(e.properties):{},e.id&&(o.attributes[n]=e.id);break;case"FeatureCollection":for(o=[],i=0;i<e.features.length;i++)o.push(t(e.features[i],n));break;case"GeometryCollection":for(o=[],i=0;i<e.geometries.length;i++)o.push(t(e.geometries[i],n))}return o};function k(t,e){return E(t,e)}function S(t,e){return T(t,e)}function P(t){if("NaN"===t.xmin||"NaN"===t.ymin||"NaN"===t.xmax||"NaN"===t.ymax)return null;var e=Object(f.latLng)(t.ymin,t.xmin),t=Object(f.latLng)(t.ymax,t.xmax);return Object(f.latLngBounds)(e,t)}function C(t){return{xmin:(t=Object(f.latLngBounds)(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var M=/^(OBJECTID|FID|OID|ID)$/i;function L(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var n=0;n<=t.fields.length-1;n++)if("esriFieldTypeOID"===t.fields[n].type){e=t.fields[n].name;break}if(!e)for(n=0;n<=t.fields.length-1;n++)if(t.fields[n].name.match(M)){e=t.fields[n].name;break}}return e}function I(t){for(var e in t.attributes)if(e.match(M))return e}function A(t,e){var n=t.features||t.results,i=n&&n.length,r=e||L(t),o={type:"FeatureCollection",features:[]};if(i)for(var a=n.length-1;0<=a;a--){var s=S(n[a],r||I(n[a]));o.features.push(s)}return o}function z(t){return"/"!==(t=f.Util.trim(t))[t.length-1]&&(t+="/"),t}function O(t){var e;return-1!==t.url.indexOf("?")&&(t.requestParams=t.requestParams||{},e=t.url.substring(t.url.indexOf("?")+1),t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')),t.url=z(t.url.split("?")[0]),t}function R(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function D(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function N(t){return t.getSize().x-o.attributionWidthOffset+"px"}function B(e){var t;e.attributionControl&&!e.attributionControl._esriAttributionAdded&&(e.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Powered by <a href="https://www.esri.com">Esri</a>'),(t=document.createElement("style")).type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t),f.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover"),(t=document.createElement("style")).type="text/css",t.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+N(e)+";}",document.getElementsByTagName("head")[0].appendChild(t),f.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution"),e.on("resize",function(t){e.attributionControl._container.style.maxWidth=N(t.target)}),e.attributionControl._esriAttributionAdded=!0)}function F(t){var e={geometry:null,geometryType:null};return t instanceof f.LatLngBounds?(e.geometry=C(t),e.geometryType="esriGeometryEnvelope",e):(t.getLatLng&&(t=t.getLatLng()),t instanceof f.LatLng&&(t={type:"Point",coordinates:[t.lng,t.lat]}),t instanceof f.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=k(t),e.geometryType=D(t.type)),t.toGeoJSON&&(t=t.toGeoJSON()),"Feature"===t.type&&(t=t.geometry),"Point"===t.type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=k(t),e.geometryType=D(t.type),e):void y("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function j(t,l){s.cors&&p(t,{},f.Util.bind(function(t,e){if(!t){l._esriAttributions=[];for(var n=0;n<e.contributors.length;n++)for(var i=e.contributors[n],r=0;r<i.coverageAreas.length;r++){var o=i.coverageAreas[r],a=Object(f.latLng)(o.bbox[0],o.bbox[1]),s=Object(f.latLng)(o.bbox[2],o.bbox[3]);l._esriAttributions.push({attribution:i.attribution,score:o.score,bounds:Object(f.latLngBounds)(a,s),minZoom:o.zoomMin,maxZoom:o.zoomMax})}l._esriAttributions.sort(function(t,e){return e.score-t.score}),U({target:l})}},this))}function U(t){var e=t.target,n=e._esriAttributions;if(e&&e.attributionControl){var i=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(i&&n){for(var r="",t=e.getBounds(),o=Object(f.latLngBounds)(t.getSouthWest().wrap(),t.getNorthEast().wrap()),a=e.getZoom(),s=0;s<n.length;s++){var l=n[s],u=l.attribution;!r.match(u)&&l.bounds.intersects(o)&&a>=l.minZoom&&a<=l.maxZoom&&(r+=", "+u)}r=r.substr(2),i.innerHTML=r,i.style.maxWidth=N(e),e.fire("attributionupdated",{attribution:r})}}}var V={warn:y,cleanUrl:z,getUrlParams:O,isArcgisOnline:R,geojsonTypeToArcGIS:D,responseToFeatureCollection:A,geojsonToArcGIS:k,arcgisToGeoJSON:S,boundsToExtent:C,extentToBounds:P,calcAttributionWidth:N,setEsriAttribution:B,_setGeometry:F,_getAttributionData:j,_updateMapAttribution:U,_findIdAttributeFromFeature:I,_findIdAttributeFromResponse:L},Z=f.Class.extend({options:{proxy:!1,useCors:r},generateSetter:function(e,t){return f.Util.bind(function(t){return this.params[e]=t,this},t)},initialize:function(t){if(t.request&&t.options?(this._service=t,f.Util.setOptions(this,t.options)):(f.Util.setOptions(this,t),this.options.url=z(t.url)),this.params=f.Util.extend({},this.params||{}),this.setters)for(var e in this.setters){var n=this.setters[e];this[e]=this.generateSetter(n,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&f.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,n,i,r){e=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?w[t](e,n,i,r):w.get.JSONP(e,n,i,r)}});function q(t){return t=O(t),new Z(t)}var G=Z.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=Object(f.latLng)(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSr=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(n,i){return this._cleanParams(),this.options.isModern||R(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request(function(t,e){this._trapSQLerrors(t),n.call(i,t,e,e)},this)):this.request(function(t,e){this._trapSQLerrors(t),n.call(i,t,e&&A(e),e)},this)},count:function(n,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(t,e){n.call(this,t,e&&e.count,e)},t)},ids:function(n,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(t,e){n.call(this,t,e&&e.objectIds,e)},t)},bounds:function(n,i){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(t,e){e&&e.extent&&P(e.extent)?n.call(i,t,P(e.extent),e):(t={message:"Invalid Bounds"},n.call(i,t,null,e))},i)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){t=Object(f.point)(t);return this.params.pixelSize=[t.x,t.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&y("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSr=4326;t=F(t);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function W(t){return new G(t)}var $=W,H=Z.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},run:function(n,i){return this.request(function(t,e){n.call(i,t,e&&A(e),e)},i)}});function K(t){return new H(t)}var X=K,J=Z.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});function Y(t){return new J(t)}var Q=J.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=C(t.getBounds()),t=t.getSize();return this.params.imageDisplay=[t.x,t.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=Object(f.latLng)(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},run:function(r,o){return this.request(function(t,e){if(t)r.call(o,t,void 0,e);else{var n=A(e);e.results=e.results.reverse();for(var i=0;i<n.features.length;i++)n.features[i].layerId=e.results[i].layerId;r.call(o,void 0,n,e)}})},_setGeometryParams:function(t){t=F(t);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function tt(t){return new Q(t)}var et=tt,nt=J.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=Object(f.latLng)(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(n,i){return this.request(function(t,e){n.call(i,t,e&&this._responseToGeoJSON(e),e)},this)},_responseToGeoJSON:function(t){var e=t.location,n=t.catalogItems,i=t.catalogItemVisibilities,r={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(r.pixel.properties.values=t.properties.Values),n&&n.features&&(r.catalogItems=A(n),i&&i.length===r.catalogItems.features.length))for(var o=i.length-1;0<=o;o--)r.catalogItems.features[o].properties.catalogItemVisibility=i[o];return r}});function it(t){return new nt(t)}var rt=it,ot=f.Evented.extend({options:{proxy:!1,useCors:r,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,f.Util.setOptions(this,t),this.options.url=z(this.options.url)},get:function(t,e,n,i){return this._request("get",t,e,n,i)},post:function(t,e,n,i){return this._request("post",t,e,n,i)},request:function(t,e,n,i){return this._request("request",t,e,n,i)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,n,i,r){this.fire("requeststart",{url:this.options.url+e,params:n,method:t},!0);var o=this._createServiceCallback(t,e,n,i,r);if(this.options.token&&(n.token=this.options.token),this.options.requestParams&&f.Util.extend(n,this.options.requestParams),!this._authenticating){var a=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?w[t](a,n,o,r):w.get.JSONP(a,n,o,r)}this._requestQueue.push([t,e,n,i,r])},_createServiceCallback:function(n,i,r,o,a){return f.Util.bind(function(t,e){!t||499!==t.code&&498!==t.code||(this._authenticating=!0,this._requestQueue.push([n,i,r,o,a]),this.fire("authenticationrequired",{authenticate:f.Util.bind(this.authenticate,this)},!0),t.authenticate=f.Util.bind(this.authenticate,this)),o.call(a,t,e),t?this.fire("requesterror",{url:this.options.url+i,params:r,message:t.message,code:t.code,method:n},!0):this.fire("requestsuccess",{url:this.options.url+i,params:r,response:e,method:n},!0),this.fire("requestend",{url:this.options.url+i,params:r,method:n},!0)},this)},_runQueue:function(){for(var t=this._requestQueue.length-1;0<=t;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});function at(t){return t=O(t),new ot(t)}var st=ot.extend({identify:function(){return et(this)},find:function(){return X(this)},query:function(){return $(this)}});function lt(t){return new st(t)}var ut=lt,ct=ot.extend({query:function(){return $(this)},identify:function(){return rt(this)}});function ht(t){return new ct(t)}var pt=ht,dt=ot.extend({options:{idAttribute:"OBJECTID"},query:function(){return $(this)},addFeature:function(t,e,n){this.addFeatures(t,e,n)},addFeatures:function(t,i,r){for(var e=t.features||[t],n=e.length-1;0<=n;n--)delete e[n].id;return t=k(t),t=1<e.length?t:[t],this.post("addFeatures",{features:t},function(t,e){var n=e&&e.addResults?1<e.addResults.length?e.addResults:e.addResults[0]:void 0;i&&i.call(r,t||e.addResults[0].error,n)},r)},updateFeature:function(t,e,n){this.updateFeatures(t,e,n)},updateFeatures:function(t,i,r){var e=t.features||[t];return t=k(t,this.options.idAttribute),t=1<e.length?t:[t],this.post("updateFeatures",{features:t},function(t,e){var n=e&&e.updateResults?1<e.updateResults.length?e.updateResults:e.updateResults[0]:void 0;i&&i.call(r,t||e.updateResults[0].error,n)},r)},deleteFeature:function(t,e,n){this.deleteFeatures(t,e,n)},deleteFeatures:function(t,i,r){return this.post("deleteFeatures",{objectIds:t},function(t,e){var n=e&&e.deleteResults?1<e.deleteResults.length?e.deleteResults:e.deleteResults[0]:void 0;i&&i.call(r,t||e.deleteResults[0].error,n)},r)}});function ft(t){return new dt(t)}var mt=ft,n="https:"!==window.location.protocol?"http:":"https:",yt=f.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:n+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:n+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:e?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:e?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:e?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:e?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:e?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:e?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:e?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:n+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:n+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:n+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var n;if("object"==typeof t&&t.urlTemplate&&t.options)n=t;else{if("string"!=typeof t||!yt.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');n=yt.TILES[t]}e=f.Util.extend(n.options,e);f.Util.setOptions(this,e),this.options.token&&-1===n.urlTemplate.indexOf("token=")&&(n.urlTemplate+="?token="+this.options.token),this.options.proxy&&(n.urlTemplate=this.options.proxy+"?"+n.urlTemplate),f.TileLayer.prototype.initialize.call(this,n.urlTemplate,e)},onAdd:function(t){B(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&j((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",U),f.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){t.off("moveend",U),f.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){var t;this._map.getPane(this.options.pane)||((t=this._map.createPane(this.options.pane)).style.pointerEvents="none",t.style.zIndex=500)},getAttribution:function(){var t;return this.options.attribution&&(t='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>"),t}});function gt(t,e){return new yt(t,e)}var vt=f.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=O(t=f.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&0<Object.keys(t.requestParams).length?f.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=ut(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),f.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return f.Util.template(this.tileUrl,f.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var n=document.createElement("img");return f.DomEvent.on(n,"load",f.Util.bind(this._tileOnLoad,this,e,n)),f.DomEvent.on(n,"error",f.Util.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?n.src=this.getTileUrl(t):this.once("lodmap",function(){n.src=this.getTileUrl(t)},this),n},onAdd:function(l){B(l),this._lodMap||this.metadata(function(t,e){if(!t&&e.spatialReference){t=e.spatialReference.latestWkid||e.spatialReference.wkid;if(!this.options.attribution&&l.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,l.attributionControl.addAttribution(this.getAttribution())),l.options.crs!==f.CRS.EPSG3857||102100!==t&&3857!==t)l.options.crs&&l.options.crs.code&&-1<l.options.crs.code.indexOf(t)||y("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var n=e.tileInfo.lods,i=vt.MercatorZoomLevels,r=0;r<n.length;r++){var o,a=n[r];for(o in i){var s=i[o];if(this._withinPercentage(a.resolution,s,this.options.zoomOffsetAllowance)){this._lodMap[o]=a.level;break}}}this.fire("lodmap")}}},this),f.TileLayer.prototype.onAdd.call(this,l)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,n){return Math.abs(t/e-1)<n}});function _t(t,e){return new vt(t,e)}var bt=f.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,f.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===f.CRS.EPSG3857?f.ImageOverlay.prototype._reset.call(this):f.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),xt=f.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:r,attribution:null,interactive:!1,alt:""},onAdd:function(n){B(n),this.options.zIndex&&(this.options.position=null),this._update=f.Util.throttle(this._update,this.options.updateInterval,this),n.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?n.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,e){!t&&!this.options.attribution&&n.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,n.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(t){this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=Object(f.popup)(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,n=this._currentImage.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._currentImage._image&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,n,e){var i,r;this._map&&(e&&(t="data:"+e+";base64,"+t),t&&(i=new bt(t,n,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function(t){var e;i.off("error",r,this),this._map&&(e=t.target,t=this._currentImage,e._bounds.equals(n)&&e._bounds.equals(this._map.getBounds())?(this._currentImage=e,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),t&&this._map&&this._map.removeLayer(t),t&&t._map&&t._map.removeLayer(t)):this._map.removeLayer(e)),this.fire("load",{bounds:n})},i.once("error",function(){this._map.removeLayer(i),this.fire("error"),i.off("load",r,this)},this),i.once("load",r,this)))},_update:function(){var t,e;this._map&&(e=this._map.getZoom(),t=this._map.getBounds(),this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress||(e>this.options.maxZoom||e<this.options.minZoom?this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null):(e=this._buildExportParams(),f.Util.extend(e,this.options.requestParams),e?(this._requestExport(e,t),this.fire("loading",{bounds:t})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null))))},_renderPopup:function(t,e,n,i){var r;t=Object(f.latLng)(t),this._shouldRenderPopup&&this._lastClick.equals(t)&&(r=this._popupFunction(e,n,i))&&this._popup.setLatLng(t).setContent(r).openOn(this._map)},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),t=this._map.unproject(t.getTopRight()),t=this._map.options.crs.project(t),e=this._map.options.crs.project(e),e=Object(f.bounds)(t,e);return[e.getBottomLeft().x,e.getBottomLeft().y,e.getTopRight().x,e.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),n=this._map.unproject(t.getBottomLeft()),t=this._map.unproject(t.getTopRight()),t=this._map.latLngToLayerPoint(t).y,n=this._map.latLngToLayerPoint(n).y;return(0<t||n<e.y)&&(e.y=n-t),e.x+","+e.y}}),wt=xt.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=O(t),this.service=pt(t),this.service.addEventParent(this),f.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return f.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return f.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(i){var t=f.Util.bind(function(t,e,n){t||setTimeout(f.Util.bind(function(){this._renderPopup(i.latlng,t,e,n)},this),300)},this),e=this.identify().at(i.latlng);this.options.mosaicRule&&e.setMosaicRule(this.options.mosaicRule),e.run(t),this._shouldRenderPopup=!0,this._lastClick=i.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(t.pixelType=this.options.pixelType),this.options.interpolation&&(t.interpolation=this.options.interpolation),this.options.compressionQuality&&(t.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(t.bandIds=this.options.bandIds),0!==this.options.noData&&!this.options.noData||(t.noData=this.options.noData),this.options.noDataInterpretation&&(t.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(t.token=this.service.options.token),this.options.renderingRule&&(t.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(t.mosaicRule=JSON.stringify(this.options.mosaicRule)),t},_requestExport:function(t,n){"json"===this.options.f?this.service.request("exportImage",t,function(t,e){t||(this.options.token&&(e.href+="?token="+this.options.token),this.options.proxy&&(e.href=this.options.proxy+"?"+e.href),this._renderImage(e.href,n))},this):(t.f="image",t=this.options.url+"exportImage"+f.Util.getParamString(t),this.options.proxy&&(t=this.options.proxy+"?"+t),this._renderImage(t,n))}});function Tt(t,e){return new wt(t,e)}var Et=xt.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(t){t=O(t),this.service=ut(t),this.service.addEventParent(this),f.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(i){var t,e=f.Util.bind(function(t,e,n){t||setTimeout(f.Util.bind(function(){this._renderPopup(i.latlng,t,e,n)},this),300)},this);if((t=(this.options.popup||this.identify()).on(this._map).at(i.latlng)).params.maxAllowableOffset||t.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?t.layers("visible:"+this.options.layers.join(",")):t.layers("visible")),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!t.params.layerDefs)for(var n in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(n)&&t.layerDef(n,this.options.layerDefs[n]);t.run(e),this._shouldRenderPopup=!0,this._lastClick=i.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(t.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;t.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(t.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(t.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(t.token=this.service.options.token),this.options.proxy&&(t.proxy=this.options.proxy),this.options.disableCache&&(t._ts=Date.now()),t},_requestExport:function(t,n){"json"===this.options.f?this.service.request("export",t,function(t,e){t||(this.options.token&&e.href&&(e.href+="?token="+this.options.token),this.options.proxy&&e.href&&(e.href=this.options.proxy+"?"+e.href),e.href?this._renderImage(e.href,n):this._renderImage(e.imageData,n,e.contentType))},this):(t.f="image",t=this.options.url+"export"+f.Util.getParamString(t),this.options.proxy&&(t=this.options.proxy+"?"+t),this._renderImage(t,n))}});function kt(t,e){return new Et(t,e)}var St=f.Layer.extend({options:{cellSize:512,updateWhenIdle:f.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(t){f.Util.setOptions(this,t)},onAdd:function(t){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(t){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),t},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var t=this.options.cellSize;return t instanceof f.Point?t:new f.Point(t,t)},_pruneCells:function(){if(this._map){var t,e,n;for(t in this._cells)(e=this._cells[t]).retain=e.current;for(t in this._cells)(e=this._cells[t]).current&&!e.active&&(n=e.coords,this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2));for(t in this._cells)this._cells[t].retain||this._removeCell(t)}},_removeAllCells:function(){for(var t in this._cells)this._removeCell(t)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),t=Math.floor(e/2),e=n-1,n=new f.Point(+r,+t);n.z=+e;n=this._cellCoordsToKey(n),n=this._cells[n];return n&&n.active?n.retain=!0:(n&&n.loaded&&(n.retain=!0),i<e&&this._retainParent(r,t,e,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new f.Point(r,o);a.z=n+1;a=this._cellCoordsToKey(a),a=this._cells[a];a&&a.active?a.retain=!0:(a&&a.loaded&&(a.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){t=t&&(t.pinch||t.flyTo);t||this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_setView:function(t,e,n,i){e=Math.round(e);i||(this._cellZoom=e,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==e&&this._update(t),n||this._pruneCells(),this._noPrune=!!n)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._cellSize=this.getCellSize(),i=this._cellZoom,r=this._map.getPixelWorldBounds(this._cellZoom);r&&(this._globalCellRange=this._pxBoundsToCellRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(t){t&&(t.pinch||t.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(n,this._cellZoom),t=e.project(t,this._cellZoom).floor(),n=e.getSize().divideBy(2*n);return new f.Bounds(t.subtract(n),t.add(n))},_update:function(t){var e=this._map;if(e){var n=Math.round(e.getZoom());void 0===t&&(t=e.getCenter());var i,e=this._getCelldPixelBounds(t),r=this._pxBoundsToCellRange(e),o=r.getCenter(),a=[],e=this.options.keepBuffer,s=new f.Bounds(r.getBottomLeft().subtract([e,-e]),r.getTopRight().add([e,-e]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of cells");for(i in this._cells){var l=this._cells[i].coords;l.z===this._cellZoom&&s.contains(new f.Point(l.x,l.y))||(this._cells[i].current=!1)}if(1<Math.abs(n-this._cellZoom))this._setView(t,n);else{for(var u=r.min.y;u<=r.max.y;u++)for(var c=r.min.x;c<=r.max.x;c++){var h,p=new f.Point(c,u);p.z=this._cellZoom,this._isValidCell(p)&&((h=this._cells[this._cellCoordsToKey(p)])?h.current=!0:a.push(p))}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length)for(this._loading||(this._loading=!0),c=0;c<a.length;c++){var d=this._cellCoordsToKey(a[c]),d=this._keyToCellCoords(d);this._activeCells[d]?this._reuseCell(a[c]):this._createCell(a[c])}}}},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalCellRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;t=this._cellCoordsToBounds(t);return Object(f.toLatLngBounds)(this.options.bounds).overlaps(t)},_keyToBounds:function(t){return this._cellCoordsToBounds(this._keyToCellCoords(t))},_cellCoordsToNwSe:function(t){var e=this._map,n=this.getCellSize(),i=t.scaleBy(n),n=i.add(n);return[e.unproject(i,t.z),e.unproject(n,t.z)]},_cellCoordsToBounds:function(t){t=this._cellCoordsToNwSe(t),t=new f.LatLngBounds(t[0],t[1]);return this.options.noWrap||(t=this._map.wrapLatLngBounds(t)),t},_cellCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToCellCoords:function(t){var e=t.split(":"),t=new f.Point(+e[0],+e[1]);return t.z=+e[2],t},_removeCell:function(t){var e,n,i=this._cells[t];i&&(n=this._keyToCellCoords(t),e=this._wrapCoords(n),n=this._cellCoordsToBounds(this._wrapCoords(n)),i.current=!1,delete this._cells[t],this._activeCells[t]=i,this.cellLeave(n,e,t),this.fire("cellleave",{key:t,coords:e,bounds:n}))},_reuseCell:function(t){var e=this._cellCoordsToKey(t);this._cells[e]=this._activeCells[e],this._cells[e].current=!0;var n=this._wrapCoords(t),t=this._cellCoordsToBounds(this._wrapCoords(t));this.cellEnter(t,n,e),this.fire("cellenter",{key:e,coords:n,bounds:t})},_createCell:function(t){var e=this._cellCoordsToKey(t),n=this._wrapCoords(t),i=this._cellCoordsToBounds(this._wrapCoords(t));this.createCell(i,n,e),this.fire("cellcreate",{key:e,coords:n,bounds:i}),this._cells[e]={coords:t,current:!0},f.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(t,e,n){t=this._cellCoordsToKey(t);(n=this._cells[t])&&(n.loaded=+new Date,n.active=!0)},_getCellPos:function(t){return t.scaleBy(this.getCellSize())},_wrapCoords:function(t){var e=new f.Point(this._wrapX?f.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?f.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToCellRange:function(t){var e=this.getCellSize();return new f.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))}});function Pt(t){this.values=[].concat(t||[])}Pt.prototype.query=function(t){t=this.getIndex(t);return this.values[t]},Pt.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,n,i=0,r=this.values.length-1;i<=r;)if(e=(i+r)/2|0,+(n=this.values[Math.round(e)]).value<+t)i=1+e;else{if(!(+n.value>+t))return e;r=e-1}return Math.abs(~r)},Pt.prototype.between=function(t,e){var n=this.getIndex(t),i=this.getIndex(e);if(0===n&&0===i)return[];for(;this.values[n-1]&&this.values[n-1].value===t;)n--;for(;this.values[i+1]&&this.values[i+1].value===e;)i++;return this.values[i]&&this.values[i].value===e&&this.values[i+1]&&i++,this.values.slice(n,i)},Pt.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},Pt.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},Pt.prototype.sort=function(){return this.values.sort(function(t,e){return+e.value-+t.value}).reverse(),this.dirty=!1,this};var Ct=Pt,Mt=St.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(t){if(St.prototype.initialize.call(this,t),t=O(t),t=f.Util.setOptions(this,t),this.service=mt(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,n=0;n<this.options.fields.length;n++)this.options.fields[n].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&y("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Ct,this._endTimeIndex=new Ct):this.options.timeField&&(this._timeIndex=new Ct),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(i){return B(i),this.service.metadata(function(t,e){var n;t||(n=e.supportedQueryFormats,(t=!1)!==this.service.options.isModern&&!this.options.fetchAllFeatures||(t=!0),!t&&n&&-1!==n.indexOf("geoJSON")&&(this.service.options.isModern=!0),e.objectIdField&&(this.service.options.idAttribute=e.objectIdField),!this.options.attribution&&i.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,i.attributionControl.addAttribution(this.getAttribution())))},this),i.on("zoomend",this._handleZoomChange,this),St.prototype.onAdd.call(this,i)},onRemove:function(t){return t.off("zoomend",this._handleZoomChange,this),St.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(i,r,o,a){this._activeRequests++,a=a||0;var s=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:i},!0),this._buildQuery(i,a).run(function(t,e,n){n&&n.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===s&&(!t&&e&&e.features.length&&f.Util.requestAnimFrame(f.Util.bind(function(){this._addFeatures(e.features,r),this._postProcessFeatures(i)},this)),t||!e||e.features.length||this._postProcessFeatures(i),t&&this._postProcessFeatures(i),o&&o.call(this,t,e),n&&(n.exceededTransferLimit||n.properties&&n.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(i,r,o,a+e.features.length))},this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){var n;e&&(n=this._cacheKey(e),this._cache[n]=this._cache[n]||[]);for(var i=t.length-1;0<=i;i--){var r=t[i].id;-1===this._currentSnapshot.indexOf(r)&&this._currentSnapshot.push(r),void 0!==n&&-1===this._cache[n].indexOf(r)&&this._cache[n].push(r)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t,e){t=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(e))&&(t=t.offset(e)),t.params.resultType="tile",this.options.requestParams&&f.Util.extend(t.params,this.options.requestParams),this.options.simplifyFactor&&t.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&t.between(this.options.from,this.options.to),t},setWhere:function(i,r,o){this.options.where=i&&i.length?i:"1=1";for(var t,a=[],s=[],l=0,u=null,e=f.Util.bind(function(t,e){if(t&&(u=t),e)for(var n=e.features.length-1;0<=n;n--)s.push(e.features[n].id);--l<=0&&this._visibleZoom()&&i===this.options.where&&(this._currentSnapshot=s,f.Util.requestAnimFrame(f.Util.bind(function(){this.removeLayers(a),this.addLayers(s),r&&r.call(o,u)},this)))},this),n=this._currentSnapshot.length-1;0<=n;n--)a.push(this._currentSnapshot[n]);for(t in this._cache={},this._cells){l++;var c=this._keyToCellCoords(t),h=this._cellCoordsToBounds(c);this._requestFeatures(h,c,e)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,n,i,r){var o=this.options.from,a=this.options.to,s=0,l=null,t=f.Util.bind(function(t){t&&(l=t),this._filterExistingFeatures(o,a,e,n),s--,i&&s<=0&&i.call(r,l)},this);if(this.options.from=e,this.options.to=n,this._filterExistingFeatures(o,a,e,n),"server"===this.options.timeFilterMode)for(var u in this._cells){s++;var c=this._keyToCellCoords(u),h=this._cellCoordsToBounds(c);this._requestFeatures(h,c,t)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(t,e,n,i){var r=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,o=this._getFeaturesInTimeRange(n,i);if(o.indexOf)for(var a=0;a<o.length;a++){var s=r.indexOf(o[a]);0<=s&&r.splice(s,1)}f.Util.requestAnimFrame(f.Util.bind(function(){this.removeLayers(r),this.addLayers(o)},this))},_getFeaturesInTimeRange:function(t,e){var n=[];if(this.options.timeField.start&&this.options.timeField.end)var i=this._startTimeIndex.between(t,e),r=this._endTimeIndex.between(t,e),o=i.concat(r);else{if(!this._timeIndex)return y("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];o=this._timeIndex.between(t,e)}for(var a=o.length-1;0<=a;a--)n.push(o[a].id);return n},_buildTimeIndexes:function(t){var e;if(this.options.timeField.start&&this.options.timeField.end){for(var n=[],i=[],r=t.length-1;0<=r;r--)e=t[r],n.push({id:e.id,value:new Date(e.properties[this.options.timeField.start])}),i.push({id:e.id,value:new Date(e.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(n),this._endTimeIndex.bulkAdd(i)}else{var o=[];for(r=t.length-1;0<=r;r--)e=t[r],o.push({id:e.id,value:new Date(e.properties[this.options.timeField])});this._timeIndex.bulkAdd(o)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),n=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var i=+t.properties[this.options.timeField];return e<=i&&i<=n}if(this.options.timeField.start&&this.options.timeField.end){i=+t.properties[this.options.timeField.start],t=+t.properties[this.options.timeField.end];return e<=i&&i<=n||e<=t&&t<=n||i<=e&&n<=t}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._cells){var e=this._cells[t].coords,e=this._cacheKey(e);this._cache[e]&&this.addLayers(this._cache[e])}else this.removeLayers(this._currentSnapshot)},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(n){this._metadata?n(void 0,this._metadata):this.metadata(f.Util.bind(function(t,e){this._metadata=e,n(t,this._metadata)},this))},addFeature:function(t,e,n){this.addFeatures(t,e,n)},addFeatures:function(e,o,a){this._getMetadata(f.Util.bind(function(t,i){var r;t?o&&o.call(this,t,null):(r=e.features||[e],this.service.addFeatures(e,f.Util.bind(function(t,e){if(!t){for(var n=r.length-1;0<=n;n--)r[n].properties[i.objectIdField]=(1<r.length?e[n]:e).objectId,r[n].id=(1<r.length?e[n]:e).objectId;this._addFeatures(r)}o&&o.call(a,t,e)},this)))},this))},updateFeature:function(t,e,n){this.updateFeatures(t,e,n)},updateFeatures:function(t,i,r){var o=t.features||[t];this.service.updateFeatures(t,function(t,e){if(!t){for(var n=o.length-1;0<=n;n--)this.removeLayers([o[n].id],!0);this._addFeatures(o)}i&&i.call(r,t,e)},this)},deleteFeature:function(t,e,n){this.deleteFeatures(t,e,n)},deleteFeatures:function(t,r,o){return this.service.deleteFeatures(t,function(t,e){var n=e.length?e:[e];if(!t&&0<n.length)for(var i=n.length-1;0<=i;i--)this.removeLayers([n[i].objectId],!0);r&&r.call(o,t,e)},this)}}),Lt=Mt.extend({options:{cacheLayers:!0},initialize:function(t){Mt.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return Mt.prototype.onRemove.call(this,t)},createNewLayer:function(t){t=f.GeoJSON.geometryToLayer(t,this.options);return t&&(t.defaultOptions=t.options),t},_updateLayer:function(t,e){var n=[],i=this.options.coordsToLatLng||f.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":n=f.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(n);break;case"LineString":n=f.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,i),t.setLatLngs(n);break;case"MultiLineString":case"Polygon":n=f.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,i),t.setLatLngs(n);break;case"MultiPolygon":n=f.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,i),t.setLatLngs(n)}},createLayers:function(t){for(var e=t.length-1;0<=e;e--){var n=t[e],i=this._layers[n.id];!this._visibleZoom()||!i||this._map.hasLayer(i)||this.options.timeField&&!this._featureWithinTimeRange(n)||(this._map.addLayer(i),this.fire("addfeature",{feature:i.feature},!0)),i&&0<this.options.simplifyFactor&&(i.setLatLngs||i.setLatLng)&&this._updateLayer(i,n),i||((i=this.createNewLayer(n))?(i.feature=n,i.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(i.feature,i),this._layers[i.feature.id]=i,this.setFeatureStyle(i.feature.id,this.options.style),this.fire("createfeature",{feature:i.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(n))&&this._map.addLayer(i)):y("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;0<=e;e--){var n=this._layers[t[e]];!n||this.options.timeField&&!this._featureWithinTimeRange(n.feature)||this._map.addLayer(n)}},removeLayers:function(t,e){for(var n=t.length-1;0<=n;n--){var i=t[n],r=this._layers[i];r&&(this.fire("removefeature",{feature:r.feature,permanent:e},!0),this._map.removeLayer(r)),r&&e&&delete this._layers[i]}},cellEnter:function(t,n){this._visibleZoom()&&!this._zooming&&this._map&&f.Util.requestAnimFrame(f.Util.bind(function(){var t=this._cacheKey(n),e=this._cellCoordsToKey(n),t=this._cache[t];this._activeCells[e]&&t&&this.addLayers(t)},this))},cellLeave:function(t,s){this._zooming||f.Util.requestAnimFrame(f.Util.bind(function(){if(this._map){var t=this._cacheKey(s),e=this._cellCoordsToKey(s),n=this._cache[t],i=this._map.getBounds();if(!this._activeCells[e]&&n){for(var r=!0,o=0;o<n.length;o++){var a=this._layers[n[o]];a&&a.getBounds&&i.intersects(a.getBounds())&&(r=!1)}r&&this.removeLayers(n,!this.options.cacheLayers),!this.options.cacheLayers&&r&&(delete this._cache[t],delete this._cells[e],delete this._activeCells[e])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(t){this.resetFeatureStyle(t.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(t){var e=this._layers[t],n=this._originalStyle||f.Path.prototype.options;return e&&(f.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,n)),this},setFeatureStyle:function(t,e){t=this._layers[t];return"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var n,i=this._map.getBounds();for(n in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[n].feature.id)&&("function"==typeof this._layers[n].getLatLng&&i.contains(this._layers[n].getLatLng())||"function"==typeof this._layers[n].getBounds&&i.intersects(this._layers[n].getBounds()))&&t.call(e,this._layers[n])}return this},eachFeature:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature(function(t){t.bringToBack&&t.bringToBack()})},bringToFront:function(){this.eachFeature(function(t){t.bringToFront&&t.bringToFront()})},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e,n=this._layers[t],t=n.feature;n&&n.setIcon&&this.options.pointToLayer&&this.options.pointToLayer&&(e=this.options.pointToLayer(t,Object(f.latLng)(t.geometry.coordinates[1],t.geometry.coordinates[0])).options.icon,n.setIcon(e)),n&&n.setStyle&&this.options.pointToLayer&&(e=this.options.pointToLayer(t,Object(f.latLng)(t.geometry.coordinates[1],t.geometry.coordinates[0])).options,this.setFeatureStyle(t.id,e)),n&&n.setStyle&&this.options.style&&this.resetStyle(t.id)}});function It(t){return new Lt(t)}}],r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=26).default;function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,i});